window.__require=function e(t,i,n){function s(c,a){if(!i[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var h="function"==typeof __require&&__require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+c+"'")}}var l=i[c]={exports:{}};t[c][0].call(l.exports,function(e){return s(t[c][1][e]||e)},l,l.exports,e,t,i,n)}return i[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<n.length;c++)s(n[c]);return s}({1:[function(e,t,i){(function(e){(function(n){var s="object"==typeof i&&i,o="object"==typeof t&&t&&t.exports==s&&t,c="object"==typeof e&&e;c.global!==c&&c.window!==c||(n=c);var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var r=function(e){throw new a(e)},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,d={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&r("The string to be encoded contains characters outside of the Latin1 range.");for(var t,i,n,s,o=e.length%3,c="",a=-1,l=e.length-o;++a<l;)t=e.charCodeAt(a)<<16,i=e.charCodeAt(++a)<<8,n=e.charCodeAt(++a),c+=h.charAt((s=t+i+n)>>18&63)+h.charAt(s>>12&63)+h.charAt(s>>6&63)+h.charAt(63&s);return 2==o?(t=e.charCodeAt(a)<<8,i=e.charCodeAt(++a),c+=h.charAt((s=t+i)>>10)+h.charAt(s>>4&63)+h.charAt(s<<2&63)+"="):1==o&&(s=e.charCodeAt(a),c+=h.charAt(s>>2)+h.charAt(s<<4&63)+"=="),c},decode:function(e){var t=(e=String(e).replace(l,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&r("Invalid character: the string to be decoded is not correctly encoded.");for(var i,n,s=0,o="",c=-1;++c<t;)n=h.indexOf(e.charAt(c)),i=s%4?64*i+n:n,s++%4&&(o+=String.fromCharCode(255&i>>(-2*s&6)));return o},version:"0.1.0"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return d});else if(s&&!s.nodeType)if(o)o.exports=d;else for(var _ in d)d.hasOwnProperty(_)&&(s[_]=d[_]);else n.base64=d})(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return function(){var t=e,i=t.lib.BlockCipher,n=t.algo,s=[],o=[],c=[],a=[],r=[],h=[],l=[],d=[],_=[],f=[];(function(){for(var e=[],t=0;256>t;t++)e[t]=128>t?t<<1:283^t<<1;var i=0,n=0;for(t=0;256>t;t++){var p=n^n<<1^n<<2^n<<3^n<<4;p=p>>>8^255&p^99,s[i]=p,o[p]=i;var u=e[i],m=e[u],g=e[m],v=257*e[p]^16843008*p;c[i]=v<<24|v>>>8,a[i]=v<<16|v>>>16,r[i]=v<<8|v>>>24,h[i]=v;v=16843009*g^65537*m^257*u^16843008*i;l[p]=v<<24|v>>>8,d[p]=v<<16|v>>>16,_[p]=v<<8|v>>>24,f[p]=v,i?(i=u^e[e[e[g^u]]],n^=e[e[n]]):i=n=1}})();var p=[0,1,2,4,8,16,32,64,128,27,54],u=n.AES=i.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes/4,n=4*((this._nRounds=i+6)+1),o=this._keySchedule=[],c=0;n>c;c++)if(i>c)o[c]=t[c];else{var a=o[c-1];c%i?i>6&&4==c%i&&(a=s[a>>>24]<<24|s[255&a>>>16]<<16|s[255&a>>>8]<<8|s[255&a]):(a=s[(a=a<<8|a>>>24)>>>24]<<24|s[255&a>>>16]<<16|s[255&a>>>8]<<8|s[255&a],a^=p[0|c/i]<<24),o[c]=o[c-i]^a}for(var r=this._invKeySchedule=[],h=0;n>h;h++){c=n-h;if(h%4)a=o[c];else a=o[c-4];r[h]=4>h||4>=c?a:l[s[a>>>24]]^d[s[255&a>>>16]]^_[s[255&a>>>8]]^f[s[255&a]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,c,a,r,h,s)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,l,d,_,f,o);i=e[t+1];e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,s,o,c,a){for(var r=this._nRounds,h=e[t]^i[0],l=e[t+1]^i[1],d=e[t+2]^i[2],_=e[t+3]^i[3],f=4,p=1;r>p;p++){var u=n[h>>>24]^s[255&l>>>16]^o[255&d>>>8]^c[255&_]^i[f++],m=n[l>>>24]^s[255&d>>>16]^o[255&_>>>8]^c[255&h]^i[f++],g=n[d>>>24]^s[255&_>>>16]^o[255&h>>>8]^c[255&l]^i[f++],v=n[_>>>24]^s[255&h>>>16]^o[255&l>>>8]^c[255&d]^i[f++];h=u,l=m,d=g,_=v}u=(a[h>>>24]<<24|a[255&l>>>16]<<16|a[255&d>>>8]<<8|a[255&_])^i[f++],m=(a[l>>>24]<<24|a[255&d>>>16]<<16|a[255&_>>>8]<<8|a[255&h])^i[f++],g=(a[d>>>24]<<24|a[255&_>>>16]<<16|a[255&h>>>8]<<8|a[255&l])^i[f++],v=(a[_>>>24]<<24|a[255&h>>>16]<<16|a[255&l>>>8]<<8|a[255&d])^i[f++];e[t]=u,e[t+1]=m,e[t+2]=g,e[t+3]=v},keySize:8});t.AES=i._createHelper(u)}(),e.AES})},{"./cipher-core":3,"./core":4,"./enc-base64":5,"./evpkdf":7,"./md5":12}],3:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core")):"function"==typeof define&&define.amd?define(["./core"],s):s(n.CryptoJS)})(this,function(e){e.lib.Cipher||function(t){var i=e,n=i.lib,s=n.Base,o=n.WordArray,c=n.BufferedBlockAlgorithm,a=i.enc;a.Utf8;var r=a.Base64,h=i.algo.EvpKDF,l=n.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:g}return function(t){return{encrypt:function(i,n,s){return e(n).encrypt(t,i,n,s)},decrypt:function(i,n,s){return e(n).decrypt(t,i,n,s)}}}}()});n.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=i.mode={},_=n.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=d.CBC=function(){function e(e,i,n){var s=this._iv;if(s){var o=s;this._iv=t}else o=this._prevBlock;for(var c=0;n>c;c++)e[i+c]^=o[c]}var i=_.extend();return i.Encryptor=i.extend({processBlock:function(t,i){var n=this._cipher,s=n.blockSize;e.call(this,t,i,s),n.encryptBlock(t,i),this._prevBlock=t.slice(i,i+s)}}),i.Decryptor=i.extend({processBlock:function(t,i){var n=this._cipher,s=n.blockSize,o=t.slice(i,i+s);n.decryptBlock(t,i),e.call(this,t,i,s),this._prevBlock=o}}),i}(),p=(i.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=i-e.sigBytes%i,s=n<<24|n<<16|n<<8|n,c=[],a=0;n>a;a+=4)c.push(s);var r=o.create(c,n);e.concat(r)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:f,padding:p}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=i.createEncryptor;else{n=i.createDecryptor;this._minBufferSize=1}this._mode=n.call(i,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4});var u=n.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),m=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var n=o.create([1398893684,1701076831]).concat(i).concat(t);else n=t;return n.toString(r)},parse:function(e){var t=r.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var n=o.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return u.create({ciphertext:t,salt:n})}},g=n.SerializableCipher=s.extend({cfg:s.extend({format:m}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var s=e.createEncryptor(i,n),o=s.finalize(t),c=s.cfg;return u.create({ciphertext:o,key:i,iv:c.iv,algorithm:e,mode:c.mode,padding:c.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(i.kdf={}).OpenSSL={execute:function(e,t,i,n){n||(n=o.random(8));var s=h.create({keySize:t+i}).compute(e,n),c=o.create(s.words.slice(t),4*i);return s.sigBytes=4*t,u.create({key:s,iv:c,salt:n})}},b=n.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:v}),encrypt:function(e,t,i,n){var s=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize);n.iv=s.iv;var o=g.encrypt.call(this,e,t,s.key,n);return o.mixIn(s),o},decrypt:function(e,t,i,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var s=n.kdf.execute(i,e.keySize,e.ivSize,t.salt);return n.iv=s.iv,g.decrypt.call(this,e,t,s.key,n)}})}()})},{"./core":4}],4:[function(e,t,i){(function(e,n){"object"==typeof i?t.exports=i=n():"function"==typeof define&&define.amd?define([],n):e.CryptoJS=n()})(this,function(){var e=e||function(e,t){var i={},n=i.lib={},s=n.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var i=new e;return t&&i.mixIn(t),i.hasOwnProperty("init")||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=n.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,s=e.sigBytes;if(this.clamp(),n%4)for(var o=0;s>o;o++){var c=255&i[o>>>2]>>>24-o%4*8;t[n+o>>>2]|=c<<24-(n+o)%4*8}else if(i.length>65535)for(o=0;s>o;o+=4)t[n+o>>>2]=i[o>>>2];else t.push.apply(t,i);return this.sigBytes+=s,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;t>n;n+=4)i.push(0|4294967296*e.random());return new o.init(i,t)}}),c=i.enc={},a=c.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],s=0;i>s;s++){var o=255&t[s>>>2]>>>24-s%4*8;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(i,t/2)}},r=c.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],s=0;i>s;s++){var o=255&t[s>>>2]>>>24-s%4*8;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(i,t)}},h=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(r.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return r.parse(unescape(encodeURIComponent(e)))}},l=n.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,s=i.sigBytes,c=this.blockSize,a=s/(4*c),r=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*c,h=e.min(4*r,s);if(r){for(var l=0;r>l;l+=c)this._doProcessBlock(n,l);var d=n.splice(0,r);i.sigBytes-=h}return new o.init(d,h)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=l.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new d.HMAC.init(e,i).finalize(t)}}});var d=i.algo={};return i}(Math);return e})},{}],5:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core")):"function"==typeof define&&define.amd?define(["./core"],s):s(n.CryptoJS)})(this,function(e){return function(){var t=e,i=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp();for(var s=[],o=0;i>o;o+=3)for(var c=(255&t[o>>>2]>>>24-o%4*8)<<16|(255&t[o+1>>>2]>>>24-(o+1)%4*8)<<8|255&t[o+2>>>2]>>>24-(o+2)%4*8,a=0;4>a&&i>o+.75*a;a++)s.push(n.charAt(63&c>>>6*(3-a)));var r=n.charAt(64);if(r)for(;s.length%4;)s.push(r);return s.join("")},parse:function(e){var t=e.length,n=this._map,s=n.charAt(64);if(s){var o=e.indexOf(s);-1!=o&&(t=o)}for(var c=[],a=0,r=0;t>r;r++)if(r%4){var h=n.indexOf(e.charAt(r-1))<<r%4*2,l=n.indexOf(e.charAt(r))>>>6-r%4*2;c[a>>>2]|=(h|l)<<24-a%4*8,a++}return i.create(c,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})},{"./core":4}],6:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core")):"function"==typeof define&&define.amd?define(["./core"],s):s(n.CryptoJS)})(this,function(e){return function(){function t(e){return 4278255360&e<<8|16711935&e>>>8}var i=e,n=i.lib.WordArray,s=i.enc;s.Utf16=s.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],s=0;i>s;s+=2){var o=65535&t[s>>>2]>>>16-s%4*8;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,i=[],s=0;t>s;s++)i[s>>>1]|=e.charCodeAt(s)<<16-s%2*16;return n.create(i,2*t)}},s.Utf16LE={stringify:function(e){for(var i=e.words,n=e.sigBytes,s=[],o=0;n>o;o+=2){var c=t(65535&i[o>>>2]>>>16-o%4*8);s.push(String.fromCharCode(c))}return s.join("")},parse:function(e){for(var i=e.length,s=[],o=0;i>o;o++)s[o>>>1]|=t(e.charCodeAt(o)<<16-o%2*16);return n.create(s,2*i)}}}(),e.enc.Utf16})},{"./core":4}],7:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],s):s(n.CryptoJS)})(this,function(e){return function(){var t=e,i=t.lib,n=i.Base,s=i.WordArray,o=t.algo,c=o.MD5,a=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=i.hasher.create(),o=s.create(),c=o.words,a=i.keySize,r=i.iterations;a>c.length;){h&&n.update(h);var h=n.update(e).finalize(t);n.reset();for(var l=1;r>l;l++)h=n.finalize(h),n.reset();o.concat(h)}return o.sigBytes=4*a,o}});t.EvpKDF=function(e,t,i){return a.create(i).compute(e,t)}}(),e.EvpKDF})},{"./core":4,"./hmac":9,"./sha1":28}],8:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return function(){var t=e,i=t.lib.CipherParams,n=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var t=n.parse(e);return i.create({ciphertext:t})}}}(),e.format.Hex})},{"./cipher-core":3,"./core":4}],9:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core")):"function"==typeof define&&define.amd?define(["./core"],s):s(n.CryptoJS)})(this,function(e){(function(){var t=e,i=t.lib.Base,n=t.enc.Utf8;t.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var i=e.blockSize,s=4*i;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),c=this._iKey=t.clone(),a=o.words,r=c.words,h=0;i>h;h++)a[h]^=1549556828,r[h]^=909522486;o.sigBytes=c.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})})()})},{"./core":4}],10:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./x64-core"),e("./lib-typedarrays"),e("./enc-utf16"),e("./enc-base64"),e("./md5"),e("./sha1"),e("./sha256"),e("./sha224"),e("./sha512"),e("./sha384"),e("./sha3"),e("./ripemd160"),e("./hmac"),e("./pbkdf2"),e("./evpkdf"),e("./cipher-core"),e("./mode-cfb"),e("./mode-ctr"),e("./mode-ctr-gladman"),e("./mode-ofb"),e("./mode-ecb"),e("./pad-ansix923"),e("./pad-iso10126"),e("./pad-iso97971"),e("./pad-zeropadding"),e("./pad-nopadding"),e("./format-hex"),e("./aes"),e("./tripledes"),e("./rc4"),e("./rabbit"),e("./rabbit-legacy")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],s):s(n.CryptoJS)})(this,function(e){return e})},{"./aes":2,"./cipher-core":3,"./core":4,"./enc-base64":5,"./enc-utf16":6,"./evpkdf":7,"./format-hex":8,"./hmac":9,"./lib-typedarrays":11,"./md5":12,"./mode-cfb":13,"./mode-ctr":15,"./mode-ctr-gladman":14,"./mode-ecb":16,"./mode-ofb":17,"./pad-ansix923":18,"./pad-iso10126":19,"./pad-iso97971":20,"./pad-nopadding":21,"./pad-zeropadding":22,"./pbkdf2":23,"./rabbit":25,"./rabbit-legacy":24,"./rc4":26,"./ripemd160":27,"./sha1":28,"./sha224":29,"./sha256":30,"./sha3":31,"./sha384":32,"./sha512":33,"./tripledes":34,"./x64-core":35}],11:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core")):"function"==typeof define&&define.amd?define(["./core"],s):s(n.CryptoJS)})(this,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,i=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],s=0;t>s;s++)n[s>>>2]|=e[s]<<24-s%4*8;i.call(this,n,t)}else i.apply(this,arguments)}).prototype=t}}(),e.lib.WordArray})},{"./core":4}],12:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core")):"function"==typeof define&&define.amd?define(["./core"],s):s(n.CryptoJS)})(this,function(e){return function(t){function i(e,t,i,n,s,o,c){var a=e+(t&i|~t&n)+s+c;return(a<<o|a>>>32-o)+t}function n(e,t,i,n,s,o,c){var a=e+(t&n|i&~n)+s+c;return(a<<o|a>>>32-o)+t}function s(e,t,i,n,s,o,c){var a=e+(t^i^n)+s+c;return(a<<o|a>>>32-o)+t}function o(e,t,i,n,s,o,c){var a=e+(i^(t|~n))+s+c;return(a<<o|a>>>32-o)+t}var c=e,a=c.lib,r=a.WordArray,h=a.Hasher,l=c.algo,d=[];(function(){for(var e=0;64>e;e++)d[e]=0|4294967296*t.abs(t.sin(e+1))})();var _=l.MD5=h.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var c=0;16>c;c++){var a=t+c,r=e[a];e[a]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var h=this._hash.words,l=e[t+0],_=e[t+1],f=e[t+2],p=e[t+3],u=e[t+4],m=e[t+5],g=e[t+6],v=e[t+7],b=e[t+8],y=e[t+9],E=e[t+10],C=e[t+11],T=e[t+12],S=e[t+13],I=e[t+14],R=e[t+15],w=h[0],A=h[1],M=h[2],N=h[3];A=o(A=o(A=o(A=o(A=s(A=s(A=s(A=s(A=n(A=n(A=n(A=n(A=i(A=i(A=i(A=i(A,M=i(M,N=i(N,w=i(w,A,M,N,l,7,d[0]),A,M,_,12,d[1]),w,A,f,17,d[2]),N,w,p,22,d[3]),M=i(M,N=i(N,w=i(w,A,M,N,u,7,d[4]),A,M,m,12,d[5]),w,A,g,17,d[6]),N,w,v,22,d[7]),M=i(M,N=i(N,w=i(w,A,M,N,b,7,d[8]),A,M,y,12,d[9]),w,A,E,17,d[10]),N,w,C,22,d[11]),M=i(M,N=i(N,w=i(w,A,M,N,T,7,d[12]),A,M,S,12,d[13]),w,A,I,17,d[14]),N,w,R,22,d[15]),M=n(M,N=n(N,w=n(w,A,M,N,_,5,d[16]),A,M,g,9,d[17]),w,A,C,14,d[18]),N,w,l,20,d[19]),M=n(M,N=n(N,w=n(w,A,M,N,m,5,d[20]),A,M,E,9,d[21]),w,A,R,14,d[22]),N,w,u,20,d[23]),M=n(M,N=n(N,w=n(w,A,M,N,y,5,d[24]),A,M,I,9,d[25]),w,A,p,14,d[26]),N,w,b,20,d[27]),M=n(M,N=n(N,w=n(w,A,M,N,S,5,d[28]),A,M,f,9,d[29]),w,A,v,14,d[30]),N,w,T,20,d[31]),M=s(M,N=s(N,w=s(w,A,M,N,m,4,d[32]),A,M,b,11,d[33]),w,A,C,16,d[34]),N,w,I,23,d[35]),M=s(M,N=s(N,w=s(w,A,M,N,_,4,d[36]),A,M,u,11,d[37]),w,A,v,16,d[38]),N,w,E,23,d[39]),M=s(M,N=s(N,w=s(w,A,M,N,S,4,d[40]),A,M,l,11,d[41]),w,A,p,16,d[42]),N,w,g,23,d[43]),M=s(M,N=s(N,w=s(w,A,M,N,y,4,d[44]),A,M,T,11,d[45]),w,A,R,16,d[46]),N,w,f,23,d[47]),M=o(M,N=o(N,w=o(w,A,M,N,l,6,d[48]),A,M,v,10,d[49]),w,A,I,15,d[50]),N,w,m,21,d[51]),M=o(M,N=o(N,w=o(w,A,M,N,T,6,d[52]),A,M,p,10,d[53]),w,A,E,15,d[54]),N,w,_,21,d[55]),M=o(M,N=o(N,w=o(w,A,M,N,b,6,d[56]),A,M,R,10,d[57]),w,A,g,15,d[58]),N,w,S,21,d[59]),M=o(M,N=o(N,w=o(w,A,M,N,u,6,d[60]),A,M,C,10,d[61]),w,A,f,15,d[62]),N,w,y,21,d[63]),h[0]=0|h[0]+w,h[1]=0|h[1]+A,h[2]=0|h[2]+M,h[3]=0|h[3]+N},_doFinalize:function(){var e=this._data,i=e.words,n=8*this._nDataBytes,s=8*e.sigBytes;i[s>>>5]|=128<<24-s%32;var o=t.floor(n/4294967296),c=n;i[15+(s+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(s+64>>>9<<4)]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),e.sigBytes=4*(i.length+1),this._process();for(var a=this._hash,r=a.words,h=0;4>h;h++){var l=r[h];r[h]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=h.clone.call(this);return e._hash=this._hash.clone(),e}});c.MD5=h._createHelper(_),c.HmacMD5=h._createHmacHelper(_)}(Math),e.MD5})},{"./core":4}],13:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return e.mode.CFB=function(){function t(e,t,i,n){var s=this._iv;if(s){var o=s.slice(0);this._iv=void 0}else o=this._prevBlock;n.encryptBlock(o,0);for(var c=0;i>c;c++)e[t+c]^=o[c]}var i=e.lib.BlockCipherMode.extend();return i.Encryptor=i.extend({processBlock:function(e,i){var n=this._cipher,s=n.blockSize;t.call(this,e,i,s,n),this._prevBlock=e.slice(i,i+s)}}),i.Decryptor=i.extend({processBlock:function(e,i){var n=this._cipher,s=n.blockSize,o=e.slice(i,i+s);t.call(this,e,i,s,n),this._prevBlock=o}}),i}(),e.mode.CFB})},{"./cipher-core":3,"./core":4}],14:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return e.mode.CTRGladman=function(){function t(e){if(255==(255&e>>24)){var t=255&e>>16,i=255&e>>8,n=255&e;255===t?(t=0,255===i?(i=0,255===n?n=0:++n):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=n}else e+=1<<24;return e}function i(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var n=e.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(e,t){var n=this._cipher,s=n.blockSize,o=this._iv,c=this._counter;o&&(c=this._counter=o.slice(0),this._iv=void 0),i(c);var a=c.slice(0);n.encryptBlock(a,0);for(var r=0;s>r;r++)e[t+r]^=a[r]}});return n.Decryptor=s,n}(),e.mode.CTRGladman})},{"./cipher-core":3,"./core":4}],15:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),i=t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,s=this._iv,o=this._counter;s&&(o=this._counter=s.slice(0),this._iv=void 0);var c=o.slice(0);i.encryptBlock(c,0),o[n-1]=0|o[n-1]+1;for(var a=0;n>a;a++)e[t+a]^=c[a]}});return t.Decryptor=i,t}(),e.mode.CTR})},{"./cipher-core":3,"./core":4}],16:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.mode.ECB})},{"./cipher-core":3,"./core":4}],17:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),i=t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,s=this._iv,o=this._keystream;s&&(o=this._keystream=s.slice(0),this._iv=void 0),i.encryptBlock(o,0);for(var c=0;n>c;c++)e[t+c]^=o[c]}});return t.Decryptor=i,t}(),e.mode.OFB})},{"./cipher-core":3,"./core":4}],18:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return e.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,n=4*t,s=n-i%n,o=i+s-1;e.clamp(),e.words[o>>>2]|=s<<24-o%4*8,e.sigBytes+=s},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923})},{"./cipher-core":3,"./core":4}],19:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return e.pad.Iso10126={pad:function(t,i){var n=4*i,s=n-t.sigBytes%n;t.concat(e.lib.WordArray.random(s-1)).concat(e.lib.WordArray.create([s<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126})},{"./cipher-core":3,"./core":4}],20:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return e.pad.Iso97971={pad:function(t,i){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,i)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971})},{"./cipher-core":3,"./core":4}],21:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})},{"./cipher-core":3,"./core":4}],22:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return e.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(255&t[i>>>2]>>>24-i%4*8);)i--;e.sigBytes=i+1}},e.pad.ZeroPadding})},{"./cipher-core":3,"./core":4}],23:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],s):s(n.CryptoJS)})(this,function(e){return function(){var t=e,i=t.lib,n=i.Base,s=i.WordArray,o=t.algo,c=o.SHA1,a=o.HMAC,r=o.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=a.create(i.hasher,e),o=s.create(),c=s.create([1]),r=o.words,h=c.words,l=i.keySize,d=i.iterations;l>r.length;){var _=n.update(t).finalize(c);n.reset();for(var f=_.words,p=f.length,u=_,m=1;d>m;m++){u=n.finalize(u),n.reset();for(var g=u.words,v=0;p>v;v++)f[v]^=g[v]}o.concat(_),h[0]++}return o.sigBytes=4*l,o}});t.PBKDF2=function(e,t,i){return r.create(i).compute(e,t)}}(),e.PBKDF2})},{"./core":4,"./hmac":9,"./sha1":28}],24:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return function(){function t(){for(var e=this._X,t=this._C,i=0;8>i;i++)o[i]=t[i];t[0]=0|t[0]+1295307597+this._b,t[1]=0|t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0),t[2]=0|t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0),t[3]=0|t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0),t[4]=0|t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0),t[5]=0|t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0),t[6]=0|t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0),t[7]=0|t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0),this._b=t[7]>>>0<o[7]>>>0?1:0;for(i=0;8>i;i++){var n=e[i]+t[i],s=65535&n,a=n>>>16,r=((s*s>>>17)+s*a>>>15)+a*a,h=(0|(4294901760&n)*n)+(0|(65535&n)*n);c[i]=r^h}e[0]=0|c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16),e[1]=0|c[1]+(c[0]<<8|c[0]>>>24)+c[7],e[2]=0|c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16),e[3]=0|c[3]+(c[2]<<8|c[2]>>>24)+c[1],e[4]=0|c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16),e[5]=0|c[5]+(c[4]<<8|c[4]>>>24)+c[3],e[6]=0|c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16),e[7]=0|c[7]+(c[6]<<8|c[6]>>>24)+c[5]}var i=e,n=i.lib.StreamCipher,s=[],o=[],c=[],a=i.algo.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,i=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;4>o;o++)t.call(this);for(o=0;8>o;o++)s[o]^=n[7&o+4];if(i){var c=i.words,a=c[0],r=c[1],h=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),d=h>>>16|4294901760&l,_=l<<16|65535&h;s[0]^=h,s[1]^=d,s[2]^=l,s[3]^=_,s[4]^=h,s[5]^=d,s[6]^=l,s[7]^=_;for(o=0;4>o;o++)t.call(this)}},_doProcessBlock:function(e,i){var n=this._X;t.call(this),s[0]=n[0]^n[5]>>>16^n[3]<<16,s[1]=n[2]^n[7]>>>16^n[5]<<16,s[2]=n[4]^n[1]>>>16^n[7]<<16,s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;4>o;o++)s[o]=16711935&(s[o]<<8|s[o]>>>24)|4278255360&(s[o]<<24|s[o]>>>8),e[i+o]^=s[o]},blockSize:4,ivSize:2});i.RabbitLegacy=n._createHelper(a)}(),e.RabbitLegacy})},{"./cipher-core":3,"./core":4,"./enc-base64":5,"./evpkdf":7,"./md5":12}],25:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return function(){function t(){for(var e=this._X,t=this._C,i=0;8>i;i++)o[i]=t[i];t[0]=0|t[0]+1295307597+this._b,t[1]=0|t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0),t[2]=0|t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0),t[3]=0|t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0),t[4]=0|t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0),t[5]=0|t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0),t[6]=0|t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0),t[7]=0|t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0),this._b=t[7]>>>0<o[7]>>>0?1:0;for(i=0;8>i;i++){var n=e[i]+t[i],s=65535&n,a=n>>>16,r=((s*s>>>17)+s*a>>>15)+a*a,h=(0|(4294901760&n)*n)+(0|(65535&n)*n);c[i]=r^h}e[0]=0|c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16),e[1]=0|c[1]+(c[0]<<8|c[0]>>>24)+c[7],e[2]=0|c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16),e[3]=0|c[3]+(c[2]<<8|c[2]>>>24)+c[1],e[4]=0|c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16),e[5]=0|c[5]+(c[4]<<8|c[4]>>>24)+c[3],e[6]=0|c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16),e[7]=0|c[7]+(c[6]<<8|c[6]>>>24)+c[5]}var i=e,n=i.lib.StreamCipher,s=[],o=[],c=[],a=i.algo.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,i=this.cfg.iv,n=0;4>n;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var s=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(n=0;4>n;n++)t.call(this);for(n=0;8>n;n++)o[n]^=s[7&n+4];if(i){var c=i.words,a=c[0],r=c[1],h=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),d=h>>>16|4294901760&l,_=l<<16|65535&h;o[0]^=h,o[1]^=d,o[2]^=l,o[3]^=_,o[4]^=h,o[5]^=d,o[6]^=l,o[7]^=_;for(n=0;4>n;n++)t.call(this)}},_doProcessBlock:function(e,i){var n=this._X;t.call(this),s[0]=n[0]^n[5]>>>16^n[3]<<16,s[1]=n[2]^n[7]>>>16^n[5]<<16,s[2]=n[4]^n[1]>>>16^n[7]<<16,s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;4>o;o++)s[o]=16711935&(s[o]<<8|s[o]>>>24)|4278255360&(s[o]<<24|s[o]>>>8),e[i+o]^=s[o]},blockSize:4,ivSize:2});i.Rabbit=n._createHelper(a)}(),e.Rabbit})},{"./cipher-core":3,"./core":4,"./enc-base64":5,"./evpkdf":7,"./md5":12}],26:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return function(){function t(){for(var e=this._S,t=this._i,i=this._j,n=0,s=0;4>s;s++){i=(i+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[i],e[i]=o,n|=e[(e[t]+e[i])%256]<<24-8*s}return this._i=t,this._j=i,n}var i=e,n=i.lib.StreamCipher,s=i.algo,o=s.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,n=this._S=[],s=0;256>s;s++)n[s]=s;s=0;for(var o=0;256>s;s++){var c=s%i,a=255&t[c>>>2]>>>24-c%4*8;o=(o+n[s]+a)%256;var r=n[s];n[s]=n[o],n[o]=r}this._i=this._j=0},_doProcessBlock:function(e,i){e[i]^=t.call(this)},keySize:8,ivSize:0});i.RC4=n._createHelper(o);var c=s.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)t.call(this)}});i.RC4Drop=n._createHelper(c)}(),e.RC4})},{"./cipher-core":3,"./core":4,"./enc-base64":5,"./evpkdf":7,"./md5":12}],27:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core")):"function"==typeof define&&define.amd?define(["./core"],s):s(n.CryptoJS)})(this,function(e){return function(){function t(e,t,i){return e^t^i}function i(e,t,i){return e&t|~e&i}function n(e,t,i){return(e|~t)^i}function s(e,t,i){return e&i|t&~i}function o(e,t,i){return e^(t|~i)}function c(e,t){return e<<t|e>>>32-t}var a=e,r=a.lib,h=r.WordArray,l=r.Hasher,d=a.algo,_=h.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),f=h.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),p=h.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=h.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=h.create([0,1518500249,1859775393,2400959708,2840853838]),g=h.create([1352829926,1548603684,1836072691,2053994217,0]),v=d.RIPEMD160=l.extend({_doReset:function(){this._hash=h.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,a){for(var r=0;16>r;r++){var h=a+r,l=e[h];e[h]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var d,v,b,y,E,C,T,S,I,R,w=this._hash.words,A=m.words,M=g.words,N=_.words,P=f.words,F=p.words,B=u.words;C=d=w[0],T=v=w[1],S=b=w[2],I=y=w[3],R=E=w[4];var L;for(r=0;80>r;r+=1)L=0|d+e[a+N[r]],L+=16>r?t(v,b,y)+A[0]:32>r?i(v,b,y)+A[1]:48>r?n(v,b,y)+A[2]:64>r?s(v,b,y)+A[3]:o(v,b,y)+A[4],L=0|(L=c(L|=0,F[r]))+E,d=E,E=y,y=c(b,10),b=v,v=L,L=0|C+e[a+P[r]],L+=16>r?o(T,S,I)+M[0]:32>r?s(T,S,I)+M[1]:48>r?n(T,S,I)+M[2]:64>r?i(T,S,I)+M[3]:t(T,S,I)+M[4],L=0|(L=c(L|=0,B[r]))+R,C=R,R=I,I=c(S,10),S=T,T=L;L=0|w[1]+b+I,w[1]=0|w[2]+y+R,w[2]=0|w[3]+E+C,w[3]=0|w[4]+d+T,w[4]=0|w[0]+v+S,w[0]=L},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var s=this._hash,o=s.words,c=0;5>c;c++){var a=o[c];o[c]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return s},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}});a.RIPEMD160=l._createHelper(v),a.HmacRIPEMD160=l._createHmacHelper(v)}(Math),e.RIPEMD160})},{"./core":4}],28:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core")):"function"==typeof define&&define.amd?define(["./core"],s):s(n.CryptoJS)})(this,function(e){return function(){var t=e,i=t.lib,n=i.WordArray,s=i.Hasher,o=[],c=t.algo.SHA1=s.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],s=i[1],c=i[2],a=i[3],r=i[4],h=0;80>h;h++){if(16>h)o[h]=0|e[t+h];else{var l=o[h-3]^o[h-8]^o[h-14]^o[h-16];o[h]=l<<1|l>>>31}var d=(n<<5|n>>>27)+r+o[h];d+=20>h?1518500249+(s&c|~s&a):40>h?1859775393+(s^c^a):60>h?(s&c|s&a|c&a)-1894007588:(s^c^a)-899497514,r=a,a=c,c=s<<30|s>>>2,s=n,n=d}i[0]=0|i[0]+n,i[1]=0|i[1]+s,i[2]=0|i[2]+c,i[3]=0|i[3]+a,i[4]=0|i[4]+r},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=s._createHelper(c),t.HmacSHA1=s._createHmacHelper(c)}(),e.SHA1})},{"./core":4}],29:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./sha256")):"function"==typeof define&&define.amd?define(["./core","./sha256"],s):s(n.CryptoJS)})(this,function(e){return function(){var t=e,i=t.lib.WordArray,n=t.algo,s=n.SHA256,o=n.SHA224=s.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=s._createHelper(o),t.HmacSHA224=s._createHmacHelper(o)}(),e.SHA224})},{"./core":4,"./sha256":30}],30:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core")):"function"==typeof define&&define.amd?define(["./core"],s):s(n.CryptoJS)})(this,function(e){return function(t){var i=e,n=i.lib,s=n.WordArray,o=n.Hasher,c=i.algo,a=[],r=[];(function(){function e(e){for(var i=t.sqrt(e),n=2;i>=n;n++)if(!(e%n))return!1;return!0}function i(e){return 0|4294967296*(e-(0|e))}for(var n=2,s=0;64>s;)e(n)&&(8>s&&(a[s]=i(t.pow(n,.5))),r[s]=i(t.pow(n,1/3)),s++),n++})();var h=[],l=c.SHA256=o.extend({_doReset:function(){this._hash=new s.init(a.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],s=i[1],o=i[2],c=i[3],a=i[4],l=i[5],d=i[6],_=i[7],f=0;64>f;f++){if(16>f)h[f]=0|e[t+f];else{var p=h[f-15],u=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=h[f-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;h[f]=u+h[f-7]+g+h[f-16]}var v=n&s^n&o^s&o,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),y=_+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&d)+r[f]+h[f];_=d,d=l,l=a,a=0|c+y,c=o,o=s,s=n,n=0|y+(b+v)}i[0]=0|i[0]+n,i[1]=0|i[1]+s,i[2]=0|i[2]+o,i[3]=0|i[3]+c,i[4]=0|i[4]+a,i[5]=0|i[5]+l,i[6]=0|i[6]+d,i[7]=0|i[7]+_},_doFinalize:function(){var e=this._data,i=e.words,n=8*this._nDataBytes,s=8*e.sigBytes;return i[s>>>5]|=128<<24-s%32,i[14+(s+64>>>9<<4)]=t.floor(n/4294967296),i[15+(s+64>>>9<<4)]=n,e.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});i.SHA256=o._createHelper(l),i.HmacSHA256=o._createHmacHelper(l)}(Math),e.SHA256})},{"./core":4}],31:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],s):s(n.CryptoJS)})(this,function(e){return function(t){var i=e,n=i.lib,s=n.WordArray,o=n.Hasher,c=i.x64.Word,a=i.algo,r=[],h=[],l=[];(function(){for(var e=1,t=0,i=0;24>i;i++){r[e+5*t]=(i+1)*(i+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;5>e;e++)for(t=0;5>t;t++)h[e+5*t]=t+(2*e+3*t)%5*5;for(var s=1,o=0;24>o;o++){for(var a=0,d=0,_=0;7>_;_++){if(1&s){var f=(1<<_)-1;32>f?d^=1<<f:a^=1<<f-32}128&s?s=113^s<<1:s<<=1}l[o]=c.create(a,d)}})();var d=[];(function(){for(var e=0;25>e;e++)d[e]=c.create()})();var _=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;25>t;t++)e[t]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,n=this.blockSize/2,s=0;n>s;s++){var o=e[t+2*s],c=e[t+2*s+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),(A=i[s]).high^=c,A.low^=o}for(var a=0;24>a;a++){for(var _=0;5>_;_++){for(var f=0,p=0,u=0;5>u;u++){f^=(A=i[_+5*u]).high,p^=A.low}var m=d[_];m.high=f,m.low=p}for(_=0;5>_;_++){var g=d[(_+4)%5],v=d[(_+1)%5],b=v.high,y=v.low;for(f=g.high^(b<<1|y>>>31),p=g.low^(y<<1|b>>>31),u=0;5>u;u++){(A=i[_+5*u]).high^=f,A.low^=p}}for(var E=1;25>E;E++){var C=(A=i[E]).high,T=A.low,S=r[E];if(32>S)f=C<<S|T>>>32-S,p=T<<S|C>>>32-S;else f=T<<S-32|C>>>64-S,p=C<<S-32|T>>>64-S;var I=d[h[E]];I.high=f,I.low=p}var R=d[0],w=i[0];R.high=w.high,R.low=w.low;for(_=0;5>_;_++)for(u=0;5>u;u++){var A=i[E=_+5*u],M=d[E],N=d[(_+1)%5+5*u],P=d[(_+2)%5+5*u];A.high=M.high^~N.high&P.high,A.low=M.low^~N.low&P.low}A=i[0];var F=l[a];A.high^=F.high,A.low^=F.low}},_doFinalize:function(){var e=this._data,i=e.words;this._nDataBytes;var n=8*e.sigBytes,o=32*this.blockSize;i[n>>>5]|=1<<24-n%32,i[(t.ceil((n+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*i.length,this._process();for(var c=this._state,a=this.cfg.outputLength/8,r=a/8,h=[],l=0;r>l;l++){var d=c[l],_=d.high,f=d.low;_=16711935&(_<<8|_>>>24)|4278255360&(_<<24|_>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),h.push(f),h.push(_)}return new s.init(h,a)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),i=0;25>i;i++)t[i]=t[i].clone();return e}});i.SHA3=o._createHelper(_),i.HmacSHA3=o._createHmacHelper(_)}(Math),e.SHA3})},{"./core":4,"./x64-core":35}],32:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./x64-core"),e("./sha512")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./sha512"],s):s(n.CryptoJS)})(this,function(e){return function(){var t=e,i=t.x64,n=i.Word,s=i.WordArray,o=t.algo,c=o.SHA512,a=o.SHA384=c.extend({_doReset:function(){this._hash=new s.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=c._createHelper(a),t.HmacSHA384=c._createHmacHelper(a)}(),e.SHA384})},{"./core":4,"./sha512":33,"./x64-core":35}],33:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],s):s(n.CryptoJS)})(this,function(e){return function(){function t(){return o.create.apply(o,arguments)}var i=e,n=i.lib.Hasher,s=i.x64,o=s.Word,c=s.WordArray,a=i.algo,r=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],h=[];(function(){for(var e=0;80>e;e++)h[e]=t()})();var l=a.SHA512=n.extend({_doReset:function(){this._hash=new c.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],s=i[1],o=i[2],c=i[3],a=i[4],l=i[5],d=i[6],_=i[7],f=n.high,p=n.low,u=s.high,m=s.low,g=o.high,v=o.low,b=c.high,y=c.low,E=a.high,C=a.low,T=l.high,S=l.low,I=d.high,R=d.low,w=_.high,A=_.low,M=f,N=p,P=u,F=m,B=g,L=v,k=b,D=y,O=E,V=C,x=T,G=S,U=I,H=R,W=w,K=A,z=0;80>z;z++){var Y=h[z];if(16>z)var q=Y.high=0|e[t+2*z],j=Y.low=0|e[t+2*z+1];else{var X=h[z-15],Q=X.high,J=X.low,Z=(Q>>>1|J<<31)^(Q>>>8|J<<24)^Q>>>7,$=(J>>>1|Q<<31)^(J>>>8|Q<<24)^(J>>>7|Q<<25),ee=h[z-2],te=ee.high,ie=ee.low,ne=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,se=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),oe=h[z-7],ce=oe.high,ae=oe.low,re=h[z-16],he=re.high,le=re.low;q=(q=(q=Z+ce+($>>>0>(j=$+ae)>>>0?1:0))+ne+(se>>>0>(j=j+se)>>>0?1:0))+he+(le>>>0>(j=j+le)>>>0?1:0);Y.high=q,Y.low=j}var de,_e=O&x^~O&U,fe=V&G^~V&H,pe=M&P^M&B^P&B,ue=N&F^N&L^F&L,me=(M>>>28|N<<4)^(M<<30|N>>>2)^(M<<25|N>>>7),ge=(N>>>28|M<<4)^(N<<30|M>>>2)^(N<<25|M>>>7),ve=(O>>>14|V<<18)^(O>>>18|V<<14)^(O<<23|V>>>9),be=(V>>>14|O<<18)^(V>>>18|O<<14)^(V<<23|O>>>9),ye=r[z],Ee=ye.high,Ce=ye.low,Te=W+ve+(K>>>0>(de=K+be)>>>0?1:0),Se=ge+ue;W=U,K=H,U=x,H=G,x=O,G=V,O=0|k+(Te=(Te=(Te=Te+_e+(fe>>>0>(de=de+fe)>>>0?1:0))+Ee+(Ce>>>0>(de=de+Ce)>>>0?1:0))+q+(j>>>0>(de=de+j)>>>0?1:0))+(D>>>0>(V=0|D+de)>>>0?1:0),k=B,D=L,B=P,L=F,P=M,F=N,M=0|Te+(me+pe+(ge>>>0>Se>>>0?1:0))+(de>>>0>(N=0|de+Se)>>>0?1:0)}p=n.low=p+N,n.high=f+M+(N>>>0>p>>>0?1:0),m=s.low=m+F,s.high=u+P+(F>>>0>m>>>0?1:0),v=o.low=v+L,o.high=g+B+(L>>>0>v>>>0?1:0),y=c.low=y+D,c.high=b+k+(D>>>0>y>>>0?1:0),C=a.low=C+V,a.high=E+O+(V>>>0>C>>>0?1:0),S=l.low=S+G,l.high=T+x+(G>>>0>S>>>0?1:0),R=d.low=R+H,d.high=I+U+(H>>>0>R>>>0?1:0),A=_.low=A+K,_.high=w+W+(K>>>0>A>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(n+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});i.SHA512=n._createHelper(l),i.HmacSHA512=n._createHmacHelper(l)}(),e.SHA512})},{"./core":4,"./x64-core":35}],34:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],s):s(n.CryptoJS)})(this,function(e){return function(){function t(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function i(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}var n=e,s=n.lib,o=s.WordArray,c=s.BlockCipher,a=n.algo,r=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],_=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=a.DES=c.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;56>i;i++){var n=r[i]-1;t[i]=1&e[n>>>5]>>>31-n%32}for(var s=this._subKeys=[],o=0;16>o;o++){var c=s[o]=[],a=l[o];for(i=0;24>i;i++)c[0|i/6]|=t[(h[i]-1+a)%28]<<31-i%6,c[4+(0|i/6)]|=t[28+(h[i+24]-1+a)%28]<<31-i%6;c[0]=c[0]<<1|c[0]>>>31;for(i=1;7>i;i++)c[i]=c[i]>>>4*(i-1)+3;c[7]=c[7]<<5|c[7]>>>27}var d=this._invSubKeys=[];for(i=0;16>i;i++)d[i]=s[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,n,s){this._lBlock=e[n],this._rBlock=e[n+1],t.call(this,4,252645135),t.call(this,16,65535),i.call(this,2,858993459),i.call(this,8,16711935),t.call(this,1,1431655765);for(var o=0;16>o;o++){for(var c=s[o],a=this._lBlock,r=this._rBlock,h=0,l=0;8>l;l++)h|=d[l][((r^c[l])&_[l])>>>0];this._lBlock=r,this._rBlock=a^h}var f=this._lBlock;this._lBlock=this._rBlock,this._rBlock=f,t.call(this,1,1431655765),i.call(this,8,16711935),i.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[n]=this._lBlock,e[n+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=c._createHelper(f);var p=a.TripleDES=c.extend({_doReset:function(){var e=this._key.words;this._des1=f.createEncryptor(o.create(e.slice(0,2))),this._des2=f.createEncryptor(o.create(e.slice(2,4))),this._des3=f.createEncryptor(o.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=c._createHelper(p)}(),e.TripleDES})},{"./cipher-core":3,"./core":4,"./enc-base64":5,"./evpkdf":7,"./md5":12}],35:[function(e,t,i){(function(n,s){"object"==typeof i?t.exports=i=s(e("./core")):"function"==typeof define&&define.amd?define(["./core"],s):s(n.CryptoJS)})(this,function(e){(function(t){var i=e,n=i.lib,s=n.Base,o=n.WordArray,c=i.x64={};c.Word=s.extend({init:function(e,t){this.high=e,this.low=t}}),c.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],n=0;t>n;n++){var s=e[n];i.push(s.high),i.push(s.low)}return o.create(i,this.sigBytes)},clone:function(){for(var e=s.clone.call(this),t=e.words=this.words.slice(0),i=t.length,n=0;i>n;n++)t[n]=t[n].clone();return e}})})()})},{"./core":4}],assets_manager:[function(e,t,i){"use strict";cc._RF.push(t,"94711EoiJFHkKHEAETpEHQ5","assets_manager"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.triggerFun=null,this.callback=null,this.curTotal=0,this.curIndex=0}return e.getInstance=function(){return this.instance},e.prototype.loadResToArray=function(t,i){i&&cc.loader.loadRes(t,i,function(n,s){n?cc.error(n.message||n):(e.loadedIndex++,i==cc.TextAsset?e.resMapArray[t]=s.text:e.resMapArray[t]=s,this.triggerFun&&this.triggerFun(this.curTotal,e.loadedIndex-this.curIndex),this.callback&&this.curTotal<=e.loadedIndex-this.curIndex&&this.callback())}.bind(this))},e.prototype.loadRes=function(t,i){i&&(this.triggerFun=i.trigger,this.callback=i.cb,this.curTotal=t.length,this.curIndex=e.loadedIndex);for(var n=0;n<t.length;n++)this.loadResToArray(t[n].url,t[n].type);0==t.length&&(this.triggerFun&&this.triggerFun(this.curTotal,e.loadedIndex-this.curIndex),this.callback&&this.callback())},e.prototype.getRes=function(t){return e.resMapArray[t]},e.prototype.clearCallBack=function(){this.callback=null,this.triggerFun=null,this.curTotal=0,this.curIndex=0},e.instance=new e,e.resMapArray={},e.loadedIndex=0,e}();i._AssetsManager=n,i.AssetsManager=n.getInstance(),cc._RF.pop()},{}],bankrupt_package_counting_down:[function(e,t,i){"use strict";cc._RF.push(t,"e1a3aRF6KpMsZgOcmkrYc6a","bankrupt_package_counting_down"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t,i,n){this.m_updateTime=1,this.m_allTime=10,this.m_frameCallBack=null,this.m_overCallBack=null,this.init(e,t,i,n)}return e.prototype.init=function(e,t,i,n){this.m_updateTime=e||1,this.m_allTime=t||10,this.m_frameCallBack=i||null,this.m_overCallBack=n||null},e.prototype.setUpdateTime=function(e){this.m_updateTime=e},e.prototype.setAllTime=function(e){this.m_allTime=e},e.prototype.setFrameCallBack=function(e){this.m_frameCallBack=e},e.prototype.setOverCallBack=function(e){this.m_overCallBack=e},e.prototype.startCountDownTime=function(){cc.director.getScheduler().schedule(this.updateCountDownTime,this,this.m_updateTime,cc.macro.REPEAT_FOREVER,0,!1)},e.prototype.updateCountDownTime=function(){this.m_allTime-=this.m_updateTime,this.m_frameCallBack&&this.m_frameCallBack(this.m_allTime),this.m_allTime<=0&&(this.stopUpdateCountDownTime(),this.m_overCallBack&&this.m_overCallBack())},e.prototype.stopUpdateCountDownTime=function(){cc.director.getScheduler().unschedule(this.updateCountDownTime,this)},e.prototype.release=function(){this.stopUpdateCountDownTime(),this.m_updateTime=null,this.m_allTime=null,this.m_frameCallBack=null,this.m_overCallBack=null},e}();i.CountDownTimeControl=n,cc._RF.pop()},{}],config_json:[function(e,t,i){"use strict";cc._RF.push(t,"959e6Fi9hZGobs95tr+7Ndb","config_json"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e.server_json={srv_url:"http://47.100.167.67:9010/",srv_url_test:"http://42.157.129.78:9010/",srv_url_online:"http://120.78.65.189:9010/",cdn_url:""},e.config_json={gameId:10063,app_name:"\u6355\u9c7c",externalVersion:"1.1.0",client_default:"main",paychannel_default:"uc",special_default:"0-hall28",main_channel_default:"xmen",sub_channel_default:"bydzz",thirdExitSDKName:"",shellScript:{debug:"games/fish/update/script/update.js",release:"games/fish/update/script/update.js"},ios_config:{wechat_app_id:"wxc03ec93233323f78",wechat_app_secret:"1a1226b875f08f0f6f6e0fe4bfe70de3",umeng_app_key:"58071d2067e58e58a3002482"}},e.project_manifest={version:"1.0",remoteVersionUrl:"http://client.mango.x-men.co/aaaaaaaa/gamecity/update/res/games/fish/fish/version.manifest",remoteManifestUrl:"http://client.mango.x-men.co/aaaaaaaa/gamecity/update/res/games/fish/fish/project.manifest",packageUrl:"http://client.mango.x-men.co/aaaaaaa/gamecity/update/res/",assets:{}},e.update_config_tips="\u4f7f\u7528\u9501\u5b9a\u6280\u80fd\u53ef\u4ee5\u66f4\u5bb9\u6613\u62a2\u5230\u5927\u9c7c\u54e6~\r\nBOSS\u8981\u8dd1\uff1f\u522b\u614c\uff0c\u5feb\u4f7f\u7528\u51b0\u51bb\u6280\u80fd\u5427\uff01\r\n\u636e\u8bf4\u4f53\u79ef\u8d8a\u5927\u7684\u9c7c\u5206\u503c\u8d8a\u9ad8\u54e6\uff01\r\n\u63d0\u5347VIP\u7b49\u7ea7\u53ef\u4ee5\u89e3\u9501\u66f4\u591a\u9177\u70ab\u7684\u70ae\u5854\u54e6~\r\n\u5c3d\u5feb\u63ed\u6653\u795e\u79d8\u5361\u724c\uff0c\u6709\u5927\u5927\u7684\u60ca\u559c\u7b49\u4f60\u54e6~\r\n\u89e3\u9501\u9ad8\u500d\u7387\u6b66\u5668\uff0c\u8865\u507f\u91d1\u6570\u989d\u4e5f\u4f1a\u589e\u52a0\u54e6\uff01\r\n\u795e\u79d8\u5361\u724c\u7684\u5956\u52b1\u5e45\u5ea6\u548c\u4f60\u7684\u70ae\u5854\u7b49\u7ea7\u76f8\u5173\u54e6~\r\n\u6838\u5f39\u548c\u6fc0\u5149\u53ef\u662f\u9006\u5929\u7ea7\u7684\u8d85\u7ea7\u6b66\u5668\u54e6\uff01\r\n\u901a\u8fc7\u62bd\u5956\u3001\u5151\u5956\u548c\u6d3b\u52a8\uff0c\u53ef\u4ee5\u83b7\u5f97\u6fc0\u5149\u6b66\u5668\u54e6\uff01\r\n"}(i.config||(i.config={})),cc._RF.pop()},{}],cpp_fish_game_view_bullet:[function(e,t,i){"use strict";cc._RF.push(t,"16076HpVw5IS7jYPcfTsbEt","cpp_fish_game_view_bullet"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./cpp_fish_game_view"),s=e("./cpp_fish_game_view_utils"),o=function(e){function t(t,i,n,s,o){var c=e.call(this)||this;return c.scheduler=cc.director.getScheduler(),c.addComponent(cc.Sprite),c.addComponent(cc.Animation),c.init(t,i,n,s,o),c}return __extends(t,e),t.prototype.release=function(){this.stopAllActions(),this.scheduler&&this.scheduler.unscheduleAllForTarget(this)},t.prototype.init=function(e,t,i,o,c){this.seatId=e,this.bulletId=t;var a=n.g_config.getWeaponConfig(i);this.bulletSpeed=a.bulletSpeed;var r=n.g_utils.getSeatPosition(this.seatId),h=n.g_utils.getFirePosition(this.seatId),l=cc.Vec2.ZERO,d=(l=null==c?o:c.getPosition(l)).sub(h),_=h.sub(r),f=n.g_utils.getAngle(d,_);f=cc.misc.clampf(f,-98,98),_=_.rotate(s.CC_DEGREES_TO_RADIANS*-f,cc.Vec2.ZERO),e>=3&&(f+=180),this.moveDir=_.normalize();var p=h.add(this.moveDir.mul(100));this.setPosition(p),this.angle=-f,this.beginMovingTick=this.prevCollideTick=this.nextCollideTick=n.g_utils.getTick(),null!=c?this.moveToFish(c):this.moveFreely()},t.prototype.moveToFish=function(e){this.lockFish=e,this.enableCollide=!1;var t=e.getPosition(),i=this.getPosition(),s=cc.v2(n.g_utils.vx2px(i.x),n.g_utils.vy2py(i.y)),o=cc.v2(n.g_utils.vx2px(t.x),n.g_utils.vy2py(t.y)),c=s.sub(o),a=Math.sqrt(c.x*c.x+c.y*c.y)/this.bulletSpeed,r=e.calcNextPosition(a),h=cc.moveTo(a,r),l=cc.callFunc(this.onReachLockPoint,this),d=cc.sequence(h,l);this.runAction(d)},t.prototype.moveFreely=function(){this.lockFish=null,this.enableCollide=!0,this.stopAllActions(),this.scheduler.scheduleUpdate(this,0,!1),this.moveToEdgePoint()},t.prototype.moveToEdgePoint=function(){var e=this.getPosition();this.prevPoint=e,this.nextPoint=n.g_utils.getCollisionEdgePos(e,this.moveDir);var t=cc.v2(n.g_utils.vx2px(e.x),n.g_utils.vy2py(e.y)),i=cc.v2(n.g_utils.vx2px(this.nextPoint.x),n.g_utils.vy2py(this.nextPoint.y)),s=t.sub(i),o=1e3*Math.sqrt(s.x*s.x+s.y*s.y)/this.bulletSpeed;this.prevCollideTick=this.nextCollideTick,this.nextCollideTick+=o},t.prototype.onReachEdgePoint=function(){this.setPosition(this.nextPoint);var e=cc.visibleRect;(Math.abs(this.nextPoint.x)<.01||Math.abs(this.nextPoint.x-e.width)<.01)&&(this.moveDir.x=-this.moveDir.x,this.angle=-this.angle),(Math.abs(this.nextPoint.y)<.01||Math.abs(this.nextPoint.y-e.height)<.01)&&(this.moveDir.y=-this.moveDir.y,this.angle=-180-this.angle)},t.prototype.onReachLockPoint=function(){null!=this.lockFish&&n.g_view.onBulletHitFish(this.seatId,this.bulletId,this.lockFish.fishId)},t.prototype.update=function(e){if(null!=this.lockFish)throw new Error("lockFish is not null");var t=n.g_utils.getTick();if(this.nextCollideTick>t){var i=(t-this.prevCollideTick)/(this.nextCollideTick-this.prevCollideTick),s=this.prevPoint.lerp(this.nextPoint,i);this.setPosition(s)}else this.onReachEdgePoint(),this.moveToEdgePoint()},t.prototype.die=function(){this.enableCollide=!1,this.scheduler.unscheduleUpdate(this),this.stopAllActions(),this.runAction(cc.sequence(cc.delayTime(1),cc.removeSelf()))},t}(cc.Node);i.cppBullet=o,cc._RF.pop()},{"./cpp_fish_game_view":"cpp_fish_game_view","./cpp_fish_game_view_utils":"cpp_fish_game_view_utils"}],cpp_fish_game_view_config:[function(e,t,i){"use strict";cc._RF.push(t,"678aeqvSKxCYIc9ZTDzRWBX","cpp_fish_game_view_config"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("./cpp_fish_game_view"),o=function(){return function(){}}();i.WeaponConfig=o;var c=function(){return function(){}}();i.Path=c;var a=function(){return function(){}}();i.Wave=a;var r=function(){return function(){}}();i.RC=r;var h=function(){return function(){}}();i.Box=h;var l=function(){function e(){this.weaponConfig=[],this.colliders=[],this.paths=[],this.tracks=[],this.loadWeaponConfig(),this.loadPath(),this.loadTrack(),this.loadCollisions()}return e.prototype.getWeaponConfig=function(e){return e<0||e>=this.weaponConfig.length?(cc.log("get weapon config error: "+e),null):this.weaponConfig[e]},e.prototype.getPath=function(e){return this.paths[e]},e.prototype.getTrack=function(e){return this.tracks[e]},e.prototype.getCollisions=function(e){return this.colliders[e]},e.prototype.loadPath=function(){for(var e=n.AssetsManager.getRes("config/path").split("\n").filter(function(e){return!!e}),t=0;t<e.length;t++){var i=e[t].split("|");if(!(i.length<5)){var s={};s.pathId=parseInt(i[0]),s.points=this.str2Vec2Array(i[2]),s.ctrls=this.str2Vec4Array(i[3]),s.speeds=this.str2FloatArray(i[4]),this.paths[s.pathId]=s}}},e.prototype.loadTrack=function(){var e=n.AssetsManager.getRes("config/tracks").json;for(var t in e){var i=e[t],s=n.AssetsManager.getRes("config/"+i).split("\n").filter(function(e){return!!e});this.tracks[i]=[];for(var o=1,c=s.length;o<c;o++){var a=s[o].split("|");if(!(a.length<4)){var r={fishResId:parseInt(a[0]),enterTime:parseInt(a[1]),exitTime:parseFloat(a[2]),pathId:parseInt(a[3])};this.tracks[i].push(r)}}}},e.prototype.loadWeaponConfig=function(){var e=n.AssetsManager.getRes("config/ct_weapon").replace(/[\r\n]/g,"\n").split("\n").filter(function(e){return!!e});if(0!=e.length)for(var t=e[0].split("\t"),i=1;i<e.length;i++){var s=e[i].split("\t");if(s.length==t.length){for(var o={},c=0;c<t.length;c++)o[t[c]]=s[c];var a={weaponId:parseInt(o.weapon_id),bulletSpeed:parseInt(o.bullet_speed)};this.weaponConfig[a.weaponId]=a}}},e.prototype.loadCollisions=function(){for(var e=n.AssetsManager.getRes("config/colliders").split("\n").filter(function(e){return!!e}),t=0;t<e.length;t++){var i=e[t].split("|");if(!(i.length<3)){var o=parseInt(i[0]),c={rcs:[]};c.sz=this.str2Vec2(i[1]);var a=this.str2Vec2(i[2]);c.center=cc.v2(s.g_utils.vx2px(a.x),s.g_utils.vy2py(a.y));for(var r=0,h=0,l=0,d=0,_=3;_<i.length;_++){var f=i[_].split(";");if(!(f.length<2)){var p={};p.maxInnerDistSquared=parseFloat(f[0]),p.rc=this.str2Rect(f[1]),c.rcs.push(p),p.rc.origin.x<r&&(r=p.rc.origin.x),p.rc.origin.x+p.rc.size.width>h&&(h=p.rc.origin.x+p.rc.size.width),p.rc.origin.y<l&&(l=p.rc.origin.y),p.rc.origin.y+p.rc.size.height>d&&(d=p.rc.origin.y+p.rc.size.height)}}c.head=cc.v2(r+a.x,a.y),c.tail=cc.v2(h+a.x,a.y),c.bottom=cc.v2(a.x,l+a.y),c.top=cc.v2(a.x,d+a.y),this.colliders[o]=c}}},e.prototype.str2Vec2=function(e){var t=e.split(","),i=t[0]?parseFloat(t[0]):0,n=t[1]?parseFloat(t[1]):0;return cc.v2(s.g_utils.px2vx(i),s.g_utils.py2vy(n))},e.prototype.str2Vec4=function(e){var t=e.split(","),i=t[0]?parseFloat(t[0]):0,n=t[1]?parseFloat(t[1]):0,o=t[2]?parseFloat(t[2]):0,c=t[3]?parseFloat(t[3]):0;return{x:s.g_utils.px2vx(i),y:s.g_utils.py2vy(n),z:s.g_utils.px2vx(o),w:s.g_utils.py2vy(c)}},e.prototype.str2Rect=function(e){var t=e.split(","),i=t[0]?parseFloat(t[0]):0,n=t[1]?parseFloat(t[1]):0,s=t[2]?parseFloat(t[2]):0,o=t[3]?parseFloat(t[3]):0;return cc.rect(i,n,s,o)},e.prototype.str2Vec2Array=function(e){for(var t=e.split(";"),i=[],n=0;n<t.length;n++)t[n].length&&i.push(this.str2Vec2(t[n]));return i},e.prototype.str2Vec4Array=function(e){for(var t=e.split(";"),i=[],n=0;n<t.length;n++)t[n].length&&i.push(this.str2Vec4(t[n]));return i},e.prototype.str2FloatArray=function(e){for(var t=e.split(";"),i=[],n=0;n<t.length;n++){var s=parseFloat(t[n]);isNaN(s)||i.push(s)}return i},e.prototype.str2IntArray=function(e){for(var t=e.split(","),i=[],n=0;n<t.length;n++){var s=parseInt(t[n]);isNaN(s)||i.push(s)}return i},e}();i.cppConfig=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","./cpp_fish_game_view":"cpp_fish_game_view"}],cpp_fish_game_view_fish:[function(e,t,i){"use strict";cc._RF.push(t,"9d40cz1/GRHP5sGw+46hpWI","cpp_fish_game_view_fish"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../define/fish_consts"),s=e("./cpp_fish_game_view"),o=e("./cpp_fish_game_view_bullet"),c=e("../../fish"),a=function(e){function t(t,i){var n=e.call(this)||this;return n.path=[],n.times=[],n.angles=[],n.xHead=n.xTrail=0,n.scheduler=cc.director.getScheduler(),n.addComponent(cc.Sprite),n.addComponent(cc.Animation),n.init(t,i),n}return __extends(t,e),t.prototype.release=function(){this.stopAllActions(),this.scheduler&&(this.scheduler.unscheduleAllForTarget(this),this.scheduler=null)},t.prototype.init=function(e,t){this.fishResId=e,this.fishId=t,this.isAlive=!0,this.colliders=s.g_config.getCollisions(e);var i=cc.v2(this.colliders.center.x/this.colliders.sz.x,this.colliders.center.y/this.colliders.sz.y);this.setContentSize(cc.size(this.colliders.sz.x,this.colliders.sz.y)),this.setAnchorPoint(i),this.active=!1,this.isInScreen=!1,this.isFrozen=!1,this.beginMovingTick=0,this.lastCollideTick=0},t.prototype.setPath=function(e,t,i,o,a){this.path=[],this.times=[],this.path.push(i[0]),this.times.push(0);for(var r=0,h=[],l=0;l<i.length-1;l++){var d=cc.v2(o[l].z,o[l].w),_=cc.v2(o[l+1].x,o[l+1].y);h=[],h=s.g_utils.getCubicBezierVertices(i[l],d,_,i[l+1],10),this.path=this.path.concat(h.slice(1,h.length));for(var f=a[l],p=0;p<h.length-1;p++){var u=cc.v2(s.g_utils.vx2px(h[p].x),s.g_utils.vy2py(h[p].y)),m=cc.v2(s.g_utils.vx2px(h[p+1].x),s.g_utils.vy2py(h[p+1].y));r+=c.fish.pDistance(u,m)/f,this.times.push(r);var g=m.sub(u),v=s.g_utils.getAngle(g,cc.v2(-1,0));this.angles.push(v)}}this.angles.push(this.angles[this.angles.length-1]);var b=s.g_utils.getServerTimeElapse(t);return this.fishEnterTime=e,this.beginMovingTick=s.g_utils.getTick()+1e3*(e-b),this.calcTransform()?(this.fishResId==n.SpecialFish.DragonTurtle||this.fishResId==n.SpecialFish.ElectricFish||this.fishResId==n.SpecialFish.LanternFish||this.fishResId==n.SpecialFish.DragonBoss?(this.xTrail=this.path[0].x,this.xHead=this.path[0].x+1e-4*(this.path[1].x-this.path[0].x),s.g_utils.getMySeat()<=2&&this.path[1].x>this.path[0].x?this.flipX():s.g_utils.getMySeat()>=3&&(this.flipY(),this.path[1].x>this.path[0].x&&this.flipX())):this.fishResId!=n.SpecialFish.JellyFishBig&&this.fishResId!=n.SpecialFish.JellyFishSmall&&this.fishResId!=n.SpecialFish.CardFish1&&this.fishResId!=n.SpecialFish.CardFish2&&this.fishResId!=n.SpecialFish.BombFish&&(s.g_utils.getMySeat()<=2&&this.path[1].x>this.path[0].x||s.g_utils.getMySeat()>=3&&this.path[1].x<this.path[0].x)&&this.flipY(),b>=e&&(this.active=!0),t>0?this.isFrozen=!0:this.scheduler.scheduleUpdate(this,0,!1),!0):(cc.log("fish set path end: ",this.fishId),!1)},t.prototype.update=function(e){this.isFrozen||s.g_utils.getTick()<this.beginMovingTick||(this.active=!0,this.calcTransform()||s.g_view.onFishExit(this.fishId))},t.prototype.calcTransform=function(){for(var e=.001*(s.g_utils.getTick()-this.beginMovingTick),t=1;t<this.times.length&&this.times[t]<=e;)++t;if(t>=this.times.length)return!1;var i=(e-this.times[t-1])/(this.times[t]-this.times[t-1]),o=this.path[t-1].lerp(this.path[t],i);this.setPosition(o);var c=this.convertToWorldSpaceAR(this.colliders.head),a=this.convertToWorldSpaceAR(this.colliders.tail);if(s.g_utils.checkInScreen(c,a)?this.isInScreen||(this.isInScreen=!0):this.isInScreen&&(this.isInScreen=!1,s.g_view.onFishOutScreen(this.fishId)),this.fishResId==n.SpecialFish.JellyFishBig||this.fishResId==n.SpecialFish.JellyFishSmall||this.fishResId==n.SpecialFish.CardFish1||this.fishResId==n.SpecialFish.CardFish2||this.fishResId==n.SpecialFish.BombFish)return!0;if(this.fishResId==n.SpecialFish.DragonTurtle||this.fishResId==n.SpecialFish.ElectricFish||this.fishResId==n.SpecialFish.LanternFish||this.fishResId==n.SpecialFish.DragonBoss)return(this.xHead<this.xTrail&&this.xHead<o.x||this.xHead>this.xTrail&&this.xHead>o.x)&&(this.flipX(),s.g_view.onFishTurn(this.fishId)),this.xTrail=this.xHead,this.xHead=o.x,!0;var r=this.angles[t]-this.angles[t-1];r>180&&(r-=360),r<-180&&(r+=360);var h=this.angles[t-1]+r*i;return this.angle=-h,!0},t.prototype.flipX=function(){var e=this.getContentSize();for(var t in this.colliders.center.x=e.width-this.colliders.center.x,this.colliders.rcs){var i=this.colliders.rcs[t];i.rc.origin.x=-(i.rc.size.width+i.rc.origin.x)}var n=cc.v2(this.colliders.center.x/e.width,this.colliders.center.y/e.height);this.setAnchorPoint(n)},t.prototype.flipY=function(){var e=this.getContentSize();for(var t in 1208!=this.fishResId&&1119!=this.fishResId&&(this.colliders.center.y=e.height-this.colliders.center.y),this.colliders.rcs){var i=this.colliders.rcs[t];i.rc.origin.y=-(i.rc.size.height+i.rc.origin.y)}var n=cc.v2(this.colliders.center.x/e.width,this.colliders.center.y/e.height);this.setAnchorPoint(n)},t.prototype.freeze=function(e){this.isFrozen||(this.isFrozen=!0,this.scheduler.unscheduleUpdate(this))},t.prototype.unfreeze=function(e,t){if(this.isFrozen){this.isFrozen=!1;var i=s.g_utils.getServerTimeElapse(e);this.beginMovingTick=s.g_utils.getTick()+1e3*(this.fishEnterTime-i),this.fishEnterTime+=t-e,this.scheduler.scheduleUpdate(this,0,!1)}},t.prototype.checkCollision=function(e){if(e instanceof o.cppBullet&&(e=e.getPosition()),!this.isInScreen||!this.isAlive)return!1;var t=this.getPosition(),i=-Math.PI/180*this.angle;for(var n in this.colliders.rcs){var s=this.colliders.rcs[n];if(!(c.fish.distanceSquared(t,e)>s.maxInnerDistSquared)){var a=e.x-t.x,r=e.y-t.y,h=Math.cos(i),l=Math.sin(i),d=a*h-r*l,_=a*l+r*h;if(!(d<s.rc.origin.x||d>s.rc.origin.x+s.rc.size.width||_<s.rc.origin.y||_>s.rc.origin.y+s.rc.size.height))return!0}}return!1},t.prototype.checkInRange=function(e,t){if(this.fishResId>=1301||!this.isInScreen||!this.isAlive)return!1;for(var i in this.colliders.rcs){var n=this.colliders.rcs[i],s=cc.v2(this.colliders.center.add(n.rc.origin)),o=cc.v2(s.x+n.rc.size.width,s.y),a=cc.v2(o.x,o.y+n.rc.size.height),r=cc.v2(s.x,a.y);if(c.fish.distanceSquared(this.convertToWorldSpaceAR(s),e)<t)return!0;if(c.fish.distanceSquared(this.convertToWorldSpaceAR(o),e)<t)return!0;if(c.fish.distanceSquared(this.convertToWorldSpaceAR(a),e)<t)return!0;if(c.fish.distanceSquared(this.convertToWorldSpaceAR(r),e)<t)return!0}return!1},t.prototype.checkLaserIntersect=function(e){if(this.fishResId>=1402||!this.isInScreen||!this.isAlive)return!1;var t=s.g_utils.getTick();if(this.lastCollideTick+1e3>t)return!1;for(var i=e.route,n=e.routeCount,o=this.convertToWorldSpaceAR(this.colliders.head),c=this.convertToWorldSpaceAR(this.colliders.tail),a=this.convertToWorldSpaceAR(this.colliders.bottom),r=this.convertToWorldSpaceAR(this.colliders.top),h=cc.Vec2.ZERO,l=0;l<n-1;++l)if(s.g_utils.getIntersectPoint(o,c,i[l],i[l+1],h)||s.g_utils.getIntersectPoint(a,r,i[l],i[l+1],h))return h=this.convertToNodeSpaceAR(h),s.g_view.onLaserHitFish(e.seatId,this.fishId,h),this.lastCollideTick=t,!0;return!1},t.prototype.chechForChainCatch=function(){return this.fishResId<=1120&&this.isInScreen&&this.isAlive},t.prototype.calcNextPosition=function(e){if(this.isFrozen)return this.getPosition();for(var t=(s.g_utils.getTick()-this.beginMovingTick)/1e3+e,i=1;i<this.times.length&&this.times[i]<=t;)++i;if(i>=this.times.length)return this.path.reverse();var n=(t-this.times[i-1])/(this.times[i]-this.times[i-1]);return this.path[i-1].lerp(this.path[i],n)},t.prototype.die=function(){this.isAlive=!1,this.scheduler.unscheduleUpdate(this),this.runAction(cc.sequence(cc.delayTime(4),cc.removeSelf()))},t}(cc.Node);i.cppFish=a,cc._RF.pop()},{"../../define/fish_consts":"fish_consts","../../fish":"fish","./cpp_fish_game_view":"cpp_fish_game_view","./cpp_fish_game_view_bullet":"cpp_fish_game_view_bullet"}],cpp_fish_game_view_laser:[function(e,t,i){"use strict";cc._RF.push(t,"40789oacAhHk7dELdr0gEeB","cpp_fish_game_view_laser"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./cpp_fish_game_view"),s=e("./cpp_fish_game_view_utils"),o=e("../../fish"),c=function(e){function t(t,i,n,s){var o=e.call(this)||this;return o.path=[],o.times=[],o.dists=[],o.angles=[],o.route=[],o.scheduler=cc.director.getScheduler(),o.init(t,i,n,s),o}return __extends(t,e),t.prototype.init=function(e,t,i,s){this.seatId=e,this.maxLine=i;var o=n.g_config.getWeaponConfig(t);this.laserSpeed=o.bulletSpeed,this.enableCollide=!0,this.caclPath(s),this.caclTimes(),this.caclAngles(),this.routeCount=0,this.line=-1,this.beginMovingTick=n.g_utils.getTick(),this.scheduler.scheduleUpdate(this,0,!1)},t.prototype.caclPath=function(e){var t=n.g_utils.getSeatPosition(this.seatId),i=n.g_utils.getFirePosition(this.seatId),o=e.sub(i),c=i.sub(t),a=n.g_utils.getAngle(o,c);a=cc.misc.clampf(a,-98,98),c=c.rotate(s.CC_DEGREES_TO_RADIANS*-a,cc.Vec2.ZERO),this.seatId>=3&&(a+=180);var r=[];r[0]=c.normalize(),this.path[0]=i;for(var h=1;h<=this.maxLine;h++)if(this.path[h]=n.g_utils.getCollisionEdgePos(this.path[h-1],r[h-1]),h<this.maxLine){r[h]=r[h-1];var l=cc.visibleRect;(Math.abs(this.path[h].x)<.01||Math.abs(this.path[h].x-l.width)<.01)&&(r[h].x=-r[h-1].x),(Math.abs(this.path[h].y)<.01||Math.abs(this.path[h].y-l.height)<.01)&&(r[h].y=-r[h-1].y)}for(h=1;h<=this.maxLine;h++)this.path[h]=this.path[h].add(r[h-1].mul(10));this.path[this.maxLine]=this.path[this.maxLine-1].add(r[this.maxLine-1].mul(1280))},t.prototype.caclTimes=function(){this.times[0]=0;for(var e=1;e<=this.maxLine;e++)this.dists[e-1]=o.fish.pDistance(this.path[e-1],this.path[e]),this.times[e]=this.dists[e-1]/this.laserSpeed+this.times[e-1]},t.prototype.caclAngles=function(){for(var e=n.g_utils.getSeatPosition(this.seatId),t=n.g_utils.getFirePosition(this.seatId).sub(e),i=0;i<this.maxLine;i++)this.angles[i]=n.g_utils.getAngle(this.path[i+1].sub(this.path[i]),t),this.angles[i]+=this.seatId>=3?180:0},t.prototype.getPath=function(e){for(var t=0;t<=this.maxLine;++t)e.push(this.path[t])},t.prototype.getDists=function(e){for(var t=0;t<=this.maxLine;++t)e.push(this.dists[t])},t.prototype.getAngles=function(e){for(var t=0;t<this.maxLine;++t)e.push(this.angles[t])},t.prototype.update=function(e){if(!(this.line>=this.maxLine)){for(var t=(n.g_utils.getTick()-this.beginMovingTick)/1e3,i=0;i<this.maxLine&&this.times[i+1]<=t;)++i;if(i>=this.maxLine)this.line=this.maxLine,this.route[this.maxLine]=this.convertToWorldSpace(this.path[this.maxLine]),this.routeCount=this.maxLine+1;else{if(this.line!=i){if(!this.enableCollide)return void this.scheduler.unscheduleUpdate(this);this.line=i,this.route[this.line]=this.convertToWorldSpace(this.path[this.line]),this.routeCount=this.line+2}var s=(t-this.times[this.line])/(this.times[this.line+1]-this.times[this.line]),o=this.dists[this.line]*s,c=this.path[this.line].lerp(this.path[this.line+1],s);this.route[this.line+1]=this.convertToWorldSpace(c),n.g_view.onLaserUpdate(this.seatId,this.line,o,c.x,c.y)}}},t.prototype.die=function(){this.enableCollide=!1,this.runAction(cc.sequence(cc.delayTime(1.167),cc.removeSelf()))},t}(cc.Node);i.cppLaser=c,cc._RF.pop()},{"../../fish":"fish","./cpp_fish_game_view":"cpp_fish_game_view","./cpp_fish_game_view_utils":"cpp_fish_game_view_utils"}],cpp_fish_game_view_manager:[function(e,t,i){"use strict";cc._RF.push(t,"4839bML72ZCQaIQFKxrMGzX","cpp_fish_game_view_manager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./cpp_fish_game_view"),s=e("../../define/fish_consts"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fishes=[],t.fishHierarchy={},t.bullets=[],t.lasers=[],t.pitons=[],t.locks=[],t}return __extends(t,e),t.prototype.init=function(){cc.director.getScheduler().scheduleUpdate(this,0,!1)},t.prototype.release=function(){for(var e in this.fishes)this.fishes[e].release();for(var e in this.bullets)this.bullets[e].release();delete this.fishes,delete this.fishHierarchy,delete this.bullets,delete this.lasers,delete this.pitons,cc.director.getScheduler().unscheduleUpdate(this)},t.prototype.update=function(e){for(var t in this.bullets){var i=this.bullets[t];if(i.enableCollide){var s=!1;for(var o in this.fishes){if((l=this.fishes[o]).checkCollision(i)){s=!0,n.g_view.onBulletHitFish(i.seatId,i.bulletId,l.fishId);break}}if(!s)for(var c in this.pitons){var a=this.pitons[c];if(a.checkCollision(i)){n.g_view.onBulletHitPiton(i.seatId,i.bulletId,a.pitonId);break}}}}for(var r in this.lasers){var h=this.lasers[r];if(h.enableCollide)for(var o in this.fishes){var l;(l=this.fishes[o]).checkLaserIntersect(h)}}},t.prototype.addBullet=function(e){var t=100*e.seatId+e.bulletId;this.bullets[t]&&(this.bullets[t].die(),delete this.bullets[t]),this.bullets[t]=e},t.prototype.delBullet=function(e){var t=100*e.seatId+e.bulletId;delete this.bullets[t]},t.prototype.bulletDie=function(e,t){if(0==t)for(var i in this.bullets)this.bullets[i].seatId==e&&(this.bullets[i].die(),this.delBullet(this.bullets[i]));else{var n=100*e+t;this.bullets[n]&&(this.bullets[n].die(),this.delBullet(this.bullets[n]))}},t.prototype.getBullet=function(e,t){var i=100*e+t;return this.bullets[i]},t.prototype.getBulletPos=function(e,t){var i=100*e+t;return this.bullets[i]?this.bullets[i].getPosition():cc.Vec2.ZERO},t.prototype.addFish=function(e){this.fishes[e.fishId]=e,this.fishHierarchy[e.fishResId]||(this.fishHierarchy[e.fishResId]=[]),this.fishHierarchy[e.fishResId].push(e)},t.prototype.delFish=function(e){for(var t=0;t<this.fishHierarchy[e.fishResId].length;t++)e==this.fishHierarchy[e.fishResId][t]&&this.fishHierarchy[e.fishResId].splice(t,1);this.checkReleaseLock(this.fishes[e.fishId]),this.fishes[e.fishId]=null,delete this.fishes[e.fishId]},t.prototype.fishDie=function(e){if("number"==typeof e)(i=this.fishes[e])&&(this.delFish(i),i.die());else for(var t=0;t<e.length;t++){var i;(i=this.fishes[e[t]])&&(this.delFish(i),i.die())}},t.prototype.getFish=function(e){return this.fishes[e]},t.prototype.getIceDragon=function(){if(this.fishHierarchy[s.SpecialFish.DragonBoss]&&this.fishHierarchy[s.SpecialFish.DragonBoss].length>0)for(var e=0;e<this.fishHierarchy[s.SpecialFish.DragonBoss].length;e++)if(this.fishHierarchy[s.SpecialFish.DragonBoss][e])return this.fishHierarchy[s.SpecialFish.DragonBoss][e];return null},t.prototype.getFishPos=function(e){return this.fishes[e]?this.fishes[e].getPosition():cc.v2(0,0)},t.prototype.getFishAtPosition=function(e){for(var t in this.fishHierarchy){var i=this.fishHierarchy[t];for(var n in i){var s=i[n];if(s.checkCollision(e))return s.fishId}}return 0},t.prototype.getFishesInRange=function(e,t){var i=[],n=t*t;for(var s in this.fishes){var o=this.fishes[s];o.checkInRange(e,n)&&i.push(o.fishId)}return i},t.prototype.getNormalFishesInRange=function(e,t){var i=t*t,n=[];for(var s in this.fishes){var o=this.fishes[s];o.checkInRange(e,i)&&n.push(o.fishId)}return n},t.prototype.getNearbyFishes=function(e,t){var i=[],n=[];for(var s in this.fishes){var o=this.fishes[s],c=o.getPosition();n[e.distanceSquared(c)]=o.fishId}for(var a in n){if(t--<=0)break;i.push(n[a])}return i},t.prototype.getRandomFishes=function(e,t){for(var i in this.fishes){var n=this.fishes[i];n.fishId!=e&&n.chechForChainCatch()&&(void 0).push(n.fishId)}for(;t-- >0&&(void 0).length>0;);},t.prototype.freeze=function(e){for(var t in this.fishes)this.fishes[t].freeze(e)},t.prototype.unfreeze=function(e,t){for(var i in this.fishes)this.fishes[i].unfreeze(e,t)},t.prototype.addLaser=function(e,t){this.lasers[t.seatId]=t},t.prototype.delLaser=function(e){delete this.lasers[e.seatId]},t.prototype.laserEnd=function(e){var t=this.lasers[e];t&&(this.delLaser(t),t.die())},t.prototype.getLaserPath=function(e,t){this.lasers[e].getPath(t)},t.prototype.getLaserDists=function(e,t){this.lasers[e].getDists(t)},t.prototype.getLaserAngles=function(e,t){this.lasers[e].getAngles(t)},t.prototype.addPiton=function(e){this.pitons[e.pitonId]=e},t.prototype.delPiton=function(e){delete this.pitons[e.pitonId]},t.prototype.getPitonPos=function(e){return e>=0&&e<=this.pitons.length?this.pitons[e].getPosition():cc.v2(0,0)},t.prototype.pitonDie=function(e){var t=this.pitons[e];this.delPiton(t),t.die()},t.prototype.bulletLockFish=function(e,t){},t.prototype.checkReleaseLock=function(e){},t}(cc.Node);i.cppManager=o,cc._RF.pop()},{"../../define/fish_consts":"fish_consts","./cpp_fish_game_view":"cpp_fish_game_view"}],cpp_fish_game_view_piton:[function(e,t,i){"use strict";cc._RF.push(t,"3ab86lsguxINYzx1vMxtGww","cpp_fish_game_view_piton"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./cpp_fish_game_view"),s=e("./cpp_fish_game_view_utils"),o=e("../../fish"),c=function(e){function t(t,i,n){var s=e.call(this)||this;return s.init(t,i,n),s}return __extends(t,e),t.prototype.init=function(e,t,i){this.pitonId=e,this.enableCollide=!0;var c=cc.v2(Math.sin(s.CC_DEGREES_TO_RADIANS*i),Math.cos(s.CC_DEGREES_TO_RADIANS*i)),a=t.add(c.mul(100));this.setPosition(a),this.angle=-i;var r=cc.Vec2.ZERO;this.hitBattery=n.g_utils.getCollisionEdgePosOrBattery(a,c,r);var h=o.fish.pDistance(a,r)/100,l=cc.moveTo(h,r),d=cc.callFunc(this.onReachCollisionPoint,this),_=cc.sequence(l,d);this.runAction(_)},t.prototype.checkCollision=function(e){if(!this.enableCollide)return!1;var t=this.getPosition(),i=e.getPosition();if(o.fish.distanceSquared(t,i)>17e3)return!1;var n=i.x-t.x,c=i.y-t.y,a=-s.CC_DEGREES_TO_RADIANS*this.angle,r=Math.cos(a),h=Math.sin(a),l=n*r-n*h,d=c*h+c*r;return!(l<-20||l>20||d<-150||d>0)},t.prototype.onReachCollisionPoint=function(){n.g_view.onPitonHitBattery(this.hitBattery,this.pitonId)},t.prototype.die=function(){this.enableCollide=!1,this.stopAllActions(),this.runAction(cc.sequence(cc.delayTime(.43),cc.removeSelf()))},t}(cc.Node);i.cppPiton=c,cc._RF.pop()},{"../../fish":"fish","./cpp_fish_game_view":"cpp_fish_game_view","./cpp_fish_game_view_utils":"cpp_fish_game_view_utils"}],cpp_fish_game_view_utils:[function(e,t,i){"use strict";cc._RF.push(t,"21f44tZxFVAM6aj/w+SUNhV","cpp_fish_game_view_utils"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../fish");i.CC_DEGREES_TO_RADIANS=Math.PI/180;var s=1136,o=640,c=function(){function e(){this.cornerPos=[],this.seatPos=[],this.batteryPos=[],this.firePos=[],this.timeDifferences=0,this.serverStartTime=0,this.mySeat=0;var e=cc.visibleRect;this.visibleWidth=e.width,this.visibleHeight=e.height,this.width2design=this.visibleWidth/s,this.design2width=s/this.visibleWidth,this.height2design=this.visibleHeight/o,this.design2height=o/this.visibleHeight,this.minPos=cc.v2(.001,.001),this.maxPos=cc.v2(this.visibleWidth-.001,this.visibleHeight-.001),this.cornerPos[0]=cc.v2(0,0),this.cornerPos[1]=cc.v2(this.visibleWidth,0),this.cornerPos[2]=cc.v2(this.visibleWidth,this.visibleHeight),this.cornerPos[3]=cc.v2(0,this.visibleHeight),this.seatPos[0]=cc.v2(3*this.visibleWidth/10,0),this.seatPos[1]=cc.v2(7*this.visibleWidth/10,0),this.seatPos[2]=cc.v2(7*this.visibleWidth/10,this.visibleHeight),this.seatPos[3]=cc.v2(3*this.visibleWidth/10,this.visibleHeight),this.batteryPos[0]=cc.v2(3*this.visibleWidth/10,26),this.batteryPos[1]=cc.v2(7*this.visibleWidth/10,26),this.batteryPos[2]=cc.v2(7*this.visibleWidth/10,this.visibleHeight-26),this.batteryPos[3]=cc.v2(3*this.visibleWidth/10,this.visibleHeight-26),this.firePos[0]=cc.v2(3*this.visibleWidth/10,40),this.firePos[1]=cc.v2(7*this.visibleWidth/10,40),this.firePos[2]=cc.v2(7*this.visibleWidth/10,this.visibleHeight-40),this.firePos[3]=cc.v2(3*this.visibleWidth/10,this.visibleHeight-40)}return e.prototype.setServerTime=function(e,t){this.timeDifferences=e-this.getTick(),t>0&&(this.serverStartTime=t)},e.prototype.getServerNowTime=function(){return this.getTick()+this.timeDifferences},e.prototype.getServerStartTime=function(){return this.serverStartTime},e.prototype.getServerTimeElapse=function(e){return void 0===e&&(e=0),e>0?e-.001*this.serverStartTime:.001*(this.getTick()+this.timeDifferences-this.serverStartTime)},e.prototype.setMySeat=function(e){this.mySeat=e},e.prototype.getMySeat=function(){return this.mySeat},e.prototype.getTick=function(){return Date.now()},e.prototype.vx2px=function(e){return e*this.design2width},e.prototype.vy2py=function(e){return e*this.design2height},e.prototype.px2vx=function(e){return e*this.width2design},e.prototype.py2vy=function(e){return e*this.height2design},e.prototype.getSeatPosition=function(e){if(!(e>=1&&e<=4))throw new Error("Seat is invalid.");return this.seatPos[e-1]},e.prototype.getBatteryPosition=function(e){if(!(e>=1&&e<=4))throw new Error("Seat is invalid.");return this.batteryPos[e-1]},e.prototype.getFirePosition=function(e){if(!(e>=1&&e<=4))throw new Error("Seat is invalid.");return this.firePos[e-1]},e.prototype.checkInScreen=function(e,t){return e.x>0&&e.x<this.visibleWidth&&e.y>0&&e.y<this.visibleHeight||t.x>0&&t.x<this.visibleWidth&&t.y>0&&t.y<this.visibleHeight},e.prototype.getAngle=function(e,t){return Math.atan2(e.cross(t),e.dot(t))*(180/Math.PI)},e.prototype.getIntersectPoint=function(e,t,i,n,s){if(e.x==t.x&&e.y==t.y||i.x==n.x&&i.y==n.y)return!1;var o=(n.y-i.y)*(t.x-e.x)-(n.x-i.x)*(t.y-e.y);if(0==o)return!1;var c=((e.y-i.y)*(n.x-i.x)-(e.x-i.x)*(n.y-i.y))/o,a=((e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y))/o;return!(c<0||c>1||a<0||a>1)&&(s&&(s.x=e.x+c*(t.x-e.x),s.y=e.y+c*(t.y-e.y)),!0)},e.prototype.getIntersectPointA=function(e,t,i,s,o){var c=t.sub(e).normalize(),a=cc.v2(c.y,-c.x).mul(s),r=i.add(a),h=i.sub(a),l=cc.Vec2.ZERO;if(!this.getIntersectPoint(e,t,r,h,l))return!1;var d=Math.sqrt(s*s-n.fish.distanceSquared(i,l));if(o){var _=l.sub(c.mul(d));o.x=_.x,o.y=_.y}return!0},e.prototype.getCollisionEdgePos=function(e,t){var i=e;i.clampf(this.minPos,this.maxPos);var n=e.add(t.mul(4e6)),s=cc.Vec2.ZERO;return this.getIntersectPoint(i,n,this.cornerPos[0],this.cornerPos[1],s)||this.getIntersectPoint(i,n,this.cornerPos[2],this.cornerPos[3],s)||this.getIntersectPoint(i,n,this.cornerPos[0],this.cornerPos[3],s)||this.getIntersectPoint(i,n,this.cornerPos[1],this.cornerPos[2],s),s.clampf(this.minPos,this.maxPos),s},e.prototype.getCollisionEdgePosOrBattery=function(e,t,i){for(var n=e.add(t.mul(4e6)),s=1;s<=4;++s){var o=this.batteryPos[s-1];if(this.getIntersectPointA(e,n,o,90,i))return s}var c=this.getCollisionEdgePos(e,t);return i&&(i.x=c.x,i.y=c.y),0},e.prototype.getCubicBezierVertices=function(e,t,i,n,s){for(var o=0,c=[],a=0;a<s;a++){var r=Math.pow(1-o,3)*e.x+3*Math.pow(1-o,2)*o*t.x+3*(1-o)*o*o*i.x+o*o*o*n.x,h=Math.pow(1-o,3)*e.y+3*Math.pow(1-o,2)*o*t.y+3*(1-o)*o*o*i.y+o*o*o*n.y;c.push(cc.v2(r,h)),o+=1/s}return c.push(cc.v2(n.x,n.y)),c},e}();i.cppUtils=c,cc._RF.pop()},{"../../fish":"fish"}],cpp_fish_game_view:[function(e,t,i){"use strict";cc._RF.push(t,"ea036E5XWBKUZdYcdrElolI","cpp_fish_game_view"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./cpp_fish_game_view_fish"),s=e("./cpp_fish_game_view_utils"),o=e("./cpp_fish_game_view_config"),c=e("./cpp_fish_game_view_manager"),a=e("./cpp_fish_game_view_bullet"),r=e("./cpp_fish_game_view_piton"),h=e("./cpp_fish_game_view_laser");i.g_config=null,i.g_utils=null,i.g_manager=null,i.g_view=null;var l=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){i.g_utils=new s.cppUtils,i.g_config=new o.cppConfig,i.g_manager=new c.cppManager,i.g_view=this,this.name="View",i.g_manager.init(),this.fishLayer=new cc.Node,this.addChild(this.fishLayer),this.effectLayer=new cc.Node,this.addChild(this.effectLayer),this.bulletLayer=new cc.Node,this.addChild(this.bulletLayer),this.fishLayer.name="fishLayer",this.effectLayer.name="effectLayer",this.bulletLayer.name="bulletLayer"},t.prototype.release=function(){cc.log("************************************* cpp_fish_game_view"),i.g_manager.release()},t.prototype.setServerTime=function(e,t){i.g_utils.setServerTime(e,t)},t.prototype.setMySeat=function(e){i.g_utils.setMySeat(e)},t.prototype.getEffectLayer=function(){return this.effectLayer},t.prototype.playerFire=function(e,t,n,s,o){if(void 0===o&&(o=0),!(e>=1&&e<=4))throw new Error("Seat is invalid.");var c=null;if(o>0&&!(c=i.g_manager.getFish(o)))return null;var r=new a.cppBullet(e,t,n,s,c);return this.bulletLayer.addChild(r),i.g_manager.addBullet(r),null!=c&&i.g_manager.bulletLockFish(r,c),r},t.prototype.getBulletPos=function(e,t){return i.g_manager.getBulletPos(e,t)},t.prototype.bulletDie=function(e,t){return i.g_manager.bulletDie(e,t)},t.prototype.fishEnter=function(e,t,s,o,c){var a=i.g_config.getPath(s),r=new n.cppFish(e,t);return r.setPath(o,c,a.points,a.ctrls,a.speeds)?(this.fishLayer.addChild(r,e),i.g_manager.addFish(r),r):null},t.prototype.getFishPos=function(e){return i.g_manager.getFishPos(e)},t.prototype.fishDie=function(e){i.g_manager.fishDie(e)},t.prototype.getFishAtPosition=function(e){return i.g_manager.getFishAtPosition(e)},t.prototype.getFishesInRange=function(e,t){return i.g_manager.getFishesInRange(e,t)},t.prototype.getNormalFishesInRange=function(e,t){return i.g_manager.getNormalFishesInRange(e,t)},t.prototype.getNearbyFishes=function(e,t){return i.g_manager.getNearbyFishes(e,t)},t.prototype.getRandomFishes=function(e,t){return i.g_manager.getRandomFishes(e,t)},t.prototype.freeze=function(e){e>0&&i.g_manager.freeze(e)},t.prototype.unfreeze=function(e,t){i.g_manager.unfreeze(e,t)},t.prototype.laserBegin=function(e,t,n,s){var o=new h.cppLaser(e,t,n,s);return this.bulletLayer.addChild(o),i.g_manager.addLaser(e,o),o},t.prototype.laserEnd=function(e){i.g_manager.laserEnd(e)},t.prototype.getLaserPath=function(e){var t=[];return i.g_manager.getLaserPath(e,t),t},t.prototype.getLaserDists=function(e){var t=[];return i.g_manager.getLaserDists(e,t),t},t.prototype.getLaserAngles=function(e){var t=[];return i.g_manager.getLaserAngles(e,t),t},t.prototype.castIcePiton=function(e,t){var n=i.g_manager.getIceDragon();if(null==n)return null;var s=n.getPosition(),o=new r.cppPiton(e,s,t);return this.bulletLayer.addChild(o),i.g_manager.addPiton(o),o},t.prototype.getPitonPos=function(e){return i.g_manager.getPitonPos(e)},t.prototype.pitonDie=function(e){i.g_manager.pitonDie(e)},t}(cc.Node);i.cppView=l,cc._RF.pop()},{"./cpp_fish_game_view_bullet":"cpp_fish_game_view_bullet","./cpp_fish_game_view_config":"cpp_fish_game_view_config","./cpp_fish_game_view_fish":"cpp_fish_game_view_fish","./cpp_fish_game_view_laser":"cpp_fish_game_view_laser","./cpp_fish_game_view_manager":"cpp_fish_game_view_manager","./cpp_fish_game_view_piton":"cpp_fish_game_view_piton","./cpp_fish_game_view_utils":"cpp_fish_game_view_utils"}],fish_act_get_torpedo:[function(e,t,i){"use strict";cc._RF.push(t,"418edeUJMpA45x/bxULcOMk","fish_act_get_torpedo"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene_login"),c=e("../../logic/fish_tcp"),a=e("../../scene/fish_scene"),r=e("../../define/fish_event_types"),h=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.fntFire1=null,t.node_pool=null,t.node_vip=null,t.vipFnt=null,t.btnReceive=null,t.lab_receive=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/fish_avtivity_tordepo")),this.node.addChild(this.csbNode),this.node_pool=cc.find("archor/node_pool",this.csbNode),this.node_vip=cc.find("archor/node_vip",this.csbNode),this.fntFire1=cc.find("archor/node_fireworks/fntFire1",this.csbNode),this.vipFnt=cc.find("archor/node_vip/vipFnt",this.csbNode),this.btnReceive=cc.find("archor/btnReceive",this.csbNode),this.lab_receive=cc.find("archor/lab_receive",this.csbNode),cc.find("archor/btnClose",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this);var e=n.AssetsManager.getRes("img/atlas/common"),t=s.model.activity.newYearData;this.fntFire1.getComponent(cc.Label).string=t.can_get_bfirecracker,t.isReceived&&(this.btnReceive.getComponent(cc.Button).enableAutoGrayEffect=!1,this.btnReceive.getComponent(cc.Button).enabled=!1,this.lab_receive.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_common_received"),this.lab_receive.setScale(1.2)),s.ME.vipLevel>0?(this.node_pool.active=!1,this.node_vip.active=!0,this.vipFnt.getComponent(cc.Label).string=s.ME.vipLevel.toString()):(this.node_vip.active=!1,this.node_pool.active=!0),a.evtCenter.on(r.evts.EVT_GET_FIRE_RESULT,this.onEventBeatResult,this)},t.prototype.onDestroy=function(){a.evtCenter.off(r.evts.EVT_GET_FIRE_RESULT,this.onEventBeatResult,this)},t.prototype.onBtnRecevie=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),cc.log("onBtnFire"),this.sendGetFireworks()},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.node.removeFromParent(!0),this.destroy()},t.prototype.sendGetFireworks=function(){if(s.model.dailytask.isLobby){var e={cmd:"game",params:{gameId:28,userId:s.ME.userId,action:"getFirecracker",clientId:o.AccountInfo.clientId}};c.tcp.send(e)}else{var t={cmd:"table_call2",params:{gameId:28,userId:s.ME.userId,action:"getFirecracker",clientId:o.AccountInfo.clientId,roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId}};c.tcp.send(t)}},t.prototype.onEventBeatResult=function(){var e=n.AssetsManager.getRes("img/atlas/common");this.btnReceive.getComponent(cc.Button).enableAutoGrayEffect=!1,this.btnReceive.getComponent(cc.Button).enabled=!1,this.lab_receive.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_common_received"),this.lab_receive.setScale(1.2)},t}(cc.Component);i.AtvGetTorpedo=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_activity_beat_shark_tip:[function(e,t,i){"use strict";cc._RF.push(t,"b8a7bvmFJ9Oa70bedN4BU4w","fish_activity_beat_shark_tip"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i,s,o){this.csbNode=null,this.groupOK=null,this.groupCancel=null,this.txt=null,this.lab_tips=null,this.item_num=null,this.mark=null,this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/beat_shark_tip")),this.node.addChild(this.csbNode),this.show(e,t,i,s,o)},t.prototype.onLoad=function(){s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnCancel(null)},t.prototype.onBtnOK=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this._callback(),this._hide()},t.prototype.onBtnCancel=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.groupCancel.active||this._callback(),this._hide()},t.prototype.onBtnMark=function(e){this.mark.active=c.model.activity.beatBeastUseDiamondTip,c.model.activity.beatBeastUseDiamondTip=!c.model.activity.beatBeastUseDiamondTip},t.prototype.show=function(e,t,i,n,s){void 0!==t&&"function"==typeof t&&(n=i,i=t,t=1),this.item_num.string=e.toString(),this.lab_tips.string=60==e||600===e?"\u9c7c\u96f7\u6570\u91cf\u4e0d\u8db3\uff0c\u662f\u5426\u4f7f\u7528\u94bb\u77f3\u4ee3\u66ff?":e<40?"\u5c0f\u70ae\u7af9\u6570\u91cf\u4e0d\u8db3\uff0c\u662f\u5426\u4f7f\u7528\u94bb\u77f3\u4ee3\u66ff?":"\u5927\u70ae\u7af9\u6570\u91cf\u4e0d\u8db3\uff0c\u662f\u5426\u4f7f\u7528\u94bb\u77f3\u4ee3\u66ff?",this.callback=i||null,this.target=n||null,this.position=s||null},t.prototype._hide=function(){this.node.removeFromParent(),this.destroy()},t.prototype._callback=function(){this.callback&&this.target&&(this.callback.call(this.target),this.callback=null,this.target=null,this.position=null)},t}(cc.Component);i.BeatSharkTip=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_activity_cell:[function(e,t,i){"use strict";cc._RF.push(t,"afe8f9Liw1Hj7q3VmAxY8Y3","fish_activity_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../../xmen_interface"),r=function(e){function t(){var t=e.call(this)||this;return t.enableTouch=!0,t.btnCell=null,t.notice=null,t.btn_arr=null,t.btn_label=null,t.completed=null,t.cell_width=230,t.cell_height=88,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/activity_cell")),t.btnCell=cc.find("cell/btnCell",t.csbNode),t.btn_arr=cc.find("cell/btn_arr",t.csbNode),t.btn_label=cc.find("cell/btn_label",t.csbNode),t.completed=cc.find("cell/completed",t.csbNode),t.notice=cc.find("cell/notice",t.csbNode),t.btnCell.on(cc.Node.EventType.TOUCH_END,t.onBtnCell,t),t.csbNode.setPosition(cc.v2(.5*t.cell_width,.5*t.cell_height)),t.btnCell.getComponent(cc.Button).enabled=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode),this.btnCell.getComponent(cc.Button).enabled=this.enableTouch,s.evtCenter.on(o.evts.EVT_ACTIVITY_CELL,this.onEventCellClicked,this),s.evtCenter.on(o.evts.EVT_GET_FIRST_REWARD,this.onEventUpdateView,this)},t.prototype.setCellData=function(e,t){var i=n.AssetsManager.getRes("img/atlas/common"),s=n.AssetsManager.getRes("img/atlas/activity"),o=n.AssetsManager.getRes("img/atlas/scale9_8888");this.tag=t,0==this.tag?(this.updateNotice(this.tag),this.enableTouch=!1,this.btnCell.targetOff(this),this.btn_arr.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_huodong_qidai"),this.btn_label.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_huodong_12"),this.btnCell.getComponent(cc.Button).normalSprite=o.getSpriteFrame("fish_activity_qieye3")):(this.updateNotice(this.tag),this.enableTouch=!0,this.btn_arr.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_activity_cellicon_"+this.tag),this.btn_label.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_active_cell_"+this.tag),this.btnCell.getComponent(cc.Button).normalSprite=o.getSpriteFrame("fish_activity_qieye")),c.model.activity.curCell==this.tag&&(this.btnCell.getComponent(cc.Button).normalSprite=o.getSpriteFrame("fish_activity_qieye2"),this.btn_arr.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_activity_cellicon1_"+this.tag),this.btn_label.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_activecell_"+this.tag),this.notice.active=!1),3==this.tag&&c.model.guide.isGetFirstChargeReward?this.completed.active=!0:this.completed.active=!1},t.prototype.onDestroy=function(){this.btnCell.getComponent(cc.Button).enabled=!1,s.evtCenter.off(o.evts.EVT_ACTIVITY_CELL,this.onEventCellClicked,this),s.evtCenter.off(o.evts.EVT_GET_FIRST_REWARD,this.onEventUpdateView,this)},t.prototype.onBtnCell=function(e){var t=n.AssetsManager.getRes("img/atlas/activity"),i=n.AssetsManager.getRes("img/atlas/scale9_8888");cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),c.model.activity.curCell==this.tag||c.model.activity.doubleDan||(c.model.activity.curCell=this.tag,this.btnCell.getComponent(cc.Button).normalSprite=i.getSpriteFrame("fish_activity_qieye2"),this.btn_label.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_activecell_"+this.tag),this.btn_arr.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_activity_cellicon1_"+this.tag),this.notice.active=!1,s.evtCenter.emit(o.evts.EVT_ACTIVITY_CELL,this.tag))},t.prototype.onEventCellClicked=function(e){var t=n.AssetsManager.getRes("img/atlas/activity"),i=n.AssetsManager.getRes("img/atlas/scale9_8888");0!=this.tag&&e!=this.tag&&(this.btnCell.getComponent(cc.Button).normalSprite=i.getSpriteFrame("fish_activity_qieye"),this.btn_label.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_activecell_"+this.tag),this.btn_arr.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_activity_cellicon_"+this.tag),this.updateNotice(e))},t.prototype.updateNotice=function(e){var t=c.model.notice.noticeTip;if(1==this.tag){this.notice.active=t.inviteFriend;var i=a.xmen.SystemInfo.getConfig().main_channel_default;t=c.model.notice.noticeTip;("ditui"==i||"cpa"==i||"xmen"==i||"midanji"==i||"360"==i||"maimaicy"==i||"official"==i||"weile"==i&&cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.OS_WINDOWS)&&(this.notice.active=t.dailyInvite)}else 3==this.tag?this.notice.active=t.actFirstRecharge:4==this.tag?this.notice.active=t.actDailyTk:6==this.tag?this.notice.active=t.actGup:9==this.tag?this.notice.active=t.act_Charge:12==this.tag?this.notice.active=t.act_charge_crystal:this.notice.active=!1},t.prototype.onEventUpdateView=function(){3==this.tag&&(this.completed.active=!0)},t}(cc.Component);i.ActivityCell=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_activity_real_name:[function(e,t,i){"use strict";cc._RF.push(t,"59f01h8g4BOZoH2At3cMoaN","fish_activity_real_name"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../fish"),r=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.archor=null,t._editBoxName=null,t._editBoxID=null,t.input_name=null,t.input_ID=null,t.btnReceive=null,t.btn_label=null,t.node_before=null,t.after_realname=null,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/fish_activity_real_name")),t.archor=cc.find("archor",t.csbNode),t.node_before=cc.find("archor/node_before",t.csbNode),t.input_name=cc.find("archor/node_before/input_name",t.csbNode),t.input_ID=cc.find("archor/node_before/input_ID",t.csbNode),t.btnReceive=cc.find("archor/node_before/btnReceive",t.csbNode),t.btn_label=cc.find("archor/node_before/btn_label",t.csbNode),t.after_realname=cc.find("archor/after_realname",t.csbNode),t}return __extends(t,e),t.prototype.onLoad=function(){if(this.node.addChild(this.csbNode),s.model.activity.ReadBoolFromLocalStorage("activity_real_name"))return this.node_before.active=!1,void(this.after_realname.active=!0);var e=a.fish.createScale9Sprite("img/atlas/scale9_8888","fish_vip_3",cc.rect(19,19,10,10));e.setContentSize(280,36),e.setAnchorPoint(cc.v2(.5,.5)),this.input_name.addChild(e),this._editBoxName=this.input_name.getComponent(cc.EditBox),this._editBoxName.fontColor=cc.color(0,0,0),this._editBoxName.fontSize=24,this._editBoxName.placeholder="\u8bf7\u8f93\u5165\u59d3\u540d",this._editBoxName.returnType=cc.EditBox.KeyboardReturnType.DONE;var t=a.fish.createScale9Sprite("img/atlas/scale9_8888","fish_vip_3",cc.rect(19,19,10,10));t.setContentSize(280,36),t.setAnchorPoint(cc.v2(.5,.5)),this.input_ID.addChild(t),this._editBoxID=this.input_ID.getComponent(cc.EditBox),this._editBoxID.fontColor=cc.color(0,0,0),this._editBoxID.fontSize=24,this._editBoxID.placeholder="\u8bf7\u8f93\u5165\u8bc1\u4ef6ID",this._editBoxID.returnType=cc.EditBox.KeyboardReturnType.DONE},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_GET_ARTIFACT_REWARD,this.onEventUpdateView,this)},t.prototype.onEventUpdateView=function(){var e=n.AssetsManager.getRes("img/atlas/scale9_8888"),t=n.AssetsManager.getRes("img/atlas/common");this.btnReceive.getComponent(cc.Button).enabled=!1,this.btnReceive.getComponent(cc.Button).normalSprite=e.getSpriteFrame("fish_button_disabled"),this.btn_label.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_common_received")},t.prototype.onBtnReceive=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=/[\u4e00-\u9fa5]{2,4}|\w{2,20}/,i=/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/;i.test(this._editBoxID.string)?t.test(this._editBoxName.string)?(t.test(this._editBoxName.string)||i.test(this._editBoxID.string))&&(cc.sys.localStorage.setItem("activity_real_name","true"),this.node_before.active=!1,this.after_realname.active=!0):o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u59d3\u540d\u8f93\u5165\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01"):o.evtCenter.emit(c.evts.EVT_MSG_BOX,"ID\u8f93\u5165\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01")},t}(cc.Component);i.RealNameActivity=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_activity_shark_beat:[function(e,t,i){"use strict";cc._RF.push(t,"b850e/mi/dH/I6mv7CnOXyH","fish_activity_shark_beat"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../scene/fish_scene_login"),r=e("../../define/fish_msg_types"),h=e("../../logic/fish_tcp"),l=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.rootBeast=null,t.node_info=null,t.lab_reward=null,t.loadingBar=null,t.label_gress=null,t.title=null,t.btnSmall=null,t.btnBig=null,t.btnType=0,t.useDiamond1=null,t.useDiamond2=null,t.useItem1=null,t.useItem2=null,t.reward_icon=null,t.complete=null,t.back=null,t.rewardNum=[],t.beast_type="small",t.beast=null,t.eatTouchPanel=null,t.csbNode=cc.instantiate(s.AssetsManager.getRes("prefab/beat_shark")),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode),o.evtCenter.on(c.evts.EVT_BEAT_COMPLETED,this.onEventCompleted,this),o.evtCenter.on(c.evts.EVT_UPDATE_NEW_YEAR_DATA,this.onEventUpdateData,this),o.evtCenter.on(c.evts.EVT_BEAT_BEAST_ERROR,this.onEventBeatError,this),o.evtCenter.on(c.evts.EVT_GET_FIRE_RESULT,this.updateFireWork,this)},t.prototype.onDestroy=function(){this.beast.onExit(),o.evtCenter.off(c.evts.EVT_BEAT_COMPLETED,this.onEventCompleted,this),o.evtCenter.off(c.evts.EVT_UPDATE_NEW_YEAR_DATA,this.onEventUpdateData,this),o.evtCenter.off(c.evts.EVT_BEAT_BEAST_ERROR,this.onEventBeatError,this),o.evtCenter.off(c.evts.EVT_GET_FIRE_RESULT,this.updateFireWork,this)},t.prototype.onEventCompleted=function(){var e=n.model.activity.newYearData;this.complete.active=!1,this.rootBeast.active=!1,e.is_last_day||(this.back.active=!1),this.btnBig.getComponent(cc.Button).enabled=!1,this.btnSmall.getComponent(cc.Button).enabled=!1,this.btnSmall.getComponent(cc.Button).interactable=!1,this.btnBig.getComponent(cc.Button).interactable=!1},t.prototype.initBeast=function(){this.beast||(this.beast=new d(this),this.beast.onEnter(),this.rootBeast.addChild(this.beast))},t.prototype.onBtnBig=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this.btnType=1;var t=n.model.activity.newYearData,i=parseInt(t.big_firecrackers);n.model.activity.beatBeastUseDiamondTip&&i<10?o.evtCenter.emit(c.evts.EVT_MSG_BEAT_BEAST_TIP,60*(10-i),2,this.sendBeatBeast,this,!1):this.sendBeatBeast()},t.prototype.onBtnSmall=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this.btnType=0;var t=n.model.activity.newYearData;n.model.activity.beatBeastUseDiamondTip&&0==t.big_firecrackers&&o.evtCenter.emit(c.evts.EVT_MSG_BEAT_BEAST_TIP,60,2,this.sendBeatBeast,this,!1)},t.prototype.onEventBeatError=function(){this.eatTouchPanel.active=!1},t.prototype.requestBeatBeasrData=function(){if(n.model.dailytask.isLobby){var e={cmd:r.msgs.CMD_GAME,params:{action:"enterCNYDefend",gameId:28,userId:n.ME.userId,clientId:a.AccountInfo.clientId}};h.tcp.send(e)}else{var t={cmd:r.msgs.CMD_TABLE_CALL_2,params:{gameId:28,userId:n.ME.userId,action:"enterCNYDefend",clientId:a.AccountInfo.clientId,roomId:n.model.table.roomId,tableId:n.model.table.tableId,seatId:n.model.table.seatId}};h.tcp.send(t)}},t.prototype.sendBeatBeast=function(e){e=0==this.btnType?1:10;if(this.eatTouchPanel.active=!0,n.model.dailytask.isLobby){var t={cmd:r.msgs.CMD_GAME,params:{gameId:28,userId:n.ME.userId,action:"hitNian",hitType:"big",hitTimes:e,clientId:a.AccountInfo.clientId}};h.tcp.send(t)}else{var i={cmd:r.msgs.CMD_TABLE_CALL_2,params:{gameId:28,userId:n.ME.userId,action:"hitNian",hitType:"big",hitTimes:e,clientId:a.AccountInfo.clientId,roomId:n.model.table.roomId,tableId:n.model.table.tableId,seatId:n.model.table.seatId}};h.tcp.send(i)}},t.prototype.onBtnFire=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),o.evtCenter.emit(c.evts.EVT_POP_ACT_TORPEDO,this)},t.prototype.onEventUpdateData=function(e){var t=s.AssetsManager.getRes("img/atlas/activity_shark"),i=s.AssetsManager.getRes("img/atlas/common"),o=n.model.activity.newYearData;0==o.big_firecrackers?(this.useDiamond1.active=!0,this.useItem1.active=!1,this.useDiamond2.active=!0,this.useItem2.active=!1):(this.useDiamond1.active=!1,this.useItem1.active=!0,this.useDiamond2.active=!1,this.useItem2.active=!0),this.reward_icon.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_jiguang4"),0!=o.full_hp?(this.label_gress.getComponent(cc.Label).string=o.nian_hp+"/"+o.full_hp,this.loadingBar.getComponent(cc.ProgressBar).progress=o.nian_hp/o.full_hp*100/100):(this.label_gress.getComponent(cc.Label).string=o.nian_hp+"/"+o.full_hp,this.loadingBar.getComponent(cc.ProgressBar).progress=0),0==o.nian_hp&&(this.complete.active=!1,this.lab_reward.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_shark3"),this.label_gress.getComponent(cc.Label).string=o.nian_hp+"/"+o.full_hp,this.loadingBar.getComponent(cc.ProgressBar).progress=0),0==e&&this.initBeast()},t.prototype.updateFireWork=function(){var e=n.model.activity.newYearData;0==e.big_firecrackers?(this.useDiamond1.active=!0,this.useItem1.active=!1):(this.useDiamond1.active=!1,this.useItem1.active=!0),0==e.big_firecrackers?(this.useDiamond2.active=!0,this.useItem2.active=!1):(this.useDiamond2.active=!1,this.useItem2.active=!0)},t}(cc.Component);i.AtvBeatShark=l;var d=function(e){function t(t){var i=e.call(this)||this;return i.spineShark=null,i.csbNode=null,i.rootParent=t,i.rewardData=null,i.fntDamage=null,i}return __extends(t,e),t.prototype.onEnter=function(){this.spineShark=(new cc.Node).addComponent(sp.Skeleton),this.spineShark.premultipliedAlpha=!1,this.spineShark.skeletonData=s.AssetsManager.getRes("spine/shark_movie"),this.addChild(this.spineShark.node),this.csbNode=cc.instantiate(s.AssetsManager.getRes("prefabs/shark_beat_effect")),this.fntDamage=cc.find("fntDamage",this.csbNode),this.addChild(this.csbNode),this.csbNode.active=!1,this.csbNode.y=50,this.showBeastStatus(!0),o.evtCenter.on(c.evts.EVT_RUN_BEAST_ACTION,this.onEventRunBeastAction,this)},t.prototype.showBeastStatus=function(e){var t=n.model.activity.newYearData,i="shark_start";this.spineShark.setToSetupPose(),this.spineShark.clearTracks(),0!=t.nian_hp?(i=t.nian_hp<.3*t.full_hp?"shark_start2":"shark_start",this.spineShark.addAnimation(0,i,!0)):this.spineShark.addAnimation(0,"shark_dead",!0)},t.prototype.onExit=function(){this.rewardData=null,o.evtCenter.off(c.evts.EVT_RUN_BEAST_ACTION,this.onEventRunBeastAction,this)},t.prototype.onEventRunBeastAction=function(e,t){this.showBombFly(),this.rewardData=e,this.fntDamage.getComponent(cc.Label).string="-"+t,this.runShakeAction()},t.prototype.showBombFly=function(e){var t="",i=30;cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/paozhu_da"),!1),0==this.rootParent.btnType?(t="btnSmall",i=30,cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/paozhu_xiao"),!1)):(t="btnBig",i=-30,cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/paozhu_da"),!1));var n=this.rootParent[t].getPosition(),c=o.utils.createSprite("fish_icon_torpedo.png","common");this.rootParent.node_info.addChild(c),c.setPosition(n),c.angle=-i,c.setScale(.3);var a=this.rootParent.rootBeast.getPosition();c.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,a),cc.scaleTo(.3,.8)),cc.callFunc(function(){this.rootParent.onEventUpdateData(),this.showCsbAction()}.bind(this)),cc.removeSelf()))},t.prototype.showCsbAction=function(){var e="";e=0==this.rootParent.btnType?"attacked_1":"attacked_2",this.csbNode.stopAllActions(),this.csbNode.active=!0;var t=this.csbNode.getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.rootParent.eatTouchPanel.active=!1,o.evtCenter.emit(c.evts.EVT_POP_REWARD_PANEL,this.parseRewardData(this.rewardData),"")}.bind(this),this),t.play(e)},t.prototype.isBeatOver=function(){1==n.model.activity.newYearData.isOver&&this.rootParent.onEventCompleted()},t.prototype.parseRewardData=function(e){var t=[],i=null;for(var n in e){var s=e[n],c=s.name;if(null!=c)if("user:chip"==c)i={giftId:101,giftIcon:"fish_101.png",giftNum:s.count},t.push(i);else if("dmd"==c)i={giftId:102,giftIcon:"fish_102.png",giftNum:s.count},t.push(i);else if("user:coupon"==c)i={giftId:103,giftIcon:"fish_103.png",giftNum:s.count},t.push(i);else{var a=parseInt(c.split(":")[1]);a>1e4&&(a-=1e4);var r=o.configTable.item[a];r&&(i={giftId:r.item_id,giftIcon:r.big_icon,giftNum:s.count},t.push(i))}}return t},t.prototype.runShakeAction=function(){this.stopAllActions(),this.spineShark.node.runAction(cc.sequence(cc.delayTime(.3),cc.tintTo(1/30,0,0,0),cc.tintTo(.3,255,255,255))),this.runAction(cc.sequence(cc.delayTime(.3),cc.moveBy(1/30,cc.v2(0,4)),cc.moveBy(1/30,cc.v2(0,-8)),cc.moveBy(1/30,cc.v2(0,8)),cc.moveBy(1/30,cc.v2(0,-8)),cc.moveBy(1/30,cc.v2(0,7)),cc.moveBy(1/30,cc.v2(0,-7)),cc.moveBy(1/30,cc.v2(0,7)),cc.moveBy(1/30,cc.v2(0,-7)),cc.moveBy(1/30,cc.v2(0,6)),cc.moveBy(1/30,cc.v2(0,-6)),cc.moveBy(1/30,cc.v2(0,4))))},t}(cc.Node);i.AtvShark=d,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_activity_shark_drop:[function(e,t,i){"use strict";cc._RF.push(t,"40dacLArkZPAqdDDO8gwJAc","fish_activity_shark_drop"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=function(e){function t(t,i){var s=e.call(this)||this;s.csbNode=null,s.root=t,s.item_icon=null,s.itemId=i,s.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/beat_shark_drop")),s.addChild(s.csbNode),cc.find("archor/btnBeatBeast",s.csbNode).on(cc.Node.EventType.TOUCH_END,s.onBeatBeast,s),cc.find("archor/btnCancel",s.csbNode).on(cc.Node.EventType.TOUCH_END,s.onBtnCancel,s),s.item_icon=cc.find("archor/item_icon",s.csbNode);var c=n.AssetsManager.getRes("img/atlas/common");return s.item_icon.getComponent(cc.Sprite).spriteFrame=c.getSpriteFrame(o.configTable.item[s.itemId].big_icon),s}return __extends(t,e),t.prototype.onBtnCancel=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.root.removeFromParent(),this.root.destroy()},t.prototype.onBeatBeast=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.model.dailytask.isLobby=!1,s.model.activity.requestActivityData(13,!0),this.root.removeDropDox()},t}(cc.Node);i.ActSharkDrop=c,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_activity_shark_main:[function(e,t,i){"use strict";cc._RF.push(t,"c20b05jwKFI66G2F/jCqFtT","fish_activity_shark_main"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("./fish_activity_shark_ranking"),r=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.tabShark=null,t.tabRanking=null,t.fireworkView=null,t.node_firecrakers=null,t.node_tab1=null,t.node_tab3=null,t.lab_tab1=null,t.lab_tab3=null,t.btnTab1=null,t.btnTab3=null,t.arrow_1=null,t.arrow_2=null,t.fntFireworks1=null,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/activity_shark_main")),t.node_firecrakers=cc.find("archor/node_firecrakers",t.csbNode),t.node_tab1=cc.find("archor/node_tab1",t.csbNode),t.node_tab3=cc.find("archor/node_tab3",t.csbNode),t.btnTab1=cc.find("archor/node_tab1/btnTab1",t.csbNode),t.btnTab3=cc.find("archor/node_tab3/btnTab3",t.csbNode),t.lab_tab1=cc.find("archor/node_tab1/lab_tab1",t.csbNode),t.lab_tab3=cc.find("archor/node_tab3/lab_tab3",t.csbNode),t.fntFireworks1=cc.find("archor/node_firecrakers/fntFireworks1",t.csbNode),t.arrow_1=cc.find("archor/node_bg/arrow_1"),t.arrow_2=cc.find("archor/node_bg/arrow_2"),t.btnTab1.on(cc.Node.EventType.TOUCH_END,t.onBtnTab1,t),t.btnTab3.on(cc.Node.EventType.TOUCH_END,t.onBtnTab3,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode),"onlyRank"==s.model.activity.newYearShowType?(this.node_tab1.active=!1,this.node_tab3.setPosition(this.node_tab1.getPosition()),this.arrow_2.setPosition(this.arrow_2.getPosition()),this.onBtnTab3(null),this.node_firecrakers.active=!1):"all"==s.model.activity.newYearShowType&&this.onBtnTab1(null),o.evtCenter.on(c.evts.EVT_UPDATE_NEW_YEAR_DATA,this.onEventUpdateData,this),o.evtCenter.on(c.evts.EVT_BEAT_BEAST_RESULT,this.onEventUpdateData,this)},t.prototype.onDestroy=function(){this.tabShark=null,this.tabRanking=null,o.evtCenter.off(c.evts.EVT_UPDATE_NEW_YEAR_DATA,this.onEventUpdateData,this),o.evtCenter.off(c.evts.EVT_BEAT_BEAST_RESULT,this.onEventUpdateData,this),s.ME.isMember&&s.ME.isMemberReward&&o.evtCenter.emit(c.evts.EVT_POPUP_NOBLE_GIFT_EVERYDAY),s.model.guide.isFirstLogin=0},t.prototype.onBtnTab1=function(e){var t=n.AssetsManager.getRes("img/atlas/activity_shark"),i=n.AssetsManager.getRes("img/atlas/scale9_8888");cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.arrow_1.active=!0,this.arrow_2.active=!1,this.lab_tab1.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_shark_name"),this.lab_tab3.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_shark_hero"),this.btnTab1.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_activity_qieye"),this.btnTab3.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_activity_qieye_3"),this.tabRanking&&(this.tabShark&&(this.tabShark.active=!1),this.tabRanking&&(this.tabRanking.active=!0,this.tabRanking.requestRankingData()))},t.prototype.onBtnTab3=function(e){var t=n.AssetsManager.getRes("img/atlas/activity_shark"),i=n.AssetsManager.getRes("img/atlas/scale9_8888");cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.arrow_1.active=!1,this.arrow_2.active=!0,this.lab_tab1.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_shark1"),this.lab_tab3.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_shark_hero2"),this.btnTab1.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_activity_qieye"),this.btnTab3.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_activity_qieye_3"),this.tabRanking?(this.tabShark&&(this.tabShark.active=!1),this.tabRanking&&(this.tabRanking.active=!0,this.tabRanking.requestRankingData())):(this.tabRanking=(new cc.Node).addComponent(a.AtvSharkRanking),this.csbNode.addChild(this.tabRanking.node),this.tabShark&&(this.tabShark.active=!1))},t.prototype.onEventUpdateData=function(){var e=s.model.activity.newYearData;this.fntFireworks1.getComponent(cc.Label).string=e.big_firecrackers},t}(cc.Component);i.ActSharkMain=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_activity_shark_ranking":"fish_activity_shark_ranking"}],fish_activity_shark_ranking_cell:[function(e,t,i){"use strict";cc._RF.push(t,"308f6qH0hJMFrWMMK6f0o6u","fish_activity_shark_ranking_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.cell_width=420,t.cell_height=50,t.fntRank=null,t.ranking_Num=null,t.vipImg=null,t.vipFnt=null,t.lab_score=null,t.HeadImage=null,t.lab_name=null,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/beat_shark_ranking_cell")),t.addChild(t.csbNode),t.csbNode.setPosition(cc.v2(.5*t.cell_width,.5*t.cell_height)),t.fntRank=cc.find("archor/fntRank",t.csbNode),t.ranking_Num=cc.find("archor/ranking_num",t.csbNode),t.vipImg=cc.find("archor/vipImg",t.csbNode),t.vipFnt=cc.find("archor/vipFnt",t.csbNode),t.lab_score=cc.find("archor/lab_score",t.csbNode),t.HeadImage=cc.find("archor/head/HeadIamge",t.csbNode),t.lab_name=cc.find("archor/lab_name",t.csbNode),t}return __extends(t,e),t.prototype.setCellData=function(e,t){var i=n.AssetsManager.getRes("img/atlas/rank");if(t.rank<=3){var o=t.rank+3;this.ranking_Num.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_paihangbang_"+o),this.fntRank.active=!1,this.ranking_Num.active=!0}else this.fntRank.getComponent(cc.Label).string=t.rank,this.fntRank.active=!0,this.ranking_Num.active=!1;this.vipFnt.getComponent(cc.Label).string=t.detail.vip,this.lab_score.getComponent(cc.Label).string=t.detail.rankValue,""!=t.detail.headUrl&&s.avatarDownLoader.showHeadImage(t.detail.headUrl,this.HeadImage),this.lab_name.getComponent(cc.Label).string=t.detail.name},t}(cc.Node);i.AvtSharkRankCell=o,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../scene/fish_scene":"fish_scene"}],fish_activity_shark_ranking:[function(e,t,i){"use strict";cc._RF.push(t,"dca7bcjhvdKgYO0BuESF3uO","fish_activity_shark_ranking"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../define/fish_msg_types"),c=e("../../model/fish_model"),a=e("../../scene/fish_scene_login"),r=e("../../logic/fish_tcp"),h=e("../../../assets_manager"),l=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.rank_panel=null,t.table_view=null,t.HeadImage=null,t.vipFnt=null,t.vipImg=null,t.ranking_Num=null,t.fntRank=null,t.not_in=null,t.lab_name=null,t.lab_score=null,t.activity_time=null,t.myInfo=null,t.rankingData=[],t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(h.AssetsManager.getRes("prefabs/beat_shark_ranking")),this.node.addChild(this.csbRoot),this.HeadImage=cc.find("node_my/head/HeadImage",this.csbRoot),this.vipFnt=cc.find("node_my/vipFnt",this.csbRoot),this.vipImg=cc.find("node_my/vipImg",this.csbRoot),this.ranking_Num=cc.find("node_my/ranking_name",this.csbRoot),this.fntRank=cc.find("node_my/fntRank",this.csbRoot),this.not_in=cc.find("node_my/not_in",this.csbRoot),this.lab_name=cc.find("node_my/lab_name",this.csbRoot),this.lab_score=cc.find("node_my/lab_score",this.csbRoot),this.activity_time=cc.find("node_my/activity_time",this.csbRoot),this.requestRankingData(),this.activity_time.getComponent(cc.Label).string=c.model.activity.actSharkTime,this.lab_name.getComponent(cc.Label).string=c.ME.name,this.vipFnt.getComponent(cc.Label).string=c.ME.vipLevel.toString(),n.avatarDownLoader.showHeadImage(c.ME.headUrl,this.HeadImage),this.cellSize=cc.size(412,54),n.evtCenter.on(s.evts.EVT_UPDATE_RANKING_DATA,this.updateRanking,this)},t.prototype.requestRankingData=function(){var e={cmd:o.msgs.CMD_GAME,params:{action:"getCNYRank",gameId:28,userId:c.ME.userId,clientId:a.AccountInfo.clientId}};r.tcp.send(e)},t.prototype.updateRanking=function(){var e=h.AssetsManager.getRes("img/atlas/rank");if(this.myInfo=c.model.activity.newYearMyRankingData,this.rankingData=c.model.activity.newYearAllRankingData,cc.log("this.myInfo.rank:"+this.myInfo.rank),-1==this.myInfo.rank)this.not_in.active=!0,this.ranking_Num.active=!1,this.fntRank.active=!1;else if(this.not_in.active=!1,this.myInfo.rank<=3){var t=this.myInfo.rank+3;this.ranking_Num.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_paihangbang_"+t),this.ranking_Num.active=!0,this.fntRank.active=!1}else this.fntRank.getComponent(cc.Label).string=this.myInfo.rank,this.fntRank.active=!0,this.ranking_Num.active=!1;this.lab_score.getComponent(cc.Label).string=this.myInfo.score,this.table_view&&this.table_view.reloadData()},t.prototype.onDestroy=function(){this.myInfo=null,this.rankingData=[],n.evtCenter.off(s.evts.EVT_UPDATE_RANKING_DATA,this.updateRanking,this)},t}(cc.Component);i.AtvSharkRanking=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_activity:[function(e,t,i){"use strict";cc._RF.push(t,"4f945USoERBBIJ9ufMm0NNU","fish_activity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../scene/fish_scene_login"),r=e("../../logic/fish_tcp"),h=e("./fish_invite_friends_activity"),l=e("./fish_roommatch_activity"),d=e("./fish_first_charge_activity"),_=e("./fish_red_envelope_activity"),f=e("./fish_level_gifts"),p=e("./fish_shop_double_activity"),u=e("./fish_artifact_activity"),m=e("./fish_channel_reward_activity"),g=e("./fish_charge_crystal"),v=e("./fish_activity_shark_main"),b=e("./fish_activity_real_name"),y=e("./fish_activity_cell"),E=e("../daily_task/fish_daily_task"),C=e("../../define/fish_msg_types"),T=e("../../fish"),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbRoot=null,this.table_node=null,this.group_detail=null,this.dikuang=null,this.cellSize=cc.size(230,85),this.cellData=n.model.activity.openActArr,this.index=4==e||2==e||13==e?e:this.cellData[0].idx,n.model.activity.curCell=this.index},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/activity")),T.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.dikuang=cc.find("archor/group_board/dikuang",this.csbRoot),this.group_detail=cc.find("archor/group_detail",this.csbRoot),this.table_node=cc.find("archor/group_table/table_node",this.csbRoot),cc.find("archor/group_board/btnClose",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this);var e=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),e.play("show"),this.initTable(),this.onEventCellClicked(this.index),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this),o.evtCenter.on(c.evts.EVT_ACTIVITY_CELL,this.onEventCellClicked,this),o.evtCenter.on(c.evts.EVT_POPUP_DAILY_TASK,this.onEventPopupDaily,this),o.evtCenter.on(c.evts.EVT_CLOSE_ACTIVITY,this.onEventCloseActivity,this)},t.prototype.start=function(){},t.prototype.onDestroy=function(){this.cellData=[],n.model.activity.activity_exist=!1,o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this),o.evtCenter.off(c.evts.EVT_ACTIVITY_CELL,this.onEventCellClicked,this),o.evtCenter.off(c.evts.EVT_POPUP_DAILY_TASK,this.onEventPopupDaily,this),o.evtCenter.off(c.evts.EVT_CLOSE_ACTIVITY,this.onEventCloseActivity,this),o.evtCenter.emit(c.evts.EVT_UPDATE_RED_TIP)},t.prototype.onBackKey=function(){this.onBtnClose(null)},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this.node.removeFromParent(),this.destroy()},t.prototype.initTable=function(){this.table_view=cc.find("archor/group_table/table_node/table_view",this.csbRoot).getComponent(cc.ScrollView),this.tableViewReload()},t.prototype.tableViewReload=function(){for(var e=0;e<this.cellData.length;e++){var t=(new cc.Node).addComponent(y.ActivityCell);t.node.setAnchorPoint(0,0),t.node.setContentSize(this.cellSize),t.setCellData(this.index,this.cellData[e].idx),this.table_view.content.addChild(t.node)}},t.prototype.onEventPopupDaily=function(){this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(E.DailyTask).node)},t.prototype.onEventCloseActivity=function(){this.node.removeFromParent(),this.destroy()},t.prototype.onEventUpdateView=function(){if(n.model.guide.isGetFirstChargeReward){var e=this.cellData.indexOf(3);if(-1==e)return;this.cellData=this.cellData.splice(e,1),this.cellData.push(0)}},t.prototype.onEventCellClicked=function(e){switch(e){case 1:this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(h.InviteFriendsActivity).node);break;case 2:this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(l.AtvRoomMatch).node);break;case 3:this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(d.AtvFirstCharge).node);break;case 4:var t={cmd:C.msgs.CMD_FISH_DAILY_TASK,params:{gameId:28,userId:n.ME.userId,action:"update",clientId:a.AccountInfo.clientId}};r.tcp.send(t);break;case 5:this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(_.AtvRedEnvelope).node);break;case 6:this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(f.LevelGifts).node);break;case 7:this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(p.DoubleShopActivity).node);break;case 9:this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(u.ArtifactActivity).node);break;case 11:this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(m.ChannelRewardActivity).node);break;case 12:this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(g.ChargeCrystal).node);break;case 13:this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(v.ActSharkMain).node);break;case 14:this.group_detail.removeAllChildren(),this.group_detail.addChild((new cc.Node).addComponent(b.RealNameActivity).node)}},t}(cc.Component);i.Activity=S,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","../daily_task/fish_daily_task":"fish_daily_task","./fish_activity_cell":"fish_activity_cell","./fish_activity_real_name":"fish_activity_real_name","./fish_activity_shark_main":"fish_activity_shark_main","./fish_artifact_activity":"fish_artifact_activity","./fish_channel_reward_activity":"fish_channel_reward_activity","./fish_charge_crystal":"fish_charge_crystal","./fish_first_charge_activity":"fish_first_charge_activity","./fish_invite_friends_activity":"fish_invite_friends_activity","./fish_level_gifts":"fish_level_gifts","./fish_red_envelope_activity":"fish_red_envelope_activity","./fish_roommatch_activity":"fish_roommatch_activity","./fish_shop_double_activity":"fish_shop_double_activity"}],fish_adding_friends:[function(e,t,i){"use strict";cc._RF.push(t,"dcad7vaDPtO+LrXgfa9zYil","fish_adding_friends"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../fish"),r=function(e){function t(){var t=e.call(this)||this;return t.panel_edit_box=null,t.text_field_userid=null,t.loadCsb(),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode),s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this),this.initTextEdit()},t.prototype.onDestroy=function(){s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.node.removeFromParent(!0),this.destroy()},t.prototype.loadCsb=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/fish_adding_friends")),a.fish.adapterScreen(this.csbNode),cc.find("anchor/okBtn",this.csbNode).on("click",this.onBtnOK,this),cc.find("anchor/cancelBtn",this.csbNode).on("click",this.onBtnCancel,this)},t.prototype.initTextEdit=function(){this._editBox=cc.find("anchor/panel_edit_box/_editBox",this.csbNode).getComponent(cc.EditBox)},t.prototype.playButtonEffect=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1)},t.prototype.onBtnOK=function(){this.playButtonEffect();var e=this._editBox.string.trim(),t=Number(e);isNaN(t)||t<=0?s.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u8bf7\u8f93\u5165\u6b63\u786e\u6e38\u620fid",2):(c.model.friends.applyFriend(t),s.evtCenter.emit(o.evts.EVT_NET_SHOW_WAITING))},t.prototype.onBtnCancel=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.node.removeFromParent(!0),this.destroy()},t}(cc.Component);i.AddingFriendUI=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_artifact_activity:[function(e,t,i){"use strict";cc._RF.push(t,"d5a91eSYCRNJqA1WpnU8gFf","fish_artifact_activity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../scene/fish_scene_login"),r=e("../../define/fish_msg_types"),h=e("../../logic/fish_tcp"),l=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.btnReceive=null,t.btn_label=null,t.loadingBar=null,t.label_gress=null,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/artifact_activity")),t.btnReceive=cc.find("archor/btnReceive",t.csbNode),t.btn_label=t.btnReceive.getChildByName("btn_label"),t.loadingBar=cc.find("archor/loadingBar",t.csbNode).getComponent(cc.ProgressBar),t.label_gress=cc.find("archor/loadingBar/label_gress",t.csbNode).getComponent(cc.Label),t.btnReceive.on(cc.Node.EventType.TOUCH_END,t.onBtnReceive,t),t}return __extends(t,e),t.prototype.onLoad=function(){var e=n.AssetsManager.getRes("img/atlas/common"),t=n.AssetsManager.getRes("img/atlas/activity"),i=n.AssetsManager.getRes("img/atlas/scale9_8888");this.node.addChild(this.csbNode),this.csbNode.getComponent(cc.Animation).play("shake").wrapMode=cc.WrapMode.Loop,this.label_gress.string=s.model.activity.rmbs+"/35",this.loadingBar.progress=s.model.activity.rmbs/35*100,0==s.model.activity.rw?0==s.model.activity.satisfy?(this.btnReceive.getComponent(cc.Button).enabled=!1,this.btnReceive.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_button_disabled"),this.btn_label.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_activity_notget")):(this.btnReceive.getComponent(cc.Button).enabled=!0,this.btnReceive.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_button_yellow"),this.btn_label.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_guizulibao_20")):(this.btnReceive.getComponent(cc.Button).enabled=!1,this.btnReceive.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_button_disabled"),this.btn_label.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_common_received")),o.evtCenter.on(c.evts.EVT_GET_ARTIFACT_REWARD,this.onEventUpdateView,this)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_GET_ARTIFACT_REWARD,this.onEventUpdateView,this)},t.prototype.onEventUpdateView=function(){var e=n.AssetsManager.getRes("img/atlas/scale9_8888"),t=n.AssetsManager.getRes("img/atlas/common");this.btnReceive.getComponent(cc.Button).enabled=!1,this.btnReceive.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_button_disabled"),this.btn_label.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_common_received")},t.prototype.onBtnReceive=function(e){if(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.model.dailytask.isLobby)t={cmd:r.msgs.CMD_FISH_ACTIVITY,params:{gameId:28,userId:s.ME.userId,action:"reward",activityId:"charge",clientId:a.AccountInfo.clientId}};else var t={cmd:"table_cell",params:{action:"activity_reward",gameId:28,userId:s.ME.userId,activityId:"charge",clientId:a.AccountInfo.clientId,roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId}};h.tcp.send(t)},t}(cc.Component);i.ArtifactActivity=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_audio:[function(e,t,i){"use strict";cc._RF.push(t,"d0f75WxB51OdahC8cJ0rzoX","fish_audio"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../assets_manager"),s=function(){function e(){this.prevbg="",this.laser=0,this.flame=0,this.lastPlayTime=Date.now(),this.musicVolume=cc.sys.localStorage.getItem("music_volume")||55,this.effectVolume=cc.sys.localStorage.getItem("effect_valume")||80,this.setMusicVolume((this.musicVolume-10)/80),this.setEffectVolume((this.effectVolume-10)/80)}return e.prototype.playFlyGold=function(){this.lastPlayTime&&Date.now()-this.lastPlayTime<=2||(this.lastPlayTime=Date.now(),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/fly_gold"),!1))},e.prototype.playBg=function(e){cc.log("prevbg--"+this.prevbg+"--file---"+e),cc.audioEngine.isMusicPlaying()&&this.prevbg!=e?(cc.audioEngine.stopMusic(),this.prevbg=e,cc.audioEngine.playMusic(n.AssetsManager.getRes(e),!0)):""==this.prevbg?(this.prevbg=e,cc.audioEngine.playMusic(n.AssetsManager.getRes(e),!0)):cc.audioEngine.isMusicPlaying()||(this.prevbg=e,cc.audioEngine.playMusic(n.AssetsManager.getRes(e),!0))},e.prototype.pushBg=function(e){cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(n.AssetsManager.getRes(e),!0)},e.prototype.popBg=function(){cc.audioEngine.stopMusic(),this.prevbg&&cc.audioEngine.playMusic(n.AssetsManager.getRes(this.prevbg),!0)},e.prototype.playLaser=function(){cc.audioEngine.stopEffect(this.laser),this.laser=cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/laser"),!0)},e.prototype.stopLaser=function(){cc.audioEngine.stopEffect(this.laser)},e.prototype.playFlame=function(){cc.audioEngine.stopEffect(this.flame),this.flame=cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/flame"),!0)},e.prototype.stopFlame=function(){cc.audioEngine.stopEffect(this.flame)},e.prototype.setMusicVolume=function(e){this.musicVolume=e,cc.audioEngine.setMusicVolume(e)},e.prototype.setEffectVolume=function(e){this.effectVolume=e,cc.audioEngine.setEffectsVolume(e)},e}();i.Audio=s,cc._RF.pop()},{"../../assets_manager":"assets_manager"}],fish_auto_update_store:[function(e,t,i){"use strict";cc._RF.push(t,"2356dM3OgxP4L1Wkq6TAb03","fish_auto_update_store"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.onDestroy=function(){},t.prototype.onGetStoreVersion=function(e,t){},t.prototype.onGotoStore=function(){},t}(cc.Component);i.AutoUpdateStore=n,cc._RF.pop()},{}],fish_baggage:[function(e,t,i){"use strict";cc._RF.push(t,"8a6c4n0fzBPVLF5w0MRVd1T","fish_baggage"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../define/fish_consts"),s=function(){function e(){this.initItems()}return e.prototype.initItems=function(){this.items={},this.items[n.Item.LOCK]={itemId:n.Item.LOCK,count:0},this.items[n.Item.FREEZE]={itemId:n.Item.FREEZE,count:0},this.items[n.Item.SUMMON]={itemId:n.Item.SUMMON,count:0},this.items[n.Item.FURY]={itemId:n.Item.FURY,count:0},this.items[n.Item.LASER1]={itemId:n.Item.LASER1,count:0},this.items[n.Item.LASER2]={itemId:n.Item.LASER2,count:0},this.items[n.Item.LASER3]={itemId:n.Item.LASER3,count:0},this.items[n.Item.LASER4]={itemId:n.Item.LASER4,count:0},this.items[n.Item.LASER4]={itemId:n.Item.LASER4,count:0},this.items[n.Item.NBOMB]={itemId:n.Item.NBOMB,count:0}},e.prototype.parse=function(e){cc.log("********************************* baggage"),cc.log(e),this.initItems();for(var t=e.tabs[0].items,i=0,n=t.length;i<n;i++){var s=t[i];if(s.kindId>1e4){var o={itemId:s.kindId-1e4,count:s.count};this.items[o.itemId]=o}}},e.prototype.updateItemCount=function(e,t){var i=this.items[e];i?i.count=t:this.items[e]={itemId:e,count:t}},e.prototype.getItem=function(e){return this.items[e]},e}();i.Baggage=s,cc._RF.pop()},{"../define/fish_consts":"fish_consts"}],fish_battery:[function(e,t,i){"use strict";cc._RF.push(t,"4d404ITHLVPmb40jsnoSTM1","fish_battery"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../../assets_manager"),o=e("../../model/fish_model"),c=e("../../define/fish_event_types"),a=e("../../define/fish_msg_types"),r=e("../../logic/fish_tcp"),h=e("../../fish"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.playerInfo=e,this.relativeSeat=n.utils.getRelativeSeat(e.seatId),this.seatPos=n.utils.getSeatPosition(this.relativeSeat),this.firePos=n.utils.getFirePosition(this.relativeSeat),this.csbRoot=null,this.pivotRoot=null,this.pivotWeapon=null,this.spLock=null,this.ftnMultiple=null,this.nodeCannon=null,this.nodeLaser=null,this.hasfireFence=!1,this.hasFrozen=!1},t.prototype.onLoad=function(){this.node.setPosition(this.seatPos),this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/battery")),this.node.addChild(this.csbRoot,1),this.ftnMultiple=cc.find("pivotRoot/ftnMultiple",this.csbRoot).getComponent(cc.Label),this.pivotRoot=cc.find("pivotRoot",this.csbRoot),this.pivotWeapon=cc.find("pivotRoot/groupGun/pivotWeapon",this.csbRoot),this.spLock=cc.find("pivotRoot/spLock",this.csbRoot),this.ftnMultiple.string=this.playerInfo.curWeapon.multiple.toString(),this.showMyPosEffect(),1==this.playerInfo.cannonId&&this.playerInfo.maxWeapon.multiple>=30&&(this.playerInfo.cannonId=2),this.nodeCannon=cc.instantiate(s.AssetsManager.getRes("prefabs/cannon_"+this.playerInfo.cannonId)),this.pivotWeapon.addChild(this.nodeCannon),this._idle(),this.relativeSeat>=3&&(this.pivotRoot.angle=-180),n.evtCenter.on(c.evts.EVT_ROTATE_BATTERY,this.onEventRotateBattery,this),n.evtCenter.on(c.evts.EVT_FIRE_BATTERY,this.onEventFireBattery,this),n.evtCenter.on(c.evts.EVT_MULTIPLE_CHANGED,this.onEventSetMultiple,this),n.evtCenter.on(c.evts.EVT_SET_MULTIPLE,this.onEventSetMultiple,this),n.evtCenter.on(c.evts.EVT_WEAPON_CHANGED,this.onEvtWeaponChanged,this),n.evtCenter.on(c.evts.EVT_SET_LOCK_STAT,this.onEventSetLock,this),n.evtCenter.on(c.evts.EVT_SET_FURY_STAT,this.onEventSetFury,this),n.evtCenter.on(c.evts.EVT_LASER_BEGIN,this.onEventLaserBegin,this),n.evtCenter.on(c.evts.EVT_LASER_FIRE,this.onEventLaserFire,this),n.evtCenter.on(c.evts.EVT_LASER_END,this.onEventLaserEnd,this),n.evtCenter.on(c.evts.EVT_FIRE_FENCE_SETUP,this.onEventFireFenceSetup,this),n.evtCenter.on(c.evts.EVT_PITON_HIT,this.onEventPitonHit,this),n.evtCenter.on(c.evts.EVT_FIRE_FENCE_REMOVE,this.onEventFireFenceRemove,this),n.evtCenter.on(c.evts.EVT_BATTERY_FROZEN,this.onEventBatteryFrozen,this),n.evtCenter.on(c.evts.EVT_BATTERY_UNFROZEN,this.onEventBatteryUnfrozen,this),n.evtCenter.on(c.evts.EVT_ICE_DRAGON_DIE,this.onEventIceDragonDie,this),n.evtCenter.on(c.evts.EVT_REMOVE_MY_POS_TIP,this.removeMyPosEffect,this)},t.prototype.onEventRotateBattery=function(e,t){e==this.playerInfo.userId&&this._rotate(t)},t.prototype.onEventFireBattery=function(e){e==this.playerInfo.userId&&this._fire()},t.prototype.onEventSetMultiple=function(e,t,i){cc.log("*********************************** onEventSetMultiple"),e==this.playerInfo.seatId&&(this.spLock.active=i,this.ftnMultiple.getComponent(cc.Label).string=t.toString(),this._changeWeaponEffect())},t.prototype.onEvtWeaponChanged=function(e,t){cc.log("*********************************** onEvtWeaponChanged"),e==this.playerInfo.seatId&&this._refreshCannon()},t.prototype.onEventSetLock=function(e,t){cc.log("*********************************** onEventSetLock"),e==this.playerInfo.seatId&&(t?this._addLockEffect():this._removeLockEffect())},t.prototype.onEventSetFury=function(e,t){cc.log("*********************************** onEventSetFury"),e==this.playerInfo.seatId&&(this._removeLockEffect(),t?this._addFuryEffect():this._removeFuryEffect())},t.prototype.onEventLaserBegin=function(e,t){cc.log("*********************************** onEventLaserBegin"),e==this.playerInfo.seatId&&(this._showLaser(t),this.playerInfo.fireLaserId=t)},t.prototype.onEventLaserFire=function(e,t){if(cc.log("*********************************** onEventLaserFire"),this.nodeLaser&&e==this.playerInfo.seatId){this._rotate(t);var i=n.configTable.skill[this.playerInfo.fireLaserId],s=parseInt(i.used_weapon);this.nodeLaser.stopAllActions();var o=this.nodeLaser.getComponent(cc.Animation);o.on(cc.Animation.EventType.FINISHED,function(){"ready"==o.currentClip.name?(h.fish.gameView.laserBegin(e,s,t),o.play("fire")):"fire"==o.currentClip.name&&(o.targetOff(this),o.play("spark").wrapMode=cc.WrapMode.Loop)}.bind(this),this),o.play("ready")}},t.prototype.onEventLaserEnd=function(e,t){cc.log("*********************************** onEventLaserEnd"),e==this.playerInfo.seatId&&(this._refreshCannon(),n.audio.stopLaser())},t.prototype.onEventFireFenceSetup=function(e){cc.log("*********************************** onEventFireFenceSetup"),e==this.playerInfo.seatId&&(this.hasfireFence||(this.hasfireFence=!0,this._showFireFence()))},t.prototype.onEventPitonHit=function(e,t){if(cc.log("*********************************** onEventPitonHit"),e==this.playerInfo.seatId&&!this.hasfireFence&&!this.hasFrozen){this.hasFrozen=!0,this.hasfireFence=!1,this._batteryFrozen();var i={cmd:a.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:o.ME.userId,roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:e,action:"iceDrg",subAct:"frozen"}};r.tcp.send(i)}},t.prototype.onEventFireFenceRemove=function(e){cc.log("*********************************** onEventFireFenceRemove"),e==this.playerInfo.seatId&&this.hasfireFence&&(this.hasfireFence=!1,this.hasFrozen=!1,this._hideFireFence())},t.prototype.onEventBatteryFrozen=function(e){cc.log("*********************************** onEventBatteryFrozen"),e==this.playerInfo.seatId&&(this.hasFrozen||(this.hasFrozen=!0,this.hasfireFence=!1,this._batteryFrozen()))},t.prototype.onEventBatteryUnfrozen=function(e){cc.log("*********************************** onEventBatteryUnfrozen"),e==this.playerInfo.seatId&&this.hasFrozen&&(this.hasFrozen=!1,this.hasfireFence=!1,this._batteryUnfrozen())},t.prototype.onEventIceDragonDie=function(){cc.log("*********************************** onEventIceDragonDie"),this.hasFrozen=!1,this.hasfireFence=!1,this._hideFireFence(),this._batteryUnfrozen()},t.prototype._rotate=function(e){var t=cc.v2(e.x-this.firePos.x,e.y-this.firePos.y),i=cc.v2(this.firePos.x-this.seatPos.x,this.firePos.y-this.seatPos.y),s=n.math.getAngle(t,i);s=cc.misc.clampf(s,-98,98),this.pivotWeapon.angle=-s},t.prototype._idle=function(){this.nodeCannon&&this.playerInfo.cannonId>10&&(this.nodeCannon.stopAllActions(),this.nodeCannon.getComponent(cc.Animation).play("idle").wrapMode=cc.WrapMode.Loop)},t.prototype._fire=function(){if(this.nodeCannon){this.nodeCannon.stopAllActions();var e=this.nodeCannon.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("idle").wrapMode=cc.WrapMode.Loop}.bind(this),this),e.play("fire")}},t.prototype._addLockEffect=function(){if(!this.lockEffect){this.lockEffect=new cc.Node,this.lockEffect.y=this.relativeSeat>2?-26:26;var e=n.utils.createSprite("fish_eff_lock_01","skill_lock");e.runAction(cc.repeatForever(cc.rotateBy(1,108)));var t=n.utils.createSprite("fish_eff_lock_02","skill_lock");t.runAction(cc.repeatForever(cc.rotateBy(1,-108))),this.lockEffect.addChild(e),this.lockEffect.addChild(t),this.node.addChild(this.lockEffect,0)}},t.prototype._removeLockEffect=function(){this.lockEffect&&(this.node.removeChild(this.lockEffect),this.lockEffect=null)},t.prototype._addFuryEffect=function(){if(!this.furyEffect){this.furyEffect=new cc.Node,this.furyEffect.y=this.relativeSeat>2?-26:26;var e=n.utils.createSprite("fish_eff_fury_01","skill_fury");e.runAction(cc.repeatForever(cc.rotateBy(1,108)));var t=n.utils.createSprite("fish_eff_fury_02","skill_fury");t.runAction(cc.repeatForever(cc.rotateBy(1,-108))),this.furyEffect.addChild(e),this.furyEffect.addChild(t),this.node.addChild(this.furyEffect,0)}},t.prototype._removeFuryEffect=function(){this.furyEffect&&(this.node.removeChild(this.furyEffect),this.furyEffect=null)},t.prototype._changeWeaponEffect=function(){this.pivotWeapon.runAction(cc.sequence(cc.scaleTo(1/30,.6),cc.scaleTo(1/30,.8),cc.scaleTo(1/30,1)));var e=n.utils.genAnimate("battery","chg_wp_ani","fish_change_weapon_",1/30),t=n.utils.createSprite("fish_change_weapon_01","battery"),i=t.addComponent(cc.Animation);i.addClip(e),t.setScale(1.5),t.y=40,t.runAction(cc.sequence(cc.callFunc(function(){i.play(e.name)}.bind(this)),cc.removeSelf())),this.csbRoot.addChild(t,2)},t.prototype._showLaser=function(e){this.nodeCannon&&(this.nodeCannon.removeFromParent(),this.nodeCannon=null),this.nodeLaser=cc.instantiate(s.AssetsManager.getRes("prefabs/laser_"+e)),this.pivotWeapon.addChild(this.nodeLaser),this._changeWeaponEffect()},t.prototype._refreshCannon=function(){this.nodeLaser&&(this.nodeLaser.removeFromParent(),this.nodeLaser=null),this.nodeCannon&&(this.nodeCannon.removeFromParent(),this.nodeCannon=null),this.nodeCannon=cc.instantiate(s.AssetsManager.getRes("prefabs/cannon_"+this.playerInfo.cannonId)),this.pivotWeapon.addChild(this.nodeCannon),this._changeWeaponEffect(),this._idle()},t.prototype._showFireFence=function(){var e=this.csbRoot.getComponent(cc.Animation);e.play("showFireFence"),e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("repeatFire").wrapMode=cc.WrapMode.Loop}),n.audio.playFlame()},t.prototype._hideFireFence=function(){this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("hideFireFence"),n.audio.stopFlame()},t.prototype._batteryFrozen=function(){this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("batteryFrozen"),cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/freeze"),!1)},t.prototype._batteryUnfrozen=function(){this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("batteryUnfrozen")},t.prototype._addMyPosEffect=function(){if(!this.posEffect){this.posEffect=new cc.Node,this.posEffect.y=this.relativeSeat>2?-20:26;var e=n.utils.createSprite("fish_my_position_lock_01","common");e.runAction(cc.repeatForever(cc.rotateBy(1,108)));var t=n.utils.createSprite("fish_my_position_lock_02","common");t.runAction(cc.repeatForever(cc.rotateBy(1,-108))),this.posEffect.addChild(e),this.posEffect.addChild(t),this.node.addChild(this.posEffect,0)}},t.prototype._removeMyPosEffect=function(){this.posEffect&&(this.node.removeChild(this.posEffect),this.posEffect=null)},t.prototype.showMyPosEffect=function(){this.playerInfo.seatId==o.model.table.seatId&&this._addMyPosEffect()},t.prototype.removeMyPosEffect=function(){this.playerInfo.seatId==o.model.table.seatId&&this._removeMyPosEffect()},t}(cc.Component);i.Battery=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_book:[function(e,t,i){"use strict";cc._RF.push(t,"bfb37UqneZM5JYfXJkXLKPR","fish_book"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../fish"),a=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/game_fish_book")),c.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),cc.find("Node_7/btnClosePokedex",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnClosePokedex,this),this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("show"),s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnClosePokedex(null)},t.prototype.onBtnClosePokedex=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),t.play("hide"),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(!0),this.destroy()}.bind(this),this)},t}(cc.Component);i.FishBook=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../scene/fish_scene":"fish_scene"}],fish_btn_bankrupt_package:[function(e,t,i){"use strict";cc._RF.push(t,"0697b9X305J4rkV1qC7oqMF","fish_btn_bankrupt_package"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("./bankrupt_package_counting_down"),r=function(e){function t(){var t=e.call(this)||this;return t.endTime=n.model.bankrupt_package.getPackageEndTime(),t.bmpfnt_countingdown=null,t.btn_package=null,t.loadCsbNode(),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode),this.btn_package.setPosition(cc.v2(0,0)),o.evtCenter.on(c.evts.EVT_PURCHASE_BANKRUPT_PACKAGE_SUCCESS,this.onEventPurchasePackageSuccess,this),this.startCountingDown(),this.csbNode.getComponent(cc.Animation).play("idle").wrapMode=cc.WrapMode.Loop},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_PURCHASE_BANKRUPT_PACKAGE_SUCCESS,this.onEventPurchasePackageSuccess,this),this.countdownControl&&(this.countdownControl.release(),this.countdownControl=null)},t.prototype.fadeIn=function(){this.node.active=!0},t.prototype.fadeOut=function(){this.node.active=!1},t.prototype.loadCsbNode=function(){this.csbNode=cc.instantiate(s.AssetsManager.getRes("prefabs/bankrupt_package_btn")),this.bmpfnt_countingdown=cc.find("bmpfnt_countingdown",this.csbNode),this.btn_package=cc.find("btn_package",this.csbNode)},t.prototype.runCsbAction=function(e,t){if(this.csbNode){var i=this.csbNode.getComponent(cc.Animation);i.on(cc.Animation.EventType.FINISHED,t,this),i.play(e)}},t.prototype.startCountingDown=function(){var e=this.endTime-Date.now()/1e3;this.setCountdownLabel(e),this.countdownControl=new a.CountDownTimeControl(1,Math.max(1,e),this.setCountdownLabel.bind(this),this.endCountingDown.bind(this)),this.countdownControl.startCountDownTime()},t.prototype.setCountdownLabel=function(e){var t=Math.max(e,0),i=t%60,n=i<10?"0"+i:i,s=t/60,o=s<10?"0"+s:s;this.bmpfnt_countingdown.getComponent(cc.Label).string=o+":"+n,t<=30&&this.bmpfnt_countingdown.runAction(cc.sequence(cc.scaleTo(.1,1.1),cc.scaleTo(.1,.9)))},t.prototype.endCountingDown=function(){n.model.bankrupt_package.__removeCurrentPackage(),o.evtCenter.emit(c.evts.EVT_REMOVE_BANKRUPT_PACKAGE_BTN)},t.prototype.playButtonEffect=function(){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1)},t.prototype.onBtnBankruptPackage=function(e){this.playButtonEffect(),n.model.bankrupt_package.showBankruptPackageUI()},t.prototype.close=function(){this.bClosed||(this.bClosed=!0,this.node.active?(this.csbNode.stopAllActions(),this.runCsbAction("close",this.removeSelf.bind(this))):(this.node.removeFromParent(!0),this.destroy()))},t.prototype.removeSelf=function(){this.node.removeFromParent(!0),this.destroy()},t.prototype.onEventPurchasePackageSuccess=function(){this.countdownControl&&this.countdownControl.stopUpdateCountDownTime()},t}(cc.Component);i.BankruptPackageBtn=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./bankrupt_package_counting_down":"bankrupt_package_counting_down"}],fish_buffer:[function(e,t,i){"use strict";cc._RF.push(t,"70969LV5r1Kyoqv5szsBMye","fish_buffer"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_event_types"),o=e("../model/fish_model"),c=e("./fish_game_gold"),a=e("./fish_game_diamond"),r=e("./fish_other_gold"),h=e("./fish_other_diamond"),l=e("./fish_lobby_gold"),d=e("./fish_lobby_diamond"),_=e("./fish_game_fury"),f=e("./fish_game_freeze"),p=e("./fish_game_lock"),u=e("./fish_game_summon"),m=e("./fish_game_laser1"),g=e("./fish_game_laser2"),v=e("./fish_game_laser3"),b=e("./fish_game_laser4"),y=e("./fish_game_nbomb");(function(e){e.lobbyGold=null,e.lobbyDiamond=null,e.gameGold=null,e.gameDiamond=null,e.lotteryGold=null,e.gunUpdiamond=null,e.freeze=null,e.lock=null,e.summon=null,e.fury=null,e.laser1=null,e.laser2=null,e.laser3=null,e.laser4=null,e.nbomb=null,e.otherGold=[],e.otherDiamond=[],e.LobbyGold=l._LobbyGold,e.LobbyDiamond=d._LobbyDiamond,e.GameGold=c._GameGold,e.GameDiamond=a._GameDiamond,e.Freeze=f._Freeze,e.Lock=p._Lock,e.Summon=u._Summon,e.Fury=_._Fury,e.LASER1=m._LASER1,e.LASER2=g._LASER2,e.LASER3=v._LASER3,e.LASER4=b._LASER4,e.Nbomb=y._Nbomb,e.OtherGold=r._OtherGold,e.OtherDiamond=h._OtherDiamond,e.bind=function(e,t,i){return new e(t,i)},e.pushGold=function(e,t,i){var o=Date.now()+1e3*i;n.evtCenter.emit(s.evts.EVT_PUSH_ACT_GOLD,e,t,o)},e.addGoldMoment=function(e,t){n.evtCenter.emit(s.evts.EVT_ADD_GOLD_ATONCE,e,t)},e.subGold=function(e,t){n.evtCenter.emit(s.evts.EVT_SUB_GOLD,e,t)},e.pushDiamond=function(e,t,i){var o=Date.now()+1e3*i;n.evtCenter.emit(s.evts.EVT_PUSH_DIAMOND,e,t,o)},e.addDiamondMoment=function(e,t){n.evtCenter.emit(s.evts.EVT_ADD_DIAMOND_ATONCE,e,t)},e.subDiamond=function(e,t){n.evtCenter.emit(s.evts.EVT_SUB_DIAMOND,e,t)},e.pushItem=function(t,i,n,s){switch(parseInt(i)){case 101:e.pushGold(t,n,s);break;case 102:e.pushDiamond(t,n,s);break;case 103:o.ME.userId==t&&(o.ME.coupon+=parseInt(n));break;case 104:break;case 3101:e.pushLock(t,n,s);break;case 3102:e.pushFreeze(t,n,s);break;case 3103:e.pushSummon(t,n,s);break;case 3104:e.pushFury(t,n,s);break;case 3105:break;case 3106:case 3107:case 3108:case 3109:e.pushLaser(t,i,n,s);break;case 3110:e.pushNbomb(t,n,s)}},e.pushFury=function(e,t,i){var o=Date.now()+1e3*i;n.evtCenter.emit(s.evts.EVT_PUSH_FURY,e,t,o)},e.subFury=function(e,t){n.evtCenter.emit(s.evts.EVT_SUB_FURY,e,t)},e.pushLock=function(e,t,i){var o=Date.now()+1e3*i;n.evtCenter.emit(s.evts.EVT_PUSH_LOCK,e,t,o)},e.subLock=function(e,t){n.evtCenter.emit(s.evts.EVT_SUB_LOCK,e,t)},e.pushSummon=function(e,t,i){var o=Date.now()+1e3*i;n.evtCenter.emit(s.evts.EVT_PUSH_SUMMON,e,t,o)},e.subSummon=function(e,t){n.evtCenter.emit(s.evts.EVT_SUB_SUMMON,e,t)},e.pushFreeze=function(e,t,i){var o=Date.now()+1e3*i;n.evtCenter.emit(s.evts.EVT_PUSH_FREEZE,e,t,o)},e.subFreeze=function(e,t){n.evtCenter.emit(s.evts.EVT_SUB_FREEZE,e,t)},e.pushLaser=function(e,t,i,o){var c=Date.now()+1e3*o;n.evtCenter.emit(s.evts.EVT_PUSH_LASER,e,t,i,c)},e.subLaser=function(e,t,i){n.evtCenter.emit(s.evts.EVT_SUB_LASER,e,t,i)},e.pushNbomb=function(e,t,i){var o=Date.now()+1e3*i;n.evtCenter.emit(s.evts.EVT_PUSH_NBOMB,e,t,o)},e.subNbomb=function(e,t){n.evtCenter.emit(s.evts.EVT_SUB_NBOMB,e,t)},e.onRwxDrop=function(t,i){t&&t.hasOwnProperty("chip")&&e.pushGold(i,t.chip,2),t&&t.hasOwnProperty("dmd")&&e.pushDiamond(i,t.dmd,2)},e.release=function(){e.otherGold=[],e.otherDiamond=[]}})(i.buffer||(i.buffer={})),cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_game_diamond":"fish_game_diamond","./fish_game_freeze":"fish_game_freeze","./fish_game_fury":"fish_game_fury","./fish_game_gold":"fish_game_gold","./fish_game_laser1":"fish_game_laser1","./fish_game_laser2":"fish_game_laser2","./fish_game_laser3":"fish_game_laser3","./fish_game_laser4":"fish_game_laser4","./fish_game_lock":"fish_game_lock","./fish_game_nbomb":"fish_game_nbomb","./fish_game_summon":"fish_game_summon","./fish_lobby_diamond":"fish_lobby_diamond","./fish_lobby_gold":"fish_lobby_gold","./fish_other_diamond":"fish_other_diamond","./fish_other_gold":"fish_other_gold"}],fish_bullet_manager:[function(e,t,i){"use strict";cc._RF.push(t,"c6a945xgWdCc4K5Il90Vss5","fish_bullet_manager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../model/fish_model"),c=e("./fish_bullet"),a=function(e){function t(){var t=e.call(this)||this;return t.bullets={},n.evtCenter.on(s.evts.EVT_PLAYER_LEAVE,t.onEventPlayerLeave,t),t}return __extends(t,e),t.prototype.onEventPlayerLeave=function(e,t){for(var i in this.bullets){if(Math.floor(parseInt(i)/100)==t){var n=this.bullets[i];n&&n.spBullet.removeFromParent(),delete this.bullets[i]}}},t.prototype.playerFire=function(e,t,i,s,a){var r=o.model.table.getPlayerInfo(e),h=100*e+t,l=n.configTable.weapon[i],d=parseInt(l.bullet_type);this.bullets[h]&&(this.bullets[h].spBullet.removeFromParent(),delete this.bullets[h]);this.bullets[h]=c.BulletFactory.create(e,t,i,r.cannonId,s,d,a)},t.prototype.bulletDie=function(e,t,i){var n=100*e+t,s=this.bullets[n];s&&s.die(i),delete this.bullets[n]},t}(cc.Component);i.BulletManager=a,cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_bullet":"fish_bullet"}],fish_bullet:[function(e,t,i){"use strict";cc._RF.push(t,"9d5deYnDEJFUo3rXagk+lNX","fish_bullet"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../fish"),c=function(e){function t(t,i,n,s,o,c,a){var r=e.call(this)||this;return r.seatId=t,r.bulletId=i,r.weaponId=n,r.cannonId=s,r.isFury=o,r.bulletType=c,r.bulletNode=a,r.spBullet=null,r.setSprite(),cc.director.getScheduler().schedule(r.onTimeoutRemove,r,30,0,0,!1),r}return __extends(t,e),t.prototype.setSprite=function(){this.isFury?this.spBullet=n.utils.createSprite("fish_bullet_fury","fire_net"):this.genSprite(),this.spBullet.setAnchorPoint(.5,.95),this.bulletNode.addChild(this.spBullet)},t.prototype.onTimeoutRemove=function(){cc.log("bullet timeout"),cc.director.getScheduler().unschedule(this.onTimeoutRemove,this),n.evtCenter.emit(s.evts.EVT_BULLET_TIMEOUT,this.seatId,this.bulletId)},t.prototype.die=function(e){cc.log("bullet die"),cc.director.getScheduler().unscheduleAllForTarget(this),e&&(this.isFury?this.furyHit():this.castNet()),this.spBullet.removeFromParent()},t.prototype.furyHit=function(){var e=n.utils.createSprite("fish_eff_fury_hit_01","skill_fury");e.angle=-360*Math.random(),e.setScale(1.8),this.bulletNode.addChild(e);var t=n.utils.genAnimate("skill_fury","fury_hit","fish_eff_fury_hit_",1/30),i=e.addComponent(cc.Animation);i.addClip(t),i.play(t.name),i.on(cc.Animation.EventType.FINISHED,function(){i.targetOff(this),e.removeFromParent()}.bind(this),this)},t.prototype.genSprite=function(){},t.prototype.castNet=function(){for(var e=0;e<8;e++){var t,i=n.utils.createSprite("fish_net_bubble","fire_net");switch(this.bulletNode.addChild(i),i.setPosition(5*o.fish.randomMinus1To1(),5*o.fish.randomMinus1To1()),i.setScale(.5*Math.random()+.5),i.active=!1,this.bulletType){case 1:t=cc.color(100,240,100);break;case 2:t=cc.color(240,220,80);break;case 3:t=cc.color(240,100,240)}i.color=t;var s=(15+15*Math.random())/30,c=(45*e+10*Math.random())*(Math.PI/180),a=60+20*Math.random(),r=a*Math.cos(c),h=a*Math.sin(c);i.runAction(cc.sequence(cc.delayTime(1/30),cc.show(),cc.spawn(cc.scaleTo(s,.2),cc.moveTo(s,r,h)),cc.removeSelf()))}},t}(cc.Node),a=function(e){function t(t,i,n,s,o,c,a){return e.call(this,t,i,n,s,o,c,a)||this}return __extends(t,e),t.prototype.genSprite=function(){this.spBullet=n.utils.createSprite("fish_bullet_1","fire_net")},t.prototype.castNet=function(){e.prototype.castNet.call(this);var t=n.utils.createSprite("fish_net_1","fire_net");this.bulletNode.addChild(t),t.setScale(.2),t.angle=-15,t.runAction(cc.sequence(cc.scaleTo(2/30,1.2),cc.scaleTo(2/30,1),cc.scaleTo(2/30,1.1),cc.scaleTo(2/30,1),cc.fadeOut(10/30),cc.removeSelf()))},t}(c),r=function(e){function t(t,i,n,s,o,c,a){return e.call(this,t,i,n,s,o,c,a)||this}return __extends(t,e),t.prototype.genSprite=function(){this.spBullet=n.utils.createSprite("fish_bullet_2","fire_net")},t.prototype.castNet=function(){var e=n.utils.createSprite("fish_net_2","fire_net"),t=n.utils.createSprite("fish_net_2","fire_net");e.setPosition(50*o.fish.randomMinus1To1(),50*o.fish.randomMinus1To1()),t.setPosition(50*o.fish.randomMinus1To1(),50*o.fish.randomMinus1To1()),e.setScale(.2),t.setScale(.2),e.angle=-15,t.angle=-15,this.bulletNode.addChild(e),this.bulletNode.addChild(t),e.runAction(cc.sequence(cc.scaleTo(2/30,1.2),cc.scaleTo(2/30,1),cc.scaleTo(2/30,1.1),cc.scaleTo(2/30,1),cc.fadeOut(10/30),cc.removeSelf())),t.runAction(cc.sequence(cc.scaleTo(2/30,1.2),cc.scaleTo(2/30,1),cc.scaleTo(2/30,1.1),cc.scaleTo(2/30,1),cc.fadeOut(10/30),cc.removeSelf()))},t}(c),h=function(e){function t(t,i,n,s,o,c,a){return e.call(this,t,i,n,s,o,c,a)||this}return __extends(t,e),t.prototype.genSprite=function(){this.spBullet=n.utils.createSprite("fish_bullet_11","fire_net")},t.prototype.castNet=function(){var e=n.utils.createSprite("fish_net_11","fire_net"),t=n.utils.createSprite("fish_net_11","fire_net");e.setPosition(50*o.fish.randomMinus1To1(),50*o.fish.randomMinus1To1()),t.setPosition(60*o.fish.randomMinus1To1(),60*o.fish.randomMinus1To1()),e.setScale(.2),t.setScale(.2),e.angle=-15,t.angle=-15,this.bulletNode.addChild(e),this.bulletNode.addChild(t),e.runAction(cc.sequence(cc.scaleTo(2/30,1.2),cc.scaleTo(2/30,1),cc.scaleTo(2/30,1.1),cc.scaleTo(2/30,1),cc.fadeOut(10/30),cc.removeSelf())),t.runAction(cc.sequence(cc.scaleTo(2/30,1.2),cc.scaleTo(2/30,1),cc.scaleTo(2/30,1.1),cc.scaleTo(2/30,1),cc.fadeOut(10/30),cc.removeSelf()))},t}(c),l=function(e){function t(t,i,n,s,o,c,a){return e.call(this,t,i,n,s,o,c,a)||this}return __extends(t,e),t.prototype.genSprite=function(){this.spBullet=n.utils.createSprite("fish_bullet_12","fire_net")},t.prototype.castNet=function(){var e=n.utils.createSprite("fish_net_12","fire_net"),t=n.utils.createSprite("fish_net_12","fire_net"),i=n.utils.createSprite("fish_net_12","fire_net");e.setPosition(50*o.fish.randomMinus1To1(),50*o.fish.randomMinus1To1()),t.setPosition(60*o.fish.randomMinus1To1(),60*o.fish.randomMinus1To1()),i.setPosition(40*o.fish.randomMinus1To1(),40*o.fish.randomMinus1To1()),e.setScale(.2),t.setScale(.2),i.setScale(.2),e.angle=-15,t.angle=-15,i.angle=-15,this.bulletNode.addChild(e),this.bulletNode.addChild(t),this.bulletNode.addChild(i),e.runAction(cc.sequence(cc.scaleTo(2/30,1.2),cc.scaleTo(2/30,1),cc.scaleTo(2/30,1.1),cc.scaleTo(2/30,1),cc.fadeOut(10/30),cc.removeSelf())),t.runAction(cc.sequence(cc.scaleTo(2/30,1.2),cc.scaleTo(2/30,1),cc.scaleTo(2/30,1.1),cc.scaleTo(2/30,1),cc.fadeOut(10/30),cc.removeSelf())),i.runAction(cc.sequence(cc.scaleTo(2/30,1.2),cc.scaleTo(2/30,1),cc.scaleTo(2/30,1.1),cc.scaleTo(2/30,1),cc.fadeOut(10/30),cc.removeSelf()))},t}(c),d=function(e){function t(t,i,n,s,o,c,a){return e.call(this,t,i,n,s,o,c,a)||this}return __extends(t,e),t.prototype.genSprite=function(){this.spBullet=n.utils.createSprite("fish_bullet_13","fire_net")},t.prototype.castNet=function(){var e=n.utils.createSprite("fish_net_13_01","fire_net"),t=n.utils.createSprite("fish_net_13_01","fire_net"),i=n.utils.createSprite("fish_net_13_02","fire_net"),s=n.utils.createSprite("fish_net_13_03","fire_net");t.color=cc.color(0,0,0),t.opacity=100;var o=new cc.Node;i.runAction(cc.rotateBy(20/30,360)),e.runAction(cc.rotateBy(20/30,-90)),t.runAction(cc.rotateBy(20/30,-90)),s.runAction(cc.sequence(cc.scaleTo(0,.8),cc.scaleTo(20/30,1.2),cc.rotateBy(20/30,120))),o.addChild(t),o.addChild(s),o.addChild(e),o.addChild(i),o.runAction(cc.sequence(cc.scaleTo(0,.2),cc.scaleTo(2/30,1.3),cc.scaleTo(2/30,.9),cc.scaleTo(2/30,1),cc.delayTime(2/30),cc.fadeOut(14/30),cc.removeSelf())),this.bulletNode.addChild(o);var c=n.utils.createSprite("fish_net_13_eff_01","fire_net");this.bulletNode.addChild(c);var a=n.utils.genAnimate("fire_net","fish_net_13","fish_net_13_eff_",1/30),r=c.addComponent(cc.Animation);r.addClip(a),c.setScale(2.2),c.active=!1,c.runAction(cc.sequence(cc.delayTime(4/30),cc.show(),cc.callFunc(function(){r.play(a.name),r.on(cc.Animation.EventType.FINISHED,function(){r.targetOff(this),c.removeFromParent()}.bind(this),this)}.bind(this))))},t}(c),_=function(e){function t(t,i,n,s,o,c,a){return e.call(this,t,i,n,s,o,c,a)||this}return __extends(t,e),t.prototype.genSprite=function(){this.spBullet=n.utils.createSprite("fish_bullet_14","fire_net")},t.prototype.castNet=function(){var e=n.utils.createSprite("fish_net_14_01","fire_net"),t=n.utils.createSprite("fish_net_14_01","fire_net"),i=n.utils.createSprite("fish_net_14_02","fire_net"),s=n.utils.createSprite("fish_net_14_03","fire_net");t.color=cc.color(0,0,0),t.opacity=100;var o=new cc.Node;i.runAction(cc.rotateBy(20/30,360)),e.runAction(cc.rotateBy(20/30,-90)),t.runAction(cc.rotateBy(20/30,-90)),s.runAction(cc.sequence(cc.scaleTo(0,.8),cc.scaleTo(20/30,1.2),cc.rotateBy(20/30,120))),o.addChild(t),o.addChild(s),o.addChild(e),o.addChild(i),o.runAction(cc.sequence(cc.scaleTo(0,.2),cc.scaleTo(2/30,1.3),cc.scaleTo(2/30,.9),cc.scaleTo(2/30,1),cc.delayTime(2/30),cc.fadeOut(14/30),cc.removeSelf())),this.bulletNode.addChild(o);var c=n.utils.createSprite("fish_net_14_eff_01","fire_net");this.bulletNode.addChild(c);var a=n.utils.genAnimate("fire_net","fish_net_14","fish_net_14_eff_",1/30),r=c.addComponent(cc.Animation);r.addClip(a),c.setScale(2.2),c.active=!1,c.runAction(cc.sequence(cc.delayTime(4/30),cc.show(),cc.callFunc(function(){r.play(a.name),r.on(cc.Animation.EventType.FINISHED,function(){r.targetOff(this),c.removeFromParent()}.bind(this),this)}.bind(this))))},t}(c),f=function(e){function t(t,i,n,s,o,c,a){return e.call(this,t,i,n,s,o,c,a)||this}return __extends(t,e),t.prototype.genSprite=function(){this.spBullet=n.utils.createSprite("fish_bullet_15","fire_net")},t.prototype.castNet=function(){var e=n.utils.createSprite("fish_net_15_01","fire_net"),t=n.utils.createSprite("fish_net_15_01","fire_net"),i=n.utils.createSprite("fish_net_15_02","fire_net");t.color=cc.color(0,0,0),t.opacity=100;var s=new cc.Node;i.runAction(cc.rotateBy(22/30,120)),e.runAction(cc.rotateBy(22/30,-90)),t.runAction(cc.rotateBy(22/30,-90)),s.addChild(t),s.addChild(e),s.addChild(i),s.runAction(cc.sequence(cc.scaleTo(0,.2),cc.scaleTo(.1,1.3),cc.scaleTo(2/30,.9),cc.scaleTo(2/30,1.1),cc.delayTime(.1),cc.fadeOut(13/30),cc.removeSelf())),this.bulletNode.addChild(s);var o=n.utils.createSprite("#fish_net_15_eff_01","fire_net");this.bulletNode.addChild(o);var c=n.utils.genAnimateByFrames("img/atlas/fire_net","fish_net_15","fish_net_15_eff",[1,6,2,6,3,4,5,6],1/30),a=o.addComponent(cc.Animation);a.addClip(c),o.active=!1,o.runAction(cc.sequence(cc.delayTime(.2),cc.show(),cc.callFunc(function(){a.play(c.name),a.on(cc.Animation.EventType.FINISHED,function(){a.targetOff(this),o.removeFromParent()}.bind(this),this)}.bind(this))))},t}(c),p=function(e){function t(t,i,n,s,o,c,a){return e.call(this,t,i,n,s,o,c,a)||this}return __extends(t,e),t.prototype.genSprite=function(){this.spBullet=n.utils.createSprite("fish_bullet_16","fire_net")},t.prototype.castNet=function(){var e=n.utils.createSprite("fish_net_16_01","fire_net"),t=n.utils.createSprite("fish_net_16_01","fire_net"),i=n.utils.createSprite("fish_net_16_02","fire_net"),s=n.utils.createSprite("fish_net_16_03","fire_net");t.color=cc.color(0,0,0),t.opacity=100;var o=new cc.Node;i.runAction(cc.rotateBy(20/30,360)),e.runAction(cc.rotateBy(20/30,-90)),t.runAction(cc.rotateBy(20/30,-90)),s.runAction(cc.sequence(cc.scaleTo(0,.8),cc.scaleTo(20/30,1.2),cc.rotateBy(20/30,120))),o.addChild(t),o.addChild(s),o.addChild(e),o.addChild(i),o.runAction(cc.sequence(cc.scaleTo(0,.2),cc.scaleTo(2/30,1.3),cc.scaleTo(2/30,.9),cc.scaleTo(2/30,1),cc.delayTime(2/30),cc.fadeOut(14/30),cc.removeSelf())),this.bulletNode.addChild(o);var c=n.utils.createSprite("fish_net_16_eff_01","fire_net");this.bulletNode.addChild(c);var a=n.utils.genAnimate("fire_net","fish_net_16","fish_net_16_eff_",1/30),r=c.addComponent(cc.Animation);r.addClip(a),c.setScale(2.2),c.active=!1,c.runAction(cc.sequence(cc.delayTime(4/30),cc.show(),cc.callFunc(function(){r.play(a.name),r.on(cc.Animation.EventType.FINISHED,function(){r.targetOff(this),c.removeFromParent()}.bind(this),this)}.bind(this))))},t}(c),u=function(e){function t(t,i,n,s,o,c,a){return e.call(this,t,i,n,s,o,c,a)||this}return __extends(t,e),t.prototype.genSprite=function(){this.spBullet=n.utils.createSprite("fish_bullet_17","fire_net")},t.prototype.castNet=function(){var e=n.utils.createSprite("fish_net_17_01","fire_net"),t=n.utils.createSprite("fish_net_17_01","fire_net"),i=n.utils.createSprite("fish_net_17_02","fire_net"),s=n.utils.createSprite("fish_net_17_03","fire_net");t.color=cc.color(0,0,0),t.opacity=100;var o=new cc.Node;i.runAction(cc.rotateBy(20/30,360)),e.runAction(cc.rotateBy(20/30,-90)),t.runAction(cc.rotateBy(20/30,-90)),s.runAction(cc.sequence(cc.scaleTo(0,.8),cc.scaleTo(20/30,1.2),cc.rotateBy(20/30,120))),o.addChild(t),o.addChild(s),o.addChild(e),o.addChild(i),o.runAction(cc.sequence(cc.scaleTo(0,.2),cc.scaleTo(2/30,1.3),cc.scaleTo(2/30,.9),cc.scaleTo(2/30,1),cc.delayTime(2/30),cc.fadeOut(14/30),cc.removeSelf())),this.bulletNode.addChild(o);var c=n.utils.createSprite("fish_net_17_eff_01","fire_net");this.bulletNode.addChild(c);var a=n.utils.genAnimate("fire_net","fish_net_17","fish_net_17_eff_",1/30),r=c.addComponent(cc.Animation);r.addClip(a),c.setScale(2.2),c.active=!1,c.runAction(cc.sequence(cc.delayTime(4/30),cc.show(),cc.callFunc(function(){r.play(a.name),r.on(cc.Animation.EventType.FINISHED,function(){r.targetOff(this),c.removeFromParent()}.bind(this),this)}.bind(this))))},t}(c),m=function(e){function t(t,i,n,s,o,c,a){return e.call(this,t,i,n,s,o,c,a)||this}return __extends(t,e),t.prototype.genSprite=function(){this.spBullet=new cc.Node;var e=n.utils.createSprite("fish_bullet_18_01","fire_net"),t=n.utils.createSprite("fish_bullet_18_02","fire_net");this.spBullet.addChild(t),this.spBullet.addChild(e)},t.prototype.castNet=function(){var e=n.utils.createSprite("fish_net_18_01","fire_net"),t=n.utils.createSprite("fish_net_18_01","fire_net"),i=n.utils.createSprite("fish_net_18_02","fire_net"),s=n.utils.createSprite("fish_net_18_03","fire_net");t.color=cc.color(0,0,0),t.opacity=100;var o=new cc.Node;i.runAction(cc.rotateBy(20/30,360)),e.runAction(cc.rotateBy(20/30,-90)),t.runAction(cc.rotateBy(20/30,-90)),s.runAction(cc.sequence(cc.scaleTo(0,.8),cc.scaleTo(20/30,1.2),cc.rotateBy(20/30,120))),o.addChild(t),o.addChild(s),o.addChild(e),o.addChild(i),o.runAction(cc.sequence(cc.scaleTo(0,.2),cc.scaleTo(2/30,1.3),cc.scaleTo(2/30,.9),cc.scaleTo(2/30,1),cc.delayTime(2/30),cc.fadeOut(14/30),cc.removeSelf())),this.bulletNode.addChild(o);var c=n.utils.createSprite("fish_net_18_eff_01","fire_net");this.bulletNode.addChild(c);var a=n.utils.genAnimate("fire_net","fish_net_18","fish_net_18_eff_",1/30),r=c.addComponent(cc.Animation);r.addClip(a),c.active=!1,c.runAction(cc.sequence(cc.delayTime(4/30),cc.show(),cc.callFunc(function(){r.play(a.name),r.on(cc.Animation.EventType.FINISHED,function(){r.targetOff(this),c.removeFromParent()}.bind(this),this)}.bind(this))))},t}(c),g=function(e){function t(t,i,n,s,o,c,a){return e.call(this,t,i,n,s,o,c,a)||this}return __extends(t,e),t.prototype.genSprite=function(){this.spBullet=n.utils.createSprite("fish_bullet_19","fire_net")},t.prototype.castNet=function(){var e=n.utils.createSprite("fish_net_19_01","fire_net"),t=n.utils.createSprite("fish_net_19_01","fire_net"),i=n.utils.createSprite("fish_net_19_02","fire_net"),s=n.utils.createSprite("fish_net_19_03","fire_net");t.color=cc.color(0,0,0),t.opacity=100;var o=new cc.Node;i.runAction(cc.rotateBy(20/30,360)),e.runAction(cc.rotateBy(20/30,-90)),t.runAction(cc.rotateBy(20/30,-90)),s.runAction(cc.sequence(cc.scaleTo(0,.8),cc.scaleTo(20/30,1.2),cc.rotateBy(20/30,120))),o.addChild(t),o.addChild(s),o.addChild(e),o.addChild(i),o.runAction(cc.sequence(cc.scaleTo(0,.2),cc.scaleTo(2/30,1.3),cc.scaleTo(2/30,.9),cc.scaleTo(2/30,1),cc.delayTime(2/30),cc.fadeOut(14/30),cc.removeSelf())),this.bulletNode.addChild(o);var c=n.utils.createSprite("fish_net_19_eff_01","fire_net");this.bulletNode.addChild(c);var a=n.utils.genAnimate("fire_net","fish_net_19","fish_net_19_eff_",1/30),r=c.addComponent(cc.Animation);r.addClip(a),c.active=!1,c.runAction(cc.sequence(cc.delayTime(4/30),cc.show(),cc.callFunc(function(){r.play(a.name),r.on(cc.Animation.EventType.FINISHED,function(){r.targetOff(this),c.removeFromParent()}.bind(this),this)}.bind(this))))},t}(c),v=function(){function e(){}return e.create=function(e,t,i,n,s,o,c){switch(n){case 1:return new a(e,t,i,n,s,o,c);case 2:return new r(e,t,i,n,s,o,c);case 11:return new h(e,t,i,n,s,o,c);case 12:return new l(e,t,i,n,s,o,c);case 13:return new d(e,t,i,n,s,o,c);case 14:return new _(e,t,i,n,s,o,c);case 15:return new f(e,t,i,n,s,o,c);case 16:return new p(e,t,i,n,s,o,c);case 17:return new u(e,t,i,n,s,o,c);case 18:return new m(e,t,i,n,s,o,c);case 19:return new g(e,t,i,n,s,o,c)}return null},e}();i.BulletFactory=v,cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../scene/fish_scene":"fish_scene"}],fish_change_multiple:[function(e,t,i){"use strict";cc._RF.push(t,"59113A3a6VEXY6X0QSGFp70","fish_change_multiple"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../model/fish_model"),o=e("../../../assets_manager"),c=e("../../define/fish_event_types"),a=e("../../define/fish_msg_types"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=e("../../buffer/fish_buffer"),d=function(e){function t(){var t=e.call(this)||this;return t.tips=null,t.tipsText=null,t.btnAddMultiple=null,t.btnSubMultiple=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=n.utils.getRelativeSeat(s.model.table.seatId),t=n.utils.getSeatPosition(e),i=cc.instantiate(o.AssetsManager.getRes("prefabs/change_multiple"));this.btnAddMultiple=cc.find("btnAddMultiple",i),this.btnSubMultiple=cc.find("btnSubMultiple",i),this.tips=cc.find("tips",i),this.tipsText=cc.find("tips/tipsText",i),this.btnAddMultiple.on(cc.Node.EventType.TOUCH_END,this.onBtnAddMultiple,this),this.btnSubMultiple.on(cc.Node.EventType.TOUCH_END,this.onBtnSubMultiple,this),i.setPosition(t),this.node.addChild(i),s.model.table.isMatch&&(this.btnAddMultiple.active=!1,this.btnSubMultiple.active=!1),n.evtCenter.on(c.evts.EVT_GOLD_INFO_CHG,this.onEventPlayerInfoChange,this),n.evtCenter.on(c.evts.EVT_MULTIPLE_CHANGED,this.onEventMultipleChanged,this),n.evtCenter.on(c.evts.EVT_GOLD_BUF_FINISHED,this.onEventMultipleChanged,this)},t.prototype.onDestroy=function(){n.evtCenter.off(c.evts.EVT_GOLD_INFO_CHG,this.onEventPlayerInfoChange,this),n.evtCenter.off(c.evts.EVT_MULTIPLE_CHANGED,this.onEventMultipleChanged,this),n.evtCenter.off(c.evts.EVT_GOLD_BUF_FINISHED,this.onEventMultipleChanged,this)},t.prototype.onBtnSubMultiple=function(){cc.audioEngine.playEffect(o.AssetsManager.getRes("sound/multiple_change"),!1);var e={cmd:a.msgs.CMD_TABLE_CALL,params:{action:"gchg",userId:s.ME.userId,clientId:r.AccountInfo.clientId,gameId:28,roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId,gLv:this._prevWeapon()}};h.tcp.send(e)},t.prototype.onBtnAddMultiple=function(){cc.audioEngine.playEffect(o.AssetsManager.getRes("sound/multiple_change"),!1);var e=this._nextWeapon();if(e>s.ME.playerInfo.maxWeapon.weaponId){var t=n.configTable.weapon[e];n.evtCenter.emit(c.evts.EVT_SET_MULTIPLE,s.model.table.seatId,t.multiple,!0)}else{var i={cmd:a.msgs.CMD_TABLE_CALL,params:{action:"gchg",userId:s.ME.userId,clientId:r.AccountInfo.clientId,gameId:28,roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId,gLv:e}};h.tcp.send(i)}},t.prototype._setTimer=function(){if(this.ishold){this.ishold=!1;var e=s.model.table.minMultiple;this._sendChangeMultiple(e)}},t.prototype.onEventPlayerInfoChange=function(e,t){if(e==s.ME.userId){var i=s.ME.playerInfo;t>0&&(t<i.curWeapon.costGold?this._startTick():t>=i.curWeapon.costGold&&(this._stopTick(),i.curWeapon.weaponId<s.model.table.minMultiple&&t>=s.model.table.minCostGold&&this._sendChangeMultiple(s.model.table.minMultiple)))}},t.prototype.onEventMultipleChanged=function(e){e!=s.model.table.seatId||l.buffer.gameGold.gold<=0||(l.buffer.gameGold.gold>=s.ME.playerInfo.curWeapon.costGold?this._stopTick():this._startTick())},t.prototype._startTick=function(){this.tips.active=!0,this.countdown=3,this._tick(this.countdown),this.unschedule(this._tick),this.schedule(this._tick,1,2)},t.prototype._stopTick=function(){this.tips.active=!1,this.unschedule(this._tick)},t.prototype._tick=function(e){this.countdown>0?(this.tipsText.getComponent(cc.Label).string="\u91d1\u5e01\u4e0d\u8db3\uff0c\u5c06\u81ea\u52a8\u6362\u70ae "+this.countdown,--this.countdown):(this.tips.active=!1,this._changeMultiple())},t.prototype._changeMultiple=function(){for(var e=s.ME.playerInfo.curWeapon.weaponId;;){var t=n.configTable.weapon[e-1];if(!t)break;if(--e,t.weapon_cost<=l.buffer.gameGold.gold)break}e!=s.ME.playerInfo.curWeapon.weaponId&&this._sendChangeMultiple(e)},t.prototype._sendChangeMultiple=function(e){var t={cmd:a.msgs.CMD_TABLE_CALL,params:{action:"gchg",userId:s.ME.userId,clientId:r.AccountInfo.clientId,gameId:28,roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId,gLv:e}};h.tcp.send(t)},t.prototype._prevWeapon=function(){var e=s.ME.playerInfo.curWeapon,t=s.ME.playerInfo.maxWeapon,i=s.model.table.minMultiple,n=t.weaponId,o=e.weaponId<=i?n:e.weaponId-1;return e.change(o),o},t.prototype._nextWeapon=function(){var e=s.ME.playerInfo.curWeapon,t=s.ME.playerInfo.maxWeapon,i=s.model.table.minMultiple,n=Math.min(t.weaponId+1,t.maxWeaponId),o=e.weaponId>=n?i:e.weaponId+1;return e.change(o),o},t}(cc.Component);i.ChangeMultiple=d,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_channel_reward_activity:[function(e,t,i){"use strict";cc._RF.push(t,"24be5ecSutAx5rfGuIFpEWk","fish_channel_reward_activity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../../xmen_interface"),c=e("../../scene/fish_scene"),a=e("../../define/fish_event_types"),r=function(e){function t(){var t=e.call(this)||this;return t.cellSize=null,t.tableView=null,t.tableViewLayer=null,t.resultData=n.model.activity.channelRewardData,t.myRank=null,t.myGameID=null,t.myChips=null,t.activity_channel_sprite=null,t.nodeInfo=null,t.shuomingSprite=null,t.csbNode=cc.instantiate(s.AssetsManager.getRes("prefabs/channel_reward_activity")),t.tableViewLayer=cc.find("archor/tableViewLayer",t.csbNode),t.myRank=cc.find("archor/myRank",t.csbNode),t.myGameID=cc.find("archor/myGameID",t.csbNode),t.myChips=cc.find("archor/myChips",t.csbNode),t.activity_channel_sprite=cc.find("archor/activity_channel_sprite",t.csbNode),t.nodeInfo=cc.find("archor/nodeInfo",t.csbNode),t.shuomingSprite=cc.find("archor/nodeInfo/shuomingSprite",t.csbNode),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode);var e=o.xmen.SystemInfo.getConfig().main_channel_default;"leshiphone"==e?this.activity_channel_sprite.getComponent(cc.Sprite).spriteFrame=s.AssetsManager.getRes("img/nopack/fish_channelReward_leshi"):"huawei"==e&&(this.activity_channel_sprite.getComponent(cc.Sprite).spriteFrame=s.AssetsManager.getRes("img/nopack/fish_channelReward_huawei")),this.onEventChannelReward()},t.prototype.onEventChannelReward=function(){this.cellSize=cc.size(276,26),-1!=n.model.activity.myChannelRank.rank?this.myRank.getComponent(cc.Label).string=n.model.activity.myChannelRank.rank:this.myRank.getComponent(cc.Label).string="\u672a\u4e0a\u699c";var e=i.subStringChinese(n.ME.name,14,"...");this.myGameID.getComponent(cc.Label).string=e,this.myChips.getComponent(cc.Label).string=n.model.activity.myChannelRank.score},t.prototype.onDestroy=function(){},t.prototype.onBtnGotoShoping=function(e){n.model.dailytask.isLobby=!0,cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),c.evtCenter.emit(a.evts.EVT_POPUP_SHOP_WINDOW,n.model.shop.SHOP_GOLD)},t.prototype.onBtnActivityRule=function(){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this.nodeInfo.active=!0;var e=o.xmen.SystemInfo.getConfig().main_channel_default;"leshiphone"==e?this.shuomingSprite.getComponent(cc.Sprite).spriteFrame=s.AssetsManager.getRes("games/fish/fish/img/nopack/fish_channelContent_leshi"):"huawei"==e&&(this.shuomingSprite.getComponent(cc.Sprite).spriteFrame=s.AssetsManager.getRes("games/fish/fish/img/nopack/fish_channelContent_huawei"))},t.prototype.onBtnCloseShuoming=function(){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this.nodeInfo.active=!1},t}(cc.Component);i.ChannelRewardActivity=r;var h=function(e){function t(){var t=e.call(this)||this;return t.rank=null,t.gameID=null,t.chips=null,t.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/channel_reward_cell")),t.addChild(t.csbRoot),t.rank=cc.find("panel_bg/rank",t.csbRoot),t.gameID=cc.find("panel_bg/gameID",t.csbRoot),t.chips=cc.find("panel_bg/chips",t.csbRoot),t}return __extends(t,e),t.prototype.setCellData=function(e,t){this.rank.getComponent(cc.Label).string=t.rank,this.chips.getComponent(cc.Label).string=t.detail.rankValue;var n=i.subStringChinese(t.detail.name,14,"...");this.gameID.getComponent(cc.Label).string=n},t}(cc.Node);i.ChannelRewardCell=h,i.subStringChinese=function(e,t,i){var n="",s=null,o=/[^\u4e00-\u9fa5\uffe5]/,c=0,a=0,r=0,h=!1;for(e+="",r=0;r<e.length;r++){if(s=e[r],!(c+(a=o.test(s)?1:2)<=t)){h=!0;break}c+=a}if(!h)return e;for(a=0,c=0,r=0;r<e.length&&(s=e[r],c+(a=o.test(s)?1:2)<=(i?t-2:t));r++)n+=s,c+=a;return i&&h&&(n+="..."),n},cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_charge_crystal:[function(e,t,i){"use strict";cc._RF.push(t,"4e754Aa23VATo/K7eWpFxfM","fish_charge_crystal"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../scene/fish_scene_login"),r=e("../../define/fish_msg_types"),h=e("../../logic/fish_tcp"),l=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.btnReceive=null,t.btn_label=null,t.loadingBar=null,t.label_gress=null,t.label_time=null,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/charge_crystal_activity")),t.label_gress=cc.find("archor/label_gress",t.csbNode),t.label_time=cc.find("archor/label_time",t.csbNode),t.btn_label=cc.find("archor/btnReceive/btn_label",t.csbNode),t.btnReceive=cc.find("archor/btnReceive",t.csbNode),t}return __extends(t,e),t.prototype.onLoad=function(){var e=n.AssetsManager.getRes("img/atlas/scale9_8888"),t=n.AssetsManager.getRes("img/atlas/activity");this.node.addChild(this.csbNode),this.csbNode.getComponent(cc.Animation).play("shake").wrapMode=cc.WrapMode.Loop,this.label_gress.getComponent(cc.Label).string=s.model.activity.crystal_rmbs+"/68",this.label_time.getComponent(cc.Label).string=""+s.model.activity.crystal_time,this.loadingBar.getComponent(cc.ProgressBar).progress=s.model.activity.crystal_rmbs/68*100/100,0==s.model.activity.crystal_rw?0==s.model.activity.crystal?(this.btnReceive.getComponent(cc.Button).enabled=!1,this.btnReceive.getComponent(cc.Button).normalSprite=e.getSpriteFrame("fish_button_disabled"),this.btn_label.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_activity_notget")):(this.btnReceive.getComponent(cc.Button).enabled=!0,this.btnReceive.getComponent(cc.Button).normalSprite=e.getSpriteFrame("fish_button_yellow"),this.btn_label.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_guizulibao_20")):(this.btnReceive.getComponent(cc.Button).enabled=!1,this.btnReceive.getComponent(cc.Button).normalSprite=e.getSpriteFrame("fish_button_disabled"),this.btn_label.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_common_received")),o.evtCenter.on(c.evts.EVT_GET_CRYSTAL_REWARD,this.onEventUpdateView,this)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_GET_CRYSTAL_REWARD,this.onEventUpdateView,this)},t.prototype.onEventUpdateView=function(){var e=n.AssetsManager.getRes("img/atlas/scale9_8888"),t=n.AssetsManager.getRes("img/atlas/activity");this.btnReceive.getComponent(cc.Button).enabled=!1,this.btnReceive.getComponent(cc.Button).normalSprite=e.getSpriteFrame("fish_button_disabled"),this.btn_label.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_common_received")},t.prototype.onBtnReceive=function(e){if(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.model.dailytask.isLobby){var t={cmd:r.msgs.CMD_FISH_ACTIVITY,params:{gameId:28,userId:s.ME.userId,action:"reward",activityId:"charge_crystal",clientId:a.AccountInfo.clientId}};h.tcp.send(t)}else{var i={cmd:r.msgs.CMD_TABLE_CALL,params:{action:"activity_reward",gameId:28,userId:s.ME.userId,activityId:"charge_crystal",clientId:a.AccountInfo.clientId,roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId}};h.tcp.send(i)}},t}(cc.Component);i.ChargeCrystal=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_chat_txt_table_cell:[function(e,t,i){"use strict";cc._RF.push(t,"412b6+DFX9K5Y7Bs8vskej9","fish_chat_txt_table_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=function(e){function t(){var t=e.call(this)||this;return t.chatHistoryText=null,t.chatHistorySp=null,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/chat_cell")),t.chatHistoryText=cc.find("chatHistoryText",t.csbRoot),t.chatHistorySp=cc.find("chatHistorySp",t.csbRoot),t.addChild(t.csbRoot),t}return __extends(t,e),t.prototype.setSource=function(e,t,i){if(this.chatHistoryText.setContentSize(i),1==e.isFace){var s=n.AssetsManager.getRes("img/atlas/chat");this.chatHistorySp.active=!0;var o=e.name.split("$$")[0],c=e.name.split("$$")[1];this.chatHistoryText.getComponent(cc.Label).string=o,c&&(this.chatHistorySp.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame(c))}else this.chatHistorySp.active=!1,this.chatHistoryText.getComponent(cc.Label).string=e.name},t}(cc.Node);i.ChatTxtTableCell=s,cc._RF.pop()},{"../../../assets_manager":"assets_manager"}],fish_chat_txt_table:[function(e,t,i){"use strict";cc._RF.push(t,"099d6U9sMVHkatJwDPppf0D","fish_chat_txt_table"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_chat_txt_table_cell"),s=e("../../../assets_manager"),o=e("../../define/fish_msg_types"),c=e("../../model/fish_model"),a=e("../../logic/fish_tcp"),r=e("../../scene/fish_scene"),h=e("../../define/fish_event_types"),l=function(e){function t(t,i,n){var s=e.call(this)||this;return s.cellSize=null,s.tableView=null,s.tableViewLayer=n,s.resultData=i,s.cellCount=i.length,s._chatType=null,s._self=t,s._generaTableView(),s}return __extends(t,e),t.prototype._generaTableView=function(){this.tableView||(this.cellSize=cc.size(240,60),this.tableView=this.tableViewLayer.getChildByName("tableView").getComponent(cc.ScrollView),this.tableViewReload())},t.prototype.tableCellSizeForIndex=function(e){var t=this.cellSize,i=this.resultData[e],n=1==i.isFace?i.name.split("$$")[0]:i.name;if(""!=n){var s=n.length<=24?60:20+20*Math.ceil(n.length/12);t.height=s}return cc.log("tableCellSize: w:%i h:%i index:%i length:%i str:%s",t.width,t.height,e,n.length,n),t},t.prototype.tableViewReload=function(){this.tableView.content.removeAllChildren();for(var e=0;e<this.resultData.length;e++){var t=new n.ChatTxtTableCell;t.setSource(this.resultData[e],e,this.tableCellSizeForIndex(e)),t.setAnchorPoint(0,0),t.setContentSize(this.cellSize),t.name=e+"",t.on(cc.Node.EventType.TOUCH_END,this.tableCellTouch,this),this.tableView.content.addChild(t)}},t.prototype.tableCellTouch=function(e){if(cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),"msg"==this._chatType){if(this._self.getSendStatus()){var t=parseInt(e.currentTarget.name),i=this.resultData[t];if(""!=i){var n={cmd:o.msgs.CMD_TABLE_CHAT,params:{gameId:28,userId:c.ME.userId,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId,msg:i.nameKey,isFace:4}};a.tcp.send(n),this._self.sendTimeStaute=(new Date).getTime()}}else r.evtCenter.emit(h.evts.EVT_MSG_TIPS,"\u60a8\u7684\u53d1\u8a00\u592a\u9891\u7e41\u4e86",2);this._self.csbRoot.getComponent(cc.Animation).play("hideChat")}},t.prototype.removeMyself=function(){this._self.node.removeFromParent(!0)},t}(cc.Node);i.ChatTxtTable=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_chat_txt_table_cell":"fish_chat_txt_table_cell"}],fish_chat:[function(e,t,i){"use strict";cc._RF.push(t,"e5c4bfViF1JZrSUDVcb6fVz","fish_chat"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../fish_view"),r=e("./fish_user_info_chat"),h=e("../../logic/fish_tcp"),l=e("../../define/fish_msg_types"),d=e("./fish_chat_txt_table"),_=e("../../define/fish_consts"),f=e("../../fish"),p=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t._chatHistoryInfo=[],t._chatMsgInfo=[],t.chat_text=null,t.chat_editBox_bg=null,t.fishChat=null,t._editBox=null,t.btnChat=null,t.btnHeadImageChat=null,t.btnMsgChat=null,t.btnHistoryChat=null,t.chatTableView=null,t.chatTableViewLayer=null,t.msgNode=null,t.headNode=null,t.userInfoCsb=null,t.btnExpression1=null,t.btnExpression2=null,t.btn1Text=null,t.btn2Text=null,t.leaveSeatId=null,t.expressionChatLayer=null,t.sendTimeStaute=null,t.seatBtn1=null,t.seatBtn2=null,t.seatBtn3=null,t.seatBtn4=null,t.sendFlag=!0,t.btnHide=null,t.chatLockStatus=!0,t}return __extends(t,e),t.prototype.onLoad=function(){this.setChatShotPhrase(),this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/chat")),f.fish.adapterScreen(this.csbRoot),this.btnChat=cc.find("btnChat",this.csbRoot),this.btnHide=cc.find("btnHide",this.csbRoot),this.seatBtn1=cc.find("seatBtn1",this.csbRoot),this.seatBtn2=cc.find("seatBtn2",this.csbRoot),this.seatBtn3=cc.find("seatBtn3",this.csbRoot),this.seatBtn4=cc.find("seatBtn4",this.csbRoot),this.chat_text=cc.find("fishChat/chat_text",this.csbRoot),this.chat_editBox_bg=cc.find("fishChat/chat_editBox_bg",this.csbRoot),this.fishChat=cc.find("fishChat",this.csbRoot),this.btnHeadImageChat=cc.find("fishChat/btnHeadImageChat",this.csbRoot),this.btnMsgChat=cc.find("fishChat/btnMsgChat",this.csbRoot),this.btnHistoryChat=cc.find("fishChat/btnHistoryChat",this.csbRoot),this.headNode=cc.find("fishChat/headNode",this.csbRoot),this.expressionChatLayer=cc.find("fishChat/headNode/expressionChatLayer",this.csbRoot),this.msgNode=cc.find("fishChat/msgNode",this.csbRoot),this.chatTableViewLayer=cc.find("fishChat/msgNode/chatTableViewLayer",this.csbRoot),cc.find("fishChat/btnSend",this.csbRoot).on("click",this.onBtnChatSend,this),this.btnHeadImageChat.on("click",this.onBtnExpressionChat,this),this.btnMsgChat.on("click",this.onBtnMsgChat,this),this.btnHistoryChat.on("click",this.onBtnHistoryChat,this),this.btnChat.on(cc.Node.EventType.TOUCH_END,this.onBtnChat,this),this.btnHide.on(cc.Node.EventType.TOUCH_END,this.onBtnHide,this),this.seatBtn1.on(cc.Node.EventType.TOUCH_END,this.onBtnSeat1,this),this.seatBtn2.on(cc.Node.EventType.TOUCH_END,this.onBtnSeat2,this),this.seatBtn3.on(cc.Node.EventType.TOUCH_END,this.onBtnSeat3,this),this.seatBtn4.on(cc.Node.EventType.TOUCH_END,this.onBtnSeat4,this),this.node.addChild(this.csbRoot),this.initEditBox(),s.evtCenter.on(o.evts.EVT_TABLE_CHAT,this.onEventTableChat,this),s.evtCenter.on(o.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this),s.evtCenter.on(o.evts.EVT_SEAT_BTN_TYPE,this.setSeatBtnClick,this),s.evtCenter.on(o.evts.EVT_TABLE_SMILE,this.onEventTableSmile,this),this.setSeatBtnClick(),this.setChatLockStatus(),c.model.table.isMatch&&(this.btnChat.active=!1)},t.prototype.onDestroy=function(){s.evtCenter.off(o.evts.EVT_TABLE_CHAT,this.onEventTableChat,this),s.evtCenter.off(o.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this),s.evtCenter.off(o.evts.EVT_SEAT_BTN_TYPE,this.setSeatBtnClick,this),s.evtCenter.off(o.evts.EVT_TABLE_SMILE,this.onEventTableSmile,this)},t.prototype.setChatLockStatus=function(){this.scheduleOnce(function(){this.chatLockStatus=!0}.bind(this),300)},t.prototype.initEditBox=function(){this._editBox=cc.find("fishChat/_editBox",this.csbRoot).getComponent(cc.EditBox)},t.prototype.onBtnChat=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.csbRoot.getComponent(cc.Animation).play("showChat"),this._setTableChatBtnState()},t.prototype.onBtnHide=function(e){this.csbRoot.getComponent(cc.Animation).play("hideChat")},t.prototype.onBtnChatSend=function(e){if(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),cc.log("onBtnChatSend"),this.chatLockStatus){if(this.getSendStatus()){if(""!=this._editBox.string){var t={cmd:l.msgs.CMD_TABLE_CHAT,params:{gameId:28,userId:c.ME.userId,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId,msg:this._editBox.string,isFace:0}};h.tcp.send(t),this.sendTimeStaute=(new Date).getTime()}}else s.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u60a8\u7684\u53d1\u8a00\u592a\u9891\u7e41\u4e86",2);this._editBox.string="",this.csbRoot.getComponent(cc.Animation).play("hideChat")}else s.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u8fdb\u5165\u623f\u95f4\u540e5\u5206\u949f\u53ef\u4ee5\u53d1\u9001\u804a\u5929",2)},t.prototype.editBoxReturn=function(e){},t.prototype.onEventTableChat=function(e){var t=c.model.table.getPlayerInfo(e.seatId),i={},n="";4==e.isFace?n=s.configTable.languageKey[e.msg].string_zhcn:0==e.isFace?n=e.msg:1==e.isFace&&(n="$$fish_emoxiao_"+e.msg+".png"),i.name=t.name+": "+n,i.time=(new Date).getTime(),i.isFace=e.isFace,this._chatHistoryInfo.unshift(i);var o=s.utils.getRelativeSeat(e.seatId);this.setbubbleTextShow(e.msg,o,e.isFace,e.seatId)},t.prototype.setbubbleTextShow=function(e,t,i,n){var o=s.utils.getSeatPosition(t),c=null,a=f.fish.createScale9Sprite("img/atlas/scale9_8888","fish_liaotian_19",cc.rect(32,32,15,15)),r=s.utils.createSprite("fish_liaotian_20","chat");t>2?(a.scaleY*=-1,r.scaleY*=-1,c=cc.v2(o.x,o.y-170)):c=cc.v2(o.x,o.y+170);var h=new cc.Node;h.setPosition(c);var l=null;if(0==i){var d=this.myWrap(e,12);(l=(new cc.Node).addComponent(cc.Label)).string=d,l.fontFamily="Bold",l.fontSize=18,l.lineHeight=18.5,l.horizontalAlign=cc.Label.HorizontalAlign.CENTER,l.verticalAlign=cc.Label.VerticalAlign.CENTER,l.node.color=cc.color(255,255,255),h.addChild(a),h.addChild(r)}else{if(1==i){var _=s.utils.createSprite("fish_emo_"+e+"_01","chat");_.setScale(1.5),h.addChild(_);var p=s.utils.getChatNormalAnimation(e),u=_.addComponent(cc.Animation);return u.addClip(p),u.play(p.name).wrapMode=cc.WrapMode.Loop,this.node.getParent().addChild(h),void h.runAction(cc.sequence(cc.delayTime(4.5),cc.removeSelf()))}if(4==i){var m=s.configTable.languageKey[e].string_zhcn;d=this.myWrap(m,12);(l=(new cc.Node).addComponent(cc.Label)).string=d,l.fontFamily="Bold",l.fontSize=18,l.lineHeight=18.5,l.horizontalAlign=cc.Label.HorizontalAlign.CENTER,l.verticalAlign=cc.Label.VerticalAlign.CENTER,l.node.color=cc.color(255,255,255),h.addChild(a),h.addChild(r)}}h.addChild(l.node),this.node.getParent().getParent().addChild(h),h.zIndex=100;var g=l.node.getContentSize(),v=cc.size(g.width+30,g.height+30),b=a.getContentSize();v.width<b.width&&(v.width=b.width),v.height<b.height&&(v.height=b.height),a.setContentSize(v),t>2?(r.setPosition(0,.53*a.getContentSize().height),l.node.setPosition(0,l.node.getPosition().y-17)):(r.setPosition(0,.53*-a.getContentSize().height),l.node.setPosition(0,l.node.getPosition().y-11)),h.runAction(cc.sequence(cc.delayTime(4.5),cc.removeSelf()))},t.prototype.myWrap=function(e,t){for(var i=0,n="",s=[];;){if(s.push(e.substr(i,t)),i+t>e.length)break;i+=t}for(var o=0;o<s.length;++o)n=n+s[o]+"\n";return n},t.prototype.onBtnExpressionChat=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this._setTableChatBtnState()},t.prototype.onBtnMsgChat=function(e){var t=n.AssetsManager.getRes("img/atlas/scale9_8888");cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.msgNode.active=!0,this.headNode.active=!1,this.chooseChatPage("msg",this._chatMsgInfo),this.btnHeadImageChat.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_liaotian_3"),this.btnMsgChat.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_liaotian_6"),this.btnHistoryChat.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_liaotian_3")},t.prototype.onBtnHistoryChat=function(e){var t=n.AssetsManager.getRes("img/atlas/scale9_8888");cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.msgNode.active=!0,this.headNode.active=!1,this.chooseChatPage("history",this._chatHistoryInfo),this.btnHeadImageChat.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_liaotian_3"),this.btnMsgChat.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_liaotian_5"),this.btnHistoryChat.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_liaotian_4")},t.prototype.chooseChatPage=function(e,t){this.chatTableView?(this.chatTableView.resultData=t,this.chatTableView.cellCount=t.length,this.chatTableView._chatType=e,this.chatTableView.tableViewReload()):(this.chatTableView=new d.ChatTxtTable(this,t,this.chatTableViewLayer),this.chatTableView._chatType=e,this.node.addChild(this.chatTableView))},t.prototype.setSeatBtnClick=function(){for(var e=[this.seatBtn1,this.seatBtn2,this.seatBtn3,this.seatBtn4],t=1;t<5;t++){var i=c.model.table.getPlayerInfo(t);if(i){var n=s.utils.getRelativeSeat(i.seatId);e.splice(n-1,1)}}},t.prototype.onBtnSeat1=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),c.model.guide.newbieInGameFinished&&(c.model.table.seatId<=2?this.setUserInfoBySeatId(1):this.setUserInfoBySeatId(3))},t.prototype.onBtnSeat2=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),c.model.guide.newbieInGameFinished&&(c.model.table.seatId<=2?this.setUserInfoBySeatId(2):this.setUserInfoBySeatId(4))},t.prototype.onBtnSeat3=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),c.model.guide.newbieInGameFinished&&(c.model.table.seatId<=2?this.setUserInfoBySeatId(3):this.setUserInfoBySeatId(1))},t.prototype.onBtnSeat4=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),c.model.guide.newbieInGameFinished&&(c.model.table.seatId<=2?this.setUserInfoBySeatId(4):this.setUserInfoBySeatId(2))},t.prototype.setUserInfoBySeatId=function(e){this.leaveSeatId=e;var t=c.model.table.getPlayerInfo(e);if(e!=c.model.table.seatId&&t){this.userInfoCsb&&(this.userInfoCsb.removeMySelf(),this.userInfoCsb=null);t=c.model.table.getPlayerInfo(e);var i=s.utils.getSeatPosition(s.utils.getRelativeSeat(e)),n=null;n=i.y>=390?cc.v2(i.x,i.y-250):cc.v2(i.x,i.y+250),this.userInfoCsb=(new cc.Node).addComponent(r.TableChatUserInfo),this.userInfoCsb.ctor(this,e),this.userInfoCsb.node.setPosition(n),this.node.addChild(this.userInfoCsb.node,a.View.POPUP)}},t.prototype.setChatShotPhrase=function(){var e=s.configTable.experssion;for(var t in e){if(2==s.configTable.experssion[t].expression_type){var i=s.configTable.languageKey[s.configTable.experssion[t].expression_text].string_zhcn,n={};n.name=i,n.nameKey=s.configTable.experssion[t].expression_text,this._chatMsgInfo.push(n)}}},t.prototype.onEventPlayerLeave=function(e,t){this.leaveSeatId==t&&this.userInfoCsb&&(this.userInfoCsb.removeMySelf(),this.userInfoCsb=null)},t.prototype.updateExpressionChatBtn=function(){this.expressionChatLayer.removeAllChildren();for(var e=this.expressionChatLayer.getContentSize(),t=e.width/3,i=e.height/4,n=null,o=1;o<=9;o++){n="fish_emoxiao_"+o;var c=s.utils.createSprite(n,"chat").addComponent(cc.Button);c.node.setScale(1.3),c.node.name=o+"",c.transition=cc.Button.Transition.SCALE,c.zoomScale=1.1,c.node.on("click",this.onMotionClick,this);var a=(o-1)%3+.5,r=2.8-1.3*(parseInt((o-1)/3+"",10)||0)+.5;c.node.setPosition(cc.v2(a*t,r*i)),this.expressionChatLayer.addChild(c.node)}},t.prototype.onMotionClick=function(e){var t=e.node.name;if(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.sendFlag){if(this.getSendStatus()){var i={cmd:l.msgs.CMD_TABLE_CHAT,params:{gameId:28,userId:c.ME.userId,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId,msg:t,isFace:1}};h.tcp.send(i),this.sendTimeStaute=(new Date).getTime()}else s.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u60a8\u7684\u53d1\u8a00\u592a\u9891\u7e41\u4e86",2);this.csbRoot.getComponent(cc.Animation).play("hideChat")}else this.sendFlag=!0},t.prototype._setTableChatBtnState=function(){var e=n.AssetsManager.getRes("img/atlas/scale9_8888");this.msgNode.active=!1,this.headNode.active=!0,this.btnHeadImageChat.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_liaotian_4"),this.btnMsgChat.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_liaotian_5"),this.btnHistoryChat.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_liaotian_3"),this.updateExpressionChatBtn()},t.prototype.getSendStatus=function(){var e=(new Date).getTime();return!this.sendTimeStaute||!(Math.floor((e-this.sendTimeStaute)/1e3)<=4)},t.prototype.onEventTableSmile=function(e){var t=s.utils.getSeatPosition(s.utils.getRelativeSeat(e.seatId)),i=s.utils.getSeatPosition(s.utils.getRelativeSeat(e.toSeatId));c.model.table.getPlayerInfo(e.toSeatId).charm=e.toCharm;var n=c.model.table.getPlayerInfo(e.seatId);n.charm=e.fromCharm,n.userId==c.ME.userId&&(c.ME.charm=e.fromCharm),s.evtCenter.emit(o.evts.EVT_INFO_CHANGE),this.expressionAnimation(this.node,t,i,_.ExpressionCsbById[e.smileId],e.smileId,e.seatId,e.fromAdd,e.toAdd)},t.prototype.expressionAnimation=function(e,t,i,o,c,a,r,h){var l=null,d=null;i.y>=300?(l=cc.v2(i.x,i.y-60),d=cc.v2(i.x,i.y-120)):(l=cc.v2(i.x,i.y+60),d=cc.v2(i.x,i.y+120));var _=cc.instantiate(n.AssetsManager.getRes("prefabs/"+o));_.setPosition(t),e.addChild(_),_.getComponent(cc.Animation).play("animation0"),_.runAction(cc.sequence(cc.moveTo(.5,l),cc.delayTime(3),cc.removeSelf())),h>0&&(h=" + "+h);var f=new cc.Node,p=new cc.Node,u=(new cc.Node).addComponent(cc.Label);u.string="\u9b45\u529b\u503c + "+r,u.fontSize=25,u.lineHeight=25.5,u.node.color=cc.color(120,255,255);var m=s.utils.createSprite("fish_prompt_frame1","scale9_8888"),g=(new cc.Node).addComponent(cc.Label);g.node.color=cc.color(120,255,255),g.string="\u9b45\u529b\u503c "+h,g.fontSize=25,g.lineHeight=25.5;var v=s.utils.createSprite("fish_prompt_frame1","scale9_8888");f.addChild(m),f.addChild(u.node),f.setPosition(cc.v2(t.x,t.y+60)),p.addChild(v),p.addChild(g.node),p.setPosition(l),f.active=!1,p.active=!1,e.addChild(f),e.addChild(p),f.runAction(cc.sequence(cc.delayTime(1.5),cc.show(),cc.moveTo(1.5,cc.v2(t.x,t.y+120)).easing(cc.easeInOut(1)),cc.removeSelf())),p.runAction(cc.sequence(cc.delayTime(1.5),cc.show(),cc.moveTo(1,d).easing(cc.easeInOut(1)),cc.removeSelf()))},t}(cc.Component);i.Chat=p,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_chat_txt_table":"fish_chat_txt_table","./fish_user_info_chat":"fish_user_info_chat"}],fish_chest_box:[function(e,t,i){"use strict";cc._RF.push(t,"b0245T/AtZOBJNxvSpPHnQ/","fish_chest_box"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../define/fish_msg_types"),o=e("../../model/fish_model"),c=e("../../scene/fish_scene_login"),a=e("../../logic/fish_tcp"),r=e("../../scene/fish_scene"),h=e("../../define/fish_event_types"),l=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.btnBox=null,t.box1=null,t.score_label=null,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/chest_box")),t.addChild(t.csbRoot),t.btnBox=cc.find("archor/btnBox",t.csbRoot),t.box1=cc.find("archor/box1",t.csbRoot),t.score_label=cc.find("archor/score_label",t.csbRoot),t.btnBox.on("click",t.onClickBtnBox,t),t}return __extends(t,e),t.prototype.onClickBtnBox=function(e){this.stopAllActions();var t=e.node.tagId,i={cmd:s.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:o.ME.userId,cardId:8201,action:"miniGame",subAction:"draw",roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId,loc:t,clientId:c.AccountInfo.clientId}};a.tcp.send(i)},t.prototype.setBtnTag=function(e){this.btnBox.tagId=e},t.prototype.setBoxData=function(e){this.btnBox.getComponent(cc.Button).enabled=!1,this.btnBox.active=!1,this.box1.active=!0,this.score_label.getComponent(cc.Label).string="+"+e,this.score_label.setPosition(cc.v2(-2,55)),this.score_label.active=!0},t.prototype.runBoxAction=function(e,t,i){t&&(this.score_label.getComponent(cc.Label).string="+"+t),this.csbRoot.stopAllActions();var n=this.csbRoot.getComponent(cc.Animation);n.on(cc.Animation.EventType.FINISHED,function(){n.targetOff(this),r.evtCenter.emit(h.evts.EVT_CHEST_OVER,this)}.bind(this),this),n.play(e)},t.prototype.runActionByName=function(e){this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play(e)},t.prototype.stopBoxShake=function(){this.stopAllActions()},t.prototype.setLabelData=function(e){this.score_label.getComponent(cc.Label).string=e},t.prototype.setBtnEnable=function(e){this.btnBox.getComponent(cc.Button).enabled=e},t.prototype.runShakeAction=function(){var e=2+3*Math.random();this.runAction(cc.repeatForever(cc.sequence(cc.delayTime(e),cc.callFunc(function(){this.runActionByName("shake")}.bind(this)))))},t}(cc.Node);i.ChestBox=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_chest_game:[function(e,t,i){"use strict";cc._RF.push(t,"b3de3pKHQZFZpufU1WMsRH4","fish_chest_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_chest_box"),a=e("../../model/fish_model"),r=e("../../buffer/fish_buffer"),h=e("../../define/fish_msg_types"),l=e("../../scene/fish_scene_login"),d=e("../../logic/fish_tcp"),_=e("../../fish"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i,n){this.csbRoot=null,this.spinDate=[2,2,3,3,5,6],this.pieNum=6,this.boxNum=3,this.rewards1=e,this.rewards2=t,this.rewardsLevel=[30,40,80,100,150],this.loc=i||[],this.openedArray=this.loc||[],this.curScore=n||0,this.boxArray=[],this.labelVec=[],this.archor=null,this.node_yellow=null,this.node_green=null,this.node_breath=null,this.node_spin=null,this.mask=null,this.spinBoard=null,this.node_rotate=null,this.fntScore=null,this.spinBtn=null,this.nail=null,this.isEnd=null,this.isAccelerate=!1,this.reelPanel=null,this.reel_down=null,this.reel_up=null},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/indiana_game")),_.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.archor=cc.find("archor",this.csbRoot),this.node_yellow=cc.find("archor/reelPanel/groupSpin/node_yellow",this.csbRoot),this.node_green=cc.find("archor/reelPanel/groupSpin/node_green",this.csbRoot),this.node_breath=cc.find("archor/reelPanel/groupSpin/node_breath",this.csbRoot),this.node_spin=cc.find("archor/reelPanel/groupSpin/node_spin",this.csbRoot),this.mask=cc.find("archor/reelPanel/groupSpin/mask",this.csbRoot),this.spinBoard=cc.find("archor/reelPanel/groupSpin/node_spin/spinBoard",this.csbRoot),this.node_rotate=cc.find("archor/reelPanel/groupSpin/node_rotate",this.csbRoot),this.fntScore=cc.find("archor/reelPanel/groupSpin/fntScore",this.csbRoot),this.spinBtn=cc.find("archor/reelPanel/groupSpin/spinBtn",this.csbRoot),this.nail=cc.find("archor/reelPanel/groupSpin/nail",this.csbRoot),this.reelPanel=cc.find("archor/reelPanel",this.csbRoot),this.reel_down=cc.find("archor/Node_1/reel_down",this.csbRoot),this.reel_up=cc.find("archor/Node_1/reel_up",this.csbRoot),this.board=cc.find("archor/reelPanel/board",this.csbRoot),this.groupBox=cc.find("archor/reelPanel/groupBox",this.csbRoot),this.groupSpin=cc.find("archor/reelPanel/groupSpin",this.csbRoot),this.oldBoxY=this.groupBox.y,this.oldSpinY=this.groupSpin.y,this.spinBtn.on("click",this.onSpinBtnClicked,this),this.showBoxPanel();for(var e=0;e<6;e++){var t=cc.find("archor/reelPanel/groupSpin/node_spin/label_"+(e+1),this.csbRoot);this.labelVec.push(t)}s.evtCenter.emit(o.evts.EVT_HIDE_MG_CARD),s.evtCenter.on(o.evts.EVT_MERMAID_DRAW,this.onEventMiniGameDraw,this),s.evtCenter.on(o.evts.EVT_CHEST_OVER,this.onEventDrawOver,this),s.evtCenter.on(o.evts.EVT_SPIN_OVER,this.onEventMGSpinOver,this),s.audio.pushBg("sound/bg_mini_pirate"),s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.revisePanel=function(){var e=this.reel_up.y-this.reel_down.y+this.reel_up.getContentSize().height/2;this.board.y=-.5*e,this.groupBox.y=this.oldBoxY-.5*e,this.groupSpin.y=this.oldSpinY-.5*e,this.reelPanel.setContentSize(cc.size(this.reelPanel.getContentSize().width,e))},t.prototype.revokePanel=function(){var e=this.reel_up.y-this.reel_down.y;this.board.y=.5*e,this.groupBox.y+=.5*e,this.groupSpin.y+=.5*e,this.reelPanel.setContentSize(cc.size(this.reelPanel.getContentSize().width,e))},t.prototype.onBackKey=function(){cc.log("onBackKey in MiniGame")},t.prototype.setBtnStatus=function(e){for(var t=0;t<this.boxNum;t++)this.checkArr(t,this.openedArray)},t.prototype.showBoxPanel=function(){if(this.openedArray){var e=this.csbRoot.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("animation0").wrapMode=cc.WrapMode.Loop}.bind(this),this),e.play("start"),this.schedule(this.revisePanel,1/30,20,5/30),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/scroll_open"),!1);for(var t=0;t<this.boxNum;t++){var i=cc.find("archor/reelPanel/groupBox/box_"+(t+1),this.csbRoot),s=new c.ChestBox;i.addChild(s),this.boxArray.push(s),s.setBtnTag(t),this.checkArr(t,this.openedArray)||s.runShakeAction()}if(this.openedArray.length<=0)return;for(t=0;t<this.openedArray.length;t++){if(cc.log(" length:"+this.openedArray.length),this.openedArray.length>0){this.showSpinAction();break}this.boxArray[this.openedArray[t]].setBoxData(this.rewards1[t]*a.model.mini.miniGameMulti)}}else for(t=0;t<this.boxNum;t++){i=cc.find("archor/reelPanel/groupBox/box_"+(t+1),this.csbRoot),s=new c.ChestBox;i.addChild(s),this.boxArray.push(s),s.setBtnTag(t),s.runShakeAction()}},t.prototype.initPieData=function(){for(var e=0;e<this.pieNum;e++);},t.prototype.onEventMiniGameDraw=function(e){var t=e.reward,i=e.isEnd,s=(e.seatId,e.loc),o=e.win,c=e.totalWin;this.openedArray.push(s),this.isEnd=!0,this.setBtnStatus(!1),this.curScore=c||this.curScore,this.removeObject(this.rewardsLevel,t),i&&0==o?(this.boxArray[s].runBoxAction("game_over",0,i),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/treasure_none"),!1)):(this.boxArray[s].runBoxAction("winning",o,this.isEnd),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/treasure_full"),!1))},t.prototype.onEventDrawOver=function(){this.openedArray.length<this.boxNum?(this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.callFunc(this.stopOtherShake,this),cc.delayTime(2),cc.callFunc(this.showOtherBox,this),cc.delayTime(3),cc.callFunc(function(){this.runOver()}.bind(this))))):(this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.runOver()}.bind(this)))))},t.prototype.runOver=function(){this.csbRoot.stopAllActions();var e=this.csbRoot.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),this.showSpinAction()}.bind(this),this),e.play("over"),this.schedule(this.revokePanel,1/30,10,0),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/scroll_close"),!1)},t.prototype.stopOtherShake=function(){for(var e=0;e<this.boxNum;e++)this.checkArr(e,this.openedArray)||this.boxArray[e].stopBoxShake()},t.prototype.showOtherBox=function(){for(var e=0;e<this.boxNum;e++)this.checkArr(e,this.openedArray)||(this.boxArray[e].runActionByName("show_left"),this.boxArray[e].setLabelData("+"+this.rewardsLevel[e]*a.model.mini.miniGameMulti))},t.prototype.showSpinAction=function(){this.fntScore.getComponent(cc.Label).string=this.curScore,this.csbRoot.stopAllActions();var e=this.csbRoot.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),this.unschedule(this.revisePanel),this.node_breath.active=!0,this.node_breath.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.3,0),cc.fadeTo(.3,255)))),this.node_green.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.5,0),cc.fadeTo(.5,255)))),this.node_yellow.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.25,0),cc.fadeTo(.25,255))))}.bind(this),this),e.play("show_spin"),this.schedule(this.revisePanel,1/30,45,0),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/scroll_open"),!1)},t.prototype.checkArr=function(e,t){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},t.prototype.goBigWin=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/big_win"),!1),s.effect.goldBigWin1(this.csbRoot,this.curScore),s.audio.popBg()},t.prototype.onEventMGSpinOver=function(e,t,i){this.csbRootRunAction("hide_tip"),this.curScore=i;var o=this.getSpinAngle(e)+2880;this.node_rotate.active=!0,r.buffer.pushGold(a.ME.userId,i,18),this.node_spin.runAction(cc.spawn(cc.rotateBy(2,1800).easing(cc.easeExponentialIn()),cc.rotateBy(8,o).easing(cc.easeExponentialInOut())));var c=new cc.Node;this.node.addChild(c),c.runAction(cc.sequence(cc.callFunc(function(){this.node_green.stopAllActions(),this.node_green.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.1,0),cc.fadeTo(.1,255)))),this.node_yellow.runAction(cc.repeatForever(cc.blink(1,5)))}.bind(this)),cc.delayTime(4),cc.callFunc(function(){this.node_green.stopAllActions(),this.node_green.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.1,0),cc.fadeTo(.1,255)))),this.node_yellow.stopAllActions(),this.node_yellow.runAction(cc.repeatForever(cc.blink(1,5)))}.bind(this)),cc.delayTime(6),cc.callFunc(function(){this.node_green.stopAllActions(),this.node_yellow.stopAllActions(),this.mask.runAction(cc.fadeTo(.5,255));var t=s.utils.createSprite("img/nopack/fish_xiadaomeiying_pan1");t.setPosition(this.spinBoard.getPosition()),t.runAction(cc.fadeOut(.5)),this.node_spin.addChild(t),this.labelVec[e].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(10/30,1.2),cc.scaleTo(10/30,1)))),s.effect.showChestParticle(this.nail,this.nail.getContentSize())}.bind(this)),cc.callFunc(function(){t>0&&(s.effect.spinGoldFly(this.archor,cc.v2(0,0),cc.v2(183,166),20),s.effect.rollNumber(.5,this.fntScore,this.curScore-t,this.curScore,70),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/roulette_win"),!1))}.bind(this)),cc.delayTime(0==t?2:6),cc.callFunc(function(){this.csbRootRunAction("spin_over"),this.csbRoot.stopAllActions();var e=this.csbRoot.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),this.unschedule(this.revokePanel),this.archor.active=!1}.bind(this),this),e.play("spin_over"),this.schedule(this.revokePanel,1/30,10,0),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/scroll_close"),!1)}.bind(this)),cc.delayTime(1),cc.callFunc(this.goBigWin,this),cc.callFunc(this._showGoldRain,this),cc.delayTime(4),cc.callFunc(function(){this.node.removeFromParent()}.bind(this)),cc.removeSelf())),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/roulette"),!1)},t.prototype.getSpinAngle=function(e){var t=0;switch(e){case 0:t=300;break;case 1:t=120;break;case 2:t=60;break;case 3:t=240;break;case 4:t=180;break;case 5:t=360}return t},t.prototype.csbRootRunAction=function(e){this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play(e)},t.prototype._showGoldRain=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/big_win_gold"),!1),s.effect.miniGoldRain(this.csbRoot,200,this.curScore)},t.prototype.showGoldFly=function(e){var t=cc.v2(183,166),i=e.showGoldFlyData.win>2e3?5:10;s.effect.mermaidCoinFly(e.archor,e.showGoldFlyData.position,t,i),delete e.showGoldFlyData},t.prototype.onSpinBtnClicked=function(e){var t={cmd:h.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:a.ME.userId,cardId:8201,action:"miniGame",subAction:"spin",roomId:a.model.table.roomId,tableId:a.model.table.tableId,seatId:a.model.table.seatId,clientId:l.AccountInfo.clientId}};d.tcp.send(t)},t.prototype.fadeRotate=function(e){var t=this.node_rotate.getChildByName("12500");t&&t.runAction(cc.fadeOut(3))},t.prototype.removeObject=function(e,t){for(var i=0;i<e.length;i++)if(t==e[i])return e.splice(i,1);return e},t.prototype.onDestroy=function(){this.rewards1=null,this.rewards2=null,this.loc=[],this.boxArray=[],this.openedArray=[],this.rewardsLevel=[],this.labelVec=[],s.evtCenter.off(o.evts.EVT_MERMAID_DRAW,this.onEventMiniGameDraw,this),s.evtCenter.off(o.evts.EVT_CHEST_OVER,this.onEventDrawOver,this),s.evtCenter.off(o.evts.EVT_SPIN_OVER,this.onEventMGSpinOver,this),s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t}(cc.Component);i.ChestGame=f,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","./fish_chest_box":"fish_chest_box"}],fish_config_table:[function(e,t,i){"use strict";cc._RF.push(t,"9208eTCFNxCzpxrVjQFkMBc","fish_config_table"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../assets_manager"),s=function(){function e(){for(var e in this.chat_frame=this._loadConfig("config/ct_chat_frame"),this.daily_quest=this._loadConfig("config/ct_daily_quest"),this.dailyquest_reward=this._loadConfig("config/ct_dailyquest_reward"),this.drop=this._loadConfig("config/ct_drop"),this.experssion=this._loadConfig("config/ct_experssion"),this.fish=this._loadConfig("config/ct_fish"),this.fish_frame=this._loadConfig("config/ct_fish_frame"),this.gift=this._loadConfig("config/ct_gift"),this.item=this._loadConfig("config/ct_item"),this.languageKey=this._loadConfig("config/ct_language_key"),this.lottery=this._loadConfig("config/ct_lottery"),this.match_task=this._loadConfig("config/ct_match_task"),this.mini_game1=this._loadConfig("config/ct_mini_game1"),this.mini_game2=this._loadConfig("config/ct_mini_game2"),this.scene=this._loadConfig("config/ct_scene"),this.shop=this._loadConfig("config/ct_shop"),this.skill=this._loadConfig("config/ct_skill"),this.timeLine=this._loadConfig("config/ct_time_line"),this.treasure_task=this._loadConfig("config/ct_treasure_task"),this.user_level=this._loadConfig("config/ct_user_level"),this.weapon=this._loadConfig("config/ct_weapon"),this.weapon_unlock=this._loadConfig("config/ct_weapon_unlock"),this.weaponup_reward=this._loadConfig("config/ct_weaponup_reward"),this.user_random_name=this._loadConfig("config/ct_user_name"),this.prize_shop=this._loadConfig("config/ct_prize_shop"),this.room_match=this._loadConfig("config/ct_timematch"),this.room_match_reward=this._loadConfig("config/ct_timematch_reward"),this.competition_reward=this._loadConfig("config/ct_competition_reward"),this.competition=this._loadConfig("config/ct_competition"),this.doubleDan=this._loadConfig("config/ct_double_dan"),this.weapon_forge=this._loadConfig("config/ct_weapon_forge"),this.bankruptcy_gift=this._loadConfig("config/ct_bankruptcy_gift"),this.newbie_task=this._loadConfig("config/ct_newbie_task"),this.fish_frame){var t=this.fish[e],i=t.money_effect.split(",");t.money_effect=i.map(function(e){return+e}),i=t.die_effect.split(","),t.die_effect=i.map(function(e){return+e})}for(e in this.fish_frame)(t=this.fish_frame[e]).normal_frames=t.normal_frames.split(","),t.catch_frames=t.catch_frames.split(",")}return e.prototype._loadConfig=function(e){var t=n.AssetsManager.getRes(e).replace(/[\r\n]/g,"\n").split("\n").filter(function(e){return!!e});if(0==t.length)return null;for(var i=t[0].split("\t"),s={},o=1;o<t.length;o++){var c=t[o].split("\t");if(c.length==i.length){for(var a={},r=0;r<i.length;r++)a[i[r]]=c[r];s[c[0]]=a}}return s},e}();i.ConfigTable=s,cc._RF.pop()},{"../../assets_manager":"assets_manager"}],fish_config_track:[function(e,t,i){"use strict";cc._RF.push(t,"cb3a6HClR9J1Ijh3ttiYFIK","fish_config_track"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../assets_manager"),s=e("../scene/fish_scene"),o=function(){function e(){this.paths={},this.tracks={},this._loadPath(),this._loadTrack()}return e.prototype.getPath=function(e){return this.paths[e]},e.prototype.getTrack=function(e){return this.tracks[e]},e.prototype.getFishResIdsTrackName=function(e){var t=[],i=this.tracks[e];if(i)for(var n in i){var s=i[n];t.push(s.fishResId)}return t},e.prototype.getStartPointByTrackName=function(e){var t=this.tracks[e];if(!t)return cc.v2(0,0);var i=t[0].pathId,n=this.paths[i];return n?cc.v2(n.points[0]):cc.v2(0,0)},e.prototype._loadPath=function(){for(var e=n.AssetsManager.getRes("config/path").split("\n").filter(function(e){return!!e}),t=0,i=e.length;t<i;t++){var o=e[t].split("|");if(!(o.length<5)){var c={};c.pathId=parseInt(o[0]);var a=s.utils.str2Vec2Array(o[2]);for(var r in a){var h=a[r];h.x=s.utils.p2vx(h.x),h.y=s.utils.p2vy(h.y)}c.points=a;var l=s.utils.str2Vec4Array(o[3]);for(r in l){var d=l[r];d.x=s.utils.p2vx(d.x),d.y=s.utils.p2vy(d.y),d.z=s.utils.p2vx(d.z),d.w=s.utils.p2vy(d.w)}c.ctrls=l,c.speeds=s.utils.str2FloatArray(o[4]),this.paths[c.pathId]=c}}},e.prototype._loadTrack=function(){var e=n.AssetsManager.getRes("config/tracks").json;for(var t in e){var i=e[t],s=n.AssetsManager.getRes("config/"+i).split("\n").filter(function(e){return!!e});this.tracks[i]=[];for(var o=1,c=s.length;o<c;o++){var a=s[o].split("|");if(!(a.length<4)){var r={};r.fishResId=parseInt(a[0]),r.enterTime=parseFloat(a[1]),r.exitTime=parseFloat(a[2]),r.pathId=parseInt(a[3]),this.tracks[i].push(r)}}}},e}();i.ConfigTrack=o,cc._RF.pop()},{"../../assets_manager":"assets_manager","../scene/fish_scene":"fish_scene"}],fish_consts:[function(e,t,i){"use strict";cc._RF.push(t,"1d69dOOi9BFyb4c10DOdGwZ","fish_consts"),Object.defineProperty(i,"__esModule",{value:!0}),i.DESIGN_WIDTH=1136,i.DESIGN_HEIGHT=640,i.Mall={TY28C000610101:{name:"60000\u91d1\u5e01",price:6,iap:"com.mango.coin6"},TY28C001210102:{name:"140000\u91d1\u5e01",price:12,iap:"com.mango.coin12"},TY28C003010103:{name:"360000\u91d1\u5e01",price:30,iap:"com.mango.coin30"},TY28C009810104:{name:"1400000\u91d1\u5e01",price:98,iap:"com.mango.coin98"},TY28C019810105:{name:"3000000\u91d1\u5e01",price:198,iap:"com.mango.coin198"},TY28C032810106:{name:"5500000\u91d1\u5e01",price:328,iap:"com.mango.coin328"},TY28C064810107:{name:"12000000\u91d1\u5e01",price:648,iap:"com.mango.coin648"},TY28D000610201:{name:"60\u94bb\u77f3",price:6,iap:"com.mango.diamond6"},TY28D001210202:{name:"120\u94bb\u77f3",price:12,iap:"com.mango.diamond12"},TY28D003010203:{name:"300\u94bb\u77f3",price:30,iap:"com.mango.diamond30"},TY28D009810204:{name:"1100\u94bb\u77f3",price:98,iap:"com.mango.diamond98"},TY28D019810205:{name:"2400\u94bb\u77f3",price:198,iap:"com.mango.diamond198"},TY28D032810206:{name:"4000\u94bb\u77f3",price:328,iap:"com.mango.diamond328"},TY28D064810207:{name:"8000\u94bb\u77f3",price:648,iap:"com.mango.diamond648"},TY28_MEMBER:{name:"\u8d35\u65cf\u6708\u5361",price:28,iap:"com.mango.coin666"},TY28D002810209:{name:"\u8d35\u65cf\u793c\u5305",price:28,iap:"com.mango.coin6"},TY28P000110101:{name:"1\u5143\u793c\u5305",price:1,iap:"com.mango.coin6"},TY28P000610102:{name:"6\u5143\u793c\u5305",price:6,iap:"com.mango.coin6"},TY28C000611101:{name:"30000\u91d1\u5e01",price:6,iap:"com.mango.coin6"},TY28C001211102:{name:"60000\u91d1\u5e01",price:12,iap:"com.mango.coin12"},TY28C003011103:{name:"150000\u91d1\u5e01",price:30,iap:"com.mango.coin30"},TY28C009811104:{name:"490000\u91d1\u5e01",price:98,iap:"com.mango.coin98"},TY28C019811105:{name:"990000\u91d1\u5e01",price:198,iap:"com.mango.coin198"},TY28C032811106:{name:"1640000\u91d1\u5e01",price:328,iap:"com.mango.coin328"},TY28C064811107:{name:"3240000\u91d1\u5e01",price:648,iap:"com.mango.coin648"},TY28D000611201:{name:"60\u94bb\u77f3",price:6,iap:"com.mango.diamond6"},TY28D001211202:{name:"120\u94bb\u77f3",price:12,iap:"com.mango.diamond12"},TY28D003011203:{name:"300\u94bb\u77f3",price:30,iap:"com.mango.diamond30"},TY28D009811204:{name:"980\u94bb\u77f3",price:98,iap:"com.mango.diamond98"},TY28D019811205:{name:"1980\u94bb\u77f3",price:198,iap:"com.mango.diamond198"},TY28D032811206:{name:"3280\u94bb\u77f3",price:328,iap:"com.mango.diamond328"},TY28D064811207:{name:"6480\u94bb\u77f3",price:648,iap:"com.mango.diamond648"}},i.Item={LOCK:3101,FREEZE:3102,SUMMON:3103,FURY:3104,LASER1:3106,LASER2:3107,LASER3:3108,LASER4:3109,NBOMB:3110,CRYSTAL_PURPLE:3111,CRYSTAL_BLUE:3112,CRYSTAL_YELLOW:3113,CRYSTAL_RED:3114,CRYSTAL_RAW:3115},i.Skill={LOCK:5101,FREEZE:5102,SUMMON:5103,FURY:5104,LASER1:5106,LASER2:5107,LASER3:5108,LASER4:5109,NBOMB:5110},i.SpecialFish={JellyFishSmall:1105,JellyFishBig:1204,FlameFish:1121,DragonTurtle:1210,Octopus:1302,LanternFish:1303,Mermaid:1304,DragonBoss:1305,ElectricFish:1402,BombFish:1403,CardFish1:1601,CardFish2:1602},i.DieReason={EXIT:1,CATCH:2,LASER:3,NBOMB:4,ELECTRIC:5,BOMB:6},i.GoldEffect={NONE:0,GOLD_FLY:1,GOLD_WHEEL:2,GOLD_PIE:3,BIGWIN:4},i.DieEffect={FAST_ANIM:1,CATCH_ANIM:2,ZOOM_FADE:3,RANDOM_ROTATE:4,ZOOM_IN_12:5,FADEOUT_1:11,FADEOUT_2:12,ROTATE_FADE:13,ROTATE_SINK1:14,ROTATE_SINK2:15,SHAKE_SCENE_1:21,SHAKE_SCENE_2:22,SHAKE_SCENE_3:23,P_STAR_SMALL:31,P_STAR_BIG:32,P_SMOKE:33,P_FIREWORK:34,SHARP_EXPLODE:41,GOLD_EXPLODE:42,EXPLODE_EFF_1:43,EXPLODE_EFF_2:44,EXPLODE_EFF_3:45,ELECTRIC_FISH_DIE:51,BOMB_FISH_DIE:52},i.bagIcon={icon_suoding:"fish_daoju_1.png",icon_bingfeng:"fish_daoju_2.png",icon_zhaohuan:"fish_daoju_3.png",icon_1jikuangbao:"fish_daoju_4.png",icon_jiguang1:"fish_daoju_1.png",icon_jiguang2:"fish_daoju_2.png",icon_jiguang3:"fish_daoju_3.png",icon_jiguang4:"fish_daoju_4.png",icon_hedan:"fish_daoju_2.png"},i.ExpressionCsbById={11301:"interactive_expression_rose",11302:"interactive_expression_egg",11303:"interactive_expression_ring",11304:"interactive_expression_bomb"},i.Error={0:"\u6210\u529f",1:"\u5931\u8d25",Skill:{1:"\u51b7\u5374\u65f6\u95f4\u672a\u5230",2:"\u6ca1\u6709\u514d\u8d39\u6280\u80fd",3:"\u94bb\u77f3\u4e0d\u591f",4:"\u73a9\u5bb6\u7b49\u7ea7\u4e0d\u591f",5:"\u63d0\u5347vip\u7b49\u7ea7\u4e4b\u540e\u624d\u80fd\u8d2d\u4e70"},MatchEnterError:{1:"\u6bd4\u8d5b\u65f6\u95f4\u4e3a\u6bcf\u65e5 09:00--24:00\uff0c\u62a5\u540d\u622a\u6b62\u65f6\u95f423\uff1a30\uff0c\u8bf7\u60a8\u51c6\u65f6\u53c2\u8d5b\u8d62\u5927\u5956\uff01",2:"\u62b1\u6b49\uff0c\u6bd4\u8d5b\u62a5\u540d\u622a\u6b62\u65f6\u95f4\u4e3a23:30\uff0c\u8bf7\u60a8\u51c6\u65f6\u53c2\u8d5b\u8d62\u5927\u5956\u54e6\uff01",3:"\u4e0d\u6ee1\u8db3\u62a5\u540d\u6761\u4ef6",4:"\u975e\u5e38\u62b1\u6b49\uff0c\u60a8\u518d\u6b21\u62a5\u540d\u9700\u8981\u7684\u94bb\u77f3\u4e0d\u8db3\uff0c\u65e0\u6cd5\u53c2\u8d5b\u3002",5:"\u54c7\u54e6\uff0c\u5f00\u59cb\u6e38\u620f\u5931\u8d25\u4e86\u3002\u8bf7\u60a8\u518d\u6b21\u5c1d\u8bd5\u5f00\u59cb\u6bd4\u8d5b\u3002",6:"\u54c7\u54e6\uff0c\u5f00\u59cb\u6e38\u620f\u5931\u8d25\u4e86\u3002\u8bf7\u60a8\u518d\u6b21\u5c1d\u8bd5\u5f00\u59cb\u6bd4\u8d5b\u3002",7:"\u62a5\u540d\u53c2\u52a0\u5927\u5956\u8d5b\uff0c\u60a8\u9700\u8981\u5148\u89e3\u9501100\u500d\u70ae\u53f0\u54e6~",8:"\u975e\u5e38\u62b1\u6b49\uff0c\u60a8\u9700\u8981\u6301\u6709\u81f3\u5c11100000\u91d1\u5e01\u624d\u80fd\u62a5\u540d\u53c2\u52a0\u5927\u5956\u8d5b\u54e6~"},MatchRewardInfo:{0:"\u9886\u53d6\u6210\u529f!",1:"\u9886\u53d6\u5931\u8d25!",2:"\u9886\u53d6\u5931\u8d25!",3:"\u9886\u53d6\u5931\u8d25!"},ExchangeShopError:{0:"\u6210\u529f\u5151\u6362,\u5151\u5956\u9053\u5177\u5df2\u653e\u5165\u60a8\u7684\u4ed3\u5e93",1:"\u5546\u54c1\u4e0d\u5b58\u5728",2:"\u5546\u54c1\u4e0d\u652f\u6301\u5151\u6362",3:"\u60a8\u7684\u52cb\u7ae0\u4e0d\u8db3\u54e6\uff0c\u591a\u591a\u6e38\u620f\u5427",4:"\u5176\u4ed6\u9519\u8bef",5:"\u975e\u5e38\u62b1\u6b49\uff0c\u60a8\u4eca\u5929\u5df2\u7ecf\u5151\u6362\u8fc7\u4e00\u5f20\u5145\u503c\u5361\u4e86\uff0c\u8bf7\u660e\u5929\u518d\u6765\u5151\u6362\u5427\u3002",6:"\u4e0d\u6ee1\u8db3\u5151\u6362\u6761\u4ef6",7:"\u975e\u5e38\u62b1\u6b49\uff0c\u4eca\u5929\u7684\u5145\u503c\u5361\u5df2\u88ab\u62a2\u5149\uff0c\u8bf7\u660e\u5929\u518d\u6765\u5427\uff0c\u4e0b\u624b\u8981\u5feb\u54e6\uff01"},ExchangeHuaFeiError:{1:"\u5176\u4ed6\u9519\u8bef",2:"\u5546\u54c1\u4e0d\u5b58\u5728",3:"\u975e\u5e38\u62b1\u6b49\uff0c\u60a8\u4eca\u5929\u5df2\u7ecf\u5151\u6362\u8fc7\u4e00\u5f20\u5145\u503c\u5361\u4e86\uff0c\u8bf7\u660e\u5929\u518d\u6765\u5151\u6362\u5427\u3002",4:"\u4e0d\u6ee1\u8db3\u8d2d\u4e70\u6761\u4ef6"},ExpressionError:{0:"\u6210\u529f!",1:"\u4e92\u52a8\u8868\u60c5\u4e0d\u5b58\u5728",2:"\u5bf9\u65b9\u4e0d\u5b58\u5728",3:"\u91d1\u5e01\u4e0d\u8db3"}},i.ItemShopInfo={ActionIsBuy:{0:"\u8d2d\u4e70\u6210\u529f!",1:"\u94bb\u77f3\u4e0d\u591f",2:"\u63d0\u5347vip\u7b49\u7ea7\u4e4b\u540e\u624d\u80fd\u8d2d\u4e70",3:"\u9053\u5177\u4e0d\u5b58\u5728",4:"\u975e\u5356\u54c1",5:"\u6d3b\u52a8\u5df2\u8fc7\u671f"},ActionIsRecyle:{0:"\u51fa\u552e\u6210\u529f!",1:"\u9053\u5177\u6570\u91cf\u4e0d\u8db3",2:"\u9053\u5177\u4e0d\u5b58\u5728",3:"\u975e\u56de\u6536\u9053\u5177"},ActionDummy:{0:"\u5151\u6362\u7533\u8bf7\u6210\u529f\u53d1\u9001\uff0c\u8bdd\u8d39\u4f1a\u57283\u4e2a\u5de5\u4f5c\u65e5\u5185\u5145\u5230\u60a8\u586b\u5199\u7684\u624b\u673a\u53f7\u7801\u4e0a\uff0c\u8bf7\u60a8\u8010\u5fc3\u7b49\u5f85\uff0c\u8c22\u8c22",1:"\u9053\u5177\u4e0d\u5b58\u5728",2:"\u6b64\u9053\u5177\u4e0d\u80fd\u5151\u6362\u7269\u54c1",3:"\u5151\u6362\u8bf7\u6c42\u51fa\u9519",4:"\u9053\u5177\u8fc7\u671f",5:"\u5df2\u5904\u4e8e\u5ba1\u6838\u4e2d"}},i.InviteFriendRewardError={1:"\u9080\u8bf7\u8005ID \u6709\u8bef",2:"\u9080\u8bf7\u5956\u52b1\u5df2\u9886\u53d6"},i.headItem={"head_1.png":1,"head_2.png":1,"head_3.png":1,"head_4.png":1,"head_5.png":1,"head_6.png":1},i.headItemKey={"head_1.png":"1_1","head_2.png":"1_2","head_3.png":"1_3","head_4.png":"2_1","head_5.png":"2_2","head_6.png":"2_3"},i.headItemSize={0:"1_1",1:"1_2",2:"1_3",3:"1_4",4:"2_1",5:"2_2",6:"2_3",7:"2_4",8:"3_1",9:"3_2",10:"3_3",11:"3_4",12:"4_1",13:"4_2",14:"4_3",15:"4_4",16:"5_1",17:"5_2",18:"5_3"},i.exCodeError={1:"\u5bf9\u4e0d\u8d77,\u60a8\u8f93\u5165\u7684\u5151\u6362\u7801\u6709\u8bef,\u8bf7\u91cd\u65b0\u8f93\u5165",2:"\u5bf9\u4e0d\u8d77,\u60a8\u5df2\u7ecf\u7528\u8fc7\u8fd9\u4e2a\u5151\u6362\u7801\u4e86",3:"\u9886\u5956\u672a\u5f00\u653e",4:"\u5bf9\u4e0d\u8d77,\u6b64\u5151\u6362\u7801\u5df2\u88ab\u4f7f\u7528",5:"\u60a8\u5df2\u7ecf\u9886\u53d6\u8fc7\u8fd9\u4e2a\u793c\u5305\u4e86,\u4e0d\u80fd\u91cd\u590d\u9886\u53d6\u54e6~",6:"\u5bf9\u4e0d\u8d77,\u5151\u6362\u7801\u4e0d\u5728\u6709\u6548\u671f\u5185,\u65e0\u6cd5\u4f7f\u7528",7:"\u4e0d\u7b26\u5408\u4f7f\u7528\u5151\u6362\u7801\u7684\u6761\u4ef6"},i.screenItem=["baidunew","bdtiebanew","duokunew","91new","vivo","oppo","uc","huawei","samsung","meizu","yingyongbao","midanji"],cc._RF.pop()},{}],fish_daily_box:[function(e,t,i){"use strict";cc._RF.push(t,"c84b4augwZOy41Y7amMSnqD","fish_daily_box"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../define/fish_msg_types"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbRoot=null,this.data=null,this.node_common=null,this.node_super=null,this.box_common=null,this.box_super=null,this.btnBox=null,this.fntScore=null,this.nodeTip=null,this.reward_1=null,this.reward_2=null,this.reward_3=null,this.reward_4=null,this.tipBg=null,this.boxTag=e,this.canReward=!1,this.showTip=!1},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/dailytask_box")),this.node.addChild(this.csbRoot),this.node_common=cc.find("node_common",this.csbRoot),this.node_super=cc.find("node_super",this.csbRoot),this.box_common=cc.find("node_common/box_common",this.csbRoot),this.box_super=cc.find("node_super/box_super",this.csbRoot),this.btnBox=cc.find("btnBox",this.csbRoot),this.fntScore=cc.find("fntScore",this.csbRoot),this.nodeTip=cc.find("nodeTip",this.csbRoot),this.reward_1=cc.find("nodeTip/reward_1",this.csbRoot),this.reward_2=cc.find("nodeTip/reward_2",this.csbRoot),this.reward_3=cc.find("nodeTip/reward_3",this.csbRoot),this.reward_4=cc.find("nodeTip/reward_4",this.csbRoot),this.tipBg=cc.find("nodeTip/tipBg",this.csbRoot),this.btnBox.on(cc.Node.EventType.TOUCH_END,this.onBtnBox,this),s.evtCenter.on(o.evts.EVT_HIDE_DAILY_TIP,this.onEventHideTip,this),s.evtCenter.on(o.evts.EVT_UPDATE_TASK_BTN,this.onEventUpdateBtnState,this)},t.prototype.onDestroy=function(){s.evtCenter.off(o.evts.EVT_HIDE_DAILY_TIP,this.onEventHideTip,this),s.evtCenter.off(o.evts.EVT_UPDATE_TASK_BTN,this.onEventUpdateBtnState,this)},t.prototype.setBoxData=function(){var e=s.configTable.dailyquest_reward[this.boxTag];this.fntScore.getComponent(cc.Label).string=e.active_value,this.data=e;var t=n.AssetsManager.getRes("img/atlas/activity");this.reward_1.getComponent(cc.Label).string=e.active_value+"\u6d3b\u8dc3\u5ea6\u5956\u52b1:";var i=this.getItemNameByType(e.reward1_type)+"*"+e.reward1_number;this.reward_2.getComponent(cc.Label).string=i;var o=this.getItemNameByType(e.reward2_type)+"*"+e.reward2_number;this.reward_3.getComponent(cc.Label).string=o,this.reward_4.active=!1;var a=this.reward_1.getContentSize(),r=this.tipBg.getContentSize();if(this.tipBg.setContentSize(a.width+20,r.height),this.isInCompleted(this.boxTag))5==this.boxTag?this.box_common.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_meirirenwu_11"):this.box_common.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_meirirenwu_9");else if(c.model.dailytask.totalValue>=this.data.active_value){this.canReward=!0,this.csbRoot.stopAllActions();var h=this.csbRoot.getComponent(cc.Animation);5==this.boxTag?h.play("super_complete").wrapMode=cc.WrapMode.Loop:h.play("common_complete").wrapMode=cc.WrapMode.Loop}else 5==this.boxTag?this.box_common.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_meirirenwu_10"):this.box_common.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_meirirenwu_8")},t.prototype.getItemNameByType=function(e){var t="";switch(e){case"101":t="\u91d1\u5e01";break;case"102":t="\u94bb\u77f3";break;case"103":t="\u6355\u9c7c\u52cb\u7ae0";break;case"104":t="\u6bd4\u8d5b\u5238";break;case"3106":t="\u6fc0\u5149I";break;case"3304":t="4\u7ea7\u91d1\u5e01\u7ea2\u5305"}return t},t.prototype.onEventHideTip=function(){this.boxTag===c.model.dailytask.boxTag&&(this.showTip=!1,this.nodeTip.active=!1)},t.prototype.onBtnBox=function(e){if(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.canReward){if(s.evtCenter.emit(o.evts.EVT_UPDATE_TASK_BTN,!1),c.model.dailytask.isLobby){var t={cmd:a.msgs.MSG_FISH_DAILY_TASK,params:{gameId:28,userId:c.ME.userId,action:"reward",rewardLevel:this.boxTag,clientId:r.AccountInfo.clientId}};h.tcp.send(t)}else{var i={cmd:a.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:c.ME.userId,action:"dailyQuestReward",rewardLevel:this.boxTag,clientId:r.AccountInfo.clientId,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId}};h.tcp.send(i)}s.evtCenter.emit(o.evts.EVT_HIDE_DAILY_TIP),c.model.dailytask.boxTag=this.boxTag}else s.evtCenter.emit(o.evts.EVT_HIDE_DAILY_TIP),this.showTip?(this.showTip=!1,this.nodeTip.active=!1,c.model.dailytask.boxTag=this.boxTag):(this.showTip=!0,this.nodeTip.active=!0,c.model.dailytask.boxTag=this.boxTag)},t.prototype.openBoxAction=function(){var e=this.csbRoot.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){this.canReward=!1,s.evtCenter.emit(o.evts.EVT_POP_REWARD_PANEL,c.model.dailytask.rewardItems,""),s.evtCenter.emit(o.evts.EVT_UPDATE_TASK_BTN,!0)}.bind(this),this),e.play("common_completed")},t.prototype.isInCompleted=function(e){for(var t=0;t<c.model.dailytask.completed.length;t++)if(e==c.model.dailytask.completed[t])return!0;return!1},t.prototype.onEventUpdateBtnState=function(e){this.btnBox.getComponent(cc.Button).enabled=e},t}(cc.Component);i.DailyBox=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_daily_cell:[function(e,t,i){"use strict";cc._RF.push(t,"ec8b84cGuhNc4y1hbgrwW7u","fish_daily_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../../xmen_interface"),a=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.achieve=null,t.cellBg=null,t.label_active=null,t.curStatus=null,t.task_icon=null,t.node_right_btn=null,t.node_right=null,t.btn=null,t.archor=null,t.task_detail=null,t.data=null,t.cell_width=650,t.cell_height=60,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/dailytask_cell")),t.addChild(t.csbNode),t.csbNode.setPosition(cc.v2(.5*t.cell_width,.5*t.cell_height)),t.achieve=cc.find("archor/achieve",t.csbNode),t.cellBg=cc.find("archor/cellBg",t.csbNode),t.label_active=cc.find("archor/node_right/label_active",t.csbNode),t.curStatus=cc.find("archor/node_des/curStatus",t.csbNode),t.task_icon=cc.find("archor/task_icon",t.csbNode),t.node_right_btn=cc.find("archor/node_right_btn",t.csbNode),t.node_right=cc.find("archor/node_right",t.csbNode),t.btn=cc.find("archor/btn",t.csbNode),t.archor=cc.find("archor",t.csbNode),t.task_detail=cc.find("archor/node_des/task_detail",t.csbNode),t}return __extends(t,e),t.prototype.setData=function(e,t){var i=n.AssetsManager.getRes("img/atlas/activity"),c=n.AssetsManager.getRes("img/atlas/scale9_8888");this.data=t;for(var a=0;a<s.model.dailytask.stateList.length;a++){var r=s.model.dailytask.stateList[a];if(r.Id==this.data.quest_id)if(this.label_active.getComponent(cc.Label).string=this.data.quest_activevalue,this.task_icon.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame(this.data.quest_icon.split(".")[0]),"6310"==this.data.quest_id?this.task_detail.getComponent(cc.Label).string="\u70b9\u51fb\u522b\u4eba\u70ae\u53f0\n\u53d1\u9001\u4e92\u52a8\u9053\u51775\u6b21":this.task_detail.getComponent(cc.Label).string=o.configTable.languageKey[this.data.quest_description].string_zhcn,"6314"==this.data.quest_id?(this.node_right_btn.active=!0,this.node_right.active=!1,this.btn.getComponent(cc.Button).enabled=!0,this.btn.active=!0,this.btn.getComponent(cc.Button).normalSprite=c.getSpriteFrame("fish_activity_yellowbuton_2"),this.btn.getComponent(cc.Button).pressedSprite=c.getSpriteFrame("fish_activity_yellowbuton_2"),this.curStatus.color=cc.color(0,0,0),this.task_detail.color=cc.color(0,0,0)):(this.node_right_btn.active=!1,this.node_right.active=!0,this.btn.getComponent(cc.Button).enabled=!1,this.btn.active=!1,this.curStatus.color=cc.color(255,255,255),this.task_detail.color=cc.color(255,255,255)),this.curStatus.getComponent(cc.Label).string="("+r.v+"/"+this.data.quest_goal+")",r.v>=this.data.quest_goal)if("6314"==this.data.quest_id){this.achieve.active=!0,this.task_detail.getComponent(cc.Label).string="\u5fae\u4fe1\u5206\u4eab",this.btn.getComponent(cc.Button).enabled=!0;var h=i.getSpriteFrame("fish_activity_yellowbuton");h.insetLeft=124,h.insetRight=60,h.insetTop=84,h.insetBottom=57,this.btn.getComponent(cc.Button).normalSprite=h,this.btn.getComponent(cc.Button).pressedSprite=h,this.curStatus.color=cc.color(255,255,255),this.task_detail.color=cc.color(255,255,255)}else this.achieve.active=!0;else this.achieve.active=!1}},t.prototype.onBtnTask=function(e){s.model.lobby.isNeenInviteInfo=!1;var t=o.configTable.languageKey.string_weixinlianjie1.string_zhcn.split("|")[Math.floor(2*Math.random()+0)],i=o.configTable.languageKey.string_weixinlianjie2.string_zhcn.split("|")[Math.floor(2*Math.random()+0)],n="http://share.mango.x-men.co/fish/singleFish.html";cc.sys.os==cc.sys.OS_ANDROID?n="http://share.mango.x-men.co/fish/singleFish.html":cc.sys.os==cc.sys.OS_IOS&&(n="http://share.mango.x-men.co/fish/singleFish.html"),c.xmen.SDKInterfaceManager.sdkShare({cmd:"share",title:t,content:i,url:n+"?id="+s.ME.userId,type:"0",shareType:"url"},"weixin")},t}(cc.Node);i.DailyCell=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../../xmen_interface":"xmen_interface","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_daily_task:[function(e,t,i){"use strict";cc._RF.push(t,"9cdcdTmPUxGkpwgb0o0Gg3V","fish_daily_task"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../scene/fish_scene_login"),o=e("../../logic/fish_tcp"),c=e("../../../assets_manager"),a=e("../../scene/fish_scene"),r=e("../../define/fish_event_types"),h=e("./fish_daily_box"),l=e("./fish_daily_cell"),d=e("../../fish"),_=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.tableView=null,t.node_table=null,t.progress_bar=null,t.fntCurScore=null,t.group_reward=null,t.completed=[],t.boxNode=[],t.dailyData=[],t.taskStartId=6301,t.taskEndId=6313,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(c.AssetsManager.getRes("prefabs/daily_task")),d.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.csbRoot.setPosition(cc.v2(.5*-cc.winSize.width,.5*-cc.winSize.height)),this.node_table=cc.find("archor/group_table/node_table",this.csbRoot),this.group_reward=cc.find("archor/group_reward",this.csbRoot),this.progress_bar=cc.find("archor/group_reward/progress_bar",this.csbRoot),this.fntCurScore=cc.find("archor/group_reward/fntCurScore",this.csbRoot),this.reSetData(),this.initRewards(),a.evtCenter.on(r.evts.EVT_MSG_DAILY_REWARD,this.onEventDailyReward,this),a.evtCenter.on(r.evts.EVT_DAILY_RELOAD,this.onEventDailyReload,this)},t.prototype.reSetData=function(){this.completed=[],this.dailyData=[];for(var e=0;e<n.model.dailytask.stateList.length;e++){var t=n.model.dailytask.stateList[e],i=a.configTable.daily_quest[t.Id];i&&1==i.quest_available&&this.dailyData.push(i),t.v>=i.quest_goal&&this.completed.push(e)}this.dailyData.sort(function(e,t){return e.quest_id<t.quest_id?1:-1});for(var s=this.completed.length-1;s>=0;s--){var o=this.dailyData[this.completed[s]];this.dailyData.splice(this.completed[s],1),this.dailyData.push(o)}cc.log(this.dailyData),this.initTable()},t.prototype.initRewards=function(){this.boxNode=[];for(var e=0;e<5;e++){var t=cc.find("archor/group_reward/bNode_"+(e+1),this.csbRoot);this.boxNode.push(t);var i=(new cc.Node).addComponent(h.DailyBox);i.ctor(e+1),t.addChild(i.node,0,"box"),i.setBoxData(),this.progress_bar.getComponent(cc.ProgressBar).progress=100*n.model.dailytask.totalValue/125/100,this.fntCurScore.getComponent(cc.Label).string=n.model.dailytask.totalValue.toString()}},t.prototype.initTable=function(){this.cellSize=cc.size(650,80),this.tableView=cc.find("archor/group_table/node_table/tableView",this.csbRoot).getComponent(cc.ScrollView),this.tableViewReloadData()},t.prototype.tableViewReloadData=function(){for(var e=0;e<this.dailyData.length;e++){var t=new l.DailyCell;t.setContentSize(this.cellSize),t.setAnchorPoint(0,0),t.setData(e,this.dailyData[e]),this.tableView.content.addChild(t)}},t.prototype.onDestroy=function(){this.boxNode=[],this.completed=[],this.dailyData=[],a.evtCenter.off(r.evts.EVT_MSG_DAILY_REWARD,this.onEventDailyReward,this),a.evtCenter.off(r.evts.EVT_DAILY_RELOAD,this.onEventDailyReload,this)},t.prototype.onEventDailyReload=function(){var e={cmd:"daily_quest",params:{gameId:28,userId:n.ME.userId,action:"update",clientId:s.AccountInfo.clientId}};o.tcp.send(e)},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),a.evtCenter.emit(r.evts.EVT_HIDE_DAILY_TIP)},t.prototype.onTouchBegan=function(){return a.evtCenter.emit(r.evts.EVT_HIDE_DAILY_TIP),!0},t.prototype.onEventDailyReward=function(e){e<=0||this.boxNode[e-1].getChildByName("box").getComponent(h.DailyBox).openBoxAction()},t}(cc.Component);i.DailyTask=_,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","./fish_daily_box":"fish_daily_box","./fish_daily_cell":"fish_daily_cell"}],fish_effect_pool:[function(e,t,i){"use strict";cc._RF.push(t,"0cd0eTLPddNFKFHsmJwcoG7","fish_effect_pool"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish"),s=e("../../assets_manager"),o=e("../scene/fish_scene"),c=e("../model/fish_model"),a=function(){function e(){}return e.prototype.__randPos=function(e,t,i){e.x+=n.fish.randomMinus1To1()*t,e.y+=n.fish.randomMinus1To1()*i},e.prototype.rollNumber=function(e,t,i,n,s){var o=(n-i)/s;t.numberArray=[];for(var c=0;c<s-1;c++)i+=o,t.numberArray.push(Math.ceil(i));t.numberArray.push(n),t.numberIndex=0,t.runAction(cc.sequence(cc.delayTime(e),cc.repeat(cc.sequence(cc.delayTime(2/30),cc.callFunc(this._rolloNumber,this)),s)))},e.prototype._rolloNumber=function(e){var t=e.numberArray[e.numberIndex++];if(void 0!=t){var i=o.utils.formatNumber(t);e.getComponent(cc.Label).string=i}},e}();i.EffectUtil=a;var r=function(){function e(){this.GOLD_PIE=1,this.PARTICLE_STAR=2,this.PARTICLE_SMOKE=3,this.PARTICLE_FIREWORK=4,this.GOLD_EXPLODE=5,this.EXPLODE_EFF=6,this.GOLD_FLY=7,this.GOLD_WHEEL=8,this.GOLD_BIG_WIN_1=9,this.GOLD_BIG_WIN_2=10,this.CATCH_EXPLODE_1=11,this.CATCH_EXPLODE_2=12,this.SHARP_EXPLODE=13,this.ZOOM_OUT_FADE=14,this.SHAKE_SCENE_1=15,this.SHAKE_SCENE_2=16,this.freeEffects={},this.usedEffects={},this.typeMap={},this.freeEffects={},this.usedEffects={},this.typeMap[this.GOLD_PIE]=l,this.typeMap[this.PARTICLE_STAR]=d,this.typeMap[this.PARTICLE_SMOKE]=_,this.typeMap[this.PARTICLE_FIREWORK]=f,this.typeMap[this.GOLD_EXPLODE]=p,this.typeMap[this.EXPLODE_EFF]=u,this.typeMap[this.GOLD_FLY]=I,this.typeMap[this.GOLD_WHEEL]=m,this.typeMap[this.GOLD_BIG_WIN_1]=g,this.typeMap[this.GOLD_BIG_WIN_2]=v,this.typeMap[this.CATCH_EXPLODE_1]=b,this.typeMap[this.CATCH_EXPLODE_2]=y,this.typeMap[this.SHARP_EXPLODE]=E,this.typeMap[this.ZOOM_OUT_FADE]=C,this.typeMap[this.SHAKE_SCENE_1]=T,this.typeMap[this.SHAKE_SCENE_2]=S}return e.prototype.release=function(){for(var e in this.usedEffects){var t=this.usedEffects[e];cc.director.getScheduler().unscheduleAllForTarget(t),t.hide()}for(var i in this.freeEffects)for(var n=this.freeEffects[i],s=n.length-1;s>=0;s--)n[s].release();this.freeEffects=null,this.usedEffects=null},e.prototype.alloc=function(e){var t=null,i=this.freeEffects[e];if(i||(this.freeEffects[e]=i=[]),0==i.length?(cc.log("fish.EffectPool new one Effect, type: "+e),t=new this.typeMap[e]):(cc.log("fish.EffectPool get an Effect from the pool, type: "+e),t=i.shift()),this.SHAKE_SCENE_1===e||this.SHAKE_SCENE_2===e)return i.push(t),t;if(this.usedEffects[t.uuid]=t,t.timeout>0){var n=cc.director.getScheduler();n.unscheduleAllForTarget(t),n.schedule(t.hide,t,t.timeout,0,0,!1)}return t},e.prototype.free=function(e){delete this.usedEffects[e.uuid];var t=this.freeEffects[e.type];t||(this.freeEffects[e.type]=t=[]),t.push(e)},e.prototype.play=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=this.alloc(e),s=Array.prototype.slice.call(arguments,1);n.show.apply(n,s)},e}();i.EffectPool=r;var h=function(e){function t(t,i){var n=e.call(this)||this;return n.type=t,n.timeout=i,n.rootNode=null,n}return __extends(t,e),t.prototype.release=function(){this.rootNode&&(this.rootNode.getParent()&&this.rootNode.removeFromParent(!0),this.rootNode=null)},t.prototype.show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.hide=function(){cc.log("**************************************** EffectCell.hide"),n.fish.effectPool.free(this)},t}(cc.Node);i.EffectCell=h;var l=function(e){function t(){var t=e.call(this,n.fish.effectPool.GOLD_PIE,0)||this;t.rootNode=new cc.Node,t.spArr=[];for(var i=0;i<20;++i){var s=o.utils.createSprite("fish_goldfly_02","game_effect"),c=o.utils.genAnimate("game_effect","gold_spin","fish_goldfly_",.1);s.addComponent(cc.Animation).addClip(c),t.rootNode.addChild(s),t.spArr.push(s)}return t}return __extends(t,e),t.prototype.release=function(){e.prototype.release.call(this)},t.prototype.show=function(e,t,i,s,o){for(var c=[cc.v2(-103,168),cc.v2(-2,184),cc.v2(103,146),cc.v2(-68,122),cc.v2(36,123),cc.v2(-149,69),cc.v2(-87,41),cc.v2(6,67),cc.v2(149,87),cc.v2(-166,-26),cc.v2(-105,-25),cc.v2(-39,-2),cc.v2(28,36),cc.v2(100,27),cc.v2(146,3),cc.v2(-122,-111),cc.v2(16,-60),cc.v2(125,-69),cc.v2(-29,-127),cc.v2(59,-142)],a=0;a<20;a++)n.fish.effectUtil.__randPos(c[a],20,20);this.rootNode.setPosition(t),e.addChild(this.rootNode);var r=this.rootNode.convertToNodeSpaceAR(e.convertToWorldSpaceAR(i)),h=0;for(a=0;a<20;a++){var l=this.spArr[a];l.runAction(cc.hide()),l.setPosition(c[a]);var d=n.fish.pDistance(c[a],r)/600;d>h&&(h=d),l.getComponent(cc.Animation).play("gold_spin").repeatCount=5,l.runAction(cc.sequence(cc.delayTime(1),cc.spawn(cc.show(),cc.fadeTo(0,64),cc.fadeTo(5/30,255),cc.scaleTo(.2,1),cc.sequence(cc.moveTo(5/30,c[a].x,c[a].y+60),cc.moveTo(8/30,c[a].x,c[a].y-5).easing(cc.easeInOut(1.5)),cc.moveTo(8/30,c[a].x,c[a].y+40).easing(cc.easeInOut(1.5)),cc.moveTo(5/30,c[a].x,c[a].y+20),cc.delayTime(20/30),cc.moveTo(d,r).easing(cc.easeIn(1)),cc.hide()))))}return cc.director.getScheduler().schedule(this.hide,this,h,0,0,!1),h},t.prototype.hide=function(){this.rootNode.removeFromParent(!0)},t}(h);i.EffectCellGoldPie=l;var d=function(e){function t(){var t=e.call(this,n.fish.effectPool.PARTICLE_STAR,1.2)||this;return t.rootNode=cc.instantiate(s.AssetsManager.getRes("particle/catch_star")),t.rootNode.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!1,t}return __extends(t,e),t.prototype.release=function(){this.rootNode=null},t.prototype.show=function(e,t,i){this.rootNode.setPosition(t),this.rootNode.setScale(i),this.rootNode.getComponent(cc.ParticleSystem).resetSystem(),e.getChildByUuid(this.rootNode.uuid)||e.addChild(this.rootNode)},t}(h);i.EffectCellParticleStar=d;var _=function(e){function t(){var t=e.call(this,n.fish.effectPool.PARTICLE_SMOKE,1.2)||this;return t.rootNode=cc.instantiate(s.AssetsManager.getRes("particle/fish_catch_smoke")),t.rootNode.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!1,t}return __extends(t,e),t.prototype.release=function(){this.rootNode=null},t.prototype.show=function(e,t){this.rootNode.setPosition(t),this.rootNode.getComponent(cc.ParticleSystem).resetSystem(),e.getChildByUuid(this.rootNode.uuid)||e.addChild(this.rootNode)},t}(h);i.EffectCellParticleSmoke=_;var f=function(e){function t(){var t=e.call(this,n.fish.effectPool.PARTICLE_FIREWORK,1.6)||this;return t.rootNode=cc.instantiate(s.AssetsManager.getRes("particle/fish_boss_catch")),t.rootNode.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!1,t}return __extends(t,e),t.prototype.release=function(){this.rootNode=null},t.prototype.show=function(e,t){this.rootNode.setPosition(t),this.rootNode.getComponent(cc.ParticleSystem).resetSystem(),e.getChildByUuid(this.rootNode.uuid)||e.addChild(this.rootNode)},t}(h);i.EffectCellParticleFirework=f;var p=function(e){function t(){var t=e.call(this,n.fish.effectPool.GOLD_EXPLODE,2.6)||this;t.COIN_COUNT=50,t.rootNode=new cc.Node,t.spArray=[],t.actArray=[];for(var i=0;i<t.COIN_COUNT;i++){var s=o.utils.createSprite("fish_goldfly_02","game_effect");t.rootNode.addChild(s),t.spArray.push(s);var c=2*Math.random()*Math.PI,a=cc.v2(Math.cos(c),Math.sin(c));a=a.mul(1280);var r=o.utils.genAnimate("game_effect","gold_spin","fish_goldfly_",.1);s.addComponent(cc.Animation).addClip(r);var h=cc.sequence(cc.delayTime(Math.random()),cc.spawn(cc.show(),cc.fadeOut(1),cc.scaleTo(1,3),cc.moveTo(1.5,a)),cc.hide());t.actArray.push(h)}return t}return __extends(t,e),t.prototype.release=function(){for(var e=0;e<this.COIN_COUNT;e++)this.actArray[e]=null;this.rootNode=null},t.prototype.show=function(e,t){this.rootNode.setPosition(t),e.addChild(this.rootNode);for(var i=0;i<this.COIN_COUNT;i++){var n=this.spArray[i];n.runAction(cc.hide()),n.setPosition(0,0),n.setScale(1),n.opacity=255,n.getComponent(cc.Animation).play("gold_spin").repeatCount=5,this.spArray[i].runAction(this.actArray[i].clone())}},t.prototype.hide=function(){this.rootNode.removeFromParent(),e.prototype.hide.call(this)},t}(h);i.EffectCellGoldExplode=p;var u=function(e){function t(){return e.call(this,n.fish.effectPool.EXPLODE_EFF,1.1)||this}return __extends(t,e),t.prototype.show=function(e,t,i){},t.prototype.hide=function(){},t}(h);i.EffectCellExpoldeFirework=u;var m=function(e){function t(){var t=e.call(this,n.fish.effectPool.GOLD_WHEEL,0)||this;return t.rootNode=cc.instantiate(s.AssetsManager.getRes("prefabs/gold_wheel")),t}return __extends(t,e),t.prototype.show=function(e,t,i){var n=this.rootNode;if(n){n.setPosition(t),e.addChild(n),cc.find("fnt",n).getComponent(cc.Label).string=i.toString();var s=n.getComponent(cc.Animation);s.play("animation"),s.on(cc.Animation.EventType.FINISHED,function(){s.targetOff(this),this.hide()}.bind(this),this)}},t.prototype.hide=function(){this.rootNode.getParent()&&this.rootNode.removeFromParent(!0),e.prototype.hide.call(this)},t}(h);i.EffectCellGoldWheel=m;var g=function(e){function t(){var t=e.call(this,n.fish.effectPool.GOLD_BIG_WIN_1,0)||this;return t.rootNode=cc.instantiate(s.AssetsManager.getRes("prefabs/big_win_1")),n.fish.adapterScreen(t.rootNode),t}return __extends(t,e),t.prototype.show=function(e,t){var i=this.rootNode;if(i){e.addChild(i);var s=cc.find("anchor/fnt",this.rootNode);n.fish.effectUtil.rollNumber(0,s,0,t,20);var o=this.rootNode.getComponent(cc.Animation);o.on(cc.Animation.EventType.FINISHED,function(){o.targetOff(this),this.hide()}.bind(this),this),o.play("animation")}},t.prototype.hide=function(){this.rootNode.getParent()&&this.rootNode.removeFromParent(!0),e.prototype.hide.call(this)},t}(h);i.EffectCellBigWin1=g;var v=function(e){function t(){var t=e.call(this,n.fish.effectPool.GOLD_BIG_WIN_2,0)||this;return t.rootNode=cc.instantiate(s.AssetsManager.getRes("prefabs/big_win_2")),n.fish.adapterScreen(t.rootNode),t}return __extends(t,e),t.prototype.show=function(e,t){var i=this.rootNode;if(i){e.addChild(i);var s=cc.find("anchor/fnt",this.rootNode);n.fish.effectUtil.rollNumber(0,s,0,t,20);var o=this.rootNode.getComponent(cc.Animation);o.on(cc.Animation.EventType.FINISHED,function(){o.targetOff(this),this.hide()}.bind(this),this),o.play("animation")}},t.prototype.hide=function(){this.rootNode.getParent()&&this.rootNode.removeFromParent(!0),e.prototype.hide.call(this)},t}(h);i.EffectCellBigWin2=v;var b=function(e){function t(){var t=e.call(this,n.fish.effectPool.CATCH_EXPLODE_1,0)||this;return t.rootNode=cc.instantiate(s.AssetsManager.getRes("prefabs/explode_1")),t}return __extends(t,e),t.prototype.show=function(e,t){var i=this.rootNode;if(i){e.addChild(i),i.setPosition(t);var n=this.rootNode.getComponent(cc.Animation);n.on(cc.Animation.EventType.FINISHED,function(){n.targetOff(this),this.hide()}.bind(this),this),n.play("show")}},t.prototype.hide=function(){this.rootNode.getParent()&&this.rootNode.removeFromParent(!0),e.prototype.hide.call(this)},t}(h);i.EffectCellCatchExplode1=b;var y=function(e){function t(){var t=e.call(this,n.fish.effectPool.CATCH_EXPLODE_2,0)||this;return t.rootNode=cc.instantiate(s.AssetsManager.getRes("prefabs/explode_2")),t}return __extends(t,e),t.prototype.show=function(e,t){var i=this.rootNode;if(i){e.addChild(i),i.setPosition(t);var n=this.rootNode.getComponent(cc.Animation);n.on(cc.Animation.EventType.FINISHED,function(){n.targetOff(this),this.hide()}.bind(this),this),n.play("show")}},t.prototype.hide=function(){this.rootNode.getParent()&&this.rootNode.removeFromParent(!0),e.prototype.hide.call(this)},t}(h);i.EffectCellCatchExplode2=y;var E=function(e){function t(){var t=e.call(this,n.fish.effectPool.SHARP_EXPLODE,3)||this;return t.rootNode=o.utils.createSprite("fish_sharp_explode","common"),t.actionObj=cc.sequence(cc.scaleTo(.1,1.5),cc.spawn(cc.fadeOut(5/30),cc.scaleTo(5/30,.1)),cc.removeSelf()),t}return __extends(t,e),t.prototype.show=function(e,t){this.rootNode&&this.actionObj&&(this.rootNode.setPosition(t),e.addChild(this.rootNode),this.rootNode.runAction(this.actionObj.clone()))},t}(h);i.EffectCellSharpExplode=E;var C=function(e){function t(){var t=e.call(this,n.fish.effectPool.ZOOM_OUT_FADE,3)||this;return t.actionObj=cc.sequence(cc.spawn(cc.scaleTo(.5,4).easing(cc.easeOut(1)),cc.fadeOut(.5)),cc.removeSelf()),t}return __extends(t,e),t.prototype.release=function(){this.actionObj&&(this.actionObj=null)},t.prototype.show=function(e,t,i){var n=o.utils.createSprite("fish_"+t+"_01","img/fish/fish_"+t,!0);n.setPosition(i),e.addChild(n),n.runAction(this.actionObj.clone())},t}(h);i.EffectCellZoomOutFade=C;var T=function(e){function t(){var t=e.call(this,n.fish.effectPool.SHAKE_SCENE_1,0)||this;return t.actionObj=cc.sequence(cc.moveTo(1/30,-20,20),cc.moveTo(1/30,0,0),cc.moveTo(1/30,18,18),cc.moveTo(1/30,0,0),cc.moveTo(1/30,-16,16),cc.moveTo(1/30,0,0),cc.moveTo(1/30,14,14),cc.moveTo(1/30,0,0),cc.moveTo(1/30,-12,12),cc.moveTo(1/30,0,0),cc.moveTo(1/30,10,10),cc.moveTo(1/30,0,0),cc.moveTo(1/30,-8,8),cc.moveTo(1/30,0,0),cc.moveTo(1/30,6,6),cc.moveTo(1/30,0,0),cc.moveTo(1/30,4,4),cc.moveTo(1/30,0,0),cc.moveTo(1/30,-2,2),cc.moveTo(1/30,0,0)),t}return __extends(t,e),t.prototype.show=function(e){var t=cc.find("Canvas/Scene",cc.director.getScene());t&&(t.stopAllActions(),t.setPosition(0,0),t.runAction(cc.sequence(cc.delayTime(e),this.actionObj)))},t}(h);i.EffectCellShakeScene1=T;var S=function(e){function t(){var t=e.call(this,n.fish.effectPool.SHAKE_SCENE_2,0)||this;return t.actionObj=cc.sequence(cc.moveTo(.025,-24,24),cc.moveTo(.025,0,0),cc.moveTo(.025,24,24),cc.moveTo(.025,0,0),cc.moveTo(.025,-20,20),cc.moveTo(.025,0,0),cc.moveTo(.025,20,20),cc.moveTo(.025,0,0),cc.moveTo(.025,-18,-18),cc.moveTo(.025,0,0),cc.moveTo(.025,18,18),cc.moveTo(.025,0,0),cc.moveTo(.025,-16,16),cc.moveTo(.025,0,0),cc.moveTo(.025,16,16),cc.moveTo(.025,0,0),cc.moveTo(.025,-14,14),cc.moveTo(.025,0,0),cc.moveTo(.025,14,14),cc.moveTo(.025,0,0),cc.moveTo(.025,-12,12),cc.moveTo(.025,0,0),cc.moveTo(.025,12,12),cc.moveTo(.025,0,0),cc.moveTo(.025,-10,10),cc.moveTo(.025,0,0),cc.moveTo(.025,10,10),cc.moveTo(.025,0,0),cc.moveTo(.025,-8,8),cc.moveTo(.025,0,0),cc.moveTo(.025,8,8),cc.moveTo(.025,0,0),cc.moveTo(.025,-6,6),cc.moveTo(.025,0,0),cc.moveTo(.025,6,6),cc.moveTo(.025,0,0),cc.moveTo(.025,-4,4),cc.moveTo(.025,0,0),cc.moveTo(.025,4,4),cc.moveTo(.025,0,0),cc.moveTo(.025,-2,2),cc.moveTo(.025,0,0),cc.moveTo(.025,2,2),cc.moveTo(.025,0,0)),t}return __extends(t,e),t.prototype.show=function(e){var t=cc.find("Canvas/Scene",cc.director.getScene());t.setPosition(0,0),t.runAction(cc.sequence(cc.delayTime(e),this.actionObj))},t}(h);i.EffectCellShakeScene2=S;var I=function(e){function t(){var t=e.call(this,n.fish.effectPool.GOLD_FLY,3)||this;return t.rootNode=new cc.Node,t._coin_width=50,t._coin_height=50,t.freeCoinSpArr=[],t.usedCoinSpArr=[],t}return __extends(t,e),t.prototype.release=function(){this.rootNode.getParent()&&this.rootNode.removeFromParent(!0)},t.prototype.getCoinSp=function(){if(this.freeCoinSpArr.length>0){var e=this.freeCoinSpArr.shift();return this.usedCoinSpArr.push(e),e}return e=o.utils.createSprite("fish_goldfly_01","game_effect"),this.usedCoinSpArr.push(e),e},t.prototype.free=function(){for(this.rootNode.removeFromParent(!0);this.usedCoinSpArr.length>0;){var e=this.usedCoinSpArr.shift();e.removeFromParent(!0),this.freeCoinSpArr.push(e)}},t.prototype.show=function(e,t,i,s,a,r,h){var l=this.rootNode;e.addChild(l);var d=this._getGoldFlyCount(i),_=d>5?Math.ceil(d/2):d,f=d>5?2:1,p=s.x-this._coin_width*_/2,u=s.y-this._coin_height/(d>6?2:1);(p=cc.misc.clampf(p,this._coin_width,cc.winSize.width-this._coin_width*_),u=cc.misc.clampf(u,this._coin_height,cc.winSize.height-3*this._coin_height),h>0)&&function(e,t,i,s,o,c){var a=n.fish.createWithBMFont(i,"+"+t);a.setPosition(s,o),a.setScale(c),a.opacity=0,e.addChild(a),a.runAction(cc.sequence(cc.fadeIn(.3),cc.delayTime(1),cc.fadeOut(.3),cc.removeSelf()))}(l,h,r==c.ME.userId?"fnt01":"fnt05",p+this._coin_width*_/2,u+this._coin_height*f/2,.5+.1*t);for(var m=0,g=o.utils.splitNumber(h,d),v=0;v<d;v++){var b=Math.floor(v/_),y=v%_,E=d%2==0||0==b?0:this._coin_width/2,C=0==b?0:_/30,T=this.getCoinSp();T.setAnchorPoint(0,0),l.addChild(T);var S=T.getContentSize(),I=p+y*this._coin_width+E,R=u+b*this._coin_height-20;I+=(this._coin_width-S.width)/2,R+=(this._coin_height-S.height)/2,T.setPosition(I,R),T.opacity=0;var w=o.utils.genAnimate("game_effect","gold_spin","fish_goldfly_",.1),A=T.addComponent(cc.Animation);A.addClip(w);var M=n.fish.pDistance(s,a)/600;M>m&&(m=M),T.data={userId:r,gold:g[v]},T.runAction(cc.sequence(cc.show(),cc.delayTime(C+2*y/30),cc.spawn(cc.callFunc(function(){A.play("gold_spin").repeatCount=5}.bind(this)),cc.fadeTo(0,64),cc.fadeTo(5/30,255),cc.scaleTo(.2,1),cc.sequence(cc.moveTo(5/30,I,R+60),cc.moveTo(8/30,I,R-5).easing(cc.easeInOut(1.5)),cc.moveTo(8/30,I,R+40).easing(cc.easeInOut(1.5)),cc.moveTo(5/30,I,R+20),cc.delayTime(2/30-C),cc.callFunc(function(){r==c.ME.userId&&o.audio.playFlyGold()}.bind(this)),cc.moveTo(M,a).easing(cc.easeIn(1)))),cc.hide()))}return m},t.prototype.hide=function(){this.free(),e.prototype.hide.call(this)},t.prototype._getGoldFlyCount=function(e){return e>250?10:e>150?8:e>50?7:e>20?6:e>12?5:e>9?4:e>6?3:e>3?2:1},t}(h);i.EffectCellGoldFly=I,cc._RF.pop()},{"../../assets_manager":"assets_manager","../fish":"fish","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene"}],fish_effect:[function(e,t,i){"use strict";cc._RF.push(t,"a05ab/vm5JOtZIwuefPkNZj","fish_effect"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_event_types"),o=e("../fish"),c=e("../../assets_manager"),a=e("../model/fish_model"),r=function(){function e(){this._coin_width=50,this._coin_height=50,this._spinnerMaxWidth=360,this._spinnerMaxHeight=200}return e.prototype.goldFly=function(e,t,i,n,s,c,a){cc.log("*************************************************************************** Effect.goldFly"),o.fish.effectPool.play(o.fish.effectPool.GOLD_FLY,e,t,i,n,s,c,a)},e.prototype.goldWheel=function(e,t,i){cc.log("*************************************************************************** Effect.goldWheel"),o.fish.effectPool.play(o.fish.effectPool.GOLD_WHEEL,e,t,i)},e.prototype.goldBigWin1=function(e,t){cc.log("*************************************************************************** Effect.goldBigWin1"),cc.log("goldBigWin1: "+t),o.fish.effectPool.play(o.fish.effectPool.GOLD_BIG_WIN_1,e,t)},e.prototype.goldBigWin2=function(e,t){cc.log("*************************************************************************** Effect.goldBigWin2"),cc.log("goldBigWin2: "+t),o.fish.effectPool.play(o.fish.effectPool.GOLD_BIG_WIN_2,e,t)},e.prototype.goldEruption=function(e,t,i,s,a){var r=n.utils.splitNumber(a,40);cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/big_win_gold"),!1),e.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){this.againBigWinGoldSound()}.bind(this))));for(var h=0;h<40;h++){var l=n.utils.createSprite("fish_goldfly_02","game_effect");l.runAction(cc.hide()),l.setPosition(t),e.addChild(l);var d=n.utils.genAnimate("game_effect","gold_spin","fish_goldfly_",.1),_=o.fish.randomMinus1To1(),f=this._randPos(t,_),p=l.addComponent(cc.Animation);p.addClip(d),p.play("gold_spin").repeatCount=5,l.data={userId:s,gold:r[h]},l.runAction(cc.sequence(cc.delayTime(h/30),cc.show(),cc.sequence(cc.moveTo(.2,f[0]),cc.moveTo(.2,f[1]),cc.moveTo(.2,f[2]),cc.moveTo(.2,f[3]),cc.moveTo(.3,f[4]),cc.moveTo(.4,i).easing(cc.easeIn(3)),cc.delayTime(4/30),cc.removeSelf())))}},e.prototype.againBigWinGoldSound=function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/big_win_gold"),!1)},e.prototype.goldPie=function(e,t,i,n,s){cc.log("*************************************************************************** Effect.goldPie"),o.fish.effectPool.play(o.fish.effectPool.GOLD_PIE,e,t,i,n,s)},e.prototype.diamondFly=function(e,t,i,s,c){cc.log("*************************************************************************** Effect.diamondFly");var a=new cc.Node;e.addChild(a),a.runAction(cc.hide()),a.data={userId:s,diamond:c},a.runAction(cc.sequence(cc.delayTime(.5),cc.show(),cc.delayTime(3)));for(var r=0;r<c;r++){var h=new cc.Node;h.setPosition(t),h.setScale(.2),a.addChild(h);var l=n.utils.createSprite("fish_diamond_light","common");h.addChild(l),l.runAction(cc.repeatForever(cc.rotateBy(1,120)));var d=n.utils.createSprite("fish_diamond_flash_07","game_effect");h.addChild(d);var _=n.utils.genAnimate("game_effect","diamond_flash","fish_diamond_flash_",2/30),f=d.addComponent(cc.Animation);f.addClip(_),d.runAction(cc.sequence(cc.delayTime(.5),cc.repeat(cc.sequence(cc.delayTime(.6),cc.callFunc(function(){f.play("diamond_flash")}.bind(this))),10)));var p=o.fish.randomMinus1To1(),u=o.fish.random0To1(),m=cc.v2(t.x+80*p,t.y+100*u),g=cc.v2(m.x+40*p,m.y+20*u),v=cc.visibleRect;m=m.clampf(cc.v2(150,150),cc.v2(v.width-150,v.height-100)),g=g.clampf(cc.v2(150,150),cc.v2(v.width-150,v.height-100)),h.runAction(cc.hide()),h.data={userId:s,diamond:1},h.runAction(cc.sequence(cc.delayTime(.5+.3*o.fish.random0To1()),cc.show(),cc.spawn(cc.sequence(cc.scaleTo(.3,1,.577),cc.scaleTo(4/30,.9,1.2),cc.scaleTo(.1,1)),cc.sequence(cc.moveTo(7/30,m),cc.moveTo(2/30,g),cc.delayTime(2),cc.sequence(cc.moveTo(10/30,i),cc.callFunc(this._notifyUIAddDiamond,this),cc.removeSelf())))))}},e.prototype.catchExplode=function(e,t,i){cc.log("*************************************************************************** Effect.catchExplode"),o.fish.effectPool.play(1==t?o.fish.effectPool.CATCH_EXPLODE_1:o.fish.effectPool.CATCH_EXPLODE_2,e,i)},e.prototype.sharpExplode=function(e,t){cc.log("*************************************************************************** Effect.sharpExplode"),o.fish.effectPool.play(o.fish.effectPool.SHARP_EXPLODE,e,t)},e.prototype.zoomOutFade=function(e,t,i){cc.log("*************************************************************************** Effect.zoomOutFade"),o.fish.effectPool.play(o.fish.effectPool.ZOOM_OUT_FADE,e,t,i)},e.prototype.shakeScene1=function(e){cc.log("*************************************************************************** Effect.shakeScene1"),o.fish.effectPool.play(o.fish.effectPool.SHAKE_SCENE_1,e)},e.prototype.shakeScene2=function(e){cc.log("*************************************************************************** Effect.shakeScene2"),o.fish.effectPool.play(o.fish.effectPool.SHAKE_SCENE_2,e)},e.prototype.dropCardItem=function(e,t,i,s){cc.log("*************************************************************************** Effect.dropCardItem");var a=cc.v2(t.x,t.y+80),r=cc.visibleRect;a=a.clampf(cc.v2(150,150),cc.v2(r.width-150,r.height-100));var h=o.fish.pDistance(a,i)/1e3,l=n.utils.createSprite("fish_mermaid_card_back","mini_game"),d=n.utils.createSprite("fish_mermaid_question1","mini_game");l.addChild(d);var _=l.getContentSize();d.setPosition(cc.v2(.5*_.width,.5*_.height)),d.runAction(cc.repeatForever(cc.sequence(cc.tintTo(.5,255,255,255),cc.tintTo(.8,255,128,255),cc.tintTo(.5,255,255,255),cc.tintTo(.8,128,255,255),cc.tintTo(.5,255,255,255),cc.tintTo(.8,255,255,128)))),l.setScale(.3),l.setPosition(t),e.addChild(l),l.runAction(cc.sequence(cc.moveTo(2/30,a),cc.delayTime(2),cc.callFunc(function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/fly_item"),!1)}.bind(this)),cc.moveTo(h,i).easing(cc.easeIn(3)),cc.removeSelf()))},e.prototype.dropItem=function(e,t,i,s,r){if(cc.log("*************************************************************************** Effect.dropItem"),s!=a.ME.userId||3122!=r){var h=cc.v2(t.x,t.y+80),l=cc.visibleRect;h=h.clampf(cc.v2(150,150),cc.v2(l.width-150,l.height-100));var d=o.fish.pDistance(h,i)/1e3,_=n.utils.createSprite(n.configTable.item[r].big_icon.split(".")[0],"common");_.setScale(.6),_.setPosition(t),_.runAction(cc.hide()),e.addChild(_),_.runAction(cc.sequence(cc.delayTime(.5),cc.show(),cc.moveTo(2/30,h),cc.delayTime(2),cc.callFunc(function(){s!=a.ME.userId||3502!=r&&3503!=r?cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/fly_item"),!1):cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/drop_diamond"),!1)}.bind(this)),cc.moveTo(d,i).easing(cc.easeIn(3)),cc.removeSelf()))}else this.dropFireItem(e,t,i,s,r)},e.prototype.dropCrystal=function(e,t,i,s){cc.log("*************************************************************************** Effect.dropCrystal");var a=new cc.Node;a.runAction(cc.hide()),a.setPosition(t),a.setScale(.2),e.addChild(a);var r=n.utils.createSprite("fish_light_01","common");a.addChild(r),r.runAction(cc.repeatForever(cc.rotateBy(1,120)));var h=n.utils.createSprite(n.configTable.item[s].big_icon.split(".")[0],"common");a.addChild(h);var l=o.fish.randomMinus1To1(),d=o.fish.random0To1(),_=cc.v2(t.x+80*l,t.y+100*d),f=cc.v2(_.x+40*l,_.y+20*d),p=cc.visibleRect;_=_.clampf(cc.v2(150,150),cc.v2(p.width-150,p.height-100)),f=f.clampf(cc.v2(150,150),cc.v2(p.width-150,p.height-100)),a.runAction(cc.sequence(cc.delayTime(1+.3*o.fish.random0To1()),cc.show(),cc.callFunc(function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/drop_crystal"),!1)}.bind(this)),cc.spawn(cc.sequence(cc.scaleTo(.1,.6,.6),cc.scaleTo(4/30,1.2,1.2),cc.scaleTo(.1,1)),cc.sequence(cc.moveTo(7/30,_),cc.delayTime(2.5),cc.spawn(cc.scaleTo(10/30,.5),cc.sequence(cc.moveTo(10/30,i),cc.removeSelf()))))))},e.prototype.dropFireItem=function(e,t,i,r,h){cc.log("*************************************************************************** Effect.dropFireItem");var l=cc.v2(t.x,t.y+80),d=cc.visibleRect;l=l.clampf(cc.v2(150,150),cc.v2(d.width-150,d.height-100));var _=o.fish.pDistance(l,i)/1e3,f=n.utils.createSprite(n.configTable.item[h].big_icon.split(".")[0],"common"),p=new cc.Node,u=n.utils.createSprite("fish_diamond_light","common");u.runAction(cc.repeatForever(cc.rotateBy(1,120))),p.addChild(u),p.addChild(f),a.model.room_match.isJoinedRmatch||n.evtCenter.emit(s.evts.EVT_NEW_YEAR_DROP_FIRE,h),p.setScale(.8),p.setPosition(t),p.runAction(cc.hide()),e.addChild(p),p.runAction(cc.sequence(cc.delayTime(.5),cc.show(),cc.moveTo(2/30,l),cc.delayTime(4),cc.callFunc(function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/drop_diamond"),!1)}),cc.moveTo(_,i).easing(cc.easeIn(3)),cc.removeSelf()))},e.prototype.treasureDropItem=function(e,t,i,s,a,r){cc.log("*************************************************************************** Effect.treasureDropItem");var h=new cc.Node;e.addChild(h);for(var l=0;l<a;l++){var d=new cc.Node;d.setPosition(t),d.setScale(.437,.252),h.addChild(d);var _=n.utils.createSprite("fish_diamond_light","common");d.addChild(_),_.runAction(cc.repeatForever(cc.rotateBy(1,120)));var f=n.utils.createSprite(n.configTable.item[r].big_icon.split(".")[0],"common");d.addChild(f);var p=n.utils.createSprite(n.configTable.item[r].big_icon.split(".")[0],"common");p.opacity=0,d.addChild(p),p.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.4),cc.fadeTo(10/30,128),cc.fadeOut(10/30))));var u=o.fish.randomMinus1To1(),m=o.fish.random0To1(),g=cc.v2(t.x+80*u,t.y+150*m),v=cc.v2(g.x+40*u,g.y+20*m);d.runAction(cc.hide()),d.data={userId:s,diamond:1},d.runAction(cc.sequence(cc.delayTime(.3*o.fish.random0To1()),cc.show(),cc.spawn(cc.sequence(cc.scaleTo(.3,.9,.577),cc.scaleTo(4/30,.8,1.2),cc.scaleTo(.1,.9)),cc.sequence(cc.callFunc(function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/fly_item"),!1)}),cc.moveTo(7/30,g),cc.moveTo(2/30,v),cc.delayTime(2),cc.sequence(cc.moveTo(10/30,i),cc.removeSelf())))))}},e.prototype.showWpupParticle=function(e){if(cc.log("*************************************************************************** Effect.showWpupParticle"),!e.wpupParticle){var t=new cc.Node;e.addChild(t),e.wpupParticle=t;var i=cc.instantiate(c.AssetsManager.getRes("particle/wpup_star")).getComponent(cc.ParticleSystem);i.node.setPosition(0,41),i.positionType=cc.ParticleSystem.PositionType.FREE,t.addChild(i.node),i.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.9,cc.v2(268,41)),cc.moveTo(.3,cc.v2(268,-36)),cc.moveTo(.9,cc.v2(3,-36)),cc.moveTo(.3,cc.v2(3,41)))));var n=cc.instantiate(c.AssetsManager.getRes("particle/wpup_star")).getComponent(cc.ParticleSystem);n.node.setPosition(0,41),n.positionType=cc.ParticleSystem.PositionType.FREE,t.addChild(n.node),n.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.9,cc.v2(3,-36)),cc.moveTo(.3,cc.v2(3,41)),cc.moveTo(.9,cc.v2(268,41)),cc.moveTo(.3,cc.v2(268,-36)))))}},e.prototype.hideWpupParticle=function(e){cc.log("*************************************************************************** Effect.hideWpupParticle"),e.wpupParticle&&(e.removeChild(e.wpupParticle),e.wpupParticle=null)},e.prototype.wpupTips=function(e,t,i){cc.log("*************************************************************************** Effect.wpupTips");var s=null;s=i.y,s-=50;var c=o.fish.createScale9Sprite("img/atlas/scale9_8888","fish_prompt_frame1",cc.rect(10,10,10,10));c.setPosition(i.x+100,s);var a=n.utils.createSprite("fish_text8","lottery"),r=a.getContentSize();c.setContentSize(cc.size(r.width+180,34)),c.setScale(.5,1),c.opacity=0,e.addChild(c),c.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,cc.v2(i.x,s)),cc.scaleTo(.3,1),cc.fadeIn(.3)),cc.delayTime(1),cc.spawn(cc.moveTo(10/30,i.x+200,s),cc.scaleTo(10/30,.5,1),cc.fadeOut(10/30)),cc.removeSelf())),a.setPosition(cc.v2(i.x-50,s)),a.opacity=0,e.addChild(a),a.runAction(cc.sequence(cc.fadeIn(4/30),cc.delayTime(1.2),cc.fadeOut(10/30),cc.removeSelf()));var h=o.fish.createWithBMFont("fnt04",t.toString());h.setAnchorPoint(0,.5),h.setPosition(i.x+66,s),a.opacity=0,e.addChild(h),h.runAction(cc.sequence(cc.fadeIn(4/30),cc.delayTime(1.2),cc.fadeOut(10/30),cc.removeSelf()))},e.prototype.radialProgress=function(e,t,i,n,s){var o=e.getChildByName("radialProgress").getComponent(cc.ProgressBar);if(o.progress=1,i>0){var c=Date.now();o.schedule(function(){var e=(Date.now()-c)/1e3;e>=i?(o.progress=0,o.unscheduleAllCallbacks()):o.progress=1-e/i}.bind(this),0)}},e.prototype.radialProgressClear=function(e){cc.log("*************************************************************************** Effect.radialProgressClear");var t=e.getChildByName("radialProgress");t&&(t.getComponent(cc.ProgressBar).progress=0)},e.prototype.miniGoldRain=function(e,t,i){cc.log("*************************************************************************** Effect.miniGoldRain");var n=cc.instantiate(c.AssetsManager.getRes("prefabs/gold_coin_stack"));o.fish.adapterScreen(n),e.addChild(n,-1);var s=n.getComponent(cc.Animation);s.on(cc.Animation.EventType.FINISHED,function(){s.targetOff(this),s.play("animation1")}.bind(this),this),s.play("animation0")},e.prototype.showGoldHill=function(){cc.log("*************************************************************************** Effect.showGoldHill");var e=cc.instantiate(c.AssetsManager.getRes("prefabs/gold_coin_stack"));o.fish.adapterScreen(e);var t=e.getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),e.removeFromParent()}.bind(this),this),t.play("animation0")},e.prototype.showChestParticle=function(e,t){if(cc.log("*************************************************************************** Effect.showChestParticle"),!e.lotteryParticle){var i=new cc.Node;e.addChild(i,-1),i.setPosition(cc.v2(0,-t.height/2-10)),e.lotteryParticle=i;var n=cc.instantiate(c.AssetsManager.getRes("particle/wpup_star")).getComponent(cc.ParticleSystem);n.node.setPosition(cc.v2(-74,0)),n.positionType=cc.ParticleSystem.PositionType.FREE,i.addChild(n.node),n.node.setScale(.5),n.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.25,cc.v2(-34,-60)),cc.moveTo(.25,cc.v2(26,-60)),cc.moveTo(.25,cc.v2(78,35)),cc.moveTo(.25,cc.v2(-85,35)))));var s=cc.instantiate(c.AssetsManager.getRes("particle/wpup_star")).getComponent(cc.ParticleSystem);s.node.setPosition(cc.v2(35,-60)),s.positionType=cc.ParticleSystem.PositionType.FREE,i.addChild(s.node),s.node.setScale(.5),s.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.25,cc.v2(78,35)),cc.moveTo(.25,cc.v2(-85,35)),cc.moveTo(.25,cc.v2(-34,-60)),cc.moveTo(.25,cc.v2(26,-60)))))}},e.prototype.spinGoldFly=function(e,t,i,s){cc.log("*************************************************************************** Effect.spinGoldFly");for(var c=0;c<40;c++){var a=n.utils.createSprite("fish_goldfly_02","game_effect");a.runAction(cc.hide());var r=t.x+15*o.fish.randomMinus1To1(),h=t.y+15*o.fish.randomMinus1To1();a.setPosition(r,h),e.addChild(a);var l=n.utils.genAnimate("game_effect","gold_spin","fish_goldfly_",.1),d=a.addComponent(cc.Animation);d.addClip(l);var _=this._spinPos(t,o.fish.randomMinus1To1());d.play("gold_spin").repeatCount=5,a.runAction(cc.sequence(cc.delayTime(3*c/30),cc.show(),cc.sequence(cc.moveTo(.3,_[0]),cc.moveTo(.3,_[1]),cc.moveTo(.3,_[2]),cc.moveTo(.2,_[3]),cc.moveTo(.1,_[4]),cc.moveTo(.2,_[5]),cc.fadeOut(.2),cc.delayTime(4/30),cc.removeSelf())))}},e.prototype.mermaidCoinFly=function(e,t,i,s){cc.log("*************************************************************************** Effect.mermaidCoinFly");for(var o=0;o<s;o++){var c=n.utils.createSprite("fish_goldfly_01","game_effect");e.addChild(c),c.setPosition(t);var a=n.utils.genAnimate("game_effect","gold_spin","fish_goldfly_",.1),r=c.addComponent(cc.Animation);r.addClip(a);var h=this._randGoldPos(t);c.runAction(cc.sequence(cc.delayTime(o/30),cc.show(),cc.spawn(cc.callFunc(function(){r.play("gold_spin").repeatCount=5}.bind(this)),cc.sequence(cc.moveTo(2/30,h[0]),cc.moveTo(1/30,h[1]),cc.moveTo(2/30,h[2]),cc.moveTo(.1,h[3]),cc.moveTo(5/30,h[4]).easing(cc.easeInOut(.4)),cc.delayTime(.3),cc.moveTo(.4,i).easing(cc.easeIn(3)),cc.delayTime(4/30),cc.removeSelf()))))}},e.prototype.mermaidHuitHeart=function(e,t,i,s){cc.log("*************************************************************************** Effect.mermaidHuitHeart");for(var o=0;o<s;o++){var c=n.utils.createSprite("fish_xiadaomeiying_mozhi","mini_game");c.setScale(.8),e.addChild(c),c.setPosition(t);var a=this._randGoldPos(t);c.runAction(cc.sequence(cc.delayTime(o/30),cc.show(),cc.sequence(cc.moveTo(2/30,a[0]),cc.moveTo(1/30,a[1]),cc.moveTo(2/30,a[2]),cc.moveTo(.1,a[3]),cc.moveTo(5/30,a[4]).easing(cc.easeInOut(.4)),cc.delayTime(.3),cc.moveTo(.4,i).easing(cc.easeIn(3)),cc.delayTime(4/30),cc.removeSelf())))}},e.prototype.publicTipsShow=function(e,t,i){cc.log("*************************************************************************** Effect.publicTipsShow"),n.evtCenter.emit(s.evts.EVT_REMOVE_TIP_LICK_FISH,this),n.evtCenter.emit(s.evts.EVT_REMOVE_MSG_LABEL,this);var c=o.fish.createScale9Sprite("img/atlas/scale9_8888","fish_prompt_frame1",cc.rect(10,10,10,10));e.addChild(c);var a=n.utils.createSprite(t,"lottery");a.setPosition(i),a.opacity=0,e.addChild(a);var r=a.getContentSize();c.setContentSize(cc.size(r.width+80,34)),c.setPosition(i.x-200,i.y),c.setScale(.5,1),c.opacity=0,c.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,i),cc.scaleTo(.3,1),cc.fadeIn(.3)),cc.delayTime(3.5),cc.spawn(cc.moveTo(10/30,i.x+200,i.y),cc.scaleTo(10/30,.5,1),cc.fadeOut(10/30)),cc.removeSelf())),a.runAction(cc.sequence(cc.fadeIn(4/30),cc.delayTime(3.6),cc.fadeOut(10/30),cc.removeSelf()))},e.prototype.showLockTips=function(e,t,i){cc.log("*************************************************************************** Effect.showLockTips"),n.evtCenter.emit(s.evts.EVT_REMOVE_TIP_LICK_FISH,this),n.evtCenter.emit(s.evts.EVT_REMOVE_MSG_LABEL,this);var c=e.getChildByName("use_lock_tip");null!=c&&(c.stopAllActions(),c.removeFromParent(!0));var a=new cc.Node;e.addChild(a,0,"use_lock_tip"),a.setPosition(i.x,i.y);var r=o.fish.createScale9Sprite("img/atlas/scale9_8888","fish_prompt_frame1",cc.rect(50,10,2,2));a.addChild(r);var h=n.utils.createSprite(t,"game_common");h.opacity=0,a.addChild(h);var l=cc.v2(0,-60),d=n.utils.createSprite("fish_jiantou","common");h.addChild(d),d.setPosition(l);var _=d.getPosition(),f=cc.v2(_.x,_.y+15),p=cc.v2(_.x,_.y-15);d.runAction(cc.sequence(cc.fadeIn(4/30),cc.repeat(cc.sequence(cc.moveTo(.4,f),cc.moveTo(.2,p)),20),cc.fadeOut(10/30),cc.removeSelf()));var u=h.getContentSize();r.setContentSize(cc.size(u.width+40,34)),r.setScale(.5,1),r.opacity=0,r.runAction(cc.sequence(cc.spawn(cc.scaleTo(4/30,1),cc.fadeIn(4/30)),cc.delayTime(12),cc.spawn(cc.scaleTo(10/30,.5,1),cc.fadeOut(10/30)),cc.removeSelf())),h.runAction(cc.sequence(cc.fadeIn(4/30),cc.delayTime(12),cc.fadeOut(10/30),cc.removeSelf()))},e.prototype.chatTipsShow=function(e,t,i,s){cc.log("*************************************************************************** Effect.chatTipsShow"),i.y-=100;var o=n.utils.createSprite("fish_xinpaotaitishi","scale9_8888");o.setPosition(i.x-200,i.y),o.setScale(.5,1),o.opacity=0,e.addChild(o),o.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,i),cc.scaleTo(.3,1),cc.fadeIn(.3)),cc.delayTime(3.5),cc.spawn(cc.moveTo(10/30,i.x+200,i.y),cc.scaleTo(10/30,.5,1),cc.fadeOut(10/30)),cc.removeSelf()));var c=null;if(0==s){var a=(c=new cc.Node).addComponent(cc.Label);a.useSystemFont=!0,a.fontFamily="Arial",a.fontSize=25}else c=n.utils.createSprite("fish_liaotian_10","chat");c.setPosition(i),c.color=cc.color(11,102,227),e.addChild(c),c.runAction(cc.sequence(cc.fadeIn(4/30),cc.delayTime(3.6),cc.fadeOut(10/30),cc.removeSelf()))},e.prototype.summon=function(e,t,i){cc.log("*************************************************************************** Effect.summon");var n=cc.instantiate(c.AssetsManager.getRes("prefabs/summon"));n.setPosition(t),e.addChild(n),n.getComponent(cc.Animation).play("show"),n.runAction(cc.sequence(cc.moveTo(1.5,i),cc.delayTime(2),cc.removeSelf()))},e.prototype.treasureFly=function(e,t,i){cc.log("*************************************************************************** Effect.treasureFly");var s=n.utils.createSprite("fish_baoxiang_close","game_common");s.setPosition(t),e.addChild(s),s.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,.6,.6),cc.sequence(cc.moveTo(.5,i),cc.fadeOut(.2))),cc.removeSelf()))},e.prototype.redEnvelopeSpinGoldFly=function(e,t,i,s,c){cc.log("*************************************************************************** Effect.redEnvelopeSpinGoldFly");for(var a=0;a<30;a++){var r=n.utils.createSprite(i,"game_effect");r.runAction(cc.hide());var h=t.x+30*o.fish.randomMinus1To1(),l=t.y+30*o.fish.randomMinus1To1();r.setPosition(h,l),e.addChild(r);var d="gold_spin",_="fish_goldfly_";"diamond"==s&&(d="diamond_flash",_="fish_diamond_flash_");var f=n.utils.genAnimate("game_effect",d,_,.1);(g=r.addComponent(cc.Animation)).addClip(f);var p=this._redEnvelopeSpinPos(t,o.fish.randomMinus1To1());r.runAction(cc.sequence(cc.delayTime(2*a/30),cc.show(),cc.spawn(cc.callFunc(function(){g.play(f.name).repeatCount=5}.bind(this)),cc.sequence(cc.moveTo(.2,p[0]),cc.moveTo(.3,p[1]).easing(cc.easeIn(.7)),cc.moveTo(.9,p[2]).easing(cc.easeOut(.7)),cc.moveTo(.3,p[3]),cc.delayTime(.5),cc.removeSelf()))));var u=n.utils.createSprite(i,"game_effect");u.runAction(cc.hide());h=t.x+30*o.fish.randomMinus1To1(),l=t.y+30*o.fish.randomMinus1To1();u.setPosition(h,l),e.addChild(u);d="gold_spin",_="fish_goldfly_";"diamond"==s&&(d="diamond_flash",_="fish_diamond_flash_");f=n.utils.genAnimate("game_effect",d,_,.1);(g=u.addComponent(cc.Animation)).addClip(f);p=this._redEnvelopeSpinPos(t,o.fish.randomMinus1To1());u.runAction(cc.sequence(cc.delayTime(2*a/30),cc.show(),cc.spawn(cc.callFunc(function(){g.play(f.name).repeatCount=5}.bind(this)),cc.sequence(cc.moveTo(.2,p[0]),cc.moveTo(.3,p[1]).easing(cc.easeIn(.7)),cc.moveTo(.9,p[2]).easing(cc.easeOut(.7)),cc.moveTo(.3,p[3]),cc.delayTime(.5),cc.removeSelf()))));var m=n.utils.createSprite(i,"game_effect");m.runAction(cc.hide());h=t.x+30*o.fish.randomMinus1To1(),l=t.y+30*o.fish.randomMinus1To1();m.setPosition(h,l),e.addChild(m);d="gold_spin",_="fish_goldfly_";"diamond"==s&&(d="diamond_flash",_="fish_diamond_flash_");var g;f=n.utils.genAnimate("game_effect",d,_,.1);(g=m.addComponent(cc.Animation)).addClip(f);p=this._redEnvelopeSpinPos(t,o.fish.randomMinus1To1());m.runAction(cc.sequence(cc.delayTime(2*a/30),cc.show(),cc.spawn(cc.callFunc(function(){g.play(f.name).repeatCount=5}.bind(this)),cc.sequence(cc.moveTo(.2,p[0]),cc.moveTo(.3,p[1]).easing(cc.easeIn(.7)),cc.moveTo(.9,p[2]).easing(cc.easeOut(.7)),cc.moveTo(.3,p[3]),cc.delayTime(.5),cc.removeSelf()))));var v=n.utils.createSprite(i,"game_effect");v.active=!1;h=t.x+30*o.fish.randomMinus1To1(),l=t.y+30*o.fish.randomMinus1To1();v.setPosition(h,l),e.addChild(v);d="gold_spin",_="fish_goldfly_";"diamond"==s&&(d="diamond_flash",_="fish_diamond_flash_")}},e.prototype.rollNumber=function(e,t,i,n,s){cc.log("*************************************************************************** Effect.rollNumber"),o.fish.effectUtil.rollNumber(e,t,i,n,s)},e.prototype._getGoldFlyCount=function(e){return cc.log("*************************************************************************** Effect._getGoldFlyCount"),e>250?10:e>150?8:e>50?7:e>20?6:e>12?5:e>9?4:e>6?3:e>3?2:1},e.prototype._notifyUIAddGold=function(e){cc.log("*************************************************************************** Effect._notifyUIAddGold"),n.evtCenter.emit(s.evts.EVT_UI_ADD_GOLD,e.data.userId,e.data.gold)},e.prototype._notifyUITipsGold=function(e){cc.log("*************************************************************************** Effect._notifyUITipsGold"),n.evtCenter.emit(s.evts.EVT_UI_TIPS_GOLD,e.data.userId,e.data.gold)},e.prototype._notifyUIAddDiamond=function(e){cc.log("*************************************************************************** Effect._notifyUIAddDiamond"),n.evtCenter.emit(s.evts.EVT_UI_ADD_DIAMOND,e.data.userId,e.data.diamond)},e.prototype._notifyUITipsDiamond=function(e){cc.log("*************************************************************************** Effect._notifyUITipsDiamond"),n.evtCenter.emit(s.evts.EVT_UI_TIPS_DIAMOND,e.data.userId,e.data.diamond)},e.prototype._randPos=function(e,t){t=t>0?1:-1;var i=cc.v2(e.x,e.y+40),n=cc.v2(i.x+20*t,i.y+20),s=cc.v2(n.x+10*t,n.y-20),c=cc.v2(s.x,s.y-70),a=cc.v2(c.x-20*t,c.y);return o.fish.effectUtil.__randPos(i,0,40),o.fish.effectUtil.__randPos(n,10,10),o.fish.effectUtil.__randPos(s,10,10),o.fish.effectUtil.__randPos(c,20,40),o.fish.effectUtil.__randPos(a,10,20),[i,n,s,c,a]},e.prototype._spinPos=function(e,t){t=t>0?1:-1;var i=10+20*o.fish.random0To1(),n=120+25*o.fish.random0To1(),s=cc.v2(e.x+t*o.fish.random0To1()*40,e.y+50),c=cc.v2(s.x+30*t*o.fish.random0To1(),s.y+10),a=cc.v2(c.x+50*t*o.fish.random0To1(),c.y-120),r=cc.v2(a.x+20*t*o.fish.random0To1(),a.y-n),h=cc.v2(r.x+10*t*o.fish.random0To1(),r.y+i);return[s,c,a,r,h,cc.v2(h.x,h.y-i)]},e.prototype._randGoldPos=function(e){var t=o.fish.randomMinus1To1(),i=cc.v2(e.x,e.y+20),n=cc.v2(i.x+20*t,i.y+40),s=cc.v2(n.x+25*t,n.y-20),c=cc.v2(s.x+20*t,s.y-50);return[i,n,s,c,cc.v2(c.x+25*t,c.y+20*t)]},e.prototype._redEnvelopeSpinPos=function(e,t){t=t>0?1:-1;o.fish.random0To1();var i=cc.v2(e.x+t*o.fish.random0To1()*50,e.y+90),n=cc.v2(i.x+100*t*o.fish.random0To1(),i.y+60),s=cc.v2(n.x+220*t*o.fish.random0To1(),n.y-600);return[i,n,s,cc.v2(s.x+10*t*o.fish.random0To1(),s.y-12)]},e}();i.Effect=r,cc._RF.pop()},{"../../assets_manager":"assets_manager","../define/fish_event_types":"fish_event_types","../fish":"fish","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene"}],fish_event_center:[function(e,t,i){"use strict";cc._RF.push(t,"aa398ozfpFHNJTI+ZmwlCLK","fish_event_center"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(cc.EventTarget);i.EventCenter=n,cc._RF.pop()},{}],fish_event_types:[function(e,t,i){"use strict";cc._RF.push(t,"0cdec2Y9uhGnoF2fXN8e7f+","fish_event_types"),Object.defineProperty(i,"__esModule",{value:!0}),i.evts={EVT_NET_REQUEST:"net_request",EVT_NET_RESPONSE:"net_response",EVT_NET_POP_TIPS:"net_pop_tips",EVT_NET_SHOW_WAITING:"net_show_waiting",EVT_NET_HIDE_WAITING:"net_hide_waiting",EVT_NET_READY_QUIT:"net_ready_quit",EVT_NET_CANCEL_QUIT:"net_cancel_quit",EVT_NET_SET_DELAY:"net_set_delay",EVT_MSG_BOX:"msg_box",EVT_MSG_BOX2:"msg_box2",EVT_MSG_TIPS:"msg_tips",EVT_MSG_LABEL:"msg_label",EVT_REMOVE_MSG_LABEL:"remove_msg_label",EVT_MSG_BUY_ITEM:"msg_buy_item",EVT_SWITCH_SCENE:"switch_scene",EVT_POPUP_LOADING:"popup_loading",EVT_POPUP_DOUBLE_DAN_MESSAGE:"popup_double_dan_message",EVT_DOUBLE_DAN_RESULT:"double_dan_result",EVT_UI_ADD_GOLD:"ui_add_gold",EVT_UI_TIPS_GOLD:"ui_tips_gold",EVT_UI_ADD_DIAMOND:"ui_add_diamond",EVT_UI_TIPS_DIAMOND:"ui_tips_diamond",EVT_PUSH_ACT_GOLD:"push_action_gold",EVT_ADD_GOLD_ATONCE:"add_gold_at_once",EVT_SUB_GOLD:"event_sub_gold",EVT_PUSH_DIAMOND:"push_action_diamond",EVT_ADD_DIAMOND_ATONCE:"add_diamond_at_once",EVT_SUB_DIAMOND:"event_sub_diamond",EVT_PUSH_FURY:"event_push_fury",EVT_SUB_FURY:"event_sub_fury",EVT_PUSH_LOCK:"event_push_lock",EVT_SUB_LOCK:"event_sub_lock",EVT_PUSH_SUMMON:"event_push_summon",EVT_SUB_SUMMON:"event_sub_summon",EVT_PUSH_FREEZE:"event_push_freeze",EVT_SUB_FREEZE:"event_sub_freeze",EVT_PUSH_LASER:"event_push_laser",EVT_SUB_LASER:"event_sub_laser",EVT_PUSH_NBOMB:"event_push_nbomb",EVT_SUB_NBOMB:"event_sub_nbomb",EVT_GOLD_BUF_FINISHED:"gold_buffer_finished",EVT_DIAMOND_BUF_FINISHED:"diamond_buffer_finished",EVT_INFO_CHANGE:"info_change",EVT_LEVEL_UPGRADE:"level_upgrade",EVT_HIDE_LEVEL_UP:"hide_level_up",EVT_GOLD_INFO_CHG:"gold_info_change",EVT_DIAMOND_INFO_CHG:"diamond_info_change",EVT_RECV_USER_INFO:"recv_user_info",EVT_RECV_GAME_DATA:"recv_game_data",EVT_RECV_ROOM_LIST:"recv_room_list",EVT_RECV_MATCH_LIST:"recv_match_list",EVT_QUICK_START:"quick_start",EVT_ENTER_GAME_SCENE:"enter_game_scene",EVT_EXIT_GAME_SCENE:"exit_game_scene",EVT_PLAYER_ENTER:"player_enter",EVT_PLAYER_LEAVE:"player_leave",EVT_SEAT_BTN_TYPE:"evt_seat_btn_type",EVT_PUSH_PLAYER_INFO:"push_player_info",EVT_POPUP_NOBLE_GIFT:"popup_noble_gift",EVT_POPUP_NOBLE_GIFT_EVERYDAY:"popup_noble_gift_everyday",EVT_RELOAD_NOBLE_GIFT:"evt_reload_noble_gift",EVT_POPUP_VIP_WINDOW:"popup_vip_window",EVT_POPUP_SHOP_WINDOW:"popup_shop_window",EVT_UPDATE_SHOP_WINDOW:"update_shop_window",EVT_POPUP_ARENA_WINDOW:"popup_arena_window",EVT_POPUP_ARENA_RULE:"popup_arena_rule",EVT_POPUP_ARENA_MANITO:"popup_arena_manito",EVT_POPUP_ARENA_RANKING:"popup_arena_ranking",EVT_POPUP_ARENA_REWARD:"popup_arena_reward",EVT_POPUP_PROP_GIVE:"popup_prop_give",EVT_ROTATE_BATTERY:"rotate_battery",EVT_FIRE_BATTERY:"fire_battery",EVT_DEL_BULLET_BY_FISH:"del_bullet_by_fish",EVT_CLEAR_FIRE_QUEUE:"clear_fire_queue",EVT_CACHE_BULLETS:"cache_bullets",EVT_FIRE_FAILED:"fire_failed",EVT_FIRE_BROADCAST:"fire_broadcast",EVT_FIRE_RESPONSE:"fire_response",EVT_BULLET_HIT_FISH:"bullet_hit_fish",EVT_BULLET_HIT_PITON:"bullet_hit_piton",EVT_BULLET_TIMEOUT:"bullet_timeout",EVT_CATCH_SUCCESS:"catch_success",EVT_CATCH_FAILED:"catch_failed",EVT_FISH_TURN:"fish_turn",EVT_FISH_OUT_SCREEN:"fish_out_screen",EVT_FISH_EXIT:"fish_exit",EVT_PITON_HIT:"piton_hit",EVT_FISH_DIE_EFF:"fish_die_eff",EVT_SUMMON:"summon",EVT_NBOMB_USE:"nbomb_use",EVT_NBOMB_SKILL_COOLING:"nbomb_skill_cooling",EVT_NBOMB_FIRE:"nbomb_fire",EVT_SET_AUTO_STAT:"set_auto_stat",EVT_SET_FROZEN:"set_frozen",EVT_SET_LOCK_STAT:"set_lock_stat",EVT_SET_LOCK_FISH:"set_lock_fish",EVT_SET_FURY_STAT:"set_fury_level",EVT_LASER_BEGIN:"laser_begin",EVT_LASER_FIRE:"laser_fire",EVT_LASER_UPDATE:"laser_update",EVT_LASER_HIT_FISH:"laser_hit_fish",EVT_LASER_CATCH:"laser_catch",EVT_LASER_TIMEOUT:"laser_timeout",EVT_LASER_END:"laser_end",EVT_POPUP_CHG_WP:"popup_chg_wp",EVT_WEAPON_UPGRADE:"weapon_upgrade",EVT_MULTIPLE_CHANGED:"multiple_changed",EVT_SET_MULTIPLE:"set_multiple",EVT_REMIND_CHG_WP:"remind_chg_wp",EVT_WEAPON_CHANGED:"weapon_changed",EVT_SPECIAL_FISH_COMING:"special_fish_coming",EVT_PITON_DIE:"piton_die",EVT_FIRE_FENCE_SETUP:"fire_fence_setup",EVT_FIRE_FENCE_REMOVE:"fire_fence_remove",EVT_BATTERY_FROZEN:"battery_frozen",EVT_BATTERY_UNFROZEN:"battery_unfrozen",EVT_ICE_DRAGON_DIE:"ice_dragon_die",EVT_POPUP_TREASURE:"popup_treasure",EVT_TREASURE:"treasure",EVT_BANKRUPT:"bankrupt",EVT_SHOW_SUBSIDY:"show_subsidy",EVT_HIDE_SUBSIDY:"hide_subsidy",EVT_POPUP_LOTTERY:"popup_lottery",EVT_LOTTERY_RESULT:"lottery_result",EVT_LOTTERY_SHOWCARD:"lottery_show_card",EVT_REMOVE_LOTTERY:"remove_lottery_window",EVT_SHOW_MG_CARD:"show_mg_card",EVT_HIDE_MG_CARD:"hide_mg_card",EVT_POPUP_MERMAID_FORCE:"popup_mermaid_force",EVT_POPUP_CHEST_FORCE:"popup_chest_force",EVT_MINI_GAME_START:"minigame_start",EVT_MINI_GAME_PLAYING:"minigame_playing",EVT_MG_OPEN_TIP:"minigame_open_tip",EVT_MERMAID_DRAW:"mermaid_draw",EVT_MINI_GAME_END:"mini_game_end",EVT_CHEST_OVER:"chest_game_over",EVT_SPIN_OVER:"mg_spin_over",EVT_MG_CONDITION:"mg_open_condition",EVT_MERMAID_TEST:"mini_game_test",EVT_POPUP_PERSONAL_BAG:"evt_personal_bag",EVT_BAGGAGE_UPDATE:"baggage_update",EVT_RELOAD_BAG_INFO:"baggage_reload",EVT_POPUP_MAIL_MESSAGE:"evt_popup_mail_message",EVT_RELOAD_MAIL_MESSAGE:"evt_reload_mail_message",EVT_NOBLE_GIFT_POPUP:"noble_gift_popup",EVT_VIP_POPUP:"vip_popup",EVT_POPUP_HEAD_PERSONAL:"evt_personal_info",EVT_PERSONAL_RELOAD:"evt_personal_reload",EVT_SET_USER_INFO:"evt_set_user_info",EVT_POPUP_CHANGE_HEAD:"evt_lobby_change_head",EVT_RANDOM_USER_NAME:"evt_random_update_name",EVT_LOBBY_UPDATE_USER_IFNO:"evt_lobby_update_userinfo",EVT_POP_NEXT_LEVEL_REWARD:"evt_next_level_reward",EVT_ARENA_SYNC_SCORE:"arena_sync_score",EVT_ARENA_SYNC_BULLET:"arena_sync_bullet",EVT_ARENA_SUB_BULLET:"arena_sub_bullet",EVT_POP_ARENA_TASK:"arena_tlmt_task",EVT_ARENA_HIDE_TITLE:"arena_hide_title",EVT_ARENA_SHOW_TITLE:"arena_show_title",EVT_ARENA_TASK:"arena_task_data",EVT_ARENA_TASK_ADDSCORE:"arena_task_data_add_score",EVT_ARENA_END_NOTIFY:"arena_end_notify",EVT_POP_ARENA_SETTLEMENT:"arena_settlement",EVT_ARENA_ABORTION:"arena_abortion",EVT_RECV_MATCH_ENTER:"evt_match_enter",EVT_RECV_MATCH_FAMOUS:"evt_match_famous",EVT_RECV_MATCH_REWARD_LIST:"evt_match_reward_list",EVT_RECV_MATCH_INFO_YSTD:"evt_match_info_ystd",EVT_RECV_MATCH_REWARD:"evt_match_reward",EVT_RECV_ARENA_REWARD_INFO:"evt_match_reward_info",EVT_POP_FIRST_CHARGE:"evt_pop_first_charge",EVT_GET_FIRST_REWARD:"evt_get_first_reward",EVT_GET_ARTIFACT_REWARD:"evt_get_artifact_reward",EVT_GET_CRYSTAL_REWARD:"evt_get_crystal_reward",EVT_GET_CHANGE_REWARD:"evt_get_change_reward",EVT_POPUP_EXCHANGE_SHOP:"evt_popup_exchange_shop",EVT_RELOAD_EXCHANGE_SHOP:"evt_reload_exchange_shop",EVT_EXCHANGE_STORE_BUY:"evt_exchange_store_buy",EVT_EXCHANGE_BUY_RESULT:"evt_exchange_buy_result",EVT_POPUP_RANKING:"evt_ranking",EVT_POP_ACTIVITY:"evt_pop_activity",EVT_CLOSE_ACTIVITY:"evt_close_activity",EVT_ACTIVITY_CELL:"click_activity_cell",EVT_POP_ACT_FIRECRACKERS:"evt_pop_act_firecrackers",EVT_BEAT_COMPLETED:"evt_beat_completed",EVT_UPDATE_NEW_YEAR_DATA:"evt_update_new_year_data",EVT_MSG_BEAT_BEAST_TIP:"evt_msg_beat_beast_tip",EVT_BEAT_BEAST_RESULT:"evt_beat_beast_result",EVT_GET_FIRE_RESULT:"evt_get_fire_result",EVT_BEAT_BEAST_ERROR:"evt_beat_beast_error",EVT_RUN_BEAST_ACTION:"evt_run_beast_action",EVT_UPDATE_RANKING_DATA:"evt_update_ranking_data",EVT_NEW_YEAR_DROP_FIRE:"evt_new_year_drop_fire",EVT_UPDATE_CHANNEL_REWARD_DATA:"evt_update_channel_reward_data",EVT_POP_ACT_TORPEDO:"evt_pop_act_torpedo",EVT_POP_FESTIVAL_LOGIN:"evt_pop_festival_login",EVT_SHOW_LOGIN_PARTICLE:"evt_show_login_particle",EVT_HIDE_LOGIN_PARTICLE:"evt_hide_login_particle",EVT_UPDATE_ACT_LV:"evt_update_act_level",EVT_POPUP_DAILY_TASK:"evt_pop_daily_task",EVT_MSG_DAILY_REWARD:"evt_msg_daily_reward",EVT_DAILY_RELOAD:"evt_daily_reload",EVT_CLOSE_DAILY_TASK:"evt_close_daily_task",EVT_UPDATE_TASK_BTN:"evt_update_task_btn",EVT_SHOW_DAILY_TIP:"evt_show_box_tip",EVT_HIDE_DAILY_TIP:"evt_hide_box_tip",EVT_POPUP_DAILY_SIGN:"evt_pop_daily_sign",EVT_MSG_DAILY_SIGN:"evt_msg_daily_sign",EVT_CLOSE_DAILY_SIGN:"evt_close_daily_sign",EVT_POP_REWARD_PANEL:"evt_pop_reward_panel",EVT_CLOSE_INVITE_FRIENDS:"evt_close_invite_friends",EVT_POPUP_SIGN_TIP:"evt_pop_sign_tip",EVT_CLOSE_SIGN_TIP:"evt_close_sign_tip",EVT_POP_SETTING:"evt_pop_setting",EVT_CLOSE_SETTING:"evt_close_setting",EVT_POPUP_SYSTEM_NOTICE:"evt_popup_system_notice",EVT_TABLE_CHAT:"evt_table_chat",EVT_TABLE_SMILE:"evt_table_smile",EVT_LED:"red_led",EVT_RED_ENVELOPE_SHOW:"red_envelope_show",EVT_RED_ENVELOPE_RESULT:"red_envelope_result",EVT_RED_ENVELOPE_OTHER:"red_envelope_other",EVT_FISH_BOOK_SHOW:"fish_book_show",EVT_SKILL_RETURN:"evt_skill_return",EVT_USE_LOCK_TIP:"evt_use_lock_tip",EVT_REMOVE_LOCK_TIP:"evt_remove_lock_tip",EVT_TIP_LOCK_FISH:"evt_tip_lock_fish",EVT_REMOVE_TIP_LICK_FISH:"evt_remove_lock_fish",EVT_SHOW_MY_POSITION:"evt_show_my_position",EVT_REMOVE_MY_POS_TIP:"evt_remove_my_pos_tip",EVT_SHOW_SWEAPON_TIP:"evt_show_sweapon_tip",EVT_RECEIVE_NEW_GIFTS:"evt_receive_new_gifts",EVT_POPUP_NEWBIE_GUIDE:"evt_popup_newbie_guide",EVT_NEWBIE_DIAMOND_REWARD:"evt_newbie_diamond_reward",EVT_SHOW_NEWBIE_STEP:"evt_show_newbie_step",EVT_NEWBIE_GUNUP:"evt_newbie_gunup",EVT_NEWBIE_GOLD_FISH:"evt_newbie_gold_fish",EVT_NEWBIE_LOTTERY_SUCCESS:"evt_newbie_lottery_success",EVT_NEWBIE_GUIDE_SUCCESS:"evt_newbie_guide_success",EVT_NEWBIE_SHOW_BATTERY:"evt_newbie_show_battery",EVT_NEWBIE_HIDE_BATTERY:"evt_newbie_hide_battery",EVT_POPUP_NEWBIE_TASK:"evt_popup_newbie_task",EVT_UPDATE_NEWBIE_TASK:"evt_popup_newbie_task",EVT_SHOW_NEWBIE_TASK_PANEL:"evt_show_newbie_task_panel",EVT_REMOVE_NEWBIE_TASK:"evt_remove_newbie_task",EVT_GUIDE_THIRTY_WEAPON:"evt_guide_thirty_weapon",EVT_POPUP_MORE_GAME:"evt_popup_more_game",EVT_POPUP_INVITE_FRIENDS:"evt_popup_invite_friends",EVT_POPUP_INVITEFRIENDS_DIAMOND:"evt_popup_invitefriends_diamond",EVT_SET_INFO_INVITE_FRIENDS:"evt_set_info_invite_friends",EVT_RELOAD_NEW_REWARD:"evt_reload_new_reward",EVT_PUSH_BACK_KEY:"push_back_key",EVT_POP_BACK_KEY:"pop_back_key",EVT_PUSH_POPUP_KEY:"push_popup_key",EVT_POP_POPUP_KEY:"pop_popup_key",EVT_POP_POPUP_OPEN:"evt_pop_popup_open",EVT_RMATCH_READY:"show_rmatch_ready",EVT_RMATCH_NEXT:"show_rmatch_next",EVT_RMATCH_GUIDE:"show_rmatch_guide",EVT_HIDE_RMATCH_GUIDE:"hide_rmatch_guide",EVT_RMATCH_START_VIEW:"room_match_start_view",EVT_RMATCH_SHOW_RANK:"room_match_show_rank",EVT_RMATCH_HIDE_RANK:"room_match_hide_rank",EVT_RMATCH_START:"room_match_start",EVT_RMATCH_END:"room_match_end",EVT_RMATCH_UPDATE_SCORE:"room_match_update_score",EVT_RMATCH_UPDATE_RANK:"room_match_update_rank",EVT_RMATCH_BANNER:"room_match_banner",EVT_SHOW_SUPER:"show_super_weapon",EVT_HIDE_SUPER:"hide_super_weapon",EVT_UPDATE_RED_TIP:"update_red_tip",EVT_SHOW_AUTO_PARTICLE:"evt_show_auto_particle",EVT_STOP_FIRE:"evt_stop_fire",EVT_VERIFY_CALL_BACK:"evt_verify_call_back",EVT_PRESENT_CALL_BACK:"evt_present_call_back",EVT_BAG_MONEY_EXCHANGE:"evt_bag_money_exchange",EVT_POP_FRIENDS:"evt_pop_friends",EVT_RECEIVE_FRIENDS_LIST:"evt_receive_friends_list",EVT_RECEIVE_FRIENDS_APPLICANTS:"evt_receive_friends_applicants",EVT_RECEIVE_FRIENDS_INFOS:"evt_receive_friends_info",EVT_APPLY_FRIENDS:"evt_apply_friends",EVT_PRAISE_FRIENDS:"evt_praise_friends",EVT_REMOVE_FRIENDS:"evt_remove_friends",EVT_GET_GIGT_FRIENDS:"evt_get_info_gift",EVT_FRIENDS_RELATION:"evt_read_friends_relation",EVT_OPEN_FRIENDS:"evt_open_friends",EVT_AGREE_WITH_APPLY:"evt_agree_friends",EVT_CHECK_BANKRUPT_PACKAGE:"evt_check_bankrupt_package",EVT_SHOW_BANKRUPT_PACKAGE:"evt_show_bankrupt_package",EVT_SHOW_BANKRUPT_PACKAGE_BTN:"evt_show_bankrupt_package_btn",EVT_REMOVE_BANKRUPT_PACKAGE_BTN:"evt_remove_bankrupt_package_btn",EVT_PURCHASE_BANKRUPT_PACKAGE_SUCCESS:"evt_purchase_bankrupt_package_success",EVT_WEAPON_FORGE_RESULT:"weapon_forge_result",EVT_CRYSTAL_RESOLVE_RESULT:"crystal_resolve_result",EVT_SHZ_CANCEL_AUTO_GAME:"shz_cancel_auto_game",EVT_ELECTRIC_FISH:"electric_fish",EVT_BOMB_FISH:"bomb_fish",EVT_COMBINE_FISH:"combine_fish"},cc._RF.pop()},{}],fish_fire_object:[function(e,t,i){"use strict";cc._RF.push(t,"0ca46ktwfFId7OIHx2JJlFN","fish_fire_object"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(e,t,i,n,s,o){this.seatId=e||0,this.bulletId=t||0,this.weaponId=i||0,this.isFury=n||0,this.fishId=s||0,this.pt=o||cc.v2(0,0)}}();i.FireObject=n,cc._RF.pop()},{}],fish_fire_queue:[function(e,t,i){"use strict";cc._RF.push(t,"e0612ikZ1hG5KDYvYq/4Mav","fish_fire_queue"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_fire_object"),s=function(){function e(e){this._maxFiredLength=10,this._weaponInfo=e,this._lastFireTime=0,this._readyQueue=[],this._firedQueue={},this._freeIds=[],this._usedIds=[];for(var t=1;t<=80;t++)this._freeIds.push(t)}return e.prototype.removeByFishId=function(e){this._readyQueue=this._readyQueue.filter(function(t){return t.fishId!=e})},e.prototype.clearReadyQueue=function(){this._readyQueue=[]},e.prototype.getReadyLength=function(){return this._readyQueue.length},e.prototype.cache=function(e,t,i,s,o,c){if(this._readyQueue.length+this._usedIds.length<this._maxFiredLength){var a=new n.FireObject(e,t,i,s,o,c);this._readyQueue.push(a)}},e.prototype.fetch=function(){if(0==this._readyQueue.length)return null;var e=Date.now();if(this._lastFireTime+1e3*this._weaponInfo.interval>e)return null;this._lastFireTime=e;var t=this._readyQueue.shift();return 0==t.bulletId&&(t.bulletId=this._newBulletId()),this._firedQueue[t.bulletId]=t,t},e.prototype.reset=function(e){this._freeBulletId(e);var t=this._firedQueue[e];return t?(delete this._firedQueue[e],t):null},e.prototype._newBulletId=function(){if(0==this._freeIds.length)return 0;var e=this._freeIds.shift();return this._usedIds.push(e),e},e.prototype._freeBulletId=function(e){var t=this._usedIds.indexOf(e);-1!=t&&this._usedIds.splice(t,1),-1==this._freeIds.indexOf(e)&&this._freeIds.push(e)},e}();i.FireQueue=s,cc._RF.pop()},{"./fish_fire_object":"fish_fire_object"}],fish_fire_view_other:[function(e,t,i){"use strict";cc._RF.push(t,"8cd5cgg5RpIi6KgFXclgxRb","fish_fire_view_other"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../logic/fish_fire_queue"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../fish"),r=e("../../buffer/fish_buffer"),h=e("../../define/fish_msg_types"),l=e("../../logic/fish_tcp"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.fire_Index=0,this.playerInfo=e,this.fireQueue=new n.FireQueue(e.curWeapon)},t.prototype.onLoad=function(){s.evtCenter.on(o.evts.EVT_FIRE_BROADCAST,this.onEventFireBroadcast,this),s.evtCenter.on(o.evts.EVT_BULLET_HIT_FISH,this.onEventDelBullet,this),s.evtCenter.on(o.evts.EVT_BULLET_HIT_PITON,this.onEventDelBullet,this),s.evtCenter.on(o.evts.EVT_CATCH_SUCCESS,this.onEventDelBullet,this),s.evtCenter.on(o.evts.EVT_CATCH_FAILED,this.onEventDelBullet,this),cc.director.getScheduler().scheduleUpdate(this,0,!1)},t.prototype.update=function(e){var t=this.fireQueue.fetch();if(t){if(t.fishId>0){if(t.pt=a.fish.gameView.getFishPos(t.fishId),0==t.pt.x&&0==t.pt.y)return cc.log("invalid fish: "+t.fishId),void this.fireQueue.reset(t.bulletId);s.evtCenter.emit(o.evts.EVT_ROTATE_BATTERY,this.playerInfo.userId,t.pt),a.fish.gameView.playerFire(this.playerInfo.seatId,t.bulletId,t.weaponId,t.isFury,t.fishId)}else s.evtCenter.emit(o.evts.EVT_ROTATE_BATTERY,this.playerInfo.userId,t.pt),a.fish.gameView.playerFire(this.playerInfo.seatId,t.bulletId,t.weaponId,t.isFury,t.pt);s.evtCenter.emit(o.evts.EVT_FIRE_BATTERY,this.playerInfo.userId);var i=this.playerInfo.curWeapon.costGold;t.isFury&&(this.playerInfo.vipLv>=5?i*=3:i*=2),r.buffer.subGold(this.playerInfo.userId,i),s.evtCenter.emit(o.evts.EVT_ARENA_SUB_BULLET,this.playerInfo.seatId)}},t.prototype.onEventFireBroadcast=function(e,t,i,n,a){cc.log("**************************************** onEventFireBroadcast"),this.playerInfo.seatId==e&&(this.fireQueue.cache(e,t,i,0!=this.playerInfo.fireIsFury,this.playerInfo.fireLockFishId,n),this.playerInfo.gold=a,c.model.table.isMatch&&s.evtCenter.emit(o.evts.EVT_GOLD_INFO_CHG,this.playerInfo.userId,a))},t.prototype.onEventDelBullet=function(e,t,i){if(e==this.playerInfo.seatId&&(this.fireQueue.reset(t)&&this.playerInfo.isRobot)){var n={cmd:h.msgs.CMD_TABLE_CALL,params:{action:"catch",userId:this.playerInfo.userId,tableId:c.model.table.tableId,seatId:e,fFlg:t,wpId:this.playerInfo.curWeapon.weaponId,fId:i,gameId:28,roomId:c.model.table.roomId}};l.tcp.send(n)}a.fish.gameView.bulletDie(e,t)},t}(cc.Component);i.FireViewOther=d,cc._RF.pop()},{"../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_fire_queue":"fish_fire_queue","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_fire_view_self:[function(e,t,i){"use strict";cc._RF.push(t,"b918fActr5FKbhCgjhX//28","fish_fire_view_self"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../logic/fish_fire_queue"),c=e("../../model/fish_model"),a=e("../../define/fish_consts"),r=e("../../logic/fish_tcp"),h=e("../../buffer/fish_buffer"),l=e("../../define/fish_msg_types"),d=e("../../scene/fish_scene_login"),_=e("../../fish"),f=e("../../../assets_manager"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.playerInfo=e,this.fireQueue=new o.FireQueue(e.curWeapon),this.isHold=!1,this.isTimer=!1,this.lastFirePt=cc.v2(0,0),this.lastCacheTime=0,this.touchFishId=0,this.enableLockAnim=!1;var t=cc.visibleRect;this.node.setContentSize(t.width,t.height),this.node.setAnchorPoint(cc.v2(0,0)),this.scheduler=cc.director.getScheduler();var i=n.utils.getRelativeSeat(e.seatId);this.lastFirePt.set(n.utils.getFirePosition(i))},t.prototype.onLoad=function(){n.evtCenter.on(s.evts.EVT_SET_AUTO_STAT,this.onEventSetAuto,this),n.evtCenter.on(s.evts.EVT_SET_LOCK_STAT,this.onEventSetLock,this),n.evtCenter.on(s.evts.EVT_SET_FURY_STAT,this.onEventSetFury,this),n.evtCenter.on(s.evts.EVT_LASER_BEGIN,this.onEventLaserBegin,this),n.evtCenter.on(s.evts.EVT_LASER_FIRE,this.onEventLaserFire,this),n.evtCenter.on(s.evts.EVT_LASER_END,this.onEventSetLaserEnd,this),n.evtCenter.on(s.evts.EVT_FISH_OUT_SCREEN,this.onEventFishOutScreen,this),n.evtCenter.on(s.evts.EVT_FISH_EXIT,this.onEventFishExit,this),n.evtCenter.on(s.evts.EVT_FIRE_FAILED,this.onEventFireFailed,this),n.evtCenter.on(s.evts.EVT_BULLET_HIT_FISH,this.onEventBulletHitFish,this),n.evtCenter.on(s.evts.EVT_BULLET_HIT_PITON,this.onEventBulletHitPiton,this),n.evtCenter.on(s.evts.EVT_BULLET_TIMEOUT,this.onEventBulletTimeout,this),n.evtCenter.on(s.evts.EVT_CATCH_SUCCESS,this.onEventCatchSuccess,this),n.evtCenter.on(s.evts.EVT_CATCH_FAILED,this.onEventCatchFailed,this),n.evtCenter.on(s.evts.EVT_LASER_CATCH,this.onEventLaserCatch,this),n.evtCenter.on(s.evts.EVT_NBOMB_FIRE,this.onEventNbombFire,this),n.evtCenter.on(s.evts.EVT_STOP_FIRE,this.onEventStopFire,this),n.evtCenter.on(s.evts.EVT_HIDE_RMATCH_GUIDE,this.onEventRmatchEnd,this),n.evtCenter.on(s.evts.EVT_RMATCH_START,this.onEventRmatchBegin,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.scheduler.scheduleUpdate(this,0,!1)},t.prototype.onEventStopFire=function(){this.onTouchEnded(null)},t.prototype.update=function(e){var t=this.fireQueue.fetch();if(t){if(t.fishId>0){if(t.pt=_.fish.gameView.getFishPos(t.fishId),0==t.pt.x&&0==t.pt.y)return cc.log("invalid fish: "+t.fishId),void this.fireQueue.reset(t.bulletId);this.lastFirePt.set(t.pt),n.evtCenter.emit(s.evts.EVT_ROTATE_BATTERY,this.playerInfo.userId,t.pt),_.fish.gameView.playerFire(this.playerInfo.seatId,t.bulletId,t.weaponId,t.isFury,t.fishId)}else t.pt.set(this.lastFirePt),_.fish.gameView.playerFire(this.playerInfo.seatId,t.bulletId,t.weaponId,t.isFury,t.pt);n.evtCenter.emit(s.evts.EVT_FIRE_BATTERY,this.playerInfo.userId);var i=this.playerInfo.curWeapon.costGold;t.isFury&&(this.playerInfo.vipLv>=5?i*=3:i*=2),c.ME.gold-=i,h.buffer.subGold(c.ME.userId,i);var o=n.utils.convertPt(t.pt);cc.log("***************************** pt = ",o);var a=new ArrayBuffer(32),p=new DataView(a);p.setFloat32(0,n.utils.v2px(o.x),!0),p.setFloat32(4,n.utils.v2py(o.y),!0);var u=new DataView(a),m=u.getFloat32(0,!1),g=u.getFloat32(4,!1),v={cmd:l.msgs.CMD_TABLE_CALL,params:{action:"fire",userId:c.ME.userId,tableId:c.model.table.tableId,seatId:c.model.table.seatId,wpId:t.weaponId,fPosx:m,fPosy:g,gameId:28,clientId:d.AccountInfo.clientId,roomId:c.model.table.roomId,fFlg:t.bulletId}};cc.log("------------------CMD_FIRE_VERIFY %s",JSON.stringify(v)),r.tcp.send(v),t.isFury?cc.audioEngine.playEffect(f.AssetsManager.getRes("sound/fire_fury"),!1):cc.audioEngine.playEffect(f.AssetsManager.getRes("sound/fire_laser_1"),!1)}},t.prototype.onEventSetAuto=function(e){this._setTimer()},t.prototype.onEventSetLock=function(e,t){e==c.model.table.seatId&&(0==this.touchFishId&&(this.enableLockAnim=!0),t?0==this.touchFishId?_.fish.gameView.setFishLockMark(0,!1):(_.fish.gameView.setFishLockMark(this.touchFishId,!0),this._sendLockFish(this.touchFishId)):_.fish.gameView.clearFishLockMark()),this._setTimer()},t.prototype.onEventSetFury=function(e,t){e==c.model.table.seatId&&(0==this.touchFishId&&(this.enableLockAnim=!0),t?0==this.touchFishId?_.fish.gameView.setFishLockMark(0,!1):(_.fish.gameView.setFishLockMark(this.touchFishId,!0),this._sendLockFish(this.touchFishId)):_.fish.gameView.clearFishLockMark(),this._setTimer())},t.prototype.onEventLaserBegin=function(e,t){this._setTimer()},t.prototype.onEventLaserFire=function(e,t){this.lastFirePt.set(t)},t.prototype.onEventSetLaserEnd=function(e,t){this._setTimer()},t.prototype.onEventFishOutScreen=function(e){e==this.touchFishId&&(this.fireQueue.removeByFishId(e),this.touchFishId=0,(c.model.table.isLock||c.model.table.isFury)&&_.fish.gameView.setFishLockMark(0,!1))},t.prototype.onEventFishExit=function(e){e==this.touchFishId&&(this.fireQueue.removeByFishId(e),this.touchFishId=0,(c.model.table.isLock||c.model.table.isFury)&&_.fish.gameView.setFishLockMark(0,!1))},t.prototype.onEventFireFailed=function(e,t,i){this.playerInfo.seatId==e&&(this.fireQueue.reset(t),h.buffer.pushGold(this.playerInfo.userId,this.playerInfo.curWeapon.costGold,1))},t.prototype.onEventBulletHitFish=function(e,t,i){if(e==this.playerInfo.seatId){var n=this.fireQueue.reset(t);if(n&&this.playerInfo.seatId==c.model.table.seatId){var s={cmd:l.msgs.CMD_TABLE_CALL,params:{action:"catch",userId:c.ME.userId,tableId:c.model.table.tableId,seatId:c.model.table.seatId,fFlg:t,wpId:n.weaponId,fId:i,gameId:28,clientId:d.AccountInfo.clientId,roomId:c.model.table.roomId}};r.tcp.send(s)}}},t.prototype.onEventBulletHitPiton=function(e,t,i){if(e==this.playerInfo.seatId){var n=this.fireQueue.reset(t);if(n&&this.playerInfo.seatId==c.model.table.seatId){var s={cmd:l.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:c.ME.userId,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId,action:"iceDrg",subAct:"shot",pitonId:i,wpId:n.weaponId}};r.tcp.send(s)}}},t.prototype.onEventBulletTimeout=function(e,t){this.playerInfo.seatId==e&&(this.fireQueue.reset(t),_.fish.gameView.bulletDie(e,t))},t.prototype.onEventCatchSuccess=function(e,t,i,n){i==this.touchFishId&&(this.fireQueue.removeByFishId(i),this.touchFishId=0,(c.model.table.isLock||c.model.table.isFury)&&_.fish.gameView.setFishLockMark(0,!1)),e==this.playerInfo.seatId&&this.fireQueue.reset(t)},t.prototype.onEventCatchFailed=function(e,t){this.playerInfo.seatId==e&&this.fireQueue.reset(t)},t.prototype.onEventLaserCatch=function(e,t,i,n){t==this.touchFishId&&(this.fireQueue.removeByFishId(t),this.touchFishId=0,(c.model.table.isLock||c.model.table.isFury)&&_.fish.gameView.setFishLockMark(0,!1))},t.prototype.onEventNbombFire=function(e,t,i,n){for(var s=0;s<n.length;s++)if(n[s]==this.touchFishId)return this.fireQueue.removeByFishId(n[s]),this.touchFishId=0,void((c.model.table.isLock||c.model.table.isFury)&&_.fish.gameView.setFishLockMark(0,!1))},t.prototype.onEventRmatchEnd=function(){_.fish.gameView.clearFishRmatchMark()},t.prototype.onEventRmatchBegin=function(){_.fish.gameView.setFishRmatchMark()},t.prototype.onTouchBegan=function(e){if(r.tcp.isNetTimeout())return!1;if(c.model.table.isLaser||c.model.table.isBatteryFrozen||c.model.table.HeartBeat)return!1;if(c.model.subsidy.isBankrupt)return!!c.model.subsidy.ReadBoolFromLocalStorage("bankrupt",!1)&&(cc.sys.localStorage.setItem("bankrupt","false"),n.evtCenter.emit(s.evts.EVT_CHECK_BANKRUPT_PACKAGE),!1);if(h.buffer.gameGold.gold<=0)return!1;var t=c.ME.playerInfo.curWeapon;if(h.buffer.gameGold.gold<t.costGold)return!1;var i=c.ME.playerInfo.maxWeapon;if(t.weaponId>i.weaponId)return n.evtCenter.emit(s.evts.EVT_MSG_BOX,"\u6b66\u5668\u500d\u7387\u672a\u89e3\u9501",this._setMaxWeapon,this),!1;var o=e.getLocation();if(this.lastFirePt.set(o),c.model.table.isLock||c.model.table.isFury){var a=_.fish.gameView.getFishAtPosition(o);a>0&&this.touchFishId!=a&&(n.evtCenter.emit(s.evts.EVT_ROTATE_BATTERY,c.ME.userId,o),_.fish.gameView.clearFishLockMark(),this.enableLockAnim?(this.enableLockAnim=!1,_.fish.gameView.setFishLockMark(a,!0)):_.fish.gameView.setFishLockMark(a,!1),this.touchFishId=a,this._sendLockFish(a))}else this.isHold=!0,n.evtCenter.emit(s.evts.EVT_ROTATE_BATTERY,c.ME.userId,o),this._checkFire(0);return this._setTimer(),!c.model.table.isLock},t.prototype.onTouchMoved=function(e){if(!(c.model.table.isLock||c.model.table.isFury||c.model.table.isBatteryFrozen)){var t=e.getLocation();this.lastFirePt.set(t),n.evtCenter.emit(s.evts.EVT_ROTATE_BATTERY,c.ME.userId,t)}},t.prototype.onTouchEnded=function(e){this.isHold=!1,this._setTimer()},t.prototype._setTimer=function(){this.isHold||c.model.table.isAuto||c.model.table.isLock||c.model.table.isFury?this.isTimer||(this.isTimer=!0,this.scheduler.schedule(this._onTimerAutoFire,this,c.ME.playerInfo.curWeapon.interval)):(this.isTimer=!1,this.scheduler.unschedule(this._onTimerAutoFire,this))},t.prototype._onTimerAutoFire=function(e){if(c.model.table.isLaser||c.model.table.isBatteryFrozen)return!1;var t=c.ME.playerInfo;h.buffer.gameGold.gold<t.curWeapon.costGold||t.curWeapon.weaponId>t.maxWeapon.weaponId||(c.model.table.isAuto&&n.evtCenter.emit(s.evts.EVT_ROTATE_BATTERY,c.ME.userId,this.lastFirePt),c.model.table.isLock||c.model.table.isFury?this.touchFishId>0?this._checkFire(this.touchFishId):c.model.table.isAuto&&this._checkFire(0):this._checkFire(0))},t.prototype._checkFire=function(e){cc.log("checkFire:",0==this.fireQueue.getReadyLength(),!r.tcp.isNetTimeout(),!r.tcp.isNetWeak()),0!=this.fireQueue.getReadyLength()||r.tcp.isNetTimeout()||r.tcp.isNetWeak()||this.fireQueue.cache(c.model.table.seatId,0,this.playerInfo.curWeapon.weaponId,c.model.table.isFury,e,cc.v2(0,0))},t.prototype._sendLockFish=function(e){var t={cmd:l.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:c.ME.userId,action:"skill",skillId:c.model.table.isFury?a.Skill.FURY:a.Skill.LOCK,subAction:"fish",fId:e,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId}};r.tcp.send(t)},t.prototype._setMaxWeapon=function(){if(0!=h.buffer.gameGold.gold){for(var e=c.ME.playerInfo.maxWeapon.weaponId;;){var t=n.configTable.weapon[e];if(!t||t.weapon_cost<=h.buffer.gameGold.gold)break;--e}if(e!=c.ME.playerInfo.curWeapon.weaponId){var i={cmd:l.msgs.CMD_TABLE_CALL,params:{action:"gchg",userId:c.ME.userId,clientId:d.AccountInfo.clientId,gameId:28,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId,gLv:e}};r.tcp.send(i)}}},t}(cc.Component);i.FireViewSelf=p,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_fire_queue":"fish_fire_queue","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_first_charge_activity:[function(e,t,i){"use strict";cc._RF.push(t,"457bbTM6bNH64fv/pvt9R/e","fish_first_charge_activity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../define/fish_msg_types"),r=e("../../logic/fish_tcp"),h=e("../../scene/fish_scene_login"),l=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.label_received=null,t.btnReceive=null,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/first_charge_activity")),t.btnReceive=cc.find("archor/btnReceive",t.csbNode),t.label_received=cc.find("archor/btnReceive/label_received",t.csbNode),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode),this.csbNode.getComponent(cc.Animation).play("roll"),s.evtCenter.on(o.evts.EVT_GET_FIRST_REWARD,this.onEventUpdateView,this)},t.prototype.onDestroy=function(){s.evtCenter.off(o.evts.EVT_GET_FIRST_REWARD,this.onEventUpdateView,this)},t.prototype.onEventUpdateView=function(){var e=n.AssetsManager.getRes("img/atlas/common"),t=n.AssetsManager.getRes("img/atlas/scale9_8888");this.btnReceive.getComponent(cc.Button).enabled=!1,this.label_received.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_common_received"),this.btnReceive.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_button_disabled")},t.prototype.onBtnReceive=function(e){if(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),c.model.guide.isFirstCharge)if(c.model.dailytask.isLobby){var t={cmd:a.msgs.CMD_FISH_ACTIVITY,params:{action:"reward",gameId:28,userId:c.ME.userId,activityId:"FirstRecharge",clientId:h.AccountInfo.clientId}};r.tcp.send(t)}else{var i={cmd:a.msgs.CMD_TABLE_CALL,params:{action:"activity_reward",gameId:28,userId:c.ME.userId,activityId:"FirstRecharge",roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId,clientId:h.AccountInfo.clientId}};r.tcp.send(i)}else s.evtCenter.emit(o.evts.EVT_CLOSE_ACTIVITY),s.evtCenter.emit(o.evts.EVT_POPUP_SHOP_WINDOW,c.model.shop.SHOP_GOLD)},t}(cc.Component);i.AtvFirstCharge=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_first_charge:[function(e,t,i){"use strict";cc._RF.push(t,"16040TB7qBCgoLzeDQXA7XV","fish_first_charge"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../define/fish_msg_types"),a=e("../../model/fish_model"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=e("../../fish"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbNode=null,this.btnReceive=null,this.label_received=null},t.prototype.onLoad=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/first_benefits_charge")),l.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),this.btnReceive=cc.find("archor/detail/btnReceive",this.csbNode),this.btnReceive.on(cc.Node.EventType.TOUCH_END,this.onBtnReceive,this),cc.find("archor/detail/btnClose",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this);var e=this.csbNode.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("roll").wrapMode=cc.WrapMode.Loop}.bind(this),this),e.play("show"),s.evtCenter.on(o.evts.EVT_GET_CHANGE_REWARD,this.onEventChargeChange,this),this.scheduleOnce(this.pushBackKey,.1)},t.prototype.pushBackKey=function(){s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){s.evtCenter.off(o.evts.EVT_GET_CHANGE_REWARD,this.onEventChargeChange,this),s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnClose(null)},t.prototype.onBtnReceive=function(){var e={cmd:c.msgs.CMD_STORE_FISH,params:{action:"order_transaction",gameId:9999,userId:a.ME.userId,clientId:r.AccountInfo.clientId,prodId:"TY28P000610102",count:1,isRecharge:0}};h.tcp.send(e)},t.prototype.onEventChargeChange=function(){s.evtCenter.emit(o.evts.EVT_POP_REWARD_PANEL,[{giftId:101,giftIcon:"fish_101.png",giftNum:15e4},{giftId:102,giftIcon:"fish_102.png",giftNum:100},{giftId:3101,giftIcon:"fish_suoding.png",giftNum:20}],""),this.node.removeFromParent(!0),this.destroy()},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.node.removeFromParent(),this.destroy()},t}(cc.Component);i.FirstCharge=d,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_fish_info:[function(e,t,i){"use strict";cc._RF.push(t,"c531dFoM6FOo6pBap5bgZqR","fish_fish_info"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(e,t,i,n,s){this.fishId=e,this.fishResId=t,this.fishType=i,this.score=n,this.value=s}}();i.FishInfo=n,cc._RF.pop()},{}],fish_fish_manager:[function(e,t,i){"use strict";cc._RF.push(t,"7d7d5VTU1FD/r1W4iVTTHFe","fish_fish_manager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../model/fish_model"),c=e("./fish_fish"),a=e("../../define/fish_consts"),r=e("../../define/fish_msg_types"),h=e("../../scene/fish_scene_login"),l=e("../../fish"),d=e("../../logic/fish_tcp"),_=function(e){function t(){var t=e.call(this)||this;return t.fishes=[],t.unfishes=[],t.showLockMarkTips=!1,t.bossCount=0,t.electricFishDiePos=cc.v2(0,0),t}return __extends(t,e),t.prototype.onLoad=function(){n.evtCenter.on(s.evts.EVT_FISH_TURN,this.onEventFishTurn,this),n.evtCenter.on(s.evts.EVT_BULLET_HIT_FISH,this.onEventBullletHitFish,this),n.evtCenter.on(s.evts.EVT_LASER_HIT_FISH,this.onEventLaserHitFish,this),n.evtCenter.on(s.evts.EVT_ELECTRIC_FISH,this.onEventElectricFish,this)},t.prototype.onDestroy=function(){for(var e in this.fishes){(t=this.fishes[e]).stopAllActions(),cc.director.getScheduler().unscheduleAllForTarget(t)}for(var e in this.unfishes){var t;(t=this.unfishes[e]).stopAllActions(),cc.director.getScheduler().unscheduleAllForTarget(t)}this.fishes=null},t.prototype.onEventFishTurn=function(e){var t=this.fishes[e];t&&t.turnAround()},t.prototype.onEventBullletHitFish=function(e,t,i){var n=o.model.table.getPlayerInfo(e);if(n&&n.userId==o.ME.userId){var s=this.fishes[i];s&&s.onBulletHit()}},t.prototype.onEventLaserHitFish=function(e,t,i,n){var s=this.fishes[t];s&&s.onLaserHit(i,n)},t.prototype.onEventElectricFish=function(e,t,i){if(!(t.length<=0))for(var s=this.electricFishDiePos,o=0;o<t.length;o++){var c=this.fishes[t[o]];if(c){var a=n.utils.createSprite("fish_lightning_chain_01","game_effect"),r=c.fishNode.getAnchorPoint(),h=c.fishNode.getContentSize();a.setPosition(r.x*h.width,r.y*h.height),a.setAnchorPoint(.5,0);var d=c.fishNode.getPosition(),_=l.fish.pDistance(s,d);a.setScale(1.5,_/230);var f=cc.v2(0,1),p=cc.v2(s.x-d.x,s.y-d.y),u=n.math.getAngle(p,f)-c.fishNode.rotation;a.setRotation(u);var m=this._genRandLightningFrameIds(4),g=n.utils.genAnimateByFrames("game_effect","lightning_chain","fish_lightning_chain_",m,1/30),v=a.getComponent(cc.Animation);v.addClip(g),v.play(g.name).wrapMode=cc.WrapMode.Loop,c.fishNode.addChild(a),a.runAction(cc.sequence(cc.delayTime(2.5),cc.fadeOut(.2))),s.set(d)}}},t.prototype.fishEnter=function(e,t,i,s,r){var h=c.FishFactory.create(e,t,i,r);if(this.fishes[t]&&delete this.fishes[t],this.fishes[t]=h,e>=a.SpecialFish.Octopus&&e<=a.SpecialFish.DragonBoss&&this.bossCount++,0==s&&h.swim(),this.showLockMarkTips&&e>=1201&&h.setLockMark(!1),o.model.room_match.isJoinedRmatch)for(var l=n.configTable.room_match[o.model.room_match.rmatchCfgId],d=1;d<=3;d++)e==l["target"+d]&&h.setRmatchTargetMark(e)},t.prototype.fishDummyEnter=function(e,t,i,n,s){return new c.FishDummy(e,t,i,n,s)},t.prototype.fishDie=function(e,t,i,n){if("number"==typeof e)this._fishDie(e,t,i,n);else for(var s=0;s<e.length;s++)this._fishDie(e[s],t,i,n)},t.prototype.setLockMark=function(e,t){this.showLockMarkTips=0==e&&0==t;var i=null;if(0==e)for(var n in this.fishes)(i=this.fishes[n])&&i.fishResId>=1201&&i.setLockMark(!1);else(i=this.fishes[e])&&i.setLockMark(t)},t.prototype.clearLockMark=function(){for(var e in this.showLockMarkTips=!1,this.fishes){this.fishes[e].clearLockMark()}},t.prototype.setRmatchTargetMark=function(){var e=null,t=n.configTable.room_match[o.model.room_match.rmatchCfgId];for(var i in this.fishes)if((e=this.fishes[i])&&e.fishResId)for(var s=1;s<=3;s++)e.fishResId==t["target"+s]&&e.setRmatchTargetMark(e.fishResId)},t.prototype.clearMatchTargetMark=function(){for(var e in this.fishes){this.fishes[e].clearRmatchTargetMark()}},t.prototype.freeze=function(e){for(var t in this.fishes){var i=this.fishes[t];i.spFish.stopAllActions(),i.spFish.getComponent(cc.Animation).stop()}},t.prototype.unfreeze=function(e,t){for(var i in this.fishes){var n=this.fishes[i];n&&n.swim()}},t.prototype._fishDie=function(e,t,i,s){var c=this.fishes[e];if(c&&(c.die(t,i,s),c.fishResId>=a.SpecialFish.Octopus&&c.fishResId<=a.SpecialFish.DragonBoss&&this.bossCount--,0==this.bossCount&&(n.audio.playBg("sound/bg_game"),this.bossCount=0),this.unfishes[e]=c,delete this.fishes[e],i==o.model.table.seatId&&(c.fishResId==a.SpecialFish.ElectricFish||c.fishResId==a.SpecialFish.BombFish))){var _={cmd:r.msgs.CMD_TABLE_CALL,params:{action:"specialFish",userId:o.ME.userId,gameId:28,roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:i,clientId:h.AccountInfo.clientId,fId:e}};c.fishResId==a.SpecialFish.ElectricFish?(this.electricFishDiePos.set(c.fishNode.getPosition()),_.params.fType="electric",_.params.struck=l.fish.gameView.getRandomFishes(e,15),this.node.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(function(){d.tcp.send(_)}.bind(this))))):(_.params.fType="bomb",_.params.struck=l.fish.gameView.getNormalFishesInRange(n.utils.convertPt(c.fishNode.getPosition()),300),d.tcp.send(_))}},t.prototype._genRandLightningFrameIds=function(e){for(var t=Math.floor(Math.random()*e),i=e,n=[];i-- >0;)n.push(1+t++%e);return n},t}(cc.Component);i.FishManager=_,cc._RF.pop()},{"../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","./fish_fish":"fish_fish"}],fish_fish:[function(e,t,i){"use strict";cc._RF.push(t,"8a661N7rENE7YSGXGA78MML","fish_fish"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../scene/fish_scene"),o=e("../../../assets_manager"),c=e("../../define/fish_consts"),a=e("../../define/fish_event_types"),r=e("../../fish"),h=function(e){function t(t,i,n,s){var o=e.call(this)||this;return o.fishResId=t,o.fishId=i,o.pathId=n,o.fishNode=s,o.spFish=null,o.spLock=null,o.rmatchNode=null,o.isDieing=!1,o.setSprite(),o.setFlip(),o}return __extends(t,e),t.prototype.setSprite=function(){this.spFish=s.utils.createSprite("fish_"+this.fishResId+"_01","img/fish/fish_"+this.fishResId,!0),1305!=this.fishResId&&this.spFish.setAnchorPoint(this.fishNode.getAnchorPoint()),this.spFish.setScale(parseFloat(s.configTable.fish[this.fishResId].scale)),this.fishNode.addChild(this.spFish,10)},t.prototype.setFlip=function(){var e=s.configTrack.getPath(this.pathId),t=e.points[0],i=e.points[1];this.fishResId==c.SpecialFish.JellyFishSmall||this.fishResId==c.SpecialFish.JellyFishBig||this.fishResId==c.SpecialFish.BombFish||this.fishResId==c.SpecialFish.CardFish1||this.fishResId==c.SpecialFish.CardFish2?n.model.table.seatId>=3&&(this.spFish.angle=-180):this.fishResId==c.SpecialFish.DragonTurtle||this.fishResId==c.SpecialFish.LanternFish||this.fishResId==c.SpecialFish.DragonBoss||this.fishResId==c.SpecialFish.ElectricFish?n.model.table.seatId<=2?i.x>t.x&&(this.spFish.scaleX=-this.spFish.scaleX):(this.spFish.scaleY=-this.spFish.scaleY,i.x>t.x&&(this.spFish.scaleX=-this.spFish.scaleX)):(n.model.table.seatId<=2&&i.x>t.x||n.model.table.seatId>=3&&i.x<t.x)&&(this.spFish.scaleY=-this.spFish.scaleY)},t.prototype.addBossEffect=function(){this.spEff1=s.utils.createSprite("fish_bose_eff","boss_coming"),this.spEff1.runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.scaleTo(1.3,1.5).easing(cc.easeOut(1)),cc.fadeOut(1.3)),cc.delayTime(1.3),cc.scaleTo(0,.5),cc.fadeTo(0,255)))),this.fishNode.addChild(this.spEff1),this.spEff2=s.utils.createSprite("fish_boss_eff","boss_coming"),this.spEff2.runAction(cc.repeatForever(cc.rotateBy(1,60))),this.fishNode.addChild(this.spEff2)},t.prototype.addCombineEffect=function(){this.spEff=s.utils.createSprite("fish_eff_combine_fish","game_effect"),this.spEff.runAction(cc.repeatForever(cc.rotateBy(1,60))),this.fishNode.addChild(this.spEff)},t.prototype.addParticleEffect=function(){cc.log("******************************* fish.addParticleEffect");var e=(new cc.Node).addComponent(cc.ParticleSystem);e.positionType=cc.ParticleSystem.PositionType.FREE,this.fishNode.addChild(e.node,10)},t.prototype.setLockMark=function(e){null==this.fishNode.getChildByName("100")&&(this.spLock=s.utils.createSprite("fish_eff_lock_crosshairs","skill_lock"),this.fishNode.addChild(this.spLock,20,"100"),e?(this.spLock.setScale(10),this.spLock.runAction(cc.spawn(cc.scaleTo(.4,1).easing(cc.easeIn(2)),cc.repeat(cc.rotateBy(3,180),100)))):this.spLock.runAction(cc.repeatForever(cc.rotateBy(3,180))))},t.prototype.clearLockMark=function(){this.spLock&&(this.fishNode.removeChild(this.spLock,!0),this.spLock=null)},t.prototype.setRmatchTargetMark=function(e){null==this.fishNode.getChildByName("201")&&(this.rmatchNode=cc.instantiate(o.AssetsManager.getRes("prefabs/room_match_locking")),e<=1106?this.rmatchNode.setScale(.5):e>1106&&e<=1113&&this.rmatchNode.setScale(.75),this.fishNode.addChild(this.rmatchNode,20,"201"),this.rmatchNode.getComponent(cc.Animation).play("lock").wrapMode=cc.WrapMode.Loop)},t.prototype.clearRmatchTargetMark=function(){this.rmatchNode&&(this.fishNode.removeChild(this.rmatchNode,!0),this.rmatchNode=null)},t.prototype.onBulletHit=function(){this.spFish.runAction(cc.sequence(cc.tintTo(.2,255,0,0),cc.tintTo(.2,255,255,255)))},t.prototype.onLaserHit=function(e,t){var i=s.utils.createSprite("fish_laser_hit_01","skill_laser");i.setScale(2),this.fishNode.addChild(i);var n=s.utils.genAnimate("skill_laser","laser_hit","fish_laser_hit_",2/30),o=i.addComponent(cc.Animation);o.addClip(n),i.runAction(cc.sequence(cc.callFunc(function(){o.play(n.name)}.bind(this)),cc.removeSelf()))},t.prototype.rotateRandom=function(){this.spFish.angle=-360*Math.random()},t.prototype.swim=function(){if(this.spFish.stopAllActions(),(e=this.spFish.getComponent(cc.Animation))&&"swim"==e.currentClip.name)e.play("swim").wrapMode=cc.WrapMode.Loop;else{var e,t=s.utils.getFishNormalAnimation(this.fishResId);t.name="swim",(e=this.spFish.addComponent(cc.Animation)).addClip(t),e.play(t.name).wrapMode=cc.WrapMode.Loop}},t.prototype.turnAround=function(){cc.log("************************************** turnAround"),this.spLock;var e=this.spFish.scaleX;this.spFish.scaleX=-e},t.prototype.die=function(e,t,i){this.isDieing||(this.isDieing=!0,cc.director.getScheduler().unscheduleAllForTarget(this),this.clearLockMark(),this.clearRmatchTargetMark(),e==c.DieReason.EXIT?(this.spFish.removeFromParent(),this.spFish.stopAllActions(),this.spFish=null):s.evtCenter.emit(a.evts.EVT_FISH_DIE_EFF,e,this,t,i))},t}(cc.Node);i.FishBase=h;var l=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),d=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),_=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),f=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),p=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),u=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),m=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),g=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),v=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),b=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),y=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),E=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),C=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),T=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),S=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),I=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),R=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),w=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),A=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),M=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),N=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),P=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),F=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),B=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),L=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),k=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),D=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),O=function(e){function t(t,i,n,s){var o=e.call(this,t,i,n,s)||this;return o.spEff1=null,o.spEff2=null,o.addBossEffect(),o}return __extends(t,e),t.prototype.turnAround=function(){e.prototype.turnAround.call(this)},t}(h),V=function(e){function t(t,i,n,s){var c=e.call(this,t,i,n,s)||this;return c.spEff1=null,c.spEff2=null,c.addBossEffect(),s.onTimerFishTalk=function(){cc.audioEngine.playEffect(o.AssetsManager.getRes("sound/fish_talk_lantern"),!1)},cc.director.getScheduler().schedule(s.onTimerFishTalk,s,30,5,10),c}return __extends(t,e),t.prototype.turnAround=function(){e.prototype.turnAround.call(this)},t}(h),x=function(e){function t(t,i,n,s){var c=e.call(this,t,i,n,s)||this;return c.spEff1=null,c.spEff2=null,c.addBossEffect(),s.onTimerFishTalk=function(){cc.audioEngine.playEffect(o.AssetsManager.getRes("sound/fish_talk_mermaid"),!1)},cc.director.getScheduler().schedule(s.onTimerFishTalk,s,30,5,10),c}return __extends(t,e),t.prototype.turnAround=function(){e.prototype.turnAround.call(this)},t}(h),G=function(e){function t(t,i,n,s){var o=e.call(this,t,i,n,s)||this;return o.spEff1=null,o.spEff2=null,o.addBossEffect(),o}return __extends(t,e),t.prototype.turnAround=function(){e.prototype.turnAround.call(this)},t}(h),U=function(e){function t(t,i,o,c){var a=e.call(this,t,i,o,c)||this;a.spEff1=s.utils.createSprite("fish_eff_electric_fish","game_effect"),a.spEff2=s.utils.createSprite("fish_eff_electric_fish","game_effect"),a.spEff1.runAction(cc.repeatForever(cc.rotateBy(1,60))),a.spEff2.setScale(.5),a.spEff2.opacity=0,a.spEff2.runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.fadeIn(1),cc.scaleTo(1,1)),cc.spawn(cc.fadeOut(1),cc.scaleTo(1,1.5)),cc.scaleTo(0,.5),cc.delayTime(2))));var h=r.fish.getAnchorPointInPoints(a.fishNode);return h.y+=n.model.table.seatId>=3?50:-50,a.spNode=new cc.Node,a.spNode.setPosition(h),a.spNode.setScale(1.2,.4),a.spNode.addChild(a.spEff1),a.spNode.addChild(a.spEff2),a.fishNode.addChild(a.spNode),a}return __extends(t,e),t.prototype.turnAround=function(){e.prototype.turnAround.call(this);var t=r.fish.getAnchorPointInPoints(this.fishNode);t.y+=n.model.table.seatId>=3?50:-50,this.spNode.setPosition(t)},t.prototype.die=function(t,i,n){e.prototype.die.call(this,t,i,n),t!=c.DieReason.EXIT&&(this.spEff1.removeFromParent(),this.spEff2.removeFromParent())},t}(h),H=function(e){function t(t,i,o,c){var a=e.call(this,t,i,o,c)||this;a.spEff=s.utils.createSprite("fish_eff_bomb_fish_1","game_effect"),a.spEff.runAction(cc.repeatForever(cc.rotateBy(200/30,360)));var h=r.fish.getAnchorPointInPoints(a.fishNode);return h.y+=n.model.table.seatId>=3?50:-50,a.spNode=new cc.Node,a.spNode.setPosition(h),a.spNode.setScale(1,.5),a.spNode.addChild(a.spEff),a.fishNode.addChild(a.spNode),a}return __extends(t,e),t.prototype.die=function(t,i,n){e.prototype.die.call(this,t,i,n),t!=c.DieReason.EXIT&&(this.spFish.removeFromParent(),this.spEff.removeFromParent())},t}(h),W=function(e){function t(t,i,n,s){var o=e.call(this,t,i,n,s)||this;return o.spEff=null,o.addCombineEffect(),o}return __extends(t,e),t.prototype.die=function(t,i,n){e.prototype.die.call(this,t,i,n),t!=c.DieReason.EXIT&&this.spEff.removeFromParent()},t}(h),K=function(e){function t(t,i,n,s){var o=e.call(this,t,i,n,s)||this;return o.spEff=null,o.addCombineEffect(),o}return __extends(t,e),t.prototype.die=function(t,i,n){e.prototype.die.call(this,t,i,n),t!=c.DieReason.EXIT&&this.spEff.removeFromParent()},t}(h),z=function(e){function t(t,i,n,s){var o=e.call(this,t,i,n,s)||this;return o.spEff=null,o.addCombineEffect(),o}return __extends(t,e),t.prototype.die=function(t,i,n){e.prototype.die.call(this,t,i,n),t!=c.DieReason.EXIT&&this.spEff.removeFromParent()},t}(h),Y=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),q=function(e){function t(t,i,n,s){return e.call(this,t,i,n,s)||this}return __extends(t,e),t}(h),j=function(){function e(){}return e.create=function(e,t,i,n){switch(e){case 1101:return new l(e,t,i,n);case 1102:return new d(e,t,i,n);case 1103:return new _(e,t,i,n);case 1104:return new f(e,t,i,n);case 1105:return new p(e,t,i,n);case 1106:return new u(e,t,i,n);case 1107:return new m(e,t,i,n);case 1108:return new g(e,t,i,n);case 1109:return new v(e,t,i,n);case 1110:return new b(e,t,i,n);case 1111:return new y(e,t,i,n);case 1112:return new E(e,t,i,n);case 1113:return new C(e,t,i,n);case 1114:return new T(e,t,i,n);case 1115:return new S(e,t,i,n);case 1116:return new I(e,t,i,n);case 1117:return new R(e,t,i,n);case 1118:return new w(e,t,i,n);case 1119:return new A(e,t,i,n);case 1120:return new M(e,t,i,n);case 1121:return new N(e,t,i,n);case 1203:return new P(e,t,i,n);case 1204:return new F(e,t,i,n);case 1206:return new B(e,t,i,n);case 1208:return new L(e,t,i,n);case 1209:return new k(e,t,i,n);case 1210:return new D(e,t,i,n);case 1302:return new O(e,t,i,n);case 1303:return new V(e,t,i,n);case 1304:return new x(e,t,i,n);case 1305:return new G(e,t,i,n);case 1402:return new U(e,t,i,n);case 1403:return new H(e,t,i,n);case 1404:return new W(e,t,i,n);case 1405:return new K(e,t,i,n);case 1406:return new z(e,t,i,n);case 1601:return new Y(e,t,i,n);case 1602:return new q(e,t,i,n)}return null},e}();i.FishFactory=j;var X=function(){function e(e,t,i,n,s){this.fishResId=e,this.fishId=t,this.pathId=i,this.enterTime=n,this.frozenTime=s}return e.prototype.unfreeze=function(e,t){this.frozenTime>0&&(this.enterTime=this.enterTime+t-e,this.frozenTime=0)},e.prototype.freeze=function(e){this.frozenTime=e},e.prototype.toBeShow=function(){return this.enterTime-n.model.common.getTableElapseTime(0)<0},e}();i.FishDummy=X,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_friends_cell:[function(e,t,i){"use strict";cc._RF.push(t,"2ec7cZpkbhFGp2kqa4oBgGS","fish_friends_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=function(e){function t(){var t=e.call(this)||this;return t.head_node=null,t.sp_head=null,t.sp_vip=null,t.bmp_vip_level=null,t.sp_huangguan=null,t.text_name=null,t.text_userId=null,t.list_btns=null,t.btnPraise=null,t.btnRemove=null,t.btnAgree=null,t.btnDeny=null,t.request_btns=null,t.sp_agree=null,t.sp_deny=null,t.message_btns=null,t.btnClaim=null,t.sp_Claim=null,t.text_date=null,t.bmp_count=null,t.recommends_btns=null,t.btnApplyFriend=null,t.anchor=null,t.recommond_title=null,t.sp_separator=null,t.btnRefreshRecommends=null,t.cellData=null,t.loadCsb(),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.rootNode),o.evtCenter.on(c.evts.EVT_PRAISE_FRIENDS,this.onPraiseFriends,this),o.evtCenter.on(c.evts.EVT_APPLY_FRIENDS,this.onApplyFriends,this),this.btnApplyFriend.getComponent(cc.Button).interactable=!0,this.btnClaim.getComponent(cc.Button).interactable=!0,this.btnPraise.getComponent(cc.Button).interactable=!0,this.btnRemove.getComponent(cc.Button).interactable=!0,this.btnAgree.getComponent(cc.Button).interactable=!0,this.btnDeny.getComponent(cc.Button).interactable=!0,this.btnRefreshRecommends.getComponent(cc.Button).interactable=!0},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_PRAISE_FRIENDS,this.onPraiseFriends,this),o.evtCenter.off(c.evts.EVT_APPLY_FRIENDS,this.onApplyFriends,this),this.btnApplyFriend.getComponent(cc.Button).interactable=!1,this.btnClaim.getComponent(cc.Button).interactable=!1,this.btnPraise.getComponent(cc.Button).interactable=!1,this.btnRemove.getComponent(cc.Button).interactable=!1,this.btnAgree.getComponent(cc.Button).interactable=!1,this.btnDeny.getComponent(cc.Button).interactable=!1,this.btnRefreshRecommends.getComponent(cc.Button).interactable=!1},t.prototype.loadCsb=function(){this.rootNode=cc.instantiate(n.AssetsManager.getRes("prefabs/fish_friends_cell")),this.head_node=cc.find("anchor/Image_24/head_node",this.rootNode),this.sp_head=cc.find("anchor/Image_24/head_node/sp_head",this.rootNode),this.sp_vip=cc.find("anchor/Image_24/head_node/sp_vip",this.rootNode),this.bmp_vip_level=cc.find("anchor/Image_24/head_node/bmp_vip_level",this.rootNode),this.sp_huangguan=cc.find("anchor/Image_24/head_node/sp_huangguan",this.rootNode),this.text_name=cc.find("anchor/Image_24/text_name",this.rootNode),this.text_userId=cc.find("anchor/Image_24/text_userId",this.rootNode),this.list_btns=cc.find("anchor/list_btns",this.rootNode),this.btnPraise=cc.find("anchor/list_btns/btnPraise",this.rootNode),this.btnRemove=cc.find("anchor/list_btns/btnRemove",this.rootNode),this.request_btns=cc.find("anchor/request_btns",this.rootNode),this.btnAgree=cc.find("anchor/request_btns/btnAgree",this.rootNode),this.btnDeny=cc.find("anchor/request_btns/btnDeny",this.rootNode),this.sp_agree=cc.find("anchor/request_btns/btnAgree/sp_agree",this.rootNode),this.sp_deny=cc.find("anchor/request_btns/btnDeny/sp_deny",this.rootNode),this.message_btns=cc.find("anchor/message_btns",this.rootNode),this.btnClaim=cc.find("anchor/message_btns/btnClaim",this.rootNode),this.sp_Claim=cc.find("anchor/message_btns/sp_Claim",this.rootNode),this.text_date=cc.find("anchor/message_btns/text_date",this.rootNode),this.bmp_count=cc.find("anchor/message_btns/bmp_count",this.rootNode),this.btnApplyFriend=cc.find("anchor/recommends_btns/btnApplyFriend",this.rootNode),this.recommends_btns=cc.find("anchor/recommends_btns",this.rootNode),this.anchor=cc.find("anchor",this.rootNode),this.recommond_title=cc.find("recommond_title",this.rootNode),this.sp_separator=cc.find("recommond_title/sp_separator",this.rootNode),this.btnRefreshRecommends=cc.find("recommond_title/btnRefreshRecommends",this.rootNode),this.btnApplyFriend.getComponent(cc.Button).interactable=!1,this.btnClaim.getComponent(cc.Button).interactable=!1,this.btnPraise.getComponent(cc.Button).interactable=!1,this.btnRemove.getComponent(cc.Button).interactable=!1,this.btnAgree.getComponent(cc.Button).interactable=!1,this.btnDeny.getComponent(cc.Button).interactable=!1,this.btnRefreshRecommends.getComponent(cc.Button).interactable=!1,this.btnPraise.on(cc.Node.EventType.TOUCH_END,this.onBtnPraise,this),this.btnRemove.on("click",this.onBtnRemove,this),this.btnApplyFriend.on("click",this.onBtnApplyFriend,this),this.btnAgree.on("click",this.onBtnAgree,this),this.btnDeny.on("click",this.onBtnDeny,this),this.btnClaim.on("click",this.onBtnClaim,this),this.btnRefreshRecommends.on("click",this.onBtnRefreshRecommends,this)},t.prototype.playButtonEffect=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1)},t.prototype.onBtnPraise=function(e){this.playButtonEffect(),this.cellData.isPraised?o.evtCenter.emit(c.evts.EVT_MSG_TIPS,"\u60a8\u4eca\u5929\u5df2\u7ecf\u5411\u8be5\u597d\u53cb\u8d60\u9001\u8fc7\u91d1\u5e01\u54e6",2):s.model.friends.friendsData.getPraiseLeftCount()<=0?o.evtCenter.emit(c.evts.EVT_PRAISE_FRIENDS,2,[]):(s.model.friends.praiseFriend(this.cellData.userId),o.evtCenter.emit(c.evts.EVT_NET_SHOW_WAITING))},t.prototype.onBtnRemove=function(e){this.playButtonEffect(),o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u8bf7\u786e\u8ba4\u662f\u5426\u5220\u9664\u597d\u53cb?",2,this.confirmRemoveFirends,this)},t.prototype.confirmRemoveFirends=function(e){s.model.friends.removeFriend(this.cellData.userId),o.evtCenter.emit(c.evts.EVT_NET_SHOW_WAITING)},t.prototype.onBtnAgree=function(e){this.playButtonEffect(),s.model.friends.agreeWithApply(this.cellData.userId),o.evtCenter.emit(c.evts.EVT_NET_SHOW_WAITING)},t.prototype.onBtnDeny=function(e){this.playButtonEffect(),s.model.friends.denyWithApply(this.cellData.userId),o.evtCenter.emit(c.evts.EVT_NET_SHOW_WAITING)},t.prototype.onBtnClaim=function(e){this.playButtonEffect(),s.model.friends.getInfoGift(this.cellData.msgInfo.infoId),o.evtCenter.emit(c.evts.EVT_NET_SHOW_WAITING)},t.prototype.onBtnRefreshRecommends=function(e){this.playButtonEffect(),s.model.friends.getRecommendFriends(),o.evtCenter.emit(c.evts.EVT_NET_SHOW_WAITING)},t.prototype.onBtnApplyFriend=function(e){this.playButtonEffect(),s.model.friends.applyFriend(this.cellData.userId),o.evtCenter.emit(c.evts.EVT_NET_SHOW_WAITING)},t.prototype.initCell=function(e,t){switch(this.cellData=t,this.anchor.active=!0,this.recommond_title.active=!1,e){case 1:this.list_btns.active=!0,this.request_btns.active=!1,this.message_btns.active=!1,this.__initListCell(t);break;case 2:this.list_btns.active=!1,this.request_btns.active=!0,this.message_btns.active=!1,this.__initRequestCell(t);break;case 3:this.list_btns.active=!1,this.request_btns.active=!1,this.message_btns.active=!0,this.__initMessageCell(t);break;case 4:this.list_btns.active=!1,this.request_btns.active=!1,this.message_btns.active=!0,this.__initRecommendCell(t)}},t.prototype.__initAvatar=function(e,t,i){o.avatarDownLoader.showHeadImage(e,this.sp_head,!t),this.sp_huangguan.active=i},t.prototype.__initVipLevel=function(e){if(this.bmp_vip_level&&(this.bmp_vip_level.getComponent(cc.Label).string=e,this.sp_vip)){var t=.5*this.head_node.getContentSize().width-.5*this.bmp_vip_level.getContentSize().width*this.bmp_vip_level.scaleX;this.sp_vip.x=t}},t.prototype.__initLabels=function(e,t){this.text_name.getComponent(cc.Label).string=e,this.text_userId.getComponent(cc.Label).string=t},t.prototype.__initListCell=function(e){this.__initAvatar(e.purl,e.isOnline,e.isMember),this.__initVipLevel(e.vipLevel),this.__initLabels(e.name,"ID: "+e.userId),this.list_btns.active=!0,this.request_btns.active=!1,this.message_btns.active=!1,this.recommends_btns.active=!1,this.btnPraise.getComponent(cc.Button).interactable=!e.isPraised},t.prototype.__initRequestCell=function(e){this.__initAvatar(e.purl,e.isOnline,e.isMember),this.__initVipLevel(e.vipLevel),this.__initLabels(e.name,"ID: "+e.userId),this.list_btns.active=!1,this.request_btns.active=!0,this.message_btns.active=!1,this.recommends_btns.active=!1},t.prototype.__initMessageCell=function(e){var t=n.AssetsManager.getRes("img/atlas/common"),i=e.friendsInfo,s=e.msgInfo;this.__initAvatar(i.purl,i.isOnline,i.isMember),this.__initVipLevel(i.vipLevel),this.__initLabels(i.name,"\u7ed9\u60a8\u9001\u6765"+s.gifts[0].count+"\u91d1\u5e01"),this.list_btns.active=!1,this.request_btns.active=!1,this.message_btns.active=!0,this.recommends_btns.active=!1,this.btnClaim.getComponent(cc.Button).interactable=!s.isGiftsGot;var o=new Date(1e3*s.ts),c=o.getFullYear(),a=o.getMonth()+1,r=o.getDate();this.text_date.getComponent(cc.Label).string=c+"-"+a+"-"+r,this.bmp_count.getComponent(cc.Label).string=s.gifts[0].count;var h=t.getSpriteFrame(s.isGiftsGot?"fish_common_received":"fish_guizulibao_20");this.sp_Claim.getComponent(cc.Sprite).spriteFrame=h},t.prototype.__initRecommendCell=function(e){if(e===s.model.friends.friendsData.recommendTitle)this.anchor.active=!1,this.recommond_title.active=!0,this.sp_separator.active=s.model.friends.friendsData.getRequestCount()>0;else{this.__initAvatar(e.purl,e.isOnline,e.isMember),this.__initVipLevel(e.vipLevel),this.__initLabels(e.name,"ID: "+e.userId),this.list_btns.active=!1,this.request_btns.active=!1,this.message_btns.active=!1,this.recommends_btns.active=!0;var t=s.model.friends.friendsData.isFriendsApplyed(e.userId);this.btnApplyFriend.getComponent(cc.Button).interactable=!t}},t.prototype.onPraiseFriends=function(e,t,i){var n=this.cellData.userId;if(t&&t.some(function(e){return e==n}))switch(e){case 0:case 4:this.btnPraise.getComponent(cc.Button).interactable=!1}},t.prototype.onApplyFriends=function(e,t){switch(e){case 0:case 7:case 8:t===this.cellData.userId&&(this.btnApplyFriend.getComponent(cc.Button).interactable=!1)}},t}(cc.Component);i.FriendsCell=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_friends:[function(e,t,i){"use strict";cc._RF.push(t,"d93935LkfhPNLmTEEswwxsd","fish_friends"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../../assets_manager"),c=e("../../model/fish_model"),a=e("./fish_adding_friends"),r=e("./fish_friends_cell"),h=e("../../fish"),l=function(e){function t(){var t=e.call(this)||this;return t.FriendsViewType={TYPE_FRIENDS_LIST:1,TYPE_FRIENDS_REQUEST:2,TYPE_FRIENDS_MESSAGE:3,TYPE_FRIENDS_RECOMMEND:4},t.viewType=null,t.btnListImage=null,t.btnRequestImage=null,t.btnMessageImage=null,t.sp_list_selected=null,t.sp_request_selected=null,t.sp_message_selected=null,t.list_bottom=null,t.friends_count=null,t.btnPraiseAll=null,t.sp_praise_all=null,t.btnAddFriends=null,t.sp_add_friends=null,t.msg_bottom=null,t.btnClaimAll=null,t.sp_claim_all=null,t.msg_tips=null,t.msg_tips_count=null,t.request_tips=null,t.request_tips_count=null,t.friends_empty_tips=null,t.message_empty_tips=null,t.request_empty_tips=null,t.archor=null,t.dikuang=null,t.view_bg=null,t.__cellSize=cc.size(700,74),t.bClosed=!1,t.loadCsb(),t.initFriendsView(),t.dataUpdated=[!1,!1,!1],t.nAddingFriendsUITag=100,t.bShowed=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!1,this.node.addChild(this.csbNode),n.evtCenter.emit(s.evts.EVT_NET_SHOW_WAITING),this.scheduleOnce(this.node.removeFromParent,2),this.__setViewType(this.FriendsViewType.TYPE_FRIENDS_LIST),n.evtCenter.emit(s.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this),n.evtCenter.on(s.evts.EVT_RECEIVE_FRIENDS_LIST,this.onReceiveFriendsList,this),n.evtCenter.on(s.evts.EVT_RECEIVE_FRIENDS_APPLICANTS,this.onReceiveFriendsApplicants,this),n.evtCenter.on(s.evts.EVT_RECEIVE_FRIENDS_INFOS,this.onReceiveFriendsInfo,this),n.evtCenter.on(s.evts.EVT_APPLY_FRIENDS,this.onEvtApplyFriend,this),n.evtCenter.on(s.evts.EVT_GET_GIGT_FRIENDS,this.onGetGiftFriends,this),n.evtCenter.on(s.evts.EVT_PRAISE_FRIENDS,this.onPraiseFriends,this),n.evtCenter.on(s.evts.EVT_OPEN_FRIENDS,this.onMsgOpenFriends,this),n.evtCenter.on(s.evts.EVT_AGREE_WITH_APPLY,this.onAgreeWithApply,this)},t.prototype.onDestroy=function(){n.evtCenter.emit(s.evts.EVT_POP_BACK_KEY,this.onBackKey,this),c.model.friends.setFriendsViewExist(!1),c.model.friends.closeFriends(),c.model.friends.friendsData.pruneRecommendFriends(),n.evtCenter.off(s.evts.EVT_RECEIVE_FRIENDS_LIST,this.onReceiveFriendsList,this),n.evtCenter.off(s.evts.EVT_RECEIVE_FRIENDS_APPLICANTS,this.onReceiveFriendsApplicants,this),n.evtCenter.off(s.evts.EVT_RECEIVE_FRIENDS_INFOS,this.onReceiveFriendsInfo,this),n.evtCenter.off(s.evts.EVT_APPLY_FRIENDS,this.onEvtApplyFriend,this),n.evtCenter.off(s.evts.EVT_GET_GIGT_FRIENDS,this.onGetGiftFriends,this),n.evtCenter.off(s.evts.EVT_PRAISE_FRIENDS,this.onPraiseFriends,this),n.evtCenter.off(s.evts.EVT_OPEN_FRIENDS,this.onMsgOpenFriends,this),n.evtCenter.off(s.evts.EVT_AGREE_WITH_APPLY,this.onAgreeWithApply,this)},t.prototype.onMsgOpenFriends=function(e,t){e>0?(this.msg_tips_count.getComponent(cc.Label).string=e,this.msg_tips.active=!0):this.msg_tips.active=!1,t>0?(this.request_tips_count.getComponent(cc.Label).string=t,this.request_tips.active=!0):this.request_tips.active=!1},t.prototype.onReceiveFriendsList=function(){this.FriendsViewType.TYPE_FRIENDS_LIST==this.viewType&&(n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING),this.bShowed||(n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING),this.unschedule(this.node.removeFromParent),this.bShowed=!0,this.__changeFriendView(),this.node.active=!0,this.csbNode.getComponent(cc.Animation).play("show")),this.__changeFriendView())},t.prototype.onReceiveFriendsApplicants=function(){this.FriendsViewType.TYPE_FRIENDS_REQUEST!=this.viewType&&this.FriendsViewType.TYPE_FRIENDS_RECOMMEND!=this.viewType||(n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING),this.__changeFriendView())},t.prototype.onReceiveFriendsInfo=function(){this.FriendsViewType.TYPE_FRIENDS_MESSAGE==this.viewType&&(n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING),this.__changeFriendView())},t.prototype.onEvtApplyFriend=function(e){switch(n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING),e){case 0:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u7533\u8bf7\u5df2\u53d1\u9001\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u5bf9\u65b9\u540c\u610f",2);break;case 1:n.evtCenter.emit(s.evts.EVT_MSG_BOX,"\u60a8\u7684\u597d\u53cb\u5df2\u8fbe\u5230\u4e0a\u9650\uff0c\u63d0\u5347VIP\u7b49\u7ea7\u53ef\u589e\u52a0\u597d\u53cb\u4e0a\u9650",2,this.__openVipUI,this);break;case 2:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u62b1\u6b49\uff0c\u5bf9\u65b9\u597d\u53cb\u5df2\u8fbe\u5230\u4e0a\u9650",2);break;case 3:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u60a8\u4eec\u521a\u89e3\u9664\u597d\u53cb\u5173\u7cfb\uff0c\u8bf7\u5728\u5220\u966424\u5c0f\u65f6\u540e\u518d\u6b21\u5c1d\u8bd5",2);break;case 4:break;case 5:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u8bf7\u8f93\u5165\u6b63\u786e\u6e38\u620fid",2);break;case 6:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u4eca\u65e5\u7533\u8bf7\u597d\u53cb\u6b21\u6570\u5df2\u8fbe\u5230\u4e0a\u9650\uff0c\u8bf7\u60a8\u660e\u65e5\u518d\u6765",2);break;case 7:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u5bf9\u65b9\u5df2\u7ecf\u662f\u60a8\u7684\u597d\u53cb",2);break;case 8:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u60a8\u5df2\u63d0\u4ea4\u8fc7\u597d\u53cb\u7533\u8bf7",2)}var t=this.node.getChildByName(this.nAddingFriendsUITag+"");t&&this.node.removeChild(t)},t.prototype.__openVipUI=function(){n.evtCenter.emit(s.evts.EVT_POPUP_VIP_WINDOW,"")},t.prototype.loadCsb=function(){this.csbNode=cc.instantiate(o.AssetsManager.getRes("prefabs/fish_friends")),h.fish.adapterScreen(this.csbNode),this.view_bg=cc.find("archor/view_bg",this.csbNode),this.btnListImage=cc.find("archor/btnFriendList/btnListImage",this.csbNode),this.btnRequestImage=cc.find("archor/btnFriendRequest/btnRequestImage",this.csbNode),this.btnMessageImage=cc.find("archor/btnFriendMessage/btnMessageImage",this.csbNode),this.sp_list_selected=cc.find("archor/sp_list_selected",this.csbNode),this.sp_request_selected=cc.find("archor/sp_request_selected",this.csbNode),this.sp_message_selected=cc.find("archor/sp_message_selected",this.csbNode),this.list_bottom=cc.find("archor/list_bottom",this.csbNode),this.friends_count=cc.find("archor/list_bottom/friends_count",this.csbNode),this.btnPraiseAll=cc.find("archor/list_bottom/btnPraiseAll",this.csbNode),this.sp_praise_all=cc.find("archor/list_bottom/btnPraiseAll/sp_praise_all",this.csbNode),this.btnAddFriends=cc.find("archor/list_bottom/btnAddFriends",this.csbNode),this.sp_add_friends=cc.find("archor/list_bottom/btnAddFriends/sp_add_friends",this.csbNode),this.msg_bottom=cc.find("archor/msg_bottom",this.csbNode),this.btnClaimAll=cc.find("archor/msg_bottom/btnClaimAll",this.csbNode),this.sp_claim_all=cc.find("archor/msg_bottom/btnClaimAll/sp_claim_all",this.csbNode),this.msg_tips=cc.find("archor/msg_tips",this.csbNode),this.msg_tips_count=cc.find("archor/msg_tips/msg_tips_count",this.csbNode),this.request_tips=cc.find("archor/request_tips",this.csbNode),this.request_tips_count=cc.find("archor/request_tips/request_tips_count",this.csbNode),this.friends_empty_tips=cc.find("archor/friends_empty_tips",this.csbNode),this.message_empty_tips=cc.find("archor/message_empty_tips",this.csbNode),this.request_empty_tips=cc.find("archor/request_empty_tips",this.csbNode),this.archor=cc.find("archor",this.csbNode),this.btnFriendList=cc.find("archor/btnFriendList",this.csbNode),this.btnFriendRequest=cc.find("archor/btnFriendRequest",this.csbNode),this.btnFriendMessage=cc.find("archor/btnFriendMessage",this.csbNode),this.btnFriendList.on("click",this.onBtnFriendsList,this),this.btnFriendRequest.on("click",this.onBtnFriendsRequest,this),this.btnFriendMessage.on("click",this.onBtnFriendsMsg,this),cc.find("archor/friends_empty_tips/btnRecommends",this.csbNode).on("click",this.onBtnRecommends,this),this.btnPraiseAll.on("click",this.onBtnPraiseAll,this),this.btnAddFriends.on("click",this.onBtnAddFriends,this),cc.find("archor/msg_bottom/btnClaimAll",this.csbNode).on("click",this.onBtnClaimAll,this),this.dikuang=cc.find("archor/group_board/dikuang",this.csbNode),cc.find("archor/group_board/btnClose",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this)},t.prototype.initFriendsView=function(){if(this.view_bg){var e=this.view_bg.getChildByName("friendsView").getComponent(cc.ScrollView);this.friendsView=e}},t.prototype.playButtonEffect=function(){cc.audioEngine.playEffect(o.AssetsManager.getRes("sound/button"),!1)},t.prototype.__onHideEnd=function(){this.node.removeFromParent(!0),this.destroy()},t.prototype.onBtnClose=function(e){this.playButtonEffect(),this.bClosed=!0;var t=this.csbNode.getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.__onHideEnd()}.bind(this),this),t.play("hide")},t.prototype.onBackKey=function(){this.onBtnClose(null)},t.prototype.onBtnFriendsList=function(e){this.playButtonEffect(),this.__setViewType(this.FriendsViewType.TYPE_FRIENDS_LIST),c.model.friends.readFriendsList(),n.evtCenter.emit(s.evts.EVT_NET_SHOW_WAITING)},t.prototype.onBtnFriendsRequest=function(e){this.playButtonEffect(),this.request_tips.active=!1,this.__setViewType(this.FriendsViewType.TYPE_FRIENDS_REQUEST),c.model.friends.readApplicants(),c.model.friends.friendsData.getShowRecommendFriendsCount()<=0&&c.model.friends.getRecommendFriends(),n.evtCenter.emit(s.evts.EVT_NET_SHOW_WAITING)},t.prototype.onBtnFriendsMsg=function(e){this.playButtonEffect(),this.msg_tips.active=!1,this.__setViewType(this.FriendsViewType.TYPE_FRIENDS_MESSAGE),c.model.friends.readInfo(),n.evtCenter.emit(s.evts.EVT_NET_SHOW_WAITING)},t.prototype.onBtnClaimAll=function(e){this.playButtonEffect(),c.model.friends.getInfoGift(0),n.evtCenter.emit(s.evts.EVT_NET_SHOW_WAITING)},t.prototype.onBtnPraiseAll=function(e){this.playButtonEffect();var t=c.model.friends.friendsData.getPraisedCount(),i=c.model.friends.friendsData.getFriendsCount();i<=0?n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u8bf7\u5148\u6dfb\u52a0\u597d\u53cb\u624d\u53ef\u8d60\u9001\u54e6",2):t>=i&&c.model.friends.friendsData.getPraiseLeftCount()>0?n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u60a8\u5df2\u7ecf\u5411\u6240\u6709\u597d\u53cb\u8d60\u9001\u91d1\u5e01\u5566\uff0c\u5feb\u53bb\u6dfb\u52a0\u66f4\u591a\u597d\u53cb\u5427",2):c.model.friends.friendsData.getPraiseLeftCount()<=0?n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u4eca\u65e5\u8d60\u9001\u597d\u53cb\u91d1\u5e01\u6b21\u6570\u5df2\u8fbe\u5230\u4e0a\u9650\uff0c\u660e\u65e5\u518d\u6765\u5427",2):(c.model.friends.praiseFriend(0),n.evtCenter.emit(s.evts.EVT_NET_SHOW_WAITING))},t.prototype.onBtnAddFriends=function(e){this.playButtonEffect(),this.node.addChild((new cc.Node).addComponent(a.AddingFriendUI).node,0,this.nAddingFriendsUITag+"")},t.prototype.onBtnRecommends=function(e){this.onBtnFriendsRequest(null),this.viewType=this.FriendsViewType.TYPE_FRIENDS_RECOMMEND},t.prototype.__setBtnImageFrame=function(e,t){var i=o.AssetsManager.getRes("img/atlas/friends");switch(e){case this.FriendsViewType.TYPE_FRIENDS_LIST:var n=i.getSpriteFrame(t?"fish_liebiao":"fish_liebiao1");this.btnListImage.getComponent(cc.Sprite).spriteFrame=n;break;case this.FriendsViewType.TYPE_FRIENDS_REQUEST:case this.FriendsViewType.TYPE_FRIENDS_RECOMMEND:n=i.getSpriteFrame(t?"fish_shenqing":"fish_shenqing1");this.btnRequestImage.getComponent(cc.Sprite).spriteFrame=n;break;case this.FriendsViewType.TYPE_FRIENDS_MESSAGE:n=i.getSpriteFrame(t?"fish_xiaoxi":"fish_xiaoxi1");this.btnMessageImage.getComponent(cc.Sprite).spriteFrame=n}},t.prototype.__setViewType=function(e){var t=o.AssetsManager.getRes("img/atlas/scale9_8888");switch(this.viewType=e,e){case this.FriendsViewType.TYPE_FRIENDS_LIST:this.btnFriendList.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_activity_qieye_3"),this.btnFriendRequest.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_activity_qieye"),this.btnFriendMessage.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_activity_qieye"),this.sp_list_selected.active=!0,this.sp_request_selected.active=!1,this.sp_message_selected.active=!1,this.__setBtnImageFrame(this.FriendsViewType.TYPE_FRIENDS_LIST,!0),this.__setBtnImageFrame(this.FriendsViewType.TYPE_FRIENDS_REQUEST,!1),this.__setBtnImageFrame(this.FriendsViewType.TYPE_FRIENDS_MESSAGE,!1);break;case this.FriendsViewType.TYPE_FRIENDS_REQUEST:case this.FriendsViewType.TYPE_FRIENDS_RECOMMEND:this.btnFriendList.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_activity_qieye"),this.btnFriendRequest.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_activity_qieye_3"),this.btnFriendMessage.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_activity_qieye"),this.sp_list_selected.active=!1,this.sp_request_selected.active=!0,this.sp_message_selected.active=!1,this.__setBtnImageFrame(this.FriendsViewType.TYPE_FRIENDS_LIST,!1),this.__setBtnImageFrame(this.FriendsViewType.TYPE_FRIENDS_REQUEST,!0),this.__setBtnImageFrame(this.FriendsViewType.TYPE_FRIENDS_MESSAGE,!1);break;case this.FriendsViewType.TYPE_FRIENDS_MESSAGE:this.btnFriendList.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_activity_qieye"),this.btnFriendRequest.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_activity_qieye"),this.btnFriendMessage.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_activity_qieye_3"),this.sp_list_selected.active=!1,this.sp_request_selected.active=!1,this.sp_message_selected.active=!0,this.__setBtnImageFrame(this.FriendsViewType.TYPE_FRIENDS_LIST,!1),this.__setBtnImageFrame(this.FriendsViewType.TYPE_FRIENDS_REQUEST,!1),this.__setBtnImageFrame(this.FriendsViewType.TYPE_FRIENDS_MESSAGE,!0)}},t.prototype.__changeFriendView=function(){if(this.friendsView){var e=this.view_bg.getContentSize();e.height-=10;var t=cc.size(e.width,.8*e.height);switch(this.viewType){case this.FriendsViewType.TYPE_FRIENDS_LIST:this.friendsView.node.setContentSize(t),this.list_bottom.active=!0,this.msg_bottom.active=!1,this.__setListBottom(),this.friends_empty_tips.active=this.numberOfCellsInTableView()<=0,this.message_empty_tips.active=!1,this.request_empty_tips.active=!1;break;case this.FriendsViewType.TYPE_FRIENDS_RECOMMEND:case this.FriendsViewType.TYPE_FRIENDS_REQUEST:this.friendsView.node.setContentSize(e),this.list_bottom.active=!1,this.msg_bottom.active=!1,this.friends_empty_tips.active=!1,this.message_empty_tips.active=!1,this.request_empty_tips.active=this.numberOfCellsInTableView()<=0;break;case this.FriendsViewType.TYPE_FRIENDS_MESSAGE:this.friendsView.node.setContentSize(t),this.list_bottom.active=!1,this.msg_bottom.active=!0,this.__setMsgBottom(),this.friends_empty_tips.active=!1,this.message_empty_tips.active=this.numberOfCellsInTableView()<=0,this.request_empty_tips.active=!1}this.tableReloadData()}},t.prototype.__setListBottom=function(){var e=o.AssetsManager.getRes("img/atlas/friends"),t=c.model.friends.friendsData.getFriendsCount(),i=c.model.friends.friendsData.getFriendsLimit();this.friends_count.getComponent(cc.Label).string=t+"/"+i;var n=c.model.friends.friendsData.getPraiseLeftCount()>0;this.btnPraiseAll.getComponent(cc.Button).interactable=n;var s=e.getSpriteFrame(n?"fish_yijiandianzan":"fish_yijiandianzan1");this.sp_praise_all.getComponent(cc.Sprite).spriteFrame=s},t.prototype.__setMsgBottom=function(){var e=o.AssetsManager.getRes("img/atlas/friends"),t=c.model.friends.friendsData.isAllClaimed();this.btnClaimAll.getComponent(cc.Button).interactable=!t;var i=e.getSpriteFrame(t?"fish_yijianlingqu1":"fish_yijianlingqu");this.sp_claim_all.getComponent(cc.Sprite).spriteFrame=i},t.prototype.numberOfCellsInTableView=function(){switch(this.viewType){case this.FriendsViewType.TYPE_FRIENDS_LIST:return c.model.friends.friendsData.getFriendsCount();case this.FriendsViewType.TYPE_FRIENDS_REQUEST:case this.FriendsViewType.TYPE_FRIENDS_RECOMMEND:var e=c.model.friends.friendsData.getShowRecommendFriendsCount();return e>0?c.model.friends.friendsData.getRequestCount()+1+e:c.model.friends.friendsData.getRequestCount();case this.FriendsViewType.TYPE_FRIENDS_MESSAGE:return c.model.friends.friendsData.getMessageCount();default:return 0}},t.prototype.tableCellSizeForIndex=function(e){switch(this.viewType){case this.FriendsViewType.TYPE_FRIENDS_REQUEST:case this.FriendsViewType.TYPE_FRIENDS_RECOMMEND:var t=c.model.friends.friendsData.getRequestCount();if(e==t)return cc.size(700,t>0?50:40)}return this.__cellSize},t.prototype.tableReloadData=function(){this.friendsView.content.removeAllChildren();for(var e=this.numberOfCellsInTableView(),t=0;t<e;t++){var i=(new cc.Node).addComponent(r.FriendsCell);this.friendsView.content.addChild(i.node),i.node.setAnchorPoint(0,0);var n=this.tableCellSizeForIndex(t);i.node.setContentSize(n);var s=this.__getFriendsData(t);i.initCell(s.viewType,s.data)}},t.prototype.__getFriendsData=function(e){switch(this.viewType){case this.FriendsViewType.TYPE_FRIENDS_LIST:return{viewType:this.viewType,data:c.model.friends.friendsData.getFriendInfo(e)};case this.FriendsViewType.TYPE_FRIENDS_REQUEST:case this.FriendsViewType.TYPE_FRIENDS_RECOMMEND:c.model.friends.friendsData.getRequestCount();var t=c.model.friends.friendsData.getRequestInfo(e);if(t)return{viewType:this.FriendsViewType.TYPE_FRIENDS_REQUEST,data:t};var i=e-c.model.friends.friendsData.getRequestCount();if(0==i)return{viewType:this.FriendsViewType.TYPE_FRIENDS_RECOMMEND,data:c.model.friends.friendsData.recommendTitle};if(i>0)return{viewType:this.FriendsViewType.TYPE_FRIENDS_RECOMMEND,data:c.model.friends.friendsData.getRecommendFriendInfo(i-1)};break;case this.FriendsViewType.TYPE_FRIENDS_MESSAGE:return{viewType:this.viewType,data:c.model.friends.friendsData.getMessageInfo(e)}}},t.prototype.onAgreeWithApply=function(e,t,i){switch(e){case 0:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,i+"\u6210\u4e3a\u60a8\u7684\u597d\u53cb\uff0c\u5feb\u53bb\u4e00\u8d77\u6355\u9c7c\u5427",2),n.evtCenter.emit(s.evts.EVT_RECEIVE_FRIENDS_APPLICANTS);break;case 1:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u6ca1\u6709\u8be5\u7533\u8bf7",2),n.evtCenter.emit(s.evts.EVT_RECEIVE_FRIENDS_APPLICANTS);break;case 2:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2);break;case 3:n.evtCenter.emit(s.evts.EVT_MSG_BOX,"\u60a8\u7684\u597d\u53cb\u6570\u91cf\u5df2\u8fbe\u5230\u4e0a\u9650\uff0c\u63d0\u5347VIP\u7b49\u7ea7\u53ef\u589e\u52a0\u597d\u53cb\u4e0a\u9650",2,this.__openVipUI,this);break;case 4:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u62b1\u6b49\uff0c\u5bf9\u65b9\u597d\u53cb\u5df2\u8fbe\u5230\u4e0a\u9650",2)}},t.prototype.onPraiseFriends=function(e,t,i){switch(n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING),e){case 0:if(i)for(var o=0;o<i.length;++o)this.addRewards(i[o]);this.__setListBottom();break;case 1:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u4e0d\u5b58\u5728\u8be5\u597d\u53cb",2);break;case 2:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u4eca\u65e5\u8d60\u9001\u597d\u53cb\u91d1\u5e01\u6b21\u6570\u5df2\u8fbe\u5230\u4e0a\u9650\uff0c\u8bf7\u60a8\u660e\u65e5\u518d\u6765\u5427",2);break;case 3:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2);break;case 4:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u60a8\u4eca\u5929\u5df2\u7ecf\u5411\u8be5\u597d\u53cb\u8d60\u9001\u8fc7\u91d1\u5e01\u54e6",2);break;case 5:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u4eca\u65e5\u8d60\u9001\u597d\u53cb\u91d1\u5e01\u6b21\u6570\u5df2\u8fbe\u5230\u4e0a\u9650\uff0c\u8bf7\u60a8\u660e\u65e5\u518d\u6765\u5427",2)}},t.prototype.onGetGiftFriends=function(e,t,i){switch(n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING),e){case 0:if(i)for(var o=0;o<i.length;++o)this.addRewards(i[o]);this.__setMsgBottom(),this.tableReloadData();break;case 1:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2);break;case 2:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u672a\u627e\u5230\u6d88\u606f",2)}},t.prototype.showCharmAnimation=function(e){var t=cc.instantiate(o.AssetsManager.getRes("prefabs/interactive_expression_rose")),i=this.archor.getPosition();t.setPosition(i),this.node.addChild(t),t.getComponent(cc.Animation).play("animation0");var n=(new cc.Node).addComponent(cc.Label);n.node.setPosition(cc.v2(i.x,i.y=60)),n.node.active=!1,n.node.runAction(cc.sequence(cc.delayTime(20/30),cc.show(),cc.delayTime(20/30),cc.fadeOut(.5),cc.removeSelf())),t.runAction(cc.sequence(cc.delayTime(3),cc.removeSelf()))},t.prototype.showGoldAnimation=function(e){var t=[{giftId:101,giftIcon:"icon_10102.png",giftNum:e}];n.evtCenter.emit(s.evts.EVT_POP_REWARD_PANEL,t,"")},t.prototype.addRewards=function(e){switch(e.name){case"user:charm":this.showCharmAnimation(e.count);break;case"user:chip":this.showGoldAnimation(e.count)}},t}(cc.Component);i.FriendsUI=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_adding_friends":"fish_adding_friends","./fish_friends_cell":"fish_friends_cell"}],fish_game_diamond:[function(e,t,i){"use strict";cc._RF.push(t,"01697j+JMhO+aKxCVIaAGEA","fish_game_diamond"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../model/fish_model"),o=e("./fish_buffer"),c=e("../scene/fish_scene"),a=e("../define/fish_event_types"),r=function(e){function t(t,i){var o=e.call(this)||this;return o.diamondQueue=new n.QueueSync(o),o.addChild(o.diamondQueue),o.diamond=s.ME.diamond,o.userId=t,o.fntDiamond=i,o}return __extends(t,e),t.prototype.onEnter=function(){this.diamondQueue.onEnter(),this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString(),c.evtCenter.emit(a.evts.EVT_DIAMOND_INFO_CHG,this.userId),c.evtCenter.on(a.evts.EVT_PUSH_DIAMOND,this.onEventPushArr,this),c.evtCenter.on(a.evts.EVT_SUB_DIAMOND,this.onEventSubDiamond,this),c.evtCenter.on(a.evts.EVT_ADD_DIAMOND_ATONCE,this.onEventAddDiamondMoment,this),c.evtCenter.on(a.evts.EVT_RECV_USER_INFO,this.onEventSyncDmdAfterUserInfo,this)},t.prototype.onExit=function(){this.diamondQueue.onExit(),o.buffer.gameDiamond=null,c.evtCenter.off(a.evts.EVT_PUSH_DIAMOND,this.onEventPushArr,this),c.evtCenter.off(a.evts.EVT_SUB_DIAMOND,this.onEventSubDiamond,this),c.evtCenter.off(a.evts.EVT_ADD_DIAMOND_ATONCE,this.onEventAddDiamondMoment,this),c.evtCenter.off(a.evts.EVT_RECV_USER_INFO,this.onEventSyncDmdAfterUserInfo,this)},t.prototype.setFntString=function(e){var t=this.diamondQueue.getFlyNum();this.diamond+t!=s.ME.diamond&&(this.diamond=s.ME.diamond-t),this.diamond+=e,this.fntDiamond&&(this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString()),c.evtCenter.emit(a.evts.EVT_DIAMOND_INFO_CHG,this.userId),c.evtCenter.emit(a.evts.EVT_UI_TIPS_DIAMOND,this.userId,e)},t.prototype.onEventPushArr=function(e,t,i){e==s.ME.userId&&this.diamondQueue.onPushData(t,i)},t.prototype.onEventAddDiamondMoment=function(e,t){e==s.ME.userId&&(this.diamond+=t,this.fntDiamond&&(this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString()),c.evtCenter.emit(a.evts.EVT_DIAMOND_INFO_CHG,s.ME.userId,this.diamond))},t.prototype.onEventSubDiamond=function(e,t){e==s.ME.userId&&this.diamond>=t&&(this.diamond-=parseInt(t),this.fntDiamond&&(this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString()),c.evtCenter.emit(a.evts.EVT_DIAMOND_INFO_CHG,e))},t.prototype.onEventSyncDmdAfterUserInfo=function(){var e=this.diamondQueue.getFlyNum();this.diamond+e!=s.ME.diamond&&(this.diamond=s.ME.diamond-e),this.fntDiamond&&(this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString())},t}(cc.Node);i._GameDiamond=r,cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_game_effect_fish:[function(e,t,i){"use strict";cc._RF.push(t,"bede5SGIJtGSpRAyZ+ge6BY","fish_game_effect_fish"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../model/fish_model"),c=e("../../../assets_manager"),a=e("../../fish"),r=e("../../define/fish_consts"),h=e("../../buffer/fish_buffer"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.playSoundFlag=!0,n.evtCenter.on(s.evts.EVT_FISH_DIE_EFF,this.onEventShowFishDieEffect,this)},t.prototype.onEventShowFishDieEffect=function(e,t,i,l){var d=o.model.table.getPlayerInfo(i),_=n.utils.getRelativeSeat(d.seatId),f=n.utils.getSeatPosition(_);if(t.spFish.color=cc.color(255,255,255),t.spFish.stopAllActions(),e==r.DieReason.CATCH){var p=o.model.table.getFishInfoByFishId(t.fishId);if(!p)return;for(var u=a.fish.gameView.getFishPos(p.fishId),m=n.configTable.fish[p.fishResId],g=0,v=l.length;g<v;g++){var b=l[g];if(1==b.itemId){for(var y=0;y<m.money_effect.length;y++){var E=m.money_effect[y];this._goldEffect(e,E,p,u,d,f,b.itemNum)}d.userId==o.ME.userId&&cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/drop_gold"),!1)}else 2==b.itemId?(n.effect.diamondFly(this.node,u,f,d.userId,b.itemNum),h.buffer.pushDiamond(d.userId,b.itemNum,3),d.userId==o.ME.userId&&cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/drop_diamond"),!1)):3==b.itemId?(this._medalFly(d.userId==o.ME.userId,b.itemNum,u,f),d.userId==o.ME.userId&&(o.ME.coupon+=parseInt(b.itemNum),this._winMedal(b.itemNum))):4==b.itemId?i==o.model.table.seatId?n.evtCenter.emit(s.evts.EVT_SHOW_MG_CARD,!0,u):n.effect.dropCardItem(this.node,u,f,b.itemId):5==b.itemId?n.evtCenter.emit(s.evts.EVT_ARENA_SYNC_SCORE,d.userId,b.itemNum):6==b.itemId||(7==b.itemId?n.evtCenter.emit(s.evts.EVT_ARENA_SYNC_BULLET,d.userId,b.itemNum):b.itemId>=r.Item.CRYSTAL_PURPLE&&b.itemId<=r.Item.CRYSTAL_RED?n.effect.dropCrystal(this.node,u,f,b.itemId):(n.effect.dropItem(this.node,u,f,d.userId,b.itemId),h.buffer.pushItem(d.userId,b.itemId,1,3)))}for(g=0;g<m.die_effect.length;g++)E=m.die_effect[g],this._fishDieEffect(E,t,p,u,d,f);var C=this._randomNum();switch(t.fishResId){case 1101:this.playSoundFlag&&2==C&&(this.playSoundFlag=!1,this._whetherPlaySound(1101),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1101_die_20"),!1));break;case 1103:this.playSoundFlag&&2==C&&(this.playSoundFlag=!1,this._whetherPlaySound(1103),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1103_die_20"),!1));break;case 1104:this.playSoundFlag&&2==C&&(this.playSoundFlag=!1,this._whetherPlaySound(1104),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1104_die_20"),!1));break;case 1116:cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1116_die"),!1);break;case 1118:cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1118_die"),!1);break;case 1119:cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1119_die"),!1);break;case 1120:cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1120_die"),!1);break;case 1203:cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1203_die"),!1);break;case 1204:cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1204_die"),!1);break;case 1206:cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1206_die"),!1);break;case 1208:cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1208_die"),!1);break;case 1209:cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1209_die"),!1);break;case 1210:cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/1210_die"),!1);break;case 1302:case 1303:case 1304:case 1305:d.userId==o.ME.userId&&cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/boss_die"),!1)}}else e==r.DieReason.LASER?(this._laserCatch(t),this.__fastAnim(t.spFish,t.fishResId)):e==r.DieReason.NBOMB?this._nbombCatch(t):e==r.DieReason.ELECTRIC?(this._electricShockFishDie(t),this.__fastAnim(t.spFish,t.fishResId)):e==r.DieReason.BOMB&&this._nbombCatch(t)},t.prototype._winMedal=function(e){var t=cc.instantiate(c.AssetsManager.getRes("prefabs/card_coming"));a.fish.adapterScreen(t);var i=t.getComponent(cc.Animation);i.on(cc.Animation.EventType.FINISHED,function(){i.targetOff(this),t.removeFromParent(!0)}.bind(this),this),i.play("win"),this.node.addChild(t,0,"100"),cc.find("group/fntMedal",t).getComponent(cc.Label).string=e.toString()},t.prototype._medalFly=function(e,t,i,s){var o=cc.v2(i.x,i.y+80),r=a.fish.pDistance(o,s)/1e3,h=n.utils.createSprite(e?"fish_103":10==t?"fish_105":"fish_106","common");h.active=!1,this.node.addChild(h),h.runAction(cc.sequence(cc.delayTime(.5),cc.show(),cc.moveTo(2/30,o),cc.delayTime(2),cc.callFunc(function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/fly_item"),!1)}),cc.moveTo(r,s).easing(cc.easeIn(3)),cc.removeSelf()))},t.prototype._laserCatch=function(e){var t=n.utils.createSprite("fish_laser_catch_01","skill_laser"),i=t.getContentSize(),s=e.spFish.getContentSize(),o=s.width/i.width,c=s.height/i.height,a=Math.min(2,Math.max(o,c));t.setPosition(s.width/2,s.height/2),t.setScale(a),e.spFish.addChild(t),e.spFish.runAction(cc.sequence(cc.delayTime(1.5),cc.fadeOut(.5)));var r=n.utils.genAnimate("skill_laser","laser_catch","fish_laser_catch_",2/30),h=t.addComponent(cc.Animation);h.addClip(r),h.play(r.name).wrapMode=cc.WrapMode.Loop},t.prototype._whetherPlaySound=function(e){this.scheduleOnce(this._fishPlaySound,5),cc.log("_whetherPlaySound start "+e)},t.prototype._fishPlaySound=function(){this.playSoundFlag=!0,cc.log("_whetherPlaySound end")},t.prototype._randomNum=function(){return Math.floor(5*Math.random()+1)},t.prototype._nbombCatch=function(e){var t=cc.director.getScheduler();t.unscheduleAllForTarget(e),t.schedule(e.rotateRandom,e,.1,20,0,!1),e.spFish.runAction(cc.sequence(cc.delayTime(1.5),cc.fadeOut(.5)))},t.prototype._electricShockFishDie=function(e){var t=cc.instantiate(c.AssetsManager.getRes("prefabs/electric_fish_die")),i=e.spFish.getContentSize(),n=i.width/100,s=i.height/100,o=Math.min(2,Math.max(n,s));t.setScale(o),t.setPosition(i.width/2,i.height/2),t.getComponent(cc.Animation).play("animation").wrapMode=cc.WrapMode.Loop,t.runAction(cc.sequence(cc.delayTime(2.5),cc.fadeOut(.5),cc.removeSelf())),e.spFish.addChild(t),e.spFish.runAction(cc.sequence(cc.delayTime(2.5),cc.fadeOut(.5)))},t.prototype._goldEffect=function(e,t,i,n,s,c,a){switch(t){case r.GoldEffect.GOLD_FLY:this.__goldFly(i,s,n,c,a);break;case r.GoldEffect.GOLD_WHEEL:this.__goldWheel(s,a);break;case r.GoldEffect.GOLD_PIE:this.__goldPie(i,s,n,c,a);break;case r.GoldEffect.BIGWIN:o.ME.userId==s.userId&&this.__bigWin(e,a)}cc.log("goldEffect gold:"+a)},t.prototype._fishDieEffect=function(e,t,i,n,s,o){switch(e){case r.DieEffect.FAST_ANIM:this.__fastAnim(t.spFish,i.fishResId);break;case r.DieEffect.CATCH_ANIM:this.__catchAnim(t.spFish,i.fishResId);break;case r.DieEffect.ZOOM_FADE:this.__zoomOutFade(i.fishResId,n);break;case r.DieEffect.RANDOM_ROTATE:this.__randRotate(t);break;case r.DieEffect.ZOOM_IN_12:this.__zoomIn12(t.spFish);break;case r.DieEffect.FADEOUT_1:this.__fadeout1(t.spFish);break;case r.DieEffect.FADEOUT_2:this.__fadeout2(t.spFish);break;case r.DieEffect.ROTATE_FADE:this.__rotateFade(t);break;case r.DieEffect.ROTATE_SINK1:this.__rotateSink1(t.spFish);break;case r.DieEffect.ROTATE_SINK2:this.__rotateSink2(t.spFish);break;case r.DieEffect.SHAKE_SCENE_1:this.__shakeScene1();break;case r.DieEffect.SHAKE_SCENE_2:this.__shakeScene2();break;case r.DieEffect.SHAKE_SCENE_3:this.__shakeScene3();break;case r.DieEffect.P_STAR_SMALL:this.__particleStarSmall(n);break;case r.DieEffect.P_STAR_BIG:this.__particleStarBig(n);break;case r.DieEffect.P_SMOKE:this.__particleSmoke(n);break;case r.DieEffect.P_FIREWORK:this.__particleFirework(n);break;case r.DieEffect.GOLD_EXPLODE:this.__goldExplod(i);break;case r.DieEffect.SHARP_EXPLODE:this.__sharpExplode(n);break;case r.DieEffect.EXPLODE_EFF_1:this.__explodeEff1(n);break;case r.DieEffect.EXPLODE_EFF_2:this.__explodeEff2(n);break;case r.DieEffect.EXPLODE_EFF_3:this.__explodeEff3(n);break;case r.DieEffect.ELECTRIC_FISH_DIE:this.__electricFishDie(t);break;case r.DieEffect.BOMB_FISH_DIE:this.__bombFishDie(n)}},t.prototype.__goldFly=function(e,t,i,s,o){n.effect.goldFly(this.node,e.fishType,e.value,i,s,t.userId,o);h.buffer.pushGold(t.userId,o,2)},t.prototype.__goldWheel=function(e,t){var i=n.utils.getRelativeSeat(e.seatId),s=n.utils.getSwingPosition(i);o.model.table.isMatch?n.effect.goldWheel(this.node,s,Math.floor(t)):n.effect.goldWheel(this.node,s,Math.floor(t/.9)),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/gold_wheel"),!1)},t.prototype.__goldPie=function(e,t,i,s,o){n.effect.goldPie(this.node,i,s,t.userId,o);h.buffer.pushGold(t.userId,o,2)},t.prototype.__bigWin=function(e,t){e==r.DieReason.LASER||e==r.DieReason.NBOMB?n.effect.goldBigWin2(this.node,t):n.effect.goldBigWin1(this.node,Math.floor(t/.9)),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/big_win"),!1)},t.prototype.__fastAnim=function(e,t){var i=n.utils.getFishFastAnimation(t),s=e.getComponent(cc.Animation);s.addClip(i),s.play(i.name).repeatCount=100},t.prototype.__catchAnim=function(e,t){var i=n.utils.getFishCatchAnimation(t),s=e.getComponent(cc.Animation);s.addClip(i),s.play(i.name).repeatCount=100},t.prototype.__zoomOutFade=function(e,t){n.effect.zoomOutFade(this.node,e,t)},t.prototype.__randRotate=function(e){e.spFish.setAnchorPoint(.5,.5);var t=cc.director.getScheduler();t.unscheduleAllForTarget(e),t.schedule(e.rotateRandom,e,.1,15,0,!1)},t.prototype.__zoomIn12=function(e){e.setScale(1.5)},t.prototype.__fadeout1=function(e){e.runAction(cc.sequence(cc.delayTime(1.5),cc.fadeOut(.5)))},t.prototype.__fadeout2=function(e){e.runAction(cc.sequence(cc.delayTime(3.3),cc.fadeOut(.5)))},t.prototype.__rotateFade=function(e){e.spFish.setAnchorPoint(.5,.5),e.spFish.runAction(cc.sequence(cc.delayTime(1.5),cc.spawn(cc.fadeOut(.5),cc.callFunc(function(){var t=cc.director.getScheduler();t.unscheduleAllForTarget(e),t.schedule(e.rotateRandom,e,.1,10,0,!1)}.bind(this)))))},t.prototype.__rotateSink1=function(e){e.runAction(cc.sequence(cc.delayTime(1.5),cc.spawn(cc.rotateBy(.5,-90),cc.scaleTo(.5,.5),cc.fadeOut(.5))))},t.prototype.__rotateSink2=function(e){e.runAction(cc.sequence(cc.delayTime(1.5),cc.spawn(cc.rotateBy(.5,-270),cc.scaleTo(.5,.5),cc.fadeOut(.5))))},t.prototype.__shakeScene1=function(){n.effect.shakeScene1(0)},t.prototype.__shakeScene2=function(){n.effect.shakeScene2(0)},t.prototype.__shakeScene3=function(){n.effect.shakeScene2(1)},t.prototype.__particleStarSmall=function(e){a.fish.effectPool.play(a.fish.effectPool.PARTICLE_STAR,this.node,e,.6)},t.prototype.__particleStarBig=function(e){a.fish.effectPool.play(a.fish.effectPool.PARTICLE_STAR,this.node,e,1.5)},t.prototype.__particleSmoke=function(e){a.fish.effectPool.play(a.fish.effectPool.PARTICLE_SMOKE,this.node,e)},t.prototype.__particleFirework=function(e){a.fish.effectPool.play(a.fish.effectPool.PARTICLE_FIREWORK,this.node,e)},t.prototype.__goldExplod=function(e){var t=a.fish.gameView.getFishPos(e.fishId);a.fish.effectPool.play(a.fish.effectPool.GOLD_EXPLODE,this.node,t),3==e.fishType?cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/gold_explode_3"),!1):cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/gold_explode"),!1)},t.prototype.__sharpExplode=function(e){n.effect.sharpExplode(this.node,e)},t.prototype.__explodeEff1=function(e){n.effect.catchExplode(this.node,1,e)},t.prototype.__explodeEff2=function(e){n.effect.catchExplode(this.node,2,e)},t.prototype.__explodeEff3=function(e){var t=cc.instantiate(c.AssetsManager.getRes("prefabs/explode_1"));t.setPosition(e),t.setScale(2);var i=t.getComponent(cc.Animation);i.play("show"),i.on(cc.Animation.EventType.FINISHED,function(){t.removeFromParent(!0)}.bind(this),this),this.node.addChild(t)},t.prototype.__electricFishDie=function(e){var t=cc.instantiate(c.AssetsManager.getRes("prefabs/electric_fish_die")),i=e.spFish.getContentSize(),n=i.width/100,s=i.height/100,o=Math.min(2,Math.max(n,s));t.setScale(o),t.setPosition(i.width/2,i.height/2),t.getComponent(cc.Animation).play("animation").wrapMode=cc.WrapMode.Loop,t.runAction(cc.sequence(cc.delayTime(3.3),cc.fadeOut(.5),cc.removeSelf())),e.spFish.addChild(t),e.spFish.runAction(cc.sequence(cc.delayTime(3.3),cc.fadeOut(.5)))},t.prototype.__bombFishDie=function(e){var t=cc.instantiate(c.AssetsManager.getRes("prefabs/bomb_fish_die")),i=t.getChildByName("Particle_1").getComponent(cc.ParticleSystem),n=t.getChildByName("Particle_2").getComponent(cc.ParticleSystem),s=t.getChildByName("Particle_3").getComponent(cc.ParticleSystem);i.stopSystem(),n.stopSystem(),s.stopSystem(),this.node.runAction(cc.sequence(cc.delayTime(40/30),cc.callFunc(function(){i.resetSystem(),n.resetSystem(),s.resetSystem()}))),t.setPosition(e),t.setScale(1.5);var o=t.getComponent(cc.Animation);o.play("animation"),o.on(cc.Animation.EventType.FINISHED,function(){t.removeFromParent(!0)}.bind(this),this),this.node.addChild(t)},t}(cc.Component);i.GameEffectFish=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_game_effect_game:[function(e,t,i){"use strict";cc._RF.push(t,"53227Jm2dxKjrFiOI277di2","fish_game_effect_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../buffer/fish_buffer"),a=e("../../model/fish_model"),r=e("../../fish"),h=e("../../define/fish_consts"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tempNbomb={},t}return __extends(t,e),t.prototype.onLoad=function(){s.evtCenter.on(o.evts.EVT_WEAPON_UPGRADE,this.onEventWeaponUpgrade,this),s.evtCenter.on(o.evts.EVT_SUMMON,this.onEventSummon,this),s.evtCenter.on(o.evts.EVT_LASER_CATCH,this.onEventLaserCatch,this),s.evtCenter.on(o.evts.EVT_LASER_END,this.onEventLaserEnd,this),s.evtCenter.on(o.evts.EVT_NBOMB_FIRE,this.onEventNbombFire,this),s.evtCenter.on(o.evts.EVT_PITON_DIE,this.onEventPitonDie,this),s.evtCenter.on(o.evts.EVT_SET_FROZEN,this.onEventSetFreeze,this),s.evtCenter.on(o.evts.EVT_HIDE_SUBSIDY,this.onEventHideSubsidy,this),s.evtCenter.on(o.evts.EVT_ELECTRIC_FISH,this.onEventElectricFish,this),s.evtCenter.on(o.evts.EVT_BOMB_FISH,this.onEventBombFish,this),s.evtCenter.on(o.evts.EVT_COMBINE_FISH,this.onEventCombineFish,this)},t.prototype.onEventWeaponUpgrade=function(e,t,i){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/weapon_up"),!1);var o=s.utils.getRelativeSeat(t),r=s.utils.getSwingPosition(o),h=s.utils.getFirePosition(o);s.effect.goldEruption(this.node,r,h,e,i),c.buffer.pushGold(e,i,0),e==a.ME.userId&&s.effect.wpupTips(this.node,i,r)},t.prototype.onEventSummon=function(e,t){var i=s.utils.getSeatPosition(s.utils.getRelativeSeat(e)),o=s.configTrack.getStartPointByTrackName(t.toString());o.x=s.utils.convertX(o.x*cc.winSize.width/1136),o.y=s.utils.convertY(o.y*cc.winSize.height/640),s.effect.summon(this.node,i,o),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/summon"),!1)},t.prototype.onEventLaserCatch=function(e,t,i,n,h,l){var d=a.model.table.getFishInfoByFishId(t);if(d){var _=a.model.table.getPlayerInfo(e);if(_){var f=r.fish.gameView.getFishPos(t),p=s.utils.getRelativeSeat(e),u=s.utils.getSeatPosition(p);d.fishType>=2&&(s.effect.shakeScene1(0),s.effect.catchExplode(this.node,2==d.fishType?1:2,f)),i&&i>0&&(s.effect.goldFly(this.node,d.fishType,d.value,f,u,_.userId,i),c.buffer.pushGold(_.userId,i,3)),n&&n>0&&(s.effect.diamondFly(this.node,f,u,_.userId,n),c.buffer.pushDiamond(_.userId,n,3)),h&&h>0&&e==a.model.table.seatId&&s.evtCenter.emit(o.evts.EVT_SHOW_MG_CARD,!0,f),l>0&&(s.effect.dropItem(this.node,f,u,_.userId,l),c.buffer.pushItem(_.userId,l,1,3))}}},t.prototype.onEventLaserEnd=function(e,t){var i=a.model.table.getPlayerInfo(e);i.userId==a.ME.userId?(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/big_win"),!1),console.log("onEventLaserEnd"),t>0&&s.effect.goldBigWin2(this.node,t)):c.buffer.addGoldMoment(i.userId,t)},t.prototype.onEventNbombFire=function(e,t,i,l){this.tempNbomb={catchFishes:[],win:t,seatId:i};for(var d=0;d<l.length;d++){var _=a.model.table.getFishInfoByFishId(l[d]);this.tempNbomb.catchFishes.push(_)}var f=a.model.table.getPlayerInfo(i);c.buffer.pushGold(f.userId,t,4),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/n_bomb"),!1);var p=cc.instantiate(n.AssetsManager.getRes("prefabs/nbomb"));r.fish.adapterScreen(p);var u=p.getComponent(cc.Animation);u.on(cc.Animation.EventType.FINISHED,function(){u.targetOff(this),p.removeFromParent(!0)}.bind(this),this),u.play("showNbomb"),this.node.addChild(p);s.utils.convertPt(cc.v2(e[0],e[1]));var m=cc.find("ptRoot",m);this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){s.effect.shakeScene2(0);for(var e=a.model.table.getPlayerInfo(this.tempNbomb.seatId),t=s.utils.getRelativeSeat(this.tempNbomb.seatId),i=s.utils.getSeatPosition(t),n=0;n<this.tempNbomb.catchFishes.length;n++){var o=this.tempNbomb.catchFishes[n],c=r.fish.gameView.getFishPos(o.fishId);0==c.x&&0==c.y||(s.effect.goldFly(this.node,o.fishType,o.value,c,i,e.userId,0),r.fish.gameView.fishDie(o.fishId,h.DieReason.NBOMB,a.model.table.seatId,[]))}}.bind(this)))),f.userId==a.ME.userId&&this.node.runAction(cc.sequence(cc.delayTime(100/30),cc.callFunc(function(){if(0==this.tempNbomb.catchFishes.length)s.evtCenter.emit(o.evts.EVT_MSG_TIPS,s.configTable.languageKey.string_meidazhao.string_zhcn,2);else{var e=cc.visibleRect,t=cc.v2(e.width/2,e.height/2),i=s.utils.getSeatPosition(s.utils.getRelativeSeat(a.model.table.seatId));cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/big_win"),!1),cc.log("onEventNbombFire "+this.tempNbomb.win),s.effect.goldBigWin2(this.node,this.tempNbomb.win),s.effect.goldEruption(this.node,t,i,a.ME.userId,this.tempNbomb.win)}this.tempNbomb=null}.bind(this))))},t.prototype.onEventPitonDie=function(e,t,i){var o=a.model.table.getPlayerInfo(e);if(o){var c=r.fish.gameView.getPitonPos(t),h=s.utils.getRelativeSeat(e),l=s.utils.getSeatPosition(h);s.effect.goldFly(this.node,1,4,c,l,o.userId,i),r.fish.gameView.pitonDie(t),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/ice_crash"),!1)}},t.prototype.onEventSetFreeze=function(e,t,i){var s=r.fish.gameView.getEffectLayer();if(e){var o=s.getChildByName("freeze");if(o&&s.removeChild(o),o=cc.instantiate(n.AssetsManager.getRes("prefabs/freeze")),r.fish.adapterScreen(o),a.model.table.seatId>2){o.angle=-180;var c=cc.visibleRect;o.setPosition(c.width,c.height)}var h=o.getComponent(cc.Animation);h.on(cc.Animation.EventType.FINISHED,function(){h.targetOff(this),o.removeFromParent(!0)}.bind(this),this),h.play("animation"),s.addChild(o,0,"freeze"),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/freeze"),!1)}else{var l=s.getChildByName("freeze");l&&s.removeChild(l)}},t.prototype.onEventHideSubsidy=function(e,t){if(e==a.ME.userId){var i=s.utils.getRelativeSeat(a.model.table.seatId),n=s.utils.getSeatPosition(i),o=cc.v2(n.x,n.y+250),c=cc.v2(n.x,n.y+70);s.effect.goldEruption(this.node,o,c,e,t)}},t.prototype.onEventElectricFish=function(e,t,i){for(var o=[],l=0;l<t.length;l++){var d=a.model.table.getFishInfoByFishId(t[l]);d&&o.push(d)}var _=a.model.table.getPlayerInfo(e);c.buffer.pushGold(_.userId,i,4);var f=s.utils.getRelativeSeat(e),p=s.utils.getSeatPosition(f);this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/bomb_fish_explode"),!1);for(var t=0;t<o.length;t++){var i=o[t],c=r.fish.gameView.getFishPos(i.fishId);0==c.x&&0==c.y||(s.effect.goldFly(this.node,i.fishType,i.value,c,p,_.userId,0),r.fish.gameView.fishDie(i.fishId,h.DieReason.BOMB,e,[]))}}.bind(this)))),_.userId==a.ME.userId&&this.node.runAction(cc.sequence(cc.delayTime(70/30),cc.callFunc(function(){var e=cc.visibleRect,t=cc.v2(e.width/2,e.height/2);cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/big_win"),!1),s.effect.goldBigWin1(this.node,i),s.effect.goldEruption(this.node,t,p,a.ME.userId,i)}.bind(this))))},t.prototype.onEventBombFish=function(e,t,i){for(var o=[],l=0;l<t.length;l++){var d=a.model.table.getFishInfoByFishId(t[l]);d&&o.push(d)}var _=a.model.table.getPlayerInfo(e);c.buffer.pushGold(_.userId,i,4);var f=s.utils.getRelativeSeat(e),p=s.utils.getSeatPosition(f);this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/bomb_fish_explode"),!1);for(var t=0;t<o.length;t++){var i=o[t],c=r.fish.gameView.getFishPos(i.fishId);0==c.x&&0==c.y||(s.effect.goldFly(this.node,i.fishType,i.value,c,p,_.userId,0),r.fish.gameView.fishDie(i.fishId,h.DieReason.BOMB,e,[]))}}.bind(this)))),_.userId==a.ME.userId&&this.node.runAction(cc.sequence(cc.delayTime(70/30),cc.callFunc(function(){var e=cc.visibleRect,t=cc.v2(e.width/2,e.height/2);cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/big_win"),!1),s.effect.goldBigWin1(this.node,i),s.effect.goldEruption(this.node,t,p,a.ME.userId,i)}.bind(this))))},t.prototype.onEventCombineFish=function(e,t,i){var o=a.model.table.getPlayerInfo(e);c.buffer.pushGold(o.userId,i,3),this.node.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/bomb_fish_explode"),!1),s.effect.shakeScene2(0)}.bind(this))));for(var r=[],h=0;h<t.length;h++){var l=new cc.Node;this.node.addChild(l),l.fishId=t[h],r.push(l)}for(h=0;h<r.length;h++){r[h].runAction(cc.sequence(cc.delayTime(.15*h),cc.callFunc(function(t){a.model.table.fishDie(t.fishId,e)}.bind(this)),cc.removeSelf()))}var d=s.utils.getRelativeSeat(e),_=s.utils.getSeatPosition(d);o.userId==a.ME.userId&&this.node.runAction(cc.sequence(cc.delayTime(50/30),cc.callFunc(function(){var e=cc.visibleRect,t=cc.v2(e.width/2,e.height/2);cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/big_win"),!1),s.effect.goldBigWin1(this.node,i),s.effect.goldEruption(this.node,t,_,a.ME.userId,i)}.bind(this))))},t}(cc.Component);i.GameEffectGame=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_game_freeze:[function(e,t,i){"use strict";cc._RF.push(t,"4bfecCK6y5Jt4/f6VjdQzDJ","fish_game_freeze"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../model/fish_model"),o=e("../define/fish_consts"),c=e("./fish_buffer"),a=e("../scene/fish_scene"),r=e("../define/fish_event_types"),h=function(e){function t(t,i){var c=e.call(this)||this;c.freezeQueue=new n.QueueSync(c),c.addChild(c.freezeQueue);var a=s.ME.baggage.getItem(o.Item.FREEZE);return c.freeze=a.count,c.userId=t,c.fntFreeze=i,c}return __extends(t,e),t.prototype.onEnter=function(){this.freezeQueue.onEnter(),this.fntFreeze.getComponent(cc.Label).string=this.freeze.toString(),a.evtCenter.on(r.evts.EVT_PUSH_FREEZE,this.onEventPushFreeze,this),a.evtCenter.on(r.evts.EVT_SUB_FREEZE,this.onEventSubFreeze,this)},t.prototype.onExit=function(){this.freezeQueue.onExit(),c.buffer.freeze=null,a.evtCenter.off(r.evts.EVT_PUSH_FREEZE,this.onEventPushFreeze,this),a.evtCenter.off(r.evts.EVT_SUB_FREEZE,this.onEventSubFreeze,this)},t.prototype.onEventPushFreeze=function(e,t,i){e==this.userId&&this.freezeQueue.onPushData(t,i)},t.prototype.onEventSubFreeze=function(e,t){e==this.userId&&(this.freeze-=t,this.fntFreeze.getComponent(cc.Label).string=this.freeze.toString(),a.evtCenter.emit(r.evts.EVT_BAGGAGE_UPDATE))},t.prototype.setFntString=function(e){this.freeze+=e,this.fntFreeze&&(this.freeze>999?(a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u51b0\u5c01\u9053\u5177\u6570\u91cf\u5df2\u5230\u8fbe\u4e0a\u9650"),this.fntFreeze.getComponent(cc.Label).string="999"):this.fntFreeze.getComponent(cc.Label).string=this.freeze.toString()),a.evtCenter.emit(r.evts.EVT_BAGGAGE_UPDATE)},t}(cc.Node);i._Freeze=h,cc._RF.pop()},{"../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_game_fury:[function(e,t,i){"use strict";cc._RF.push(t,"e43b8sx6j1AZqbZY4x86yQ3","fish_game_fury"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../model/fish_model"),s=e("../define/fish_consts"),o=e("./fish_queue_sync"),c=e("../scene/fish_scene"),a=e("../define/fish_event_types"),r=e("./fish_buffer"),h=function(e){function t(t,i){var c=e.call(this)||this,a=n.ME.baggage.getItem(s.Item.FURY);return c.fury=a.count,c.userId=t,c.fntFury=i,c.furyQueue=new o.QueueSync(c),c.addChild(c.furyQueue),c}return __extends(t,e),t.prototype.onEnter=function(){this.furyQueue.onEnter(),this.fntFury.getComponent(cc.Label).string=this.fury.toString(),c.evtCenter.on(a.evts.EVT_PUSH_FURY,this.onEventPushFury,this),c.evtCenter.on(a.evts.EVT_SUB_FURY,this.onEventSubFury,this)},t.prototype.onExit=function(){this.furyQueue.onExit(),r.buffer.fury=null,c.evtCenter.off(a.evts.EVT_PUSH_FURY,this.onEventPushFury,this),c.evtCenter.off(a.evts.EVT_SUB_FURY,this.onEventSubFury,this)},t.prototype.onEventPushFury=function(e,t,i){e==this.userId&&this.furyQueue.onPushData(t,i)},t.prototype.onEventSubFury=function(e,t){e==this.userId&&(this.fury-=t,this.fntFury.getComponent(cc.Label).string=this.fury.toString(),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE))},t.prototype.setFntString=function(e){this.fury+=e,this.fntFury&&(this.fntFury.getComponent(cc.Label).string=this.fury.toString()),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE)},t}(cc.Node);i._Fury=h,cc._RF.pop()},{"../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_game_gold:[function(e,t,i){"use strict";cc._RF.push(t,"7cc0f+eFkxKhpKz/PMyTue1","fish_game_gold"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../model/fish_model"),s=e("./fish_queue_sync"),o=e("../scene/fish_scene"),c=e("../define/fish_event_types"),a=e("./fish_buffer"),r=function(e){function t(t,i){var o=e.call(this)||this;return o.goldQueue=new s.QueueSync(o),o.addChild(o.goldQueue),o.gold=n.ME.gold,o.userId=t,o.fntGold=i,o}return __extends(t,e),t.prototype.onEnter=function(){this.goldQueue.onEnter(),this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold),o.evtCenter.emit(c.evts.EVT_GOLD_INFO_CHG,n.ME.userId,this.gold),o.evtCenter.emit(c.evts.EVT_GOLD_BUF_FINISHED,n.model.table.seatId),o.evtCenter.on(c.evts.EVT_PUSH_ACT_GOLD,this.onEventPushArr,this),o.evtCenter.on(c.evts.EVT_SUB_GOLD,this.onEventSubGold,this),o.evtCenter.on(c.evts.EVT_ADD_GOLD_ATONCE,this.onEventAddGoldMoment,this)},t.prototype.onExit=function(){this.goldQueue.onExit(),a.buffer.gameGold=null,o.evtCenter.off(c.evts.EVT_PUSH_ACT_GOLD,this.onEventPushArr,this),o.evtCenter.off(c.evts.EVT_SUB_GOLD,this.onEventSubGold,this),o.evtCenter.off(c.evts.EVT_ADD_GOLD_ATONCE,this.onEventAddGoldMoment,this)},t.prototype.setFntString=function(e){var t=this.goldQueue.getFlyNum();this.gold+t!=n.ME.gold&&(this.gold=n.ME.gold-t),this.gold+=e,this.fntGold&&(this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold)),o.evtCenter.emit(c.evts.EVT_GOLD_INFO_CHG,n.ME.userId,this.gold),o.evtCenter.emit(c.evts.EVT_UI_ADD_GOLD,n.ME.userId,this.gold),o.evtCenter.emit(c.evts.EVT_UI_TIPS_GOLD,n.ME.userId,e)},t.prototype.onEventPushArr=function(e,t,i){e==n.ME.userId&&this.goldQueue.onPushData(t,i)},t.prototype.onEventAddGoldMoment=function(e,t){e==this.userId&&(this.gold+=parseInt(t),this.fntGold&&(this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold)),o.evtCenter.emit(c.evts.EVT_GOLD_INFO_CHG,this.userId,this.gold))},t.prototype.onEventSubGold=function(e,t){e==n.ME.userId&&this.gold>=t&&(this.gold-=t,this.fntGold&&(this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold)),o.evtCenter.emit(c.evts.EVT_GOLD_INFO_CHG,n.ME.userId,this.gold))},t}(cc.Node);i._GameGold=r,cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_game_laser1:[function(e,t,i){"use strict";cc._RF.push(t,"363de1GljBDDKfKNxDN7lhz","fish_game_laser1"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../model/fish_model"),o=e("../define/fish_consts"),c=e("../scene/fish_scene"),a=e("../define/fish_event_types"),r=e("./fish_buffer"),h=function(e){function t(t,i){var c=e.call(this)||this;c.laserQueue=new n.QueueSync(c),c.addChild(c.laserQueue);var a=s.ME.baggage.getItem(o.Item.LASER1);return c.laser1=a?a.count:0,c.userId=t,c.itemID=o.Item.LASER1,c.skillID=o.Skill.LASER1,c.fntLaser1=i,c}return __extends(t,e),t.prototype.onEnter=function(){this.laserQueue.onEnter(),this.fntLaser1.getComponent(cc.Label).string=this.laser1.toString(),c.evtCenter.on(a.evts.EVT_PUSH_LASER,this.onEventPushLaser,this),c.evtCenter.on(a.evts.EVT_SUB_LASER,this.onEventSubLaser,this)},t.prototype.onExit=function(){this.laserQueue.onExit(),r.buffer.laser1=null,c.evtCenter.off(a.evts.EVT_PUSH_LASER,this.onEventPushLaser,this),c.evtCenter.off(a.evts.EVT_SUB_LASER,this.onEventSubLaser,this)},t.prototype.onEventPushLaser=function(e,t,i,n){e==this.userId&&(this.itemID!=t&&this.skillID!=t||this.laserQueue.onPushData(i,n))},t.prototype.onEventSubLaser=function(e,t,i){e==this.userId&&(this.itemID!=t&&this.skillID!=t||(this.laser1-=i,this.fntLaser1.getComponent(cc.Label).string=this.laser1.toString(),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE)))},t.prototype.setFntString=function(e){this.laser1+=e,this.fntLaser1&&(this.fntLaser1.getComponent(cc.Label).string=this.laser1.toString()),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE)},t}(cc.Node);i._LASER1=h,cc._RF.pop()},{"../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_game_laser2:[function(e,t,i){"use strict";cc._RF.push(t,"b7de2qw6u5I7pC/kPA9tbVd","fish_game_laser2"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../define/fish_consts"),o=e("../model/fish_model"),c=e("../scene/fish_scene"),a=e("../define/fish_event_types"),r=e("./fish_buffer"),h=function(e){function t(t,i){var c=e.call(this)||this;c.laserQueue=new n.QueueSync(c),c.addChild(c.laserQueue);var a=o.ME.baggage.getItem(s.Item.LASER2);return c.laser2=a?a.count:0,c.userId=t,c.itemID=s.Item.LASER2,c.skillID=s.Skill.LASER2,c.fntLaser2=i,c}return __extends(t,e),t.prototype.onEnter=function(){this.laserQueue.onEnter(),this.fntLaser2.getComponent(cc.Label).string=this.laser2.toString(),c.evtCenter.on(a.evts.EVT_PUSH_LASER,this.onEventPushLaser,this),c.evtCenter.on(a.evts.EVT_SUB_LASER,this.onEventSubLaser,this)},t.prototype.onExit=function(){this.laserQueue.onExit(),r.buffer.laser2=null,c.evtCenter.off(a.evts.EVT_PUSH_LASER,this.onEventPushLaser,this),c.evtCenter.off(a.evts.EVT_SUB_LASER,this.onEventSubLaser,this)},t.prototype.onEventPushLaser=function(e,t,i,n){e==this.userId&&(this.itemID!=t&&this.skillID!=t||this.laserQueue.onPushData(i,n))},t.prototype.onEventSubLaser=function(e,t,i){e==this.userId&&(this.itemID!=t&&this.skillID!=t||(this.laser2-=i,this.fntLaser2.getComponent(cc.Label).string=this.laser2.toString(),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE)))},t.prototype.setFntString=function(e){this.laser2+=e,this.fntLaser2&&(this.fntLaser2.getComponent(cc.Label).string=this.laser2.toString()),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE)},t}(cc.Node);i._LASER2=h,cc._RF.pop()},{"../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_game_laser3:[function(e,t,i){"use strict";cc._RF.push(t,"c20d2lXWXtMiKWlZuoq5aoz","fish_game_laser3"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../define/fish_consts"),o=e("../model/fish_model"),c=e("../scene/fish_scene"),a=e("../define/fish_event_types"),r=e("./fish_buffer"),h=function(e){function t(t,i){var c=e.call(this)||this;c.laserQueue=new n.QueueSync(c),c.addChild(c.laserQueue);var a=o.ME.baggage.getItem(s.Item.LASER3);return c.laser3=a?a.count:0,c.userId=t,c.itemID=s.Item.LASER3,c.skillID=s.Skill.LASER3,c.fntLaser3=i,c}return __extends(t,e),t.prototype.onEnter=function(){this.laserQueue.onEnter(),this.fntLaser3.getComponent(cc.Label).string=this.laser3.toString(),c.evtCenter.on(a.evts.EVT_PUSH_LASER,this.onEventPushLaser,this),c.evtCenter.on(a.evts.EVT_SUB_LASER,this.onEventSubLaser,this)},t.prototype.onExit=function(){this.laserQueue.onExit(),r.buffer.laser3=null,c.evtCenter.off(a.evts.EVT_PUSH_LASER,this.onEventPushLaser,this),c.evtCenter.off(a.evts.EVT_SUB_LASER,this.onEventSubLaser,this)},t.prototype.onEventPushLaser=function(e,t,i,n){e==this.userId&&(this.itemID!=t&&this.skillID!=t||this.laserQueue.onPushData(i,n))},t.prototype.onEventSubLaser=function(e,t,i){e==this.userId&&(this.itemID!=t&&this.skillID!=t||(this.laser3-=i,this.fntLaser3.getComponent(cc.Label).string=this.laser3.toString(),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE)))},t.prototype.setFntString=function(e){this.laser3+=e,this.fntLaser3&&(this.fntLaser3.getComponent(cc.Label).string=this.laser3.toString()),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE)},t}(cc.Node);i._LASER3=h,cc._RF.pop()},{"../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_game_laser4:[function(e,t,i){"use strict";cc._RF.push(t,"76e05m3EudAgbW9YBrB8P+l","fish_game_laser4"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../define/fish_consts"),o=e("../model/fish_model"),c=e("../scene/fish_scene"),a=e("../define/fish_event_types"),r=e("./fish_buffer"),h=function(e){function t(t,i){var c=e.call(this)||this;c.laserQueue=new n.QueueSync(c),c.addChild(c.laserQueue);var a=o.ME.baggage.getItem(s.Item.LASER4);return c.laser4=a?a.count:0,c.userId=t,c.itemID=s.Item.LASER4,c.skillID=s.Skill.LASER4,c.fntLaser4=i,c}return __extends(t,e),t.prototype.onEnter=function(){this.laserQueue.onEnter(),this.fntLaser4.getComponent(cc.Label).string=this.laser4.toString(),c.evtCenter.on(a.evts.EVT_PUSH_LASER,this.onEventPushLaser,this),c.evtCenter.on(a.evts.EVT_SUB_LASER,this.onEventSubLaser,this)},t.prototype.onExit=function(){this.laserQueue.onExit(),r.buffer.laser4=null,c.evtCenter.off(a.evts.EVT_PUSH_LASER,this.onEventPushLaser,this),c.evtCenter.off(a.evts.EVT_SUB_LASER,this.onEventSubLaser,this)},t.prototype.onEventPushLaser=function(e,t,i,n){e==this.userId&&(this.itemID!=t&&this.skillID!=t||this.laserQueue.onPushData(i,n))},t.prototype.onEventSubLaser=function(e,t,i){e==this.userId&&(this.itemID!=t&&this.skillID!=t||(this.laser4-=i,this.fntLaser4.getComponent(cc.Label).string=this.laser4.toString(),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE)))},t.prototype.setFntString=function(e){this.laser4+=e,this.fntLaser4&&(this.fntLaser4.getComponent(cc.Label).string=this.laser4.toString()),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE)},t}(cc.Node);i._LASER4=h,cc._RF.pop()},{"../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_game_lock:[function(e,t,i){"use strict";cc._RF.push(t,"75f67m255xDr6w1jphgd3Ik","fish_game_lock"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../model/fish_model"),o=e("../define/fish_consts"),c=e("../scene/fish_scene"),a=e("../define/fish_event_types"),r=e("./fish_buffer"),h=function(e){function t(t,i){var c=e.call(this)||this;c.lockQueue=new n.QueueSync(c),c.addChild(c.lockQueue);var a=s.ME.baggage.getItem(o.Item.LOCK);return c.lock=a.count,c.userId=t,c.fntLock=i,c}return __extends(t,e),t.prototype.onEnter=function(){this.lockQueue.onEnter(),this.fntLock.getComponent(cc.Label).string=this.lock.toString(),c.evtCenter.on(a.evts.EVT_PUSH_LOCK,this.onEventPushLock,this),c.evtCenter.on(a.evts.EVT_SUB_LOCK,this.onEventSubLock,this)},t.prototype.onExit=function(){this.lockQueue.onExit(),r.buffer.lock=null,c.evtCenter.off(a.evts.EVT_PUSH_LOCK,this.onEventPushLock,this),c.evtCenter.off(a.evts.EVT_SUB_LOCK,this.onEventSubLock,this)},t.prototype.onEventPushLock=function(e,t,i){e==this.userId&&this.lockQueue.onPushData(t,i)},t.prototype.onEventSubLock=function(e,t){e==this.userId&&(this.lock-=t,this.fntLock.getComponent(cc.Label).string=this.lock.toString(),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE))},t.prototype.setFntString=function(e){this.lock+=e,this.fntLock&&(this.lock>999?(c.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u9501\u5b9a\u9053\u5177\u6570\u91cf\u5df2\u5230\u8fbe\u4e0a\u9650"),this.fntLock.getComponent(cc.Label).string="999"):this.fntLock.getComponent(cc.Label).string=this.lock.toString()),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE)},t}(cc.Node);i._Lock=h,cc._RF.pop()},{"../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_game_nbomb:[function(e,t,i){"use strict";cc._RF.push(t,"da63cteaexGw5QE/RwwSh2D","fish_game_nbomb"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../model/fish_model"),o=e("../define/fish_consts"),c=e("../scene/fish_scene"),a=e("../define/fish_event_types"),r=e("./fish_buffer"),h=function(e){function t(t,i){var c=e.call(this)||this;c.nbombQueue=new n.QueueSync(c),c.addChild(c.nbombQueue);var a=s.ME.baggage.getItem(o.Item.NBOMB);return c.nbomb=a?a.count:0,c.userId=t,c.fntNbomb=i,c}return __extends(t,e),t.prototype.onEnter=function(){this.nbombQueue.onEnter(),this.fntNbomb.getComponent(cc.Label).string=this.nbomb.toString(),c.evtCenter.on(a.evts.EVT_PUSH_NBOMB,this.onEventPushNbomb,this),c.evtCenter.on(a.evts.EVT_SUB_NBOMB,this.onEventSubNbomb,this)},t.prototype.onExit=function(){this.nbombQueue.onExit(),r.buffer.nbomb=null,c.evtCenter.off(a.evts.EVT_PUSH_NBOMB,this.onEventPushNbomb,this),c.evtCenter.off(a.evts.EVT_SUB_NBOMB,this.onEventSubNbomb,this)},t.prototype.onEventPushNbomb=function(e,t,i){e==this.userId&&this.nbombQueue.onPushData(t,i)},t.prototype.onEventSubNbomb=function(e,t){e==this.userId&&(this.nbomb-=parseInt(t),this.fntNbomb.getComponent(cc.Label).string=this.nbomb.toString(),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE))},t.prototype.setFntString=function(e){this.nbomb+=parseInt(e),this.fntNbomb&&(this.fntNbomb.getComponent(cc.Label).string=this.nbomb.toString()),c.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE)},t}(cc.Node);i._Nbomb=h,cc._RF.pop()},{"../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_game_reward_panel:[function(e,t,i){"use strict";cc._RF.push(t,"cb7fdKXOIVNg6PMd+hop+55","fish_game_reward_panel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../model/fish_model"),c=e("../../buffer/fish_buffer"),a=e("../../define/fish_event_types"),r=e("../../fish"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t){void 0===t&&(t=null),this.csbNode=null,this.Panel_1=null,this.group_other=null,this.fntCount=null,this.archor=null,this.nodePos1=null,this.nodePos2=null,this.nodePos3=null,this.touch=t||!0,this.gift_num=e.length,this.Items=e,this.ItemNode=[],this.leftTime=5,this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/rewards_panel_game")),r.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),this.nodePos1=cc.find("archor/nodePos1",this.csbNode),this.nodePos2=cc.find("archor/nodePos2",this.csbNode),this.nodePos3=cc.find("archor/nodePos3",this.csbNode),this.group_other=cc.find("archor/group_other",this.csbNode),this.fntCount=cc.find("archor/group_other/fntCount",this.csbNode),this.Panel_1=cc.find("Panel_1",this.csbNode),this.archor=cc.find("archor",this.csbNode),this.Panel_1.on(cc.Node.EventType.TOUCH_END,this.onBtnPanel,this),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/reward_gain"),!1),this.csbNode.getComponent(cc.Animation).play("show"),this.touch||(this.Panel_1.active=!1),this.scheduleOnce(this.delayForTouch,1)},t.prototype.onLoad=function(){for(var e=0;e<this.gift_num;e++){var t=cc.find("archor/item_"+this.gift_num+"/nodeItem"+this.gift_num+"_"+e,this.csbNode),i=new l(this.Items[e]);i.onEnter(),t.addChild(i),this.ItemNode.push(t)}},t.prototype.delayForTouch=function(){this.Panel_1.active=!0,this.schedule(this._countDown,1)},t.prototype.onDestroy=function(){this.ItemNode=[]},t.prototype._countDown=function(){this.leftTime--,this.fntCount.getComponent(cc.Label).string=this.leftTime.toString(),0==this.leftTime&&(this.unschedule(this._countDown),this.getRewards())},t.prototype.onBtnPanel=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.unschedule(this._countDown),this.getRewards()},t.prototype.getRewards=function(){this.scheduleOnce(this.removePanel,1),this.Panel_1.active=!1,this.group_other.active=!1;var e=s.utils.getSeatPosition(s.utils.getRelativeSeat(o.model.table.seatId)),t=this.archor.convertToNodeSpaceAR(e);cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/fly_item"),!1);for(var i=0;i<this.gift_num;i++)this.ItemNode[i].item_id=this.Items[i].giftId,this.ItemNode[i].itemNum=this.Items[i].giftNum,101==this.ItemNode[i].item_id?c.buffer.pushGold(o.ME.userId,this.ItemNode[i].itemNum,.7):102==this.ItemNode[i].item_id?c.buffer.pushDiamond(o.ME.userId,this.ItemNode[i].itemNum,.7):c.buffer.pushItem(o.ME.userId,this.ItemNode[i].item_id,this.ItemNode[i].itemNum,1),this.ItemNode[i].runAction(cc.sequence(cc.spawn(cc.moveTo(.7,t),cc.scaleTo(.7,.5)),cc.removeSelf()))},t.prototype.removePanel=function(){this.node.removeFromParent(),this.destroy(),o.model.guide.isLastRewardPanel&&s.evtCenter.emit(a.evts.EVT_SHOW_NEWBIE_TASK_PANEL)},t}(cc.Component);i.RewardGame=h;var l=function(e){function t(t){var i=e.call(this)||this;i.csbNode=null,i.board=null,i.Icon=null,i.fntNum=null,i.fntCount=null,i.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/reward_Item")),i.addChild(i.csbNode),i.board=cc.find("board",i.csbNode),i.Icon=cc.find("Icon",i.csbNode),i.fntNum=cc.find("fntNum",i.csbNode);var o=n.AssetsManager.getRes("img/atlas/common");return i.Icon.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame(t.giftIcon.split(".")[0]),i.fntNum.getComponent(cc.Label).string=s.utils.formatNumber(t.giftNum),i}return __extends(t,e),t.prototype.onEnter=function(){var e=this.board.getContentSize(),t=e.width/this.Icon.getContentSize().width,i=e.height/this.Icon.getContentSize().height;t<1&&i<1&&this.Icon.setScale(t,i)},t}(cc.Node);i.RewardItemGame=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_game_summon:[function(e,t,i){"use strict";cc._RF.push(t,"5b9220Kf9xBwqy24cM4jW+C","fish_game_summon"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../model/fish_model"),o=e("../define/fish_consts"),c=e("./fish_buffer"),a=e("../scene/fish_scene"),r=e("../define/fish_event_types"),h=function(e){function t(t,i){var c=e.call(this)||this;c.summonQueue=new n.QueueSync(c),c.addChild(c.summonQueue);var a=s.ME.baggage.getItem(o.Item.SUMMON);return c.summon=a.count,c.userId=t,c.fntSummon=i,c}return __extends(t,e),t.prototype.onEnter=function(){this.summonQueue.onEnter(),this.fntSummon.getComponent(cc.Label).string=this.summon.toString(),a.evtCenter.on(r.evts.EVT_PUSH_SUMMON,this.onEventPushSummon,this),a.evtCenter.on(r.evts.EVT_SUB_SUMMON,this.onEventSubSummon,this)},t.prototype.onExit=function(){this.summonQueue.onExit(),c.buffer.summon=null,a.evtCenter.off(r.evts.EVT_PUSH_SUMMON,this.onEventPushSummon,this),a.evtCenter.off(r.evts.EVT_SUB_SUMMON,this.onEventSubSummon,this)},t.prototype.onEventPushSummon=function(e,t,i){e==this.userId&&this.summonQueue.onPushData(t,i)},t.prototype.onEventSubSummon=function(e,t){e==this.userId&&(this.summon-=parseInt(t),this.fntSummon.getComponent(cc.Label).string=this.summon.toString(),a.evtCenter.emit(r.evts.EVT_BAGGAGE_UPDATE))},t.prototype.setFntString=function(e){this.summon+=parseInt(e),this.fntSummon&&(this.summon>999?(a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u53ec\u5524\u9053\u5177\u6570\u91cf\u5df2\u5230\u8fbe\u4e0a\u9650"),this.fntSummon.getComponent(cc.Label).string="999"):this.fntSummon.getComponent(cc.Label).string=this.summon.toString()),a.evtCenter.emit(r.evts.EVT_BAGGAGE_UPDATE)},t}(cc.Node);i._Summon=h,cc._RF.pop()},{"../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_game_ui:[function(e,t,i){"use strict";cc._RF.push(t,"424ccICwalOILfrlC5/kYvk","fish_game_ui"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../../assets_manager"),a=e("../../define/fish_msg_types"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=e("../../scene/loading/fish_scene_loading_game_to_lobby"),d=e("../../define/fish_consts"),_=e("../fish_view"),f=e("../weapon_forge/fish_weapon_forge_window"),p=e("../../buffer/fish_buffer"),u=function(e){function t(){var t=e.call(this)||this;return t.btnFury=null,t.btnSummon=null,t.btnAuto=null,t.btnFreeze=null,t.btnLock=null,t.auto=null,t.btnDaily=null,t.frameAuto=null,t.lock_frame=null,t.btnDuanZao=null,t.fntFuryCount=null,t.furyPrice=null,t.fntSummonCount=null,t.summonPrice=null,t.fntFreezeCount=null,t.freezePrice=null,t.fntLockCount=null,t.lockPrice=null,t.changeWeaponLight=null,t.frameBottom=null,t.lock=null,t.btnHideMenu=null,t.notice_daily=null,t.menuVisible=!1,t.isFirstShowMenu=!0,n.model.table.fireNumLock=0,n.model.table.fireNumSW=0,n.model.table.isHaveUesedLock=!1,n.model.table.isHaveUesedSuperWeapon=!1,t.tipsFnt=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=this.node,this.btnFury=cc.find("anchorLeft/panelSkill/fury/btnFury",this.csbRoot),this.btnSummon=cc.find("anchorLeft/panelSkill/summon/btnSummon",this.csbRoot),this.btnAuto=cc.find("anchorLeft/panelSkill/auto/btnAuto",this.csbRoot),this.btnFreeze=cc.find("frameBottom/freeze/btnFreeze",this.csbRoot),this.btnDuanZao=cc.find("anchorRight/btnDuanZao",this.csbRoot),this.auto=cc.find("anchorLeft/panelSkill/auto",this.csbRoot),this.btnDaily=cc.find("anchorRight/btnDaily",this.csbRoot),this.frameAuto=cc.find("anchorLeft/panelSkill/auto/frameAuto",this.csbRoot),this.lock_frame=cc.find("frameBottom/lock/lock_frame",this.csbRoot),this.btnDuanZao=cc.find("anchorRight/btnDuanZao",this.csbRoot),this.fntFuryCount=cc.find("anchorLeft/panelSkill/fury/fntFuryCount",this.csbRoot),this.furyPrice=cc.find("anchorLeft/panelSkill/fury/furyPrice",this.csbRoot),this.fntSummonCount=cc.find("anchorLeft/panelSkill/summon/fntSummonCount",this.csbRoot),this.summonPrice=cc.find("anchorLeft/panelSkill/summon/summonPrice",this.csbRoot),this.fntFreezeCount=cc.find("frameBottom/freeze/fntFreezeCount",this.csbRoot),this.freezePrice=cc.find("frameBottom/freeze/freezePrice",this.csbRoot),this.fntLockCount=cc.find("frameBottom/lock/fntLockCount",this.csbRoot),this.lockPrice=cc.find("frameBottom/lock/lockPrice",this.csbRoot),this.changeWeaponLight=cc.find("anchorLeft/panelMenu/changeWeaponLight",this.csbRoot),this.frameBottom=cc.find("frameBottom",this.csbRoot),this.lock=cc.find("frameBottom/lock",this.csbRoot),this.btnHideMenu=cc.find("anchorLeft/panelMenu/btnHideMenu",this.csbRoot),this.notice_daily=cc.find("anchorRight/btnDaily/notice_daily",this.csbRoot),this.btnLock=cc.find("frameBottom/lock/btnLock",this.csbRoot),this.btnAuto.on("click",this.onBtnAuto,this),this.btnSummon.on("click",this.onBtnSummon,this),this.btnFury.on("click",this.onBtnFury,this),this.btnDuanZao.on(cc.Node.EventType.TOUCH_END,this.onBtnForge,this),this.btnDaily.on(cc.Node.EventType.TOUCH_END,this.onBtnDaily,this),this.btnFreeze.on(cc.Node.EventType.TOUCH_END,this.onBtnFreeze,this),this.btnLock.on(cc.Node.EventType.TOUCH_END,this.onBtnLock,this),cc.find("anchorLeft/panelMenu/btnLeave",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnLeave,this),cc.find("anchorLeft/btnShowMenu",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnShowMenu,this),cc.find("anchorLeft/panelMenu/btnChangeWeapon",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnChangeWeapon,this),cc.find("anchorLeft/panelMenu/btnFishBook",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnFishBook,this),cc.find("anchorLeft/panelMenu/btnSetting",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnSetting,this),cc.find("anchorRight/btnShop",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnShop,this),this.btnHideMenu.on(cc.Node.EventType.TOUCH_END,this.onBtnHideMenu,this),this.btnHideMenu.active=!1,p.buffer.fury=p.buffer.bind(p.buffer.Fury,n.ME.userId,this.fntFuryCount),p.buffer.fury.onEnter(),this.fntFuryCount.addChild(p.buffer.fury),p.buffer.lock=p.buffer.bind(p.buffer.Lock,n.ME.userId,this.fntLockCount),p.buffer.lock.onEnter(),this.fntLockCount.addChild(p.buffer.lock),p.buffer.summon=p.buffer.bind(p.buffer.Summon,n.ME.userId,this.fntSummonCount),p.buffer.summon.onEnter(),this.fntSummonCount.addChild(p.buffer.summon),p.buffer.freeze=p.buffer.bind(p.buffer.Freeze,n.ME.userId,this.fntFreezeCount),p.buffer.freeze.onEnter(),this.fntFreezeCount.addChild(p.buffer.freeze);for(var e=1;e<=4;e++)this._playerLeave(e);this._setBtnState(),0==n.ME.showMember&&(this.auto.active=!1,this.btnDaily.active=!1),this.onBtnShowMenu(null),s.evtCenter.emit(o.evts.EVT_SHOW_SUBSIDY),this.btnDuanZao.active=!1,n.model.guide.newbieInGameFinished||s.evtCenter.emit(o.evts.EVT_SHOW_MY_POSITION),this.onEventNoticeRedTip(),s.evtCenter.on(o.evts.EVT_BAGGAGE_UPDATE,this.onEventBaggageUpdate,this),s.evtCenter.on(o.evts.EVT_PLAYER_ENTER,this.onEventPlayerEnter,this),s.evtCenter.on(o.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this),s.evtCenter.on(o.evts.EVT_SUMMON,this.onEventSummon,this),s.evtCenter.on(o.evts.EVT_SET_LOCK_STAT,this.onEventSetLock,this),s.evtCenter.on(o.evts.EVT_SET_FURY_STAT,this.onEventSetFury,this),s.evtCenter.on(o.evts.EVT_SET_FROZEN,this.onEventSetFreeze,this),s.evtCenter.on(o.evts.EVT_REMIND_CHG_WP,this.onEventRemindChangeWeapon,this),s.evtCenter.on(o.evts.EVT_SKILL_RETURN,this.onEventSkillReturn,this),s.evtCenter.on(o.evts.EVT_USE_LOCK_TIP,this.onEventUseLockTip,this),s.evtCenter.on(o.evts.EVT_REMOVE_LOCK_TIP,this.onEventHideLockTip,this),s.evtCenter.on(o.evts.EVT_TIP_LOCK_FISH,this.onEventSetLockFish,this),s.evtCenter.on(o.evts.EVT_REMOVE_TIP_LICK_FISH,this.onEventRemoveLockFish,this),s.evtCenter.on(o.evts.EVT_SHOW_SWEAPON_TIP,this.onEventSuperWeaponTip,this),s.evtCenter.on(o.evts.EVT_GUIDE_THIRTY_WEAPON,this.showGuideTip,this),s.evtCenter.on(o.evts.EVT_UPDATE_RED_TIP,this.onEventNoticeRedTip,this),s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this),s.evtCenter.on(o.evts.EVT_SHOW_AUTO_PARTICLE,this.onEventShowParticle,this),s.evtCenter.on(o.evts.EVT_HIDE_SUPER,this.onEventHideSuper,this)},t.prototype.onDestroy=function(){s.evtCenter.off(o.evts.EVT_BAGGAGE_UPDATE,this.onEventBaggageUpdate,this),s.evtCenter.off(o.evts.EVT_PLAYER_ENTER,this.onEventPlayerEnter,this),s.evtCenter.off(o.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this),s.evtCenter.off(o.evts.EVT_SUMMON,this.onEventSummon,this),s.evtCenter.off(o.evts.EVT_SET_LOCK_STAT,this.onEventSetLock,this),s.evtCenter.off(o.evts.EVT_SET_FURY_STAT,this.onEventSetFury,this),s.evtCenter.off(o.evts.EVT_SET_FROZEN,this.onEventSetFreeze,this),s.evtCenter.off(o.evts.EVT_REMIND_CHG_WP,this.onEventRemindChangeWeapon,this),s.evtCenter.off(o.evts.EVT_SKILL_RETURN,this.onEventSkillReturn,this),s.evtCenter.off(o.evts.EVT_USE_LOCK_TIP,this.onEventUseLockTip,this),s.evtCenter.off(o.evts.EVT_REMOVE_LOCK_TIP,this.onEventHideLockTip,this),s.evtCenter.off(o.evts.EVT_TIP_LOCK_FISH,this.onEventSetLockFish,this),s.evtCenter.off(o.evts.EVT_REMOVE_TIP_LICK_FISH,this.onEventRemoveLockFish,this),s.evtCenter.off(o.evts.EVT_SHOW_SWEAPON_TIP,this.onEventSuperWeaponTip,this),s.evtCenter.off(o.evts.EVT_GUIDE_THIRTY_WEAPON,this.showGuideTip,this),s.evtCenter.off(o.evts.EVT_UPDATE_RED_TIP,this.onEventNoticeRedTip,this),s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this),s.evtCenter.off(o.evts.EVT_SHOW_AUTO_PARTICLE,this.onEventShowParticle,this),s.evtCenter.off(o.evts.EVT_HIDE_SUPER,this.onEventHideSuper,this)},t.prototype.onBackKey=function(){this.onBtnLeave(null)},t.prototype.onEventBaggageUpdate=function(){this._setBtnState()},t.prototype.onEventPlayerEnter=function(e){this._playerEnter(e.seatId)},t.prototype.onEventPlayerLeave=function(e,t){this._playerLeave(t)},t.prototype.onEventSummon=function(e,t){n.model.table.seatId==e&&s.effect.radialProgress(this.btnSummon,"fish_skill_mask",2,.75)},t.prototype.onEventSetLock=function(e,t){e==n.model.table.seatId&&(t?s.effect.radialProgress(this.btnLock,"fish_skill_mask",18):n.model.table.isFury||s.effect.radialProgressClear(this.btnLock))},t.prototype.onEventSetFury=function(e,t){e==n.model.table.seatId&&(t?(s.effect.radialProgress(this.btnLock,"fish_skill_mask",18),s.effect.radialProgress(this.btnFury,"fish_skill_mask",18,.75)):(s.effect.radialProgressClear(this.btnLock),s.effect.radialProgressClear(this.btnFury)))},t.prototype.onEventSetFreeze=function(e,t){e?t==n.model.table.seatId&&s.effect.radialProgress(this.btnFreeze,"fish_skill_mask",10):s.effect.radialProgressClear(this.btnFreeze)},t.prototype.onEventRemindChangeWeapon=function(){this.changeWeaponLight.active=!0,this.changeWeaponLight.runAction(cc.rotateBy(1,360))},t.prototype.onBtnShowMenu=function(e){this.menuVisible||(cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.csbRoot.getComponent(cc.Animation).play("showMenu"),this.menuVisible=!0,this.btnHideMenu.active=!0)},t.prototype.onBtnHideMenu=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1);var t=this.csbRoot.getComponent(cc.Animation);this.menuVisible&&(this.isFirstShowMenu&&(this.isFirstShowMenu=!1,n.model.guide.newbieInGameFinished&&s.evtCenter.emit(o.evts.EVT_SHOW_MY_POSITION)),this.csbRoot.stopAllActions(),t.play("hideMenu"),this.menuVisible=!1,this.btnHideMenu.active=!1)},t.prototype.onEventHideSuper=function(){this.isFirstShowMenu&&this.onBtnHideMenu(null)},t.prototype.onBtnChangeWeapon=function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.changeWeaponLight.stopAllActions(),this.changeWeaponLight.active=!1,this.onBtnHideMenu(null),s.evtCenter.emit(o.evts.EVT_POPUP_CHG_WP);var e={cmd:a.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:n.ME.userId,action:"activeGunCrg",roomId:n.model.table.roomId,tableId:n.model.table.tableId,seatId:n.model.table.seatId}};h.tcp.send(e)},t.prototype.onBtnFishBook=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.onBtnHideMenu(null),s.evtCenter.emit(o.evts.EVT_FISH_BOOK_SHOW)},t.prototype.onBtnSetting=function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.onBtnHideMenu(null),s.evtCenter.emit(o.evts.EVT_POP_SETTING)},t.prototype.onBtnForge=function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1);var e=(new cc.Node).addComponent(f.WeaponForgeWindow);this.node.getParent().addChild(e.node,_.View.POPUP)},t.prototype.onBtnLeave=function(e){cc.log("******************************************************* onBtnLeave"),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),n.model.room_match.isJoinedRmatch?s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u73b0\u5728\u9000\u51fa\u623f\u95f4\u5c06\u6e05\u7a7a\u79ef\u5206\u6392\u540d\u4fe1\u606f, \u786e\u8ba4\u9000\u51fa?",2,this.sendLeaveMsg,this):n.model.subsidy.isBankrupt&&n.model.subsidy.brptState==n.model.subsidy.RUPT_USEUP?(cc.log("****sendLeaveMsg*****"),s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u60a8\u771f\u7684\u60f3\u8981\u79bb\u5f00\u623f\u95f4\u4e48?",2,this.sendLeaveMsg,this)):n.model.subsidy.isBankrupt&&!n.model.subsidy.isCanGetSubsidyNow?s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u60a8\u771f\u7684\u60f3\u73b0\u5728\u79bb\u5f00\u4e48\uff1f\u9a6c\u4e0a\u5c31\u53ef\u4ee5\u9886\u53d6\u8865\u507f\u91d1\u4e86\u54e6",2,this.sendLeaveMsg,this):n.model.subsidy.isBankrupt&&n.model.subsidy.isCanGetSubsidyNow?s.evtCenter.emit(o.evts.EVT_MSG_BOX2,"\u53ef\u4ee5\u9886\u53d6\u8865\u507f\u91d1\u4e86\u54e6\uff0c\u662f\u5426\u518d\u73a9\u4e00\u4f1a?",2,this.sendLeaveMsg,this):(cc.log("****sendLeaveMsg*****"),s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u60a8\u771f\u7684\u60f3\u8981\u79bb\u5f00\u623f\u95f4\u4e48?",2,this.sendLeaveMsg,this))},t.prototype.sendLeaveMsg=function(){var e={cmd:a.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:n.ME.userId,clientId:r.AccountInfo.clientId,action:"leave",roomId:n.model.table.roomId,tableId:n.model.table.tableId,seatId:n.model.table.seatId}};h.tcp.send(e),s.evtCenter.emit(o.evts.EVT_POPUP_LOADING,l.SceneGameToLobby)},t.prototype.showGuideTip=function(){n.model.guide.weaponGuide_30=!0,s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u606d\u559c\u60a8\u6210\u529f\u5347\u7ea7\u81f330\u500d\u70ae\uff0c\u60a8\u5df2\u7ecf\u4e0d\u662f\u65b0\u624b\u4e86\uff0c\u8bf7\u524d\u5f80\u66f4\u9ad8\u500d\u7684\u623f\u95f4\u6355\u9c7c\u5427!",this.sendLeaveMsg,this)},t.prototype.onBtnFury=function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1);var e=n.ME.baggage.getItem(d.Item.FURY);if(n.model.table.isFury)s.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u6280\u80fd\u6b63\u5728\u51b7\u5374\u4e2d",2);else{var t=s.configTable.skill[d.Skill.FURY];e&&e.count>0?this.sendFuryMsg():n.ME.vipLevel<3?s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u9700\u8981VIP3\u624d\u80fd\u8d2d\u4e70\u72c2\u66b4\u6280\u80fd\u54e6\uff01",this.showVipView,this):e&&0!=e.count||(n.ME.diamond<t.cost?s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u5f88\u62b1\u6b49\uff0c\u60a8\u7684\u94bb\u77f3\u4e0d\u8db3"+t.cost+",\u672a\u80fd\u6210\u529f\u8d2d\u4e70\uff0c\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",2,this.showShopView,this):n.model.table.isShowBuyTip?s.evtCenter.emit(o.evts.EVT_MSG_BUY_ITEM,{itemNum:t.cost,btn:2,callback:this.sendFuryMsg,target:this,position:!1,fishKingFlag:!1}):this.sendFuryMsg())}},t.prototype.sendFuryMsg=function(){var e=n.ME.baggage.getItem(d.Item.FURY),t={cmd:a.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:n.ME.userId,action:"skill",skillId:d.Skill.FURY,subAction:"use",roomId:n.model.table.roomId,tableId:n.model.table.tableId,seatId:n.model.table.seatId,useDmd:e&&e.count>0?0:1}};h.tcp.send(t)},t.prototype.onBtnSummon=function(e){if(cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),n.model.table.isFrozen)s.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u8bf7\u51b0\u51bb\u7ed3\u675f\u518d\u4f7f\u7528\u5427",2);else{var t=n.ME.baggage.getItem(d.Item.SUMMON);if(t&&t.count>0)this.sendSummon();else if(!t||0==t.count){var i=s.configTable.skill[d.Skill.SUMMON];if(n.ME.diamond<i.cost)return void s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u5f88\u62b1\u6b49\uff0c\u60a8\u7684\u94bb\u77f3\u4e0d\u8db3"+i.cost+",\u672a\u80fd\u6210\u529f\u8d2d\u4e70\uff0c\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",2,this.showShopView,this);n.model.table.isShowBuyTip?s.evtCenter.emit(o.evts.EVT_MSG_BUY_ITEM,{itemNum:i.cost,btn:2,callback:this.sendSummon,target:this,position:!1,fishKingFlag:!1}):this.sendSummon()}}},t.prototype.sendSummon=function(){var e=n.ME.baggage.getItem(d.Item.SUMMON),t={cmd:a.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:n.ME.userId,action:"skill",skillId:5103,roomId:n.model.table.roomId,tableId:n.model.table.tableId,seatId:n.model.table.seatId,useDmd:e&&e.count>0?0:1}};h.tcp.send(t)},t.prototype.onBtnAuto=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1);var t=c.AssetsManager.getRes("img/atlas/game_common");n.ME.isMember?n.model.table.isAuto?(n.model.table.isAuto=!1,this.btnAuto.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_skill_auto_normal"),s.evtCenter.emit(o.evts.EVT_SET_AUTO_STAT,!1),s.evtCenter.emit(o.evts.EVT_SHOW_AUTO_PARTICLE,!1)):(n.model.table.isAuto=!0,this.btnAuto.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_skill_auto_pressed"),s.evtCenter.emit(o.evts.EVT_SET_AUTO_STAT,!0),s.evtCenter.emit(o.evts.EVT_SHOW_AUTO_PARTICLE,!0)):s.evtCenter.emit(o.evts.EVT_POPUP_NOBLE_GIFT)},t.prototype.onBtnShop=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),s.evtCenter.emit(o.evts.EVT_POPUP_SHOP_WINDOW,n.model.shop.SHOP_GOLD)},t.prototype.onBtnDaily=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),n.model.dailytask.isLobby=!1,n.model.activity.requestActivityData(4,!0)},t.prototype.onBtnFreeze=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1);var t=n.ME.baggage.getItem(d.Item.FREEZE);if(t&&t.count>0)this.sendFreezeMsg();else if(!t||0==t.count){var i=s.configTable.skill[d.Skill.FREEZE];if(n.ME.diamond<i.cost)return void s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u5f88\u62b1\u6b49\uff0c\u60a8\u7684\u94bb\u77f3\u4e0d\u8db3"+i.cost+",\u672a\u80fd\u6210\u529f\u8d2d\u4e70\uff0c\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",2,this.showShopView,this);n.model.table.isShowBuyTip?s.evtCenter.emit(o.evts.EVT_MSG_BUY_ITEM,{itemNum:i.cost,btn:2,callback:this.sendFreezeMsg,target:this,position:!1,fishKingFlag:!1}):this.sendFreezeMsg()}},t.prototype.sendFreezeMsg=function(){var e=n.ME.baggage.getItem(d.Item.FREEZE),t={cmd:a.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:n.ME.userId,action:"skill",skillId:d.Skill.FREEZE,roomId:n.model.table.roomId,tableId:n.model.table.tableId,seatId:n.model.table.seatId,useDmd:e&&e.count>0?0:1}};h.tcp.send(t)},t.prototype.onBtnLock=function(e){if(cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),n.model.table.isLock)s.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u6280\u80fd\u6b63\u5728\u51b7\u5374\u4e2d",2);else{var t=n.ME.baggage.getItem(d.Item.LOCK);if(t&&t.count>0)this.sendLockMsg();else if(!t||0==t.count){var i=s.configTable.skill[d.Skill.LOCK];if(n.ME.diamond<i.cost)return void s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u5f88\u62b1\u6b49\uff0c\u60a8\u7684\u94bb\u77f3\u4e0d\u8db3"+i.cost+",\u672a\u80fd\u6210\u529f\u8d2d\u4e70\uff0c\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",2,this.showShopView,this);n.model.table.isShowBuyTip?s.evtCenter.emit(o.evts.EVT_MSG_BUY_ITEM,{itemNum:i.cost,btn:2,callback:this.sendLockMsg,target:this,position:!1,fishKingFlag:!1}):this.sendLockMsg()}}},t.prototype.sendLockMsg=function(){var e=n.ME.baggage.getItem(d.Item.LOCK),t={cmd:a.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:n.ME.userId,action:"skill",skillId:d.Skill.LOCK,subAction:"use",roomId:n.model.table.roomId,tableId:n.model.table.tableId,seatId:n.model.table.seatId,useDmd:e&&e.count>0?0:1}};h.tcp.send(t)},t.prototype._playerEnter=function(e){var t=s.utils.getRelativeSeat(e);cc.find("wait/wait"+t,this.csbRoot).active=!1},t.prototype._playerLeave=function(e){var t=s.utils.getRelativeSeat(e),i=cc.find("wait/wait"+t,this.csbRoot);i.active=!0,i.stopAllActions(),i.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(25/30,102),cc.fadeTo(25/30,255))))},t.prototype._setBtnState=function(){var e=c.AssetsManager.getRes("img/atlas/game_common"),t=c.AssetsManager.getRes("img/atlas/common");n.ME.autoFireUnlock||(this.btnAuto.getComponent(cc.Button).enabled=!1,this.btnAuto.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_skill_auto_disabled"));var i=n.ME.baggage.getItem(d.Item.FURY),s=n.ME.baggage.getItem(d.Item.LOCK),o=n.ME.baggage.getItem(d.Item.SUMMON),a=n.ME.baggage.getItem(d.Item.FREEZE);n.ME.vipLevel>=5?this.btnFury.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_game_ui_fury2"):this.btnFury.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_game_ui_fury1"),i.count>0?(this.fntFuryCount.active=!0,this.furyPrice.active=!1):(this.fntFuryCount.active=!1,this.furyPrice.active=!0),o.count>0?(this.fntSummonCount.active=!0,this.summonPrice.active=!1):(this.fntSummonCount.active=!1,this.summonPrice.active=!0),a.count>0?(this.fntFreezeCount.active=!0,this.freezePrice.active=!1):(this.fntFreezeCount.active=!1,this.freezePrice.active=!0),s.count>0?(this.fntLockCount.active=!0,this.lockPrice.active=!1):(this.fntLockCount.active=!1,this.lockPrice.active=!0)},t.prototype.showVipView=function(){s.evtCenter.emit(o.evts.EVT_POPUP_VIP_WINDOW,"")},t.prototype.showShopView=function(){s.evtCenter.emit(o.evts.EVT_POPUP_SHOP_WINDOW,n.model.shop.SHOP_DIAMOND)},t.prototype.onEventSkillReturn=function(){},t.prototype.onEventUseLockTip=function(){if(!n.model.table.isHaveUesedLock){cc.log("************************************** onEventUseLockTip");var e=this.lock.getPosition(),t=cc.v2(e.x,e.y+200);s.effect.showLockTips(this.frameBottom,"fish_lock_tip",t),this.lock_frame.active=!0,this.lock_frame.runAction(cc.sequence(cc.repeat(cc.sequence(cc.fadeTo(.4,0),cc.fadeTo(.4,255)),15),cc.fadeOut(.4)))}},t.prototype.onEventHideLockTip=function(){this.lock_frame.active=!1,this.lock_frame.stopAllActions();var e=this.csbRoot.getChildByName("use_lock_tip");e&&e.removeFromParent(!0)},t.prototype.onEventSetLockFish=function(){s.evtCenter.emit(o.evts.EVT_REMOVE_MSG_LABEL,this);var e=s.utils.getSeatPosition(s.utils.getRelativeSeat(n.model.table.seatId)),t=cc.v2(e.x,e.y+200);if(!this.csbRoot.getChildByName("node_lock_tip")){var i=new cc.Node;this.csbRoot.addChild(i,0,"node_lock_tip"),i.setPosition(t.x-200,t.y);var a=c.AssetsManager.getRes("img/atlas/scale9_8888").getSpriteFrame("fish_prompt_frame1");a.insetLeft=5,a.insetRight=14,a.insetTop=46,a.insetBottom=6;var r=new cc.Node;r.addComponent(cc.Sprite).spriteFrame=a,i.addChild(r);var h=s.utils.createSprite("fish_text10","lottery");i.addChild(h);var l=h.getContentSize();r.setContentSize(cc.size(l.width+80,34)),i.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,t),cc.scaleTo(.3,1),cc.fadeIn(.3)),cc.callFunc(function(){})))}},t.prototype.onEventRemoveLockFish=function(){var e=this.csbRoot.getChildByName("node_lock_tip");e&&this.csbRoot.removeChild(e,!0)},t.prototype.onEventSuperWeaponTip=function(){var e=s.utils.getSeatPosition(s.utils.getRelativeSeat(n.model.table.seatId)),t=cc.v2(e.x,e.y+200);s.effect.publicTipsShow(this.csbRoot,"fish_text19",t)},t.prototype.onEventNoticeRedTip=function(){var e=n.model.notice.noticeTip;this.notice_daily.active=e.actGup||e.actDailyTk||e.inviteFriend||e.act_Charge},t.prototype.showParticle=function(e){if(!e.wpupParticle){var t=new cc.Node;e.addChild(t),e.wpupParticle=t;var i=cc.instantiate(c.AssetsManager.getRes("particle/wpup_star")).getComponent(cc.ParticleSystem);i.node.setScale(.5),i.node.setPosition(0,72),i.positionType=cc.ParticleSystem.PositionType.FREE,t.addChild(i.node),i.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.45,cc.v2(70,72)),cc.moveTo(.45,cc.v2(70,5)),cc.moveTo(.45,cc.v2(3,5)),cc.moveTo(.45,cc.v2(3,72)))));var n=cc.instantiate(c.AssetsManager.getRes("particle/wpup_star")).getComponent(cc.ParticleSystem);n.node.setScale(.5),n.node.setPosition(70,5),n.positionType=cc.ParticleSystem.PositionType.FREE,t.addChild(n.node),n.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.45,cc.v2(3,5)),cc.moveTo(.45,cc.v2(3,72)),cc.moveTo(.45,cc.v2(70,72)),cc.moveTo(.45,cc.v2(70,5)))))}},t.prototype.hideParticle=function(e){e.wpupParticle&&(e.removeChild(e.wpupParticle),e.wpupParticle=null)},t.prototype.onEventShowParticle=function(e){e?this.showParticle(this.frameAuto):this.hideParticle(this.frameAuto)},t}(cc.Component);i.GameUI=u,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","../../scene/loading/fish_scene_loading_game_to_lobby":"fish_scene_loading_game_to_lobby","../fish_view":"fish_view","../weapon_forge/fish_weapon_forge_window":"fish_weapon_forge_window"}],fish_game_view:[function(e,t,i){"use strict";cc._RF.push(t,"b644cE4LVFBt5RqGGRQANXo","fish_game_view"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("./fish_fish_manager"),o=e("./fish_bullet_manager"),c=e("./fish_laser_manager"),a=e("./fish_piton_manager"),r=e("../../define/fish_consts"),h=e("../../model/fish_model"),l=e("../../define/fish_event_types"),d=e("../../cpp/fish_game_view/cpp_fish_game_view"),_=function(e){function t(){var t=e.call(this)||this;return t._view=new d.cppView,t.fishDummyList=[],t.sortedCount=0,t.countFish=0,t}return __extends(t,e),t.prototype.onLoad=function(){h.model.table.seatId>2&&(this.node.angle=-180,this.node.setPosition(cc.winSize.width,cc.winSize.height)),this.waveAction=this.getComponent(cc.Animation),this.waveAction.play("showWave").wrapMode=cc.WrapMode.Loop,this._view.onBulletHitFish=this.onBulletHitFish.bind(this),this._view.onBulletHitPiton=this.onBulletHitPiton.bind(this),this._view.onFishTurn=this.onFishTurn.bind(this),this._view.onFishOutScreen=this.onFishOutScreen.bind(this),this._view.onFishExit=this.onFishExit.bind(this),this._view.onLaserUpdate=this.onLaserUpdate.bind(this),this._view.onLaserHitFish=this.onLaserHitFish.bind(this),this._view.onPitonHitBattery=this.onPitonHitBattery.bind(this),this.node.addChild(this._view),this.fishManager=(new cc.Node).addComponent(s.FishManager),this.node.addChild(this.fishManager.node),this.bulletManager=(new cc.Node).addComponent(o.BulletManager),this.node.addChild(this.bulletManager.node),this.laserManager=(new cc.Node).addComponent(c.LaserManager),this.node.addChild(this.laserManager.node),this.pitonManager=(new cc.Node).addComponent(a.PitonManager),this.node.addChild(this.pitonManager.node),n.evtCenter.on(l.evts.EVT_FISH_EXIT,this.fishDie,this),n.evtCenter.on(l.evts.EVT_LASER_END,this.laserEnd,this),n.evtCenter.on(l.evts.EVT_FIRE_FAILED,this.onEventFireFailed,this),n.evtCenter.on(l.evts.EVT_BULLET_HIT_FISH,this.onEventBulletHitFish,this),n.evtCenter.on(l.evts.EVT_BULLET_HIT_PITON,this.onEventBulletHitPiton,this),n.evtCenter.on(l.evts.EVT_PITON_HIT,this.onEventPointHit,this),n.evtCenter.on(l.evts.EVT_CATCH_SUCCESS,this.onEventCatchSuccess,this)},t.prototype.onDestroy=function(){this._view.release(),delete this._view,this._view=null,n.evtCenter.off(l.evts.EVT_FISH_EXIT,this.fishDie,this),n.evtCenter.off(l.evts.EVT_LASER_END,this.laserEnd,this),n.evtCenter.off(l.evts.EVT_FIRE_FAILED,this.onEventFireFailed,this),n.evtCenter.off(l.evts.EVT_BULLET_HIT_FISH,this.onEventBulletHitFish,this),n.evtCenter.off(l.evts.EVT_BULLET_HIT_PITON,this.onEventBulletHitPiton,this),n.evtCenter.off(l.evts.EVT_PITON_HIT,this.onEventPointHit,this),n.evtCenter.off(l.evts.EVT_CATCH_SUCCESS,this.onEventCatchSuccess,this)},t.prototype.setServerTime=function(e,t){this._view.setServerTime(e,t||0)},t.prototype.setMySeat=function(e){this._view.setMySeat(e)},t.prototype.getEffectLayer=function(){return this._view.getEffectLayer()},t.prototype.playerFire=function(e,t,i,s,o){var c;"number"!=typeof o?(o=n.utils.convertPt(o),c=this._view.playerFire(e,t,i,o)):c=this._view.playerFire(e,t,i,cc.Vec2.ZERO,o),c&&this.bulletManager.playerFire(e,t,i,s,c)},t.prototype.getBulletPos=function(e,t){var i=this._view.getBulletPos(e,t);return n.utils.convertPt(i)},t.prototype.bulletDie=function(e,t){this.bulletManager.bulletDie(e,t,!0),this._view.bulletDie(e,t)},t.prototype.fishEnter=function(e,t,i,n,s){var o=this._view.fishEnter(e,t,i,n,s);return o&&this.fishManager.fishEnter(e,t,i,s,o),o},t.prototype.fishDummyEnter=function(e,t,i,n,s){var o=this.fishManager.fishDummyEnter(e,t,i,n,s);o&&this.fishDummyList.push(o)},t.prototype.fishEnterBatch=function(){var e=[],t=0;if(this.sortedCount<this.fishDummyList.length&&(this.fishDummyList.sort(function(e,t){return e.enterTime<t.enterTime?-1:1}),this.sortedCount=this.fishDummyList.length),this.sortedCount>0){for(;t<this.sortedCount&&t++<20&&this.fishDummyList[0].toBeShow();){var i=this.fishDummyList.shift();if(this.fishEnter(i.fishResId,i.fishId,i.pathId,i.enterTime,i.frozenTime)){var n={};n.fishId=i.fishId,n.fishResId=i.fishResId,e.push(n)}else cc.log("fishEnter fail.")}this.sortedCount=this.fishDummyList.length}return e},t.prototype.getFishPos=function(e){var t=this._view.getFishPos(e);return-1==t.x&&-1==t.y||(t=n.utils.convertPt(t)),t},t.prototype.fishDie=function(e,t,i,n){this.fishManager.fishDie(e,t,i,n),this._view.fishDie(e)},t.prototype.fishDummyDieByFishResId=function(e){for(var t=this.fishDummyList.length-1;t>=0;t--){var i=this.fishDummyList[t];i.fishResId==e&&(this.fishDummyList.splice(t,1),this.fishManager.fishDie(i.fishId,r.DieReason.EXIT,h.model.table.seatId,[]),this._view.fishDie(i.fishId))}},t.prototype.getFishAtPosition=function(e){return this._view.getFishAtPosition(n.utils.convertPt(e))},t.prototype.getFishesInRange=function(e,t){return this._view.getFishesInRange(e,t)},t.prototype.getNormalFishesInRange=function(e,t){return this._view.getNormalFishesInRange(e,t)},t.prototype.getNearbyFishes=function(e,t){return this._view.getNearbyFishes(e,t)},t.prototype.getRandomFishes=function(e,t){return this._view.getRandomFishes(e,t)},t.prototype.setFishLockMark=function(e,t){this.fishManager.setLockMark(e,t),0==e&&n.evtCenter.emit(l.evts.EVT_TIP_LOCK_FISH,this)},t.prototype.clearFishLockMark=function(){this.fishManager.clearLockMark(),n.evtCenter.emit(l.evts.EVT_REMOVE_TIP_LICK_FISH,this)},t.prototype.setFishRmatchMark=function(){this.fishManager.setRmatchTargetMark()},t.prototype.clearFishRmatchMark=function(){this.fishManager.clearMatchTargetMark()},t.prototype.freeze=function(e){this._view.freeze(e),this.fishManager.freeze(e);for(var t=0;t<this.fishDummyList.length;t++){this.fishDummyList[t].freeze(e)}},t.prototype.unfreeze=function(e,t){this._view.unfreeze(e,t),this.fishManager.unfreeze(e,t);for(var i=0;i<this.fishDummyList.length;i++){this.fishDummyList[i].unfreeze(e,t)}},t.prototype.laserBegin=function(e,t,i){var s;switch(i=n.utils.convertPt(i),t){case 2201:s=8;break;case 2202:s=5;break;case 2203:s=4;break;case 2204:s=3}var o=this._view.laserBegin(e,t,s,i),c=this._view.getLaserPath(e),a=this._view.getLaserDists(e),r=this._view.getLaserAngles(e);this.laserManager.laserBegin(e,t,s,c,a,r,o)},t.prototype.laserEnd=function(e){this._view.laserEnd(e),this.laserManager.laserEnd(e)},t.prototype.castIcePiton=function(e,t){var i=this._view.castIcePiton(e,t);i&&this.pitonManager.castIcePiton(e,i)},t.prototype.getPitonPos=function(e){var t=this._view.getPitonPos(e);return-1==t.x&&-1==t.y||(t=n.utils.convertPt(t)),t},t.prototype.pitonDie=function(e){this._view.pitonDie(e),this.pitonManager.pitonDie(e)},t.prototype.onBulletHitFish=function(e,t,i){n.evtCenter.emit(l.evts.EVT_BULLET_HIT_FISH,e,t,i)},t.prototype.onBulletHitPiton=function(e,t,i){n.evtCenter.emit(l.evts.EVT_BULLET_HIT_PITON,e,t,i)},t.prototype.onFishTurn=function(e){n.evtCenter.emit(l.evts.EVT_FISH_TURN,e)},t.prototype.onFishOutScreen=function(e){n.evtCenter.emit(l.evts.EVT_FISH_OUT_SCREEN,e)},t.prototype.onFishExit=function(e){n.evtCenter.emit(l.evts.EVT_FISH_EXIT,e,r.DieReason.EXIT)},t.prototype.onLaserUpdate=function(e,t,i,s,o){n.evtCenter.emit(l.evts.EVT_LASER_UPDATE,e,t,i,s,o)},t.prototype.onLaserHitFish=function(e,t,i,s){n.evtCenter.emit(l.evts.EVT_LASER_HIT_FISH,e,t,i,s)},t.prototype.onPitonHitBattery=function(e,t){n.evtCenter.emit(l.evts.EVT_PITON_HIT,e,t)},t.prototype.onEventFireFailed=function(e,t,i){this.bulletManager.bulletDie(e,t,!1),this.bulletDie(e,t)},t.prototype.onEventBulletHitFish=function(e,t,i){this.bulletManager.bulletDie(e,t,!0),this.bulletDie(e,t)},t.prototype.onEventBulletHitPiton=function(e,t,i){this.bulletManager.bulletDie(e,t,!1),this.bulletDie(e,t)},t.prototype.onEventPointHit=function(e,t){this.pitonDie(t),this.pitonManager.pitonDie(t)},t.prototype.onEventCatchSuccess=function(e,t,i,n){this.fishManager.fishDie(i,r.DieReason.CATCH,e,n),this._view.fishDie(i)},t}(cc.Component);i.GameView=_,cc._RF.pop()},{"../../cpp/fish_game_view/cpp_fish_game_view":"cpp_fish_game_view","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_bullet_manager":"fish_bullet_manager","./fish_fish_manager":"fish_fish_manager","./fish_laser_manager":"fish_laser_manager","./fish_piton_manager":"fish_piton_manager"}],fish_gifts_cell:[function(e,t,i){"use strict";cc._RF.push(t,"973ac/aMtlAHrAjpTAj9nvt","fish_gifts_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../model/fish_model"),c=e("../../scene/fish_scene_login"),a=e("../../define/fish_msg_types"),r=e("../../logic/fish_tcp"),h=function(e){function t(){var t=e.call(this)||this;return t.enableTouch=!0,t.csbNode=null,t.fntGunLevel=null,t.btnReceive=null,t.btn_node=null,t.received_mark=null,t.weaponID=2101,t.label_receive=null,t.reward_icon=null,t.frame=null,t.reward_num=null,t.cellNum=6,t.cell_width=170,t.cell_height=245,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/level_gifts_cell")),t.addChild(t.csbNode),t.fntGunLevel=cc.find("node_label/fntGunLevel",t.csbNode),t.btnReceive=cc.find("btn_node/btnReceive",t.csbNode),t.btn_node=cc.find("btn_node",t.csbNode),t.received_mark=cc.find("received_mark",t.csbNode),t.label_receive=cc.find("btn_node/label_receive",t.csbNode),t.reward_icon=cc.find("reward/reward_icon",t.csbNode),t.reward_num=cc.find("reward/reward_num",t.csbNode),t.frame=cc.find("reward/frame",t.csbNode),t.btnReceive.on(cc.Node.EventType.TOUCH_END,t.onBtnReceive,t),t}return __extends(t,e),t.prototype.setCellData=function(e,t){var i=n.AssetsManager.getRes("img/atlas/common"),c=n.AssetsManager.getRes("img/atlas/scale9_8888"),a=n.AssetsManager.getRes("img/atlas/activity");this.weaponID=t;for(var r=0,h=s.configTable.weapon[t].multiple,l=0;l<this.cellNum;l++)if(s.configTable.weaponup_reward[l].weapon_lvl==t){r=s.configTable.weaponup_reward[l].lvlup_reward;break}var d=s.configTable.gift[r];this.fntGunLevel.getComponent(cc.Label).string=h,102==d.Gift1?(this.reward_icon.setScale(1),this.frame.active=!1):(this.frame.active=!0,this.reward_icon.setScale(.76)),this.reward_icon.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame(d.Gift1_icon.split(".")[0]),this.reward_num.getComponent(cc.Label).string="x"+d.Gift1_Number,o.model.activity.isWeaponInRewarded(t)?(this.btn_node.active=!1,this.received_mark.active=!0):o.model.lobby.gunLevel>=t?(this.btn_node.active=!0,this.received_mark.active=!1,this.btnReceive.getComponent(cc.Button).enabled=!0,this.enableTouch=!0,this.label_receive.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_guizulibao_20"),this.btnReceive.getComponent(cc.Button).normalSprite=c.getSpriteFrame("fish_button_yellow")):(this.btn_node.active=!0,this.received_mark.active=!1,this.btnReceive.getComponent(cc.Button).enabled=!1,this.enableTouch=!1,this.label_receive.getComponent(cc.Sprite).spriteFrame=a.getSpriteFrame("fish_activity_notget"),this.btnReceive.getComponent(cc.Button).normalSprite=c.getSpriteFrame("fish_button_disabled"))},t.prototype.onBtnReceive=function(e){if(o.model.activity.selWeaponLv=this.weaponID,cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),o.model.dailytask.isLobby){var t={cmd:a.msgs.MSG_FISH_ACTIVITY,params:{gameId:28,userId:parseInt(o.ME.userId),action:"reward",activityId:"GunUp",rewardParams:{gLv:parseInt(this.weaponID)},clientId:c.AccountInfo.clientId}};r.tcp.send(t)}else{var i={cmd:a.msgs.CMD_TABLE_CALL,params:{action:"activity_reward",gameId:28,userId:parseInt(o.ME.userId),activityId:"GunUp",rewardParams:{gLv:parseInt(this.weaponID)},clientId:c.AccountInfo.clientId,roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId}};r.tcp.send(i)}},t}(cc.Node);i.LevelGiftsCell=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_invite_friends_activity:[function(e,t,i){"use strict";cc._RF.push(t,"483c7Pu3QpIZ7R8TpXQXTRV","fish_invite_friends_activity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../define/fish_msg_types"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=e("../../../xmen_interface"),d=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.btnInviteFriends=null,t.invite_notice=null,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/invite_friends_activity")),t.btnInviteFriends=cc.find("archor/btnInviteFriends",t.csbNode),t.invite_notice=cc.find("archor/btnInviteFriends/invite_notice",t.csbNode),t.btnInviteFriends.on(cc.Node.EventType.TOUCH_END,t.onBtnInviteFriends,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode),this.updateNotice(),0==s.ME.showMember&&(this.btnInviteFriends.active=!1),o.evtCenter.on(c.evts.EVT_UPDATE_RED_TIP,this.updateNotice,this)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_UPDATE_RED_TIP,this.updateNotice,this)},t.prototype.onBtnInviteFriends=function(e){o.evtCenter.emit(c.evts.EVT_CLOSE_ACTIVITY),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t={cmd:a.msgs.CMD_INVITE_FRIENDS,params:{action:"inviteInfo",gameId:28,userId:s.ME.userId,clientId:r.AccountInfo.clientId}};h.tcp.send(t)},t.prototype.updateNotice=function(){var e=l.xmen.SystemInfo.getConfig().main_channel_default;if("ditui"==e||"cpa"==e||"xmen"==e||"midanji"==e||"360"==e||"maimaicy"==e||"official"==e||"weile"==e||cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.OS_WINDOWS){var t=s.model.notice.noticeTip;this.invite_notice.active=t.dailyInvite}},t}(cc.Component);i.InviteFriendsActivity=d,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_invite_friends_diamond_message:[function(e,t,i){"use strict";cc._RF.push(t,"9846f50D/5FOZwEcr8dPKjo","fish_invite_friends_diamond_message"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../../xmen_interface"),o=e("../../scene/fish_scene"),c=e("../../model/fish_model"),a=e("../../fish"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbRoot=null,this.btnInvite=null,this.inviteCount=null,this._friendCount=e},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/invite_friends_message")),a.fish.adapterScreen(this.csbRoot),this.btnInvite=cc.find("spBG/btnInvite",this.csbRoot),this.inviteCount=cc.find("spBG/inviteCount",this.csbRoot),this.btnInvite.on(cc.Node.EventType.TOUCH_END,this.onBtnInviteWeChat,this),cc.find("spBG/btnClose",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this),this.node.addChild(this.csbRoot);var e=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),e.play("animation0"),this.inviteCount.getComponent(cc.Label).string=this._friendCount.toString();var t=s.xmen.SystemInfo.getConfig(),i=t.main_channel_default,o=t.sub_channel_default;"qq"==i&&"hpby"==o||"xmen"==i||"ditui"==i||"cpa"==i||"midanji"==i||"360"==i||"maimaicy"==i||"official"==i||"weile"==i||cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.OS_WINDOWS||cc.sys.os==cc.sys.OS_OSX?this.btnInvite.active=!0:this.btnInvite.active=!1},t.prototype.onDestroy=function(){},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=this.csbRoot.getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(!0),this.destroy()}.bind(this),this),this.csbRoot.stopAllActions(),t.play("animation1")},t.prototype.onBtnInviteWeChat=function(e){var t=o.configTable.languageKey.string_weixinlianjie1.string_zhcn.split("|")[Math.floor(2*Math.random()+0)],i=o.configTable.languageKey.string_weixinlianjie2.string_zhcn.split("|")[Math.floor(2*Math.random()+0)],n="http://share.mango.x-men.co/fish/singleFish.html";cc.sys.os==cc.sys.OS_ANDROID?n="http://share.mango.x-men.co/fish/singleFish.html":cc.sys.os==cc.sys.OS_IOS&&(n="http://share.mango.x-men.co/fish/singleFish.html"),s.xmen.SDKInterfaceManager.sdkShare({cmd:"share",title:t,content:i,url:n+"?id="+c.ME.userId,type:"0",shareType:"url"},"weixin"),this.node.removeFromParent(!0)},t}(cc.Component);i.InviteFriendsDiamondMessage=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../../xmen_interface":"xmen_interface","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_invite_friends_reward_button:[function(e,t,i){"use strict";cc._RF.push(t,"4aa24Fqc05PYYNN9WcA5LdV","fish_invite_friends_reward_button"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../scene/fish_scene_login"),o=e("../../define/fish_msg_types"),c=e("../../logic/fish_tcp"),a=e("../../scene/fish_scene"),r=e("../../define/fish_event_types"),h=e("../../../assets_manager"),l=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.fish_zhujiemian_14_1=null,t.rewardNum=null,t.moreNum=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(h.AssetsManager.getRes("prefabs/yellow_button")),this.node.addChild(this.csbRoot),this.fish_zhujiemian_14_1=cc.find("fish_zhujiemian_14_1",this.csbRoot),this.rewardNum=cc.find("fish_zhujiemian_14_1/rewardNum",this.csbRoot),this.moreNum=cc.find("fish_zhujiemian_14_1/moreNum",this.csbRoot),cc.find("Button_1",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnRewardByInvite,this),this.setSource(),a.evtCenter.on(r.evts.EVT_SET_INFO_INVITE_FRIENDS,this.onEventSetSource,this)},t.prototype.onDestroy=function(){a.evtCenter.off(r.evts.EVT_SET_INFO_INVITE_FRIENDS,this.onEventSetSource,this)},t.prototype.setSource=function(){n.model.lobby.inviteFriendsInfo.rewardTimes>9?(this.rewardNum.getComponent(cc.Label).string="9",this.moreNum.active=!0):0==n.model.lobby.inviteFriendsInfo.rewardTimes?(this.rewardNum.active=!1,this.fish_zhujiemian_14_1.active=!1):this.rewardNum.getComponent(cc.Label).string=n.model.lobby.inviteFriendsInfo.rewardTimes},t.prototype.onEventSetSource=function(){this.setSource()},t.prototype.onBtnRewardByInvite=function(e){0==n.model.lobby.inviteFriendsInfo.rewardTimes?a.evtCenter.emit(r.evts.EVT_POPUP_INVITEFRIENDS_DIAMOND,n.model.lobby.inviteFriendsInfo.invitees.length):this.onBtnCallBack()},t.prototype.onBtnCallBack=function(){var e={params:{action:"inviteReward",gameId:28,userId:n.ME.userId,clientId:s.AccountInfo.clientId,inviteInfoType:0,inviterId:0}};0==n.model.table.roomId?e.cmd=o.msgs.CMD_INVITE_FRIENDS:(e.cmd=o.msgs.CMD_INVITE_FRIENDS_IN_TABLE,e.params.roomId=n.model.table.roomId,e.params.tableId=n.model.table.tableId,e.params.seatId=n.model.table.seatId),c.tcp.send(e)},t}(cc.Component);i.InviteFriendsRewardButton=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_invite_friends:[function(e,t,i){"use strict";cc._RF.push(t,"9b98bunHi9BGaE++08iNlgv","fish_invite_friends"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../../xmen_interface"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../model/fish_model"),r=e("./fish_invite_friends_reward_button"),h=e("../../logic/fish_tcp"),l=e("../../scene/fish_scene_login"),d=e("../../define/fish_msg_types"),_=e("../../fish"),f=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.mySelfUserId=null,t.newUserNode=null,t.oldUserText=null,t.editText=null,t._editBox=null,t.btnReceiveGift=null,t.bottominvite=null,t.invite_notice=null,t.label_share_tip=null,t.node_channel=null,t.btnWeChat=null,t.btnRewardByInviteNode=null,t.lingqufuli_1=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/invite_friends")),_.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.mySelfUserId=cc.find("anchor/top/mySelfUserId",this.csbRoot),this.newUserNode=cc.find("anchor1/bottominvite/newUserNode",this.csbRoot),this.oldUserText=cc.find("anchor1/bottominvite/oldUserText",this.csbRoot),this.editText=cc.find("anchor1/bottominvite/editText",this.csbRoot),this.btnReceiveGift=cc.find("anchor1/bottominvite/btnReceiveGift",this.csbRoot),this.bottominvite=cc.find("anchor1/bottominvite",this.csbRoot),this.label_share_tip=cc.find("anchor/top/node_channel/label_share_tip",this.csbRoot),this.node_channel=cc.find("anchor/top/node_channel",this.csbRoot),this.btnWeChat=cc.find("anchor/top/btnWeChat",this.csbRoot),this.btnRewardByInviteNode=cc.find("anchor/top/btnRewardByInviteNode",this.csbRoot),this.lingqufuli_1=cc.find("anchor1/bottominvite/btnReceiveGift/lingqufuli_1",this.csbRoot),this.btnWeChat.on(cc.Node.EventType.TOUCH_END,this.onBtnWeChat,this),this.btnWeChat.on(cc.Node.EventType.TOUCH_START,this.onBtnWeChat,this),this.btnWeChat.on(cc.Node.EventType.TOUCH_MOVE,this.onBtnWeChat,this),this.btnWeChat.on(cc.Node.EventType.TOUCH_CANCEL,this.onBtnWeChat,this),this.btnReceiveGift.on("click",this.onBtnReceiveGift,this),this.btnReceiveGift.getComponent(cc.Button).enableAutoGrayEffect=!0,cc.find("anchor/top/btnClose",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this),cc.find("anchor1/bottominvite/newUserNode/btnPaste",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnPaste,this),cc.find("anchor1/bottominvite/newUserNode/Image_3",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onEditBgClick,this),cc.find("mask1",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onCloseNewUserReward,this),s.xmen.EventDispatcher.on(s.xmen.EventType.RESPONSE_DATA_FROM_CLIPBOARD,this.onEventClipboard,this);var e=this.csbRoot.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("animation1").wrapMode=cc.WrapMode.Loop}.bind(this),this),e.play("animation0"),this.setInviteFriendsSource();var t=s.xmen.SystemInfo.getConfig(),i=t.main_channel_default,a=t.sub_channel_default;"qq"==i&&"hpby"==a||"xmen"==i||"ditui"==i||"cpa"==i||"midanji"==i||"360"==i||"maimaicy"==i||"official"==i||"weile"==i&&cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.OS_WINDOWS?(this.btnWeChat.active=!0,this.node_channel.active=!0):(this.btnWeChat.active=!1,this.node_channel.active=!1),"weile"==i&&cc.sys.os==cc.sys.OS_ANDROID?this.label_share_tip.getComponent(cc.Label).string="\u5b8c\u6210\u6bcf\u65e5\u4efb\u52a1\u83b7\u5f97":"xinyue"==a&&cc.sys.os==cc.sys.OS_IOS&&(this.label_share_tip.getComponent(cc.Label).string="\u5b8c\u6210\u6bcf\u65e5\u4efb\u52a1\u83b7\u5f97");var h=(new cc.Node).addComponent(r.InviteFriendsRewardButton);h.node.setScale(.7),this.btnRewardByInviteNode.addChild(h.node),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this),o.evtCenter.on(c.evts.EVT_RELOAD_NEW_REWARD,this.setInviteFriendsSource,this),o.evtCenter.on(c.evts.EVT_CLOSE_INVITE_FRIENDS,this.onCloseInviteFriends,this)},t.prototype.onDestroy=function(){s.xmen.EventDispatcher.off(s.xmen.EventType.RESPONSE_DATA_FROM_CLIPBOARD,this.onEventClipboard,this),o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this),o.evtCenter.off(c.evts.EVT_RELOAD_NEW_REWARD,this.setInviteFriendsSource,this),o.evtCenter.off(c.evts.EVT_CLOSE_INVITE_FRIENDS,this.onCloseInviteFriends,this)},t.prototype.onBackKey=function(){this.onBtnClose(null)},t.prototype.onCloseInviteFriends=function(){this.onBackKey()},t.prototype.onEventClipboard=function(e){!isNaN(e)&&e.length<12&&(this._editBox.string=e)},t.prototype.setInviteFriendsSource=function(){this.mySelfUserId.getComponent(cc.Label).string=a.ME.userId.toString();var e=n.AssetsManager.getRes("img/atlas/invite_friends"),t=o.configTable.weapon[a.model.lobby.gunLevel].multiple;t>=100||1==a.model.lobby.inviteFriendsInfo.gotInviteeReward?(this.newUserNode.active=!1,this.oldUserText.active=!0,this.oldUserText.getComponent(cc.Sprite).spriteFrame=t>=100?e.getSpriteFrame("fish_wenzishuoming"):e.getSpriteFrame("fish_wenzishuoming_2"),this.btnReceiveGift.getComponent(cc.Button).enabled=!1,this.btnReceiveGift.getComponent(cc.Button).interactable=!1,this.lingqufuli_1.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_lingqufuli2"),this._editBox&&(this._editBox.node.active=!1)):(this.addEditBox(),this.btnReceiveGift.getComponent(cc.Button).enabled=!0,this.btnReceiveGift.getComponent(cc.Button).interactable=!0)},t.prototype.addEditBox=function(){this._editBox=cc.find("anchor1/bottominvite/newUserNode/_editBox",this.csbRoot).getComponent(cc.EditBox),this._editBox.fontSize=22,this._editBox.fontColor=cc.color(255,255,255),this._editBox.placeholder="\u8bf7\u8f93\u5165\u597d\u53cb\u6e38\u620fID",this._editBox.inputMode=cc.EditBox.InputMode.NUMERIC,this._editBox.returnType=cc.EditBox.KeyboardReturnType.DONE,this._editBox.node.on("editing-did-began",this.editBoxEditingDidBegin,this)},t.prototype.onEditBgClick=function(e){},t.prototype.editBoxEditingDidBegin=function(e){if(this.bottominvite.getPosition().y<400){var t=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),t.play("animation2")}},t.prototype.onBtnClose=function(e){a.model.lobby.invitePOPUP=!0;var t=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),t.play("animation4"),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(!0),this.destroy()}.bind(this),this)},t.prototype.onBtnWeChat=function(e){if(e.type==cc.Node.EventType.TOUCH_START)this.csbRoot.stopAllActions();else if(e.type==cc.Node.EventType.TOUCH_END){this._playAmBtn(),a.model.lobby.isNeenInviteInfo=!0;var t=o.configTable.languageKey.string_weixinlianjie1.string_zhcn.split("|")[Math.floor(2*Math.random()+0)],i=o.configTable.languageKey.string_weixinlianjie2.string_zhcn.split("|")[Math.floor(2*Math.random()+0)],n="http://share.mango.x-men.co/fish/singleFish.html";cc.sys.os==cc.sys.OS_ANDROID?n="http://share.mango.x-men.co/fish/singleFish.html":cc.sys.os==cc.sys.OS_IOS&&(n="http://share.mango.x-men.co/fish/singleFish.html"),s.xmen.SDKInterfaceManager.sdkShare({cmd:"share",title:t,content:i,url:n+"?id="+a.ME.userId,type:"0",shareType:"url"},"weixin")}else e.type!=cc.Node.EventType.TOUCH_MOVE&&e.type!=cc.Node.EventType.TOUCH_CANCEL||this._playAmBtn()},t.prototype.onBtnReceiveGift=function(e){if(this._IsNum(this._editBox.string.trim())&&null!=this._editBox.string.trim()){var t={params:{action:"inviteReward",gameId:28,userId:a.ME.userId,clientId:l.AccountInfo.clientId,inviteInfoType:1,inviterId:Number(this._editBox.string.trim())}};0==a.model.table.roomId?t.cmd=d.msgs.CMD_INVITE_FRIENDS:(t.cmd=d.msgs.CMD_INVITE_FRIENDS_IN_TABLE,t.params.roomId=a.model.table.roomId,t.params.tableId=a.model.table.tableId,t.params.seatId=a.model.table.seatId),h.tcp.send(t)}else{var i="";i=null==this._editBox.string.trim()?"\u597d\u53cbID\u4e0d\u80fd\u4e3a\u7a7a\u54e6~":"\u53ea\u80fd\u8f93\u5165\u7eaf\u6570\u5b57\u54e6~",o.evtCenter.emit(c.evts.EVT_MSG_BOX,i)}if(this.bottominvite.getPosition().y>400){var n=this.csbRoot.getComponent(cc.Animation);n.on(cc.Animation.EventType.FINISHED,function(){n.play("animation1").wrapMode=cc.WrapMode.Loop}),this.csbRoot.stopAllActions(),n.play("animation3")}this._editBox.string=""},t.prototype.onCloseNewUserReward=function(e){var t=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),t.play("animation1").wrapMode=cc.WrapMode.Loop}.bind(this),this),t.play("animation3")},t.prototype.onBtnPaste=function(e){},t.prototype._IsNum=function(e){return null!=e&&""!=e&&!isNaN(e)},t.prototype._playAmBtn=function(){var e=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),e.play("animation1").wrapMode=cc.WrapMode.Loop},t}(cc.Component);i.InviteFriends=f,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","./fish_invite_friends_reward_button":"fish_invite_friends_reward_button"}],fish_laser_manager:[function(e,t,i){"use strict";cc._RF.push(t,"65701ikHeJNwYkoxazNuIre","fish_laser_manager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("./fish_laser"),c=function(e){function t(){var t=e.call(this)||this;return t.lasers={},t}return __extends(t,e),t.prototype.onLoad=function(){n.evtCenter.on(s.evts.EVT_LASER_UPDATE,this.onEventLaserUpdate,this)},t.prototype.onEventLaserUpdate=function(e,t,i,n,s){var o=this.lasers[e];o&&o.doUpdate(t,i,n,s)},t.prototype.laserBegin=function(e,t,i,n,s,c,a){this.lasers[e]=o.LaserFactory.create(e,t,i,n,s,c,a)},t.prototype.laserEnd=function(e){var t=this.lasers[e];t&&(t.die(),this.node.runAction(cc.sequence(cc.delayTime(35/30),cc.callFunc(function(){delete this.lasers[e]}.bind(this)))))},t}(cc.Component);i.LaserManager=c,cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","./fish_laser":"fish_laser"}],fish_laser_view:[function(e,t,i){"use strict";cc._RF.push(t,"eb99e9dNmxL2bSdjaog3xFT","fish_laser_view"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../define/fish_msg_types"),c=e("../../model/fish_model"),a=e("../../logic/fish_tcp"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.seatId=e,this.listener=null,this.isFired=!1;var t=cc.visibleRect;this.node.setContentSize(t.width,t.height),this.node.setAnchorPoint(cc.v2(0,0))},t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),n.evtCenter.on(s.evts.EVT_LASER_HIT_FISH,this.onEventLaserHitFish,this),n.evtCenter.on(s.evts.EVT_LASER_END,this.onEventLaserEnd,this)},t.prototype.onDestroy=function(){n.evtCenter.off(s.evts.EVT_LASER_HIT_FISH,this.onEventLaserHitFish,this),n.evtCenter.off(s.evts.EVT_LASER_END,this.onEventLaserEnd,this)},t.prototype.onTouchBegan=function(e){if(cc.log("****************************************** LaserView.onTouchBegan"),!this.isFired){this.isFired=!0;var t=n.utils.convertPt(e.getLocation()),i={cmd:o.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:c.ME.userId,action:"skill",skillId:c.ME.playerInfo.fireLaserId,subAction:"shot",loc:[n.utils.v2px(t.x),n.utils.v2py(t.y)],roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId}};a.tcp.send(i)}return!0},t.prototype.onEventLaserHitFish=function(e,t,i,n){if(e==c.model.table.seatId){var s={cmd:o.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:c.ME.userId,action:"skill",skillId:c.ME.playerInfo.fireLaserId,subAction:"penetrate",fId:t,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId}};a.tcp.send(s)}},t.prototype.onEventLaserEnd=function(e,t){e==c.model.table.seatId&&(this.node.removeFromParent(),this.destroy())},t}(cc.Component);i.LaserView=r,cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_laser:[function(e,t,i){"use strict";cc._RF.push(t,"9667dMsL5FDh75+UTAmuymQ","fish_laser"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=function(e){function t(t,i,n,s,o,c,a,r){var h=e.call(this)||this;h.seatId=t,h.weaponId=i,h.path=s,h.dists=o,h.angles=c,h.laserNode=a,h.lineIdx=0,h.maxLine=n,h.lines=[],h.LaserLine=r,h.spHead=null,h.setSprite();var l=cc.director.getScheduler();return l.unschedule(h.onTimeoutRemove,h),l.schedule(h.onTimeoutRemove,h,20,0,0,!1),h}return __extends(t,e),t.prototype.setSprite=function(){this.genHead(),this.spHead.setPosition(this.path[0]),this.spHead.angle=-this.angles[0],this.laserNode.addChild(this.spHead);for(var e=0;e<this.maxLine;e++){var t=new this.LaserLine;t.setPosition(this.path[e]),t.angle=-this.angles[e],this.laserNode.addChild(t),this.lines.push(t)}},t.prototype.onTimeoutRemove=function(){n.evtCenter.emit(s.evts.EVT_LASER_END,this.seatId,0)},t.prototype.doUpdate=function(e,t,i,n){if(e>=this.maxLine){this.lineIdx=this.maxLine,this.spHead.active=!1;for(var s=0;s<this.maxLine;s++)this.lines[s].setLength(this.dists[s])}else{if(e!=this.lineIdx){for(s=0;s<e;s++)this.lines[s].setLength(this.dists[s]);this.spHead.angle=-this.angles[e]}this.lineIdx=e,this.spHead.setPosition(i,n),this.lines[e].setLength(t)}},t.prototype.die=function(){cc.director.getScheduler().unschedule(this.onTimeoutRemove,this);for(var e=0;e<this.lineIdx;e++){var t=this.lines[e];t.stopAllActions(),t.runAction(cc.sequence(cc.delayTime(1),cc.scaleTo(5/30,0,1)))}},t.prototype.genHead=function(){},t}(cc.Node),c=function(e){function t(i,n,s,o,c,a,r){return e.call(this,i,n,s,o,c,a,r,t.LaserLine)||this}return __extends(t,e),t.prototype.genHead=function(){this.spHead=n.utils.createSprite("fish_laser_1_head","skill_laser")},t.LaserLine=function(e){function t(){var t=e.call(this)||this;return t.bar=n.utils.createSprite("fish_laser_1_line","skill_laser"),t.bar.setAnchorPoint(.5,0),t.bar.scaleY=0,t.addChild(t.bar),t.effect=n.utils.createSprite("img/nopack/laser_effect"),t.effect.setAnchorPoint(.5,0),t.effect.getComponent(cc.Sprite).spriteFrame.setRect(cc.rect(0,0,128,0)),t.effect.runAction(cc.repeatForever(cc.sequence(cc.flipX(!0),cc.delayTime(2/30),cc.flipY(!0),cc.delayTime(2/30),cc.flipX(!1),cc.delayTime(2/30),cc.flipY(!1),cc.delayTime(2/30)))),t.addChild(t.effect),t.setContentSize(t.bar.getContentSize()),t.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(5/30,.9,1),cc.scaleTo(5/30,1,1)))),t}return __extends(t,e),t.prototype.setLength=function(e){this.bar.scaleY=e/128,this.effect.setContentSize(128,e)},t}(cc.Node),t}(o),a=function(e){function t(i,n,s,o,c,a,r){return e.call(this,i,n,s,o,c,a,r,t.LaserLine)||this}return __extends(t,e),t.prototype.genHead=function(){this.spHead=n.utils.createSprite("fish_laser_2_head","skill_laser")},t.LaserLine=function(e){function t(){var t=e.call(this)||this;t.bar=n.utils.createSprite("fish_laser_2_line","skill_laser"),t.bar.setAnchorPoint(.5,0),t.bar.scaleY=0,t.addChild(t.bar),t.effect=n.utils.createSprite("fish_laser_2_effect_01","skill_laser");var i=t.effect.addComponent(cc.Animation);t.effect.setAnchorPoint(.5,0),t.effect.setScale(1,0);var s=n.utils.genAnimate("skill_laser","laser_2202","fish_laser_2_effect_",1/30);return i.addClip(s),i.play("laser_2202").wrapMode=cc.WrapMode.Loop,t.addChild(t.effect),t.effect.runAction(cc.repeatForever(cc.sequence(cc.flipX(!0),cc.delayTime(2/30),cc.flipY(!0),cc.delayTime(2/30),cc.flipX(!1),cc.delayTime(2/30),cc.flipY(!1),cc.delayTime(2/30)))),t.setContentSize(t.bar.getContentSize()),t.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(5/30,.9,1),cc.scaleTo(5/30,1,1)))),t}return __extends(t,e),t.prototype.setLength=function(e){this.bar.scaleY=e/84,this.effect.scaleY=e/224},t}(cc.Node),t}(o),r=function(e){function t(i,n,s,o,c,a,r){return e.call(this,i,n,s,o,c,a,r,t.LaserLine)||this}return __extends(t,e),t.prototype.genHead=function(){this.spHead=n.utils.createSprite("fish_laser_3_head","skill_laser")},t.LaserLine=function(e){function t(){var t=e.call(this)||this;t.bar=n.utils.createSprite("fish_laser_3_line_01","skill_laser"),t.bar.setAnchorPoint(.5,0),t.bar.setScale(1.6,0);var i=n.utils.genAnimate("skill_laser","laser_2203","fish_laser_3_line_",2/30),s=t.bar.addComponent(cc.Animation);return s.addClip(i),s.play("laser_2203").wrapMode=cc.WrapMode.Loop,t.addChild(t.bar),t.setAnchorPoint(.5,0),t.setContentSize(t.bar.getContentSize()),t.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(5/30,.9,1),cc.scaleTo(5/30,1,1)))),t}return __extends(t,e),t.prototype.setLength=function(e){this.bar.scaleY=e/238},t}(cc.Node),t}(o),h=function(e){function t(i,n,s,o,c,a,r){return e.call(this,i,n,s,o,c,a,r,t.LaserLine)||this}return __extends(t,e),t.prototype.genHead=function(){this.spHead=n.utils.createSprite("fish_laser_4_head","skill_laser")},t.LaserLine=function(e){function t(){var t=e.call(this)||this;t.bar=n.utils.createSprite("fish_laser_4_line_01","skill_laser"),t.bar.setAnchorPoint(.5,0),t.bar.scaleY=0;var i=n.utils.genAnimate("skill_laser","laser_2204","fish_laser_4_line_",2/30),s=t.bar.addComponent(cc.Animation);return s.addClip(i),s.play("laser_2204").wrapMode=cc.WrapMode.Loop,t.addChild(t.bar),t.setAnchorPoint(.5,0),t.setContentSize(t.bar.getContentSize()),t.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(5/30,.9,1),cc.scaleTo(5/30,1,1)))),t}return __extends(t,e),t.prototype.setLength=function(e){this.bar.scaleY=e/473},t}(cc.Node),t}(o),l=function(){function e(){}return e.create=function(e,t,i,n,s,o,l){switch(t){case 2201:return new c(e,t,i,n,s,o,l);case 2202:return new a(e,t,i,n,s,o,l);case 2203:return new r(e,t,i,n,s,o,l);case 2204:return new h(e,t,i,n,s,o,l)}return null},e}();i.LaserFactory=l,cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene"}],fish_level_gifts:[function(e,t,i){"use strict";cc._RF.push(t,"0f55bo+F+BFGog3AqZjnNkT","fish_level_gifts"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("./fish_gifts_cell"),r=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.node_table=null,t.table_view=null,t.weaponID=[],t.cellNum=6,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/level_gifts")),t.node_table=cc.find("archor/node_table",t.csbRoot),t.table_view=cc.find("archor/node_table/table_view",t.csbRoot).getComponent(cc.ScrollView),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbRoot),this.cellSize=cc.size(175,245),this.updateTable(),s.evtCenter.on(o.evts.EVT_UPDATE_ACT_LV,this.updateTable,this)},t.prototype.updateTable=function(){this.weaponID=[];for(var e=0;e<this.cellNum;e++){var t=s.configTable.weaponup_reward[e].weapon_lvl;c.model.activity.isWeaponInRewarded(t)||this.weaponID.push(t)}c.model.activity.weaponReward.length>0&&(this.weaponID=this.weaponID.concat(c.model.activity.weaponReward)),this.tableViewReloadData()},t.prototype.tableViewReloadData=function(){this.table_view.content.removeAllChildren();for(var e=0;e<this.cellNum;e++){var t=new a.LevelGiftsCell;t.setContentSize(this.cellSize),t.setCellData(e,this.weaponID[e]),this.table_view.content.addChild(t)}},t.prototype.onDestroy=function(){this.weaponID=[],s.evtCenter.off(o.evts.EVT_UPDATE_ACT_LV,this.updateTable,this)},t}(cc.Component);i.LevelGifts=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_gifts_cell":"fish_gifts_cell"}],fish_level_up:[function(e,t,i){"use strict";cc._RF.push(t,"7a47fN/TK9FCqauFyaINni1","fish_level_up"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../model/fish_model"),c=e("../../buffer/fish_buffer"),a=e("../../define/fish_event_types"),r=e("../../fish"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i,o,c){this.csbNode=null,this.spStripe=null,this.spGear=null,this.particleStar=null,this.fntLevel=null,this.iconItem1_0=null,this.iconItem2_0=null,this.fntGold=null,this.fntDiamond_0=null,this.fntItem1_0=null,this.fntItem2_0=null,this.btnShare=null,this.btnGet=null,this.item1=o,this.item2=c,this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/level_up")),r.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode);var a=n.AssetsManager.getRes("img/atlas/common");this.spStripe=cc.find("group/spStripe",this.csbNode),this.spGear=cc.find("group/group/spGear",this.csbNode),this.particleStar=cc.find("group/particleStar",this.csbNode).getComponent(cc.ParticleSystem),this.fntLevel=cc.find("group/fntLevel",this.csbNode),this.fntGold=cc.find("group1/gold_board/fntGold",this.csbNode),this.fntDiamond_0=cc.find("group1/diamond_board_0/fntDiamond_0",this.csbNode),this.fntItem1_0=cc.find("group1/Item1_board_0/fntItem1_0",this.csbNode),this.fntItem2_0=cc.find("group1/Item2_board_0/fntItem2_0",this.csbNode),this.iconItem1_0=cc.find("group1/Item1_board_0/iconItem1_0",this.csbNode),this.iconItem2_0=cc.find("group1/Item2_board_0/iconItem2_0",this.csbNode),this.btnShare=cc.find("group1/btnShare",this.csbNode),this.btnGet=cc.find("group1/btnGet",this.csbNode),this.btnGet.on(cc.Node.EventType.TOUCH_END,this.onBtnGet,this),this.btnShare.on(cc.Node.EventType.TOUCH_END,this.onBtnShare,this),this.diamond=i,this.fntLevel.getComponent(cc.Label).string=e,this.fntDiamond_0.getComponent(cc.Label).string=i,this.iconItem1_0.getComponent(cc.Sprite).spriteFrame=a.getSpriteFrame(s.configTable.item[o.itemId].big_icon.split(".")[0]),this.fntItem1_0.getComponent(cc.Label).string=o.count,this.iconItem2_0.getComponent(cc.Sprite).spriteFrame=a.getSpriteFrame(s.configTable.item[c.itemId].big_icon.split(".")[0]),this.fntItem2_0.getComponent(cc.Label).string=c.count},t.prototype.onLoad=function(){this.spStripe.runAction(cc.repeatForever(cc.rotateBy(1,72))),this.spGear.runAction(cc.repeatForever(cc.rotateBy(1,36))),this.particleStar.stopSystem(),this.node.runAction(cc.sequence(cc.delayTime(4/30),cc.callFunc(function(){this.particleStar.resetSystem()}.bind(this))));var e=this.csbNode.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("repeat").wrapMode=cc.WrapMode.Loop}.bind(this),this),e.play("show"),this.scheduleOnce(this._hide,4),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/level_up"),!1)},t.prototype.onBtnShare=function(e){cc.log("onBtnShare")},t.prototype.onBtnGet=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this._hide()},t.prototype._hide=function(){this.node.stopAllActions(),this.csbNode.stopAllActions(),this.unscheduleAllCallbacks();var e=this.csbNode.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){"hide"==e.currentClip.name?(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/fly_item"),!1),1==o.model.table.seatId||3==o.model.table.seatId?e.play("flyLeft"):e.play("flyRight")):(e.targetOff(this),s.evtCenter.emit(a.evts.EVT_HIDE_LEVEL_UP),this.node.removeFromParent(),this.destroy())}.bind(this),this),e.play("hide"),this.gold>0&&c.buffer.pushGold(o.ME.userId,this.gold,2),this.diamond>0&&c.buffer.pushDiamond(o.ME.userId,this.diamond,2),this.item1.count>0&&(3101==this.item1.itemId?c.buffer.pushLock(o.ME.userId,this.item1.count,2):3102==this.item1.itemId&&c.buffer.pushFreeze(o.ME.userId,this.item1.count,2)),this.item2.count>0&&(3101==this.item2.itemId?c.buffer.pushLock(o.ME.userId,this.item2.count,2):3102==this.item2.itemId&&c.buffer.pushFreeze(o.ME.userId,this.item2.count,2))},t}(cc.Component);i.LevelUp=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_lobby_arena_bag_exchage_money:[function(e,t,i){"use strict";cc._RF.push(t,"4e940WjclBNtqjAzmGAxzQs","fish_lobby_arena_bag_exchage_money"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i,n,s){this._show(e,t,i,n,s)},t.prototype.onLoad=function(){n.evtCenter.emit(s.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){n.evtCenter.emit(s.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnCancel(null)},t.prototype.verification=function(){},t.prototype.onBackWarning=function(){},t.prototype.onBtnOK=function(e){},t.prototype.onBtnCancel=function(e){},t.prototype.addEditName=function(){},t.prototype.addEditIdCard=function(){},t.prototype.addEditPhone=function(){},t.prototype.addEditbank=function(){},t.prototype.addEditBankNum=function(){},t.prototype._show=function(e,t,i,n,s){},t.prototype._hide=function(){},t.prototype._callback=function(){},t}(cc.Component);i.BagMoneyExchange=o,cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene"}],fish_lobby_arena_cell:[function(e,t,i){"use strict";cc._RF.push(t,"0973fHyIW1OHK5Il30pd1VA","fish_lobby_arena_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i){this.csbRoot=null,this.arena_cell_sp=null,this.arena_dk=null,this.winnerRanking=null,this.winnerRankCenter=null,this.arena_cell_num=null,this.arena_cell_num=null,this.arena_cell_Integral=null,this.setSource(e,t,i)},t.prototype.setSource=function(e,t,i){},t}(cc.Component);i.LobbyArenaCell=n,cc._RF.pop()},{}],fish_lobby_arena_manito_cell:[function(e,t,i){"use strict";cc._RF.push(t,"8f23dTul6xGX5GAge8kh5rY","fish_lobby_arena_manito_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t){},t.prototype.setSource=function(e,t){},t}(cc.Node);i.LobbyArenaManitoCell=n,cc._RF.pop()},{}],fish_lobby_arena_manito:[function(e,t,i){"use strict";cc._RF.push(t,"3199dyohdpKP6+C0kv80qMY","fish_lobby_arena_manito"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbRoot=null,this.cellSize=null,this.tableView=null,this.tableViewLayer=null,this.listener=null,this.beganOffset=0,this.pageIndex=0,this.pageCount=0,this.leftBtn=null,this.rightBtn=null,this.resultData=e},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_arena_manito")),this.node.addChild(this.csbRoot);var e=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),e.play("show")},t.prototype.onDestroy=function(){},t.prototype.onBtnCloseManito=function(e){},t.prototype.onBtnJoin=function(e){},t.prototype._generaTableView=function(){this.tableView||(this.cellSize=cc.size(185,240))},t.prototype.scrollViewDidScroll=function(e){},t.prototype.onBtnLeftScroll=function(e){},t.prototype.onBtnRightScroll=function(e){},t}(cc.Component);i.LobbyArenaManito=s,cc._RF.pop()},{"../../../assets_manager":"assets_manager"}],fish_lobby_arena_ranking:[function(e,t,i){"use strict";cc._RF.push(t,"c0535MNlPRC66m4wczKcZJH","fish_lobby_arena_ranking"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_arena_ranking")),this.node.addChild(this.csbRoot);var e=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),e.play("show")},t.prototype.onDestroy=function(){},t.prototype.onBtnCloseArena=function(e){},t}(cc.Component);i.LobbyArenaRanking=s,cc._RF.pop()},{"../../../assets_manager":"assets_manager"}],fish_lobby_arena_reward_cell:[function(e,t,i){"use strict";cc._RF.push(t,"f8e97RJFwdJPI01sxIaUPUJ","fish_lobby_arena_reward_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i,n,s){},t.prototype.setSource=function(e,t,i,n,s){},t.prototype.getItemInfo=function(e){for(var t in e)if("coupon"==t);else if("chip"==t);else if("diamond"!=t){var i=t.substring(6,t.length);return e[t]+"\u4e2a"+n.configTable.languageKey[n.configTable.item[i].item_name].string_zhcn}},t.prototype.onBtnReward=function(e){},t}(cc.Node);i.LobbyArenaRewardCell=s,cc._RF.pop()},{"../../scene/fish_scene":"fish_scene"}],fish_lobby_arena_reward:[function(e,t,i){"use strict";cc._RF.push(t,"2cd80NmaBJHEoqYV8iQi9wW","fish_lobby_arena_reward"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../define/fish_msg_types"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbRoot=null,this.cellSize=null,this.tableView=null,this.tableViewLayer=null,this.resultData=e,this.cellCount=0,this.lstSize=0,this.gotoSize=0},t.prototype.onLoad=function(){this._resultDataFormat(),this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_arena_reward")),this.node.addChild(this.csbRoot);var e=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),e.play("show"),this._generaTableView(),s.evtCenter.on(o.evts.EVT_RECV_MATCH_REWARD,this.onEventMatchReward,this),s.evtCenter.on(o.evts.EVT_RECV_ARENA_REWARD_INFO,this.onEventMatchRewardInfo,this)},t.prototype.onDestroy=function(){c.model.arena.matchRewardInfo=null,s.evtCenter.off(o.evts.EVT_RECV_MATCH_REWARD,this.onEventMatchReward,this),s.evtCenter.off(o.evts.EVT_RECV_ARENA_REWARD_INFO,this.onEventMatchRewardInfo,this)},t.prototype.onBtnCloseArena=function(e){},t.prototype._generaTableView=function(){this.tableView},t.prototype._resultDataFormat=function(){this.resultData.lst.length>0?this.lstSize=this.resultData.lst.length:this.lstSize=0,this.resultData.goto.length>0?this.gotoSize=this.resultData.goto.length:this.gotoSize=0,this.cellCount=this.lstSize+this.gotoSize},t.prototype.onBtnRewardClick=function(e){if(e+1<=this.lstSize){var t=this.resultData.lst[e].stime,i=this.resultData.lst[e].times,n=this.resultData.lst[e].instId,l={cmd:a.msgs.CMD_GAME,params:{action:"match_reward",gameId:28,userId:c.ME.userId,clientId:r.AccountInfo.clientId,roomId:c.model.arena.matchList[0].roomId,type:c.model.arena.matchList[0].type,stime:t,times:i,instId:n}};h.tcp.send(l)}else if(cc.log("------------\u53bb\u5b8c\u6210\u4efb\u52a1\u90e8\u5206-----btnreward=-------"+e),c.model.arena.toDayMatchList.fee>0)if(c.model.lobby.fishKingFlag)s.evtCenter.emit(o.evts.EVT_MSG_BUY_ITEM,{itemNum:c.model.arena.toDayMatchList.fee,btn:2,callback:this.returnTag,target:this,position:!1,fishKingFlag:!0});else{var d={cmd:a.msgs.CMD_GAME,params:{action:"match_enter",gameId:28,userId:c.ME.userId,clientId:r.AccountInfo.clientId,roomId:c.model.arena.matchList[0].roomId,type:c.model.arena.matchList[0].type}};h.tcp.send(d)}else this.returnTag()},t.prototype.returnTag=function(){var e={cmd:a.msgs.CMD_GAME,params:{action:"match_enter",gameId:28,userId:c.ME.userId,clientId:r.AccountInfo.clientId,roomId:c.model.arena.matchList[0].roomId,type:c.model.arena.matchList[0].type}};h.tcp.send(e)},t.prototype.onEventMatchReward=function(e){var t={cmd:a.msgs.CMD_GAME,params:{action:"match_reward_list",gameId:28,userId:c.ME.userId,clientId:r.AccountInfo.clientId,type:c.model.arena.matchList[0].type}};if(h.tcp.send(t),0==e.reason){var i=e.reward[0],n=i.name.substring(6,i.name.length),l=[{giftId:n,giftIcon:s.configTable.item[n].big_icon,giftNum:i.count}];s.evtCenter.emit(o.evts.EVT_POP_REWARD_PANEL,l,"")}else s.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u5956\u52b1\u9886\u53d6\u5931\u8d25,\u7a0d\u540e\u91cd\u8bd5")},t.prototype.onEventMatchRewardInfo=function(e){},t}(cc.Component);i.LobbyArenaReward=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_lobby_arena_rule:[function(e,t,i){"use strict";cc._RF.push(t,"7a323VHpNpKI7CRNVnTPXLv","fish_lobby_arena_rule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.ruleText1=null,t.ruleText2=null,t.ruleText3=null,t.radio1=null,t.radio2=null,t.radio3=null,t.arrow1=null,t.arrow2=null,t.arrow3=null,t.ruleTab1=null,t.ruleTab2=null,t.ruleTab3=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_arena_rule")),this.node.addChild(this.csbRoot),this.ruleText1=cc.find("box/ruleFnt1/ruleText1",this.csbRoot),this.ruleText2=cc.find("box/ruleFnt1/ruleText2",this.csbRoot),this.ruleText3=cc.find("box/ruleFnt1/ruleText3",this.csbRoot),this.radio1=cc.find("box/radio1",this.csbRoot),this.radio2=cc.find("box/radio2",this.csbRoot),this.radio3=cc.find("box/radio3",this.csbRoot),this.ruleTab1=cc.find("box/radio1/ruleTab1",this.csbRoot),this.ruleTab2=cc.find("box/radio2/ruleTab2",this.csbRoot),this.ruleTab3=cc.find("box/radio3/ruleTab3",this.csbRoot),this.arrow1=cc.find("box/arrow1",this.csbRoot),this.arrow2=cc.find("box/arrow2",this.csbRoot),this.arrow3=cc.find("box/arrow3",this.csbRoot),this.radio1.on(cc.Node.EventType.TOUCH_END,this.onBtnJoin,this),this.radio2.on(cc.Node.EventType.TOUCH_END,this.onBtnMatch,this),this.radio3.on(cc.Node.EventType.TOUCH_END,this.onBtnReward,this),this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("show");var e=n.AssetsManager.getRes("img/atlas/arena_8888");this.radio1.getComponent(cc.Button).normalSprite=e.getSpriteFrame("fish_xuanzhong"),this.radio2.getComponent(cc.Button).normalSprite=e.getSpriteFrame("fish_xuanzhong1"),this.radio3.getComponent(cc.Button).normalSprite=e.getSpriteFrame("fish_xuanzhong1"),this.ruleTab1.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_cansai")},t.prototype.onDestroy=function(){},t.prototype.onBtnCloseRule=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.csbRoot.stopAllActions();var t=this.csbRoot.getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(!0)}.bind(this),this),t.play("hide")},t.prototype.onBtnJoin=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=n.AssetsManager.getRes("img/atlas/arena_8888");this.radio1.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_xuanzhong"),this.radio2.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_xuanzhong1"),this.radio3.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_xuanzhong1"),this.ruleText1.active=!0,this.ruleText2.active=!1,this.ruleText3.active=!1,this.arrow1.active=!0,this.arrow2.active=!1,this.arrow3.active=!1,this.ruleTab1.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_cansai"),this.ruleTab2.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_bisai1"),this.ruleTab3.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_jiangliguize1")},t.prototype.onBtnMatch=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=n.AssetsManager.getRes("img/atlas/arena_8888");this.radio2.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_xuanzhong"),this.radio1.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_xuanzhong1"),this.radio3.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_xuanzhong1"),this.ruleText2.active=!0,this.ruleText1.active=!1,this.ruleText3.active=!1,this.arrow1.active=!1,this.arrow2.active=!0,this.arrow3.active=!1,this.ruleTab1.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_cansai1"),this.ruleTab2.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_bisai"),this.ruleTab3.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_jiangliguize1")},t.prototype.onBtnReward=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=n.AssetsManager.getRes("img/atlas/arena_8888");this.radio3.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_xuanzhong"),this.radio2.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_xuanzhong1"),this.radio1.getComponent(cc.Button).normalSprite=t.getSpriteFrame("fish_xuanzhong1"),this.ruleText3.active=!0,this.ruleText2.active=!1,this.ruleText1.active=!1,this.arrow1.active=!1,this.arrow2.active=!1,this.arrow3.active=!0,this.ruleTab1.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_cansai1"),this.ruleTab2.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_bisai1"),this.ruleTab3.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_jiangliguize")},t}(cc.Component);i.LobbyArenaRule=s,cc._RF.pop()},{"../../../assets_manager":"assets_manager"}],fish_lobby_arena_yest_cell:[function(e,t,i){"use strict";cc._RF.push(t,"0ef98+ohNRHwJidy5F8T5wU","fish_lobby_arena_yest_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.arena_cell_sp=null,t.arena_dk=null,t.winnerRanking=null,t.winnerRankCenter=null,t.arena_cell_num=null,t.arena_cell_name=null,t.arena_cell_Integral=null,t}return __extends(t,e),t.prototype.setSource=function(e,t,i){},t}(cc.Node);i.LobbyYestRankCell=n,cc._RF.pop()},{}],fish_lobby_arena_yest:[function(e,t,i){"use strict";cc._RF.push(t,"3191btVy5hME474lIpm8waH","fish_lobby_arena_yest"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbRoot=null,this.resultData=null,this.tableViewLayer=null,this.leftBtn=null,this.rightBtn=null,this.rankingFlag=!1,this.arenaInfo=e,this.rankRewardData=[],this.listener=null,this.beganOffset=0,this.pageIndex=0,this.pageCount=0,this.btnYesterday=null},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_arena_yest")),this.node.addChild(this.csbRoot),this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("show"),this.setRankRewardData(),this._generaTableView(),this.leftBtn.active=!1,this.rightBtn.active=!1},t.prototype.setRankRewardData=function(){for(var e in this.rankRewardData=[],s.configTable.competition_reward)0!=parseInt(e)&&this.rankRewardData.push(s.configTable.competition_reward[e])},t.prototype.onDestroy=function(){},t.prototype.onBtnCloseManito=function(e){},t.prototype._generaTableView=function(){},t.prototype.onBtnLeftScroll=function(e){},t.prototype.onBtnRightScroll=function(e){},t}(cc.Component);i.LobbyArenaYest=o,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../scene/fish_scene":"fish_scene"}],fish_lobby_arena:[function(e,t,i){"use strict";cc._RF.push(t,"cd7b0WGiBRIV6UQHYacZIhW","fish_lobby_arena"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../scene/fish_scene_login"),r=e("../../define/fish_msg_types"),h=e("../../logic/fish_tcp"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbRoot=null,this.resultData=null,this.tableViewLayer=null,this.leftBtn=null,this.rightBtn=null,this.arenaInfo=e,this.rankRewardData=[],this.listener=null,this.beganOffset=0,this.pageIndex=0,this.pageCount=0,this.btnYesterday=null,this.btnArenaRank=null,this.btnFishBIgGod=null,this.btnReward=null,this.btnChallenge=null,this.btnRule=null,this.integralFnt=null,this.arenaRankingFnt=null,this.startTimeFnt=null,this.winnerName=null,this.winnerIntegral=null,this.yellow_title=null,this.weekWinner=null,this.arena_dikuang=null,this.jifenCup=null,this.jifenName=null,this.coupon=null,this.couponRank=null,this.startTime=null,this.clickStartName=null,this.callbackMatch=null,this.startTimeFnt=null,this.jifenSize=null,this.rankSize=null,this.weekWinnerName=null,this.weekWinnerJifen=null,this.monthFnt=null,this.dayFnt=null,this.againImag=null,this.diamondImag=null,this.diamondFnt=null},t.prototype.onLoad=function(){n.model.arena.openArenaWindowFlag=!1,this.resultData=n.model.arena.matchList,this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/lobby_arena")),this.node.addChild(this.csbRoot);var e=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),e.play("show"),this.setRankRewardData(),this.setArenaInfo(!0),this._generaTableView(),this.leftBtn.setVisible(!1),this.rightBtn.setVisible(!0),o.evtCenter.on(c.evts.EVT_RECV_MATCH_ENTER,this.onEventMatchEnterError,this),o.audio.pushBg("sound/bg_lobby_match")},t.prototype.setRankRewardData=function(){for(var e in o.configTable.competition_reward)0!=parseInt(e)&&this.rankRewardData.push(o.configTable.competition_reward[e])},t.prototype.onDestroy=function(){n.model.arena.openArenaWindowFlag=!0,o.audio.popBg()},t.prototype.onBtnCloseArena=function(e){},t.prototype._generaTableView=function(){},t.prototype.onBtnLeftScroll=function(){},t.prototype.onBtnRightScroll=function(){},t.prototype.scrollViewDidScroll=function(){},t.prototype.onBtnRule=function(e){o.evtCenter.emit(c.evts.EVT_POPUP_ARENA_RULE)},t.prototype.onBtnManito=function(e){var t={cmd:r.msgs.CMD_ROOM,params:{action:"match_famous",gameId:28,userId:n.ME.userId,clientId:a.AccountInfo.clientId,roomId:this.resultData[0].roomId}};h.tcp.send(t)},t.prototype.onBtnRanking=function(e){o.evtCenter.emit(c.evts.EVT_POPUP_ARENA_RANKING)},t.prototype.onBtnReward=function(e){var t={cmd:r.msgs.CMD_GAME,params:{action:"match_reward_list",gameId:28,userId:n.ME.userId,clientId:a.AccountInfo.clientId,type:this.resultData[0].type}};h.tcp.send(t)},t.prototype.onBtnYesterdayRanking=function(e){},t.prototype.onBtnChallenge=function(e){},t.prototype.onGotoShoping=function(e){o.evtCenter.emit(c.evts.EVT_POPUP_SHOP_WINDOW,n.model.shop.SHOP_DIAMOND)},t.prototype.returnTag=function(){var e={cmd:r.msgs.CMD_GAME,params:{action:"match_enter",gameId:28,userId:n.ME.userId,clientId:a.AccountInfo.clientId,roomId:this.resultData[0].roomId,type:this.resultData[0].type}};h.tcp.send(e)},t.prototype.getChallengeState=function(){var e=n.model.arena.matchList;if(e.length>0){var t=o.configTable.scene[e[0].sceneName];return n.model.lobby.gunLevel<t.Min_Bet?(o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u62a5\u540d\u53c2\u52a0\u5927\u5956\u8d5b\uff0c\u60a8\u9700\u8981\u5148\u89e3\u9501\n100\u500d\u70ae\u53f0\u54e6~",this),!1):!(n.ME.gold<t.Min_Gold)||(o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u975e\u5e38\u62b1\u6b49\uff0c\u60a8\u9700\u8981\u6301\u6709\u81f3\u5c11100000\u91d1\u5e01\u624d\u80fd\u62a5\u540d\u53c2\u52a0\u5927\u5956\u8d5b\u54e6~",this),!1)}return!1},t.prototype.setArenaInfo=function(e){},t.prototype.onEventMatchEnterError=function(e){},t.prototype.setBtnTouchuStaute=function(e){},t}(cc.Component);i.LobbyArena=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_lobby_bag_item_message:[function(e,t,i){"use strict";cc._RF.push(t,"bc62fwZvqJM4qJ/56lyUAFV","fish_lobby_bag_item_message"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../buffer/fish_buffer"),r=e("../../define/fish_msg_types"),h=e("../../model/fish_model"),l=e("../../scene/fish_scene_login"),d=e("../../logic/fish_tcp"),_=e("../../fish"),f=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.groupOK=null,t.groupCancel=null,t.callback=null,t.target=null,t.itemShop=null,t.productTxt=null,t.useDiamondSp=null,t.useDiamondNum=null,t.btnAdd=null,t.btnMinus=null,t.productPrice=null,t.goodsId=null,t.goodsType=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(s.AssetsManager.getRes("prefabs/bag_item_buy_message")),_.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),this.groupOK=cc.find("spBG/anchor/groupOK",this.csbNode),this.groupCancel=cc.find("spBG/anchor/groupCancel",this.csbNode),this.itemShop=cc.find("spBG/itemShop",this.csbNode),this.productTxt=cc.find("spBG/itemShop/productTxt",this.csbNode),this.useDiamondSp=cc.find("spBG/itemShop/useDiamondSp",this.csbNode),this.useDiamondNum=cc.find("spBG/itemShop/useDiamondNum",this.csbNode),this.btnAdd=cc.find("spBG/itemShop/btnAdd",this.csbNode),this.btnMinus=cc.find("spBG/itemShop/btnMinus",this.csbNode),this.productPrice=cc.find("spBG/itemShop/productPrice",this.csbNode),this.btnAdd.on(cc.Node.EventType.TOUCH_END,this.onBtnAdd,this),this.btnMinus.on(cc.Node.EventType.TOUCH_END,this.onBtnMinus,this),cc.find("spBG/anchor/groupOK/btnOK",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnOK,this),cc.find("spBG/anchor/groupCancel/btnCancel",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnCancel,this),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnCancel(null)},t.prototype.onBtnOK=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1);var t=Number(o.configTable.item[this.goodsId].serve_id),n=parseInt(o.configTable.item[this.goodsId].price);if(1==this.goodsType)if(a.buffer.lobbyDiamond.diamond>n){if(Number(this.productPrice.getComponent(cc.Label).string)>0){var _={cmd:r.msgs.CMD_ITEM_FISH,params:{action:"buy",gameId:28,userId:h.ME.userId,clientId:l.AccountInfo.clientId,count:Number(this.productPrice.getComponent(cc.Label).string),itemId:t}};d.tcp.send(_)}}else o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u5f88\u62b1\u6b49\uff0c\u60a8\u7684\u94bb\u77f3\u4e0d\u8db3"+n+",\u672a\u80fd\u6210\u529f\u8d2d\u4e70\uff0c\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",2,this.showShopView,this);else{_={cmd:r.msgs.CMD_ITEM_FISH,params:{action:"recycle",gameId:28,userId:h.ME.userId,clientId:l.AccountInfo.clientId,count:Number(this.productPrice.getComponent(cc.Label).string),itemId:t}};d.tcp.send(_)}this._hide(),this._callback(),i.buyItemMessageBox=null,this.productTxt=null,this.useDiamondSp=null,this.useDiamondNum=null,this.productPrice=null,this.node.removeFromParent(!0),this.destroy()},t.prototype.showShopView=function(){o.evtCenter.emit(c.evts.EVT_POPUP_SHOP_WINDOW,h.model.shop.SHOP_DIAMOND)},t.prototype.onBtnCancel=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this._hide(),this.groupCancel.active||this._callback(),i.buyItemMessageBox=null,this.node.removeFromParent(!0),this.destroy()},t.prototype.onBtnAdd=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1);var t=o.configTable.item,i=h.ME.baggage.getItem(this.goodsId);if(1==this.goodsType){var n=void 0==i?0:i.count,c=h.ME.diamond-Number(this.useDiamondNum.getComponent(cc.Label).string);n+Number(this.productPrice.getComponent(cc.Label).string)<999&&c>=t[this.goodsId].price&&(this.productPrice.getComponent(cc.Label).string=Number(this.productPrice.getComponent(cc.Label).string)+1+"",this.useDiamondNum.getComponent(cc.Label).string=t[this.goodsId].price*Number(this.productPrice.getComponent(cc.Label).string)+"")}else 2==this.goodsType&&i.count>Number(this.productPrice.getComponent(cc.Label).string)&&(this.productPrice.getComponent(cc.Label).string=Number(this.productPrice.getComponent(cc.Label).string)+1+"",this.useDiamondNum.getComponent(cc.Label).string=o.utils.formatNumber(t[this.goodsId].value*Number(this.productPrice.getComponent(cc.Label).string)))},t.prototype.onBtnMinus=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1);var t=o.configTable.item;1==this.goodsType?Number(this.productPrice.getComponent(cc.Label).string)>1&&(this.productPrice.getComponent(cc.Label).string=Number(this.productPrice.getComponent(cc.Label).string)-1+"",this.useDiamondNum.getComponent(cc.Label).string=t[this.goodsId].price*Number(this.productPrice.getComponent(cc.Label).string)+""):2==this.goodsType&&Number(this.productPrice.getComponent(cc.Label).string)>1&&(this.productPrice.getComponent(cc.Label).string=Number(this.productPrice.getComponent(cc.Label).string)-1+"",this.useDiamondNum.getComponent(cc.Label).string=o.utils.formatNumber(t[this.goodsId].value*Number(this.productPrice.getComponent(cc.Label).string)))},t.prototype._show=function(e,t,i,n,c){var a=s.AssetsManager.getRes("img/atlas/common");this.goodsId=c,this.goodsType=e,void 0!==t&&"function"==typeof t&&(n=i,i=t,t=1);var r=o.configTable.item;if(1==e){this.productTxt.getComponent(cc.Label).string="\u8d2d\u4e70\u9700\u6d88\u8017: ";var l=h.ME.baggage.getItem(this.goodsId)&&h.ME.baggage.getItem(this.goodsId).count||0;cc.log(l);var d=l+5<999?5:1,_=r[c].price*d,f=Math.floor(h.ME.diamond/r[c].price);_>h.ME.diamond?(_=f*r[c].price==0?r[c].price:f*r[c].price,this.productPrice.getComponent(cc.Label).string=""+(0==f?1:f)):this.productPrice.getComponent(cc.Label).string=d+"",this.useDiamondNum.getComponent(cc.Label).string=_+""}else{var p=h.ME.baggage.getItem(c);this.productTxt.getComponent(cc.Label).string="\u51fa\u552e\u83b7\u5f97: ",this.useDiamondNum.getComponent(cc.Label).string=o.utils.formatNumber(r[c].value*p.count),this.productPrice.getComponent(cc.Label).string=p.count+"",this.useDiamondSp.getComponent(cc.Sprite).spriteFrame=a.getSpriteFrame("fish_icon_gold")}this.callback=i||null,this.target=n||null;var u=this.csbNode.getComponent(cc.Animation);this.csbNode.stopAllActions(),u.play("show"),t&&t>1?(this.groupOK.x=-90,this.groupCancel.active=!0,this.groupCancel.x=90):(this.groupOK.x=0,this.groupCancel.active=!1)},t.prototype._hide=function(){var e=this.csbNode.getComponent(cc.Animation);this.csbNode.stopAllActions(),e.play("hide")},t.prototype._callback=function(){this.callback&&this.target&&(this.callback.call(this.target),this.callback=null,this.target=null)},t.show=function(e,s,o,c,a){i.buyItemMessageBox||(i.buyItemMessageBox=(new cc.Node).addComponent(t),cc.director.getScene().addChild(i.buyItemMessageBox.node,n.View.MSG_BOX)),i.buyItemMessageBox._show(e,s,o,c,a)},t}(cc.Component);i.BuyItemMessageBox=f,i.buyItemMessageBox=null,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","../fish_view":"fish_view"}],fish_lobby_bonusexchange_message_box:[function(e,t,i){"use strict";cc._RF.push(t,"419f3JhgfpLHIgOVWJMgE6T","fish_lobby_bonusexchange_message_box"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../../assets_manager"),o=e("../../../xmen_interface"),c=e("../../scene/fish_scene"),a=e("../../define/fish_event_types"),r=e("../../define/fish_msg_types"),h=e("../../model/fish_model"),l=e("../../scene/fish_scene_login"),d=e("../../logic/fish_tcp"),_=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.groupOK=null,t.groupCancel=null,t.callback=null,t.target=null,t.fictitiousExchange=null,t.entityExchange=null,t.Activation=null,t.speak=null,t.bonusExchangeTitle=null,t.bonusTips=null,t.userPhone_huafei=null,t.userName=null,t.userPhoneEntity=null,t.userAddres=null,t.goodsId=null,t.message=null,t.exchangeId=null,t.editBoxBg=null,t._editBox=null,t.speak_editbox_bg=null,t.Text_9=null,t.Text_9_0=null,t.fish_duihuanma_dazuozhan_2=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(s.AssetsManager.getRes("prefabs/bonus_exchange")),this.node.addChild(this.csbNode),this.groupOK=cc.find("spBG/anchor/groupOK",this.csbNode),this.groupCancel=cc.find("spBG/anchor/groupCanel",this.csbNode),this.fictitiousExchange=cc.find("spBG/fictitiousExchange",this.csbNode),this.entityExchange=cc.find("spBG/entityExchange",this.csbNode),this.Activation=cc.find("spBG/Activation",this.csbNode),this.speak=cc.find("spBG/speak",this.csbNode),this.bonusExchangeTitle=cc.find("spBG/fictitiousExchange/bonusExchangeTitle",this.csbNode),this.bonusTips=cc.find("spBG/fictitiousExchange/bonusTips",this.csbNode),this.userPhone_huafei=cc.find("spBG/fictitiousExchange/userPhone_huafei",this.csbNode),this.userName=cc.find("spBG/entityExchange/userName",this.csbNode),this.userAddres=cc.find("spBG/entityExchange/userAddres",this.csbNode),this.speak_editbox_bg=cc.find("spBG/speak/speak_editbox_bg",this.csbNode),this.editBoxBg=cc.find("spBG/Activation/editBoxBg",this.csbNode),this.Text_9=cc.find("spBG/Activation/Text_9",this.csbNode),this.Text_9_0=cc.find("spBG/Activation/Text_9_0",this.csbNode),this.groupOK.getChildByName("btnOK").on(cc.Node.EventType.TOUCH_END,this.onBtnOK,this),this.groupCancel.getChildByName("btnCancel").on(cc.Node.EventType.TOUCH_END,this.onBtnCancel,this),o.xmen.EventDispatcher.on(o.xmen.EventType.RESPONSE_DATA_FROM_CLIPBOARD,this.onEventClipboard,this),c.evtCenter.emit(a.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){o.xmen.EventDispatcher.on(o.xmen.EventType.RESPONSE_DATA_FROM_CLIPBOARD,this.onEventClipboard,this),c.evtCenter.emit(a.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onEventClipboard=function(e){},t.prototype.onBackKey=function(){this.onBtnCancel(null)},t.prototype.onBtnOK=function(e){if(cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),3==this.message){var t=this._editBox.getComponent(cc.EditBox).string;""==t||null==t?c.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u8bf7\u8f93\u5165\u6587\u5b57."):this.callback.call(this.target,t)}else{if(-1==this.goodsId){var n=this._editBox.getComponent(cc.EditBox).string;if(""==n||null==n)c.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5151\u6362\u7801");else{var o={cmd:r.msgs.MSG_SET_USER_INFO,params:{action:"fishExCode",gameId:28,userId:h.ME.userId,clientId:l.AccountInfo.clientId,giftsId:n}};d.tcp.send(o)}}else{var _=null==this.userName.getComponent(cc.Label).string?"":this.userName.getComponent(cc.Label).string,f="";0==this.message||(f=null==this.userPhoneEntity.getComponent(cc.Label).string?"":this.userPhoneEntity.getComponent(cc.Label).string);var p=null==this.userAddres.getComponent(cc.Label).string?"":this.userAddres.getComponent(cc.Label).string;if(""!=f&&11==f.length){var u={cmd:r.msgs.CMD_ITEM_FISH,params:{action:"exchange",gameId:28,userId:h.ME.userId,clientId:l.AccountInfo.clientId,itemId:this.exchangeId,params:{phoneNumber:f,uName:_,uAddres:p}}};d.tcp.send(u)}else c.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801")}this._callback()}this._hide(),i.bonusExchange=null,this.node.removeFromParent(!0)},t.prototype.onBtnCancel=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this._hide(),this.groupCancel.active||this._callback(),i.bonusExchange=null,this.node.removeFromParent(!0),this.destroy()},t.prototype.addEditBox=function(){},t.prototype.addEditBoxHuafei=function(){},t.prototype.addEditBoxSpeak=function(){},t.prototype._show=function(e,t,i,n,s,o){},t.prototype._hide=function(){},t.prototype._callback=function(){},t.show=function(e,s,o,c,a,r){i.bonusExchange||(i.bonusExchange=(new cc.Node).addComponent(t),cc.director.getScene().addChild(i.bonusExchange.node,n.View.MSG_BOX)),i.bonusExchange._show(e,s,o,c,a,r)},t}(cc.Component);i.BonusExchange=_,i.bonusExchange=null,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","../fish_view":"fish_view"}],fish_lobby_change_head:[function(e,t,i){"use strict";cc._RF.push(t,"70caagMk2dFeZpw6SztVUQJ","fish_lobby_change_head"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../logic/fish_tcp"),r=e("../../define/fish_consts"),h=e("../../fish"),l=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.tableViewLayer=null,t.listener=null,t.touchY=null,t.touchFlag=!0,t.itemIdArray=["head_1.png","head_2.png","head_3.png","undefined","head_4.png","head_5.png","head_6.png"],t._cellDelegate=null,t.headScrollView=null,t.headBtn1_1=null,t.headBtn1_2=null,t.headBtn1_3=null,t.headBtn1_4=null,t.headBtn2_1=null,t.headBtn2_2=null,t.headBtn2_3=null,t.headBtn2_4=null,t.headBtn3_1=null,t.headBtn3_2=null,t.headBtn3_3=null,t.headBtn3_4=null,t.headBtn4_1=null,t.headBtn4_2=null,t.headBtn4_3=null,t.headBtn4_4=null,t.headBtn5_1=null,t.headBtn5_2=null,t.headBtn5_3=null,t.headTrue1_1=null,t.headTrue1_2=null,t.headTrue1_3=null,t.headTrue1_4=null,t.headTrue2_1=null,t.headTrue2_2=null,t.headTrue2_3=null,t.headTrue2_4=null,t.headTrue3_1=null,t.headTrue3_2=null,t.headTrue3_3=null,t.headTrue3_4=null,t.headTrue4_1=null,t.headTrue4_2=null,t.headTrue4_3=null,t.headTrue4_4=null,t.headTrue5_1=null,t.headTrue5_2=null,t.headTrue5_3=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_change_user_head_image")),h.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.headScrollView=cc.find("node/headScrollView",this.csbRoot).getComponent(cc.ScrollView),cc.find("node/btnClose",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this),this.headBtn1_1=cc.find("cell1/headBtn1_1",this.headScrollView.content),this.headBtn1_2=cc.find("cell1/headBtn1_2",this.headScrollView.content),this.headBtn1_3=cc.find("cell1/headBtn1_3",this.headScrollView.content),this.headBtn1_4=cc.find("cell1/headBtn1_4",this.headScrollView.content),this.headTrue1_1=cc.find("cell1/headTrue1_1",this.headScrollView.content),this.headTrue1_2=cc.find("cell1/headTrue1_2",this.headScrollView.content),this.headTrue1_3=cc.find("cell1/headTrue1_3",this.headScrollView.content),this.headTrue1_4=cc.find("cell1/headTrue1_4",this.headScrollView.content),this.headBtn2_1=cc.find("cell2/headBtn2_1",this.headScrollView.content),this.headBtn2_2=cc.find("cell2/headBtn2_2",this.headScrollView.content),this.headBtn2_3=cc.find("cell2/headBtn2_3",this.headScrollView.content),this.headBtn2_4=cc.find("cell2/headBtn2_4",this.headScrollView.content),this.headTrue2_1=cc.find("cell2/headTrue2_1",this.headScrollView.content),this.headTrue2_2=cc.find("cell2/headTrue2_2",this.headScrollView.content),this.headTrue2_3=cc.find("cell2/headTrue2_3",this.headScrollView.content),this.headTrue2_4=cc.find("cell2/headTrue2_4",this.headScrollView.content),this.headBtn3_1=cc.find("cell3/headBtn3_1",this.headScrollView.content),this.headBtn3_2=cc.find("cell3/headBtn3_2",this.headScrollView.content),this.headBtn3_3=cc.find("cell3/headBtn3_3",this.headScrollView.content),this.headBtn3_4=cc.find("cell3/headBtn3_4",this.headScrollView.content),this.headTrue3_1=cc.find("cell3/headTrue3_1",this.headScrollView.content),this.headTrue3_2=cc.find("cell3/headTrue3_2",this.headScrollView.content),this.headTrue3_3=cc.find("cell3/headTrue3_3",this.headScrollView.content),this.headTrue3_4=cc.find("cell3/headTrue3_4",this.headScrollView.content),this.headBtn4_1=cc.find("cell4/headBtn4_1",this.headScrollView.content),this.headBtn4_2=cc.find("cell4/headBtn4_2",this.headScrollView.content),this.headBtn4_3=cc.find("cell4/headBtn4_3",this.headScrollView.content),this.headBtn4_4=cc.find("cell4/headBtn4_4",this.headScrollView.content),this.headTrue4_1=cc.find("cell4/headTrue4_1",this.headScrollView.content),this.headTrue4_2=cc.find("cell4/headTrue4_2",this.headScrollView.content),this.headTrue4_3=cc.find("cell4/headTrue4_3",this.headScrollView.content),this.headTrue4_4=cc.find("cell4/headTrue4_4",this.headScrollView.content),this.headBtn5_1=cc.find("cell5/headBtn5_1",this.headScrollView.content),this.headBtn5_2=cc.find("cell5/headBtn5_2",this.headScrollView.content),this.headBtn5_3=cc.find("cell5/headBtn5_3",this.headScrollView.content),this.headTrue5_1=cc.find("cell5/headTrue5_1",this.headScrollView.content),this.headTrue5_2=cc.find("cell5/headTrue5_2",this.headScrollView.content),this.headTrue5_3=cc.find("cell5/headTrue5_3",this.headScrollView.content),this.headBtn1_1.on(cc.Node.EventType.TOUCH_END,this.onBtnHead1,this),this.headBtn1_2.on(cc.Node.EventType.TOUCH_END,this.onBtnHead2,this),this.headBtn1_3.on(cc.Node.EventType.TOUCH_END,this.onBtnHead3,this),this.headBtn1_4.on(cc.Node.EventType.TOUCH_END,this.onBtnHead4,this),this.headBtn2_1.on(cc.Node.EventType.TOUCH_END,this.onBtnHead5,this),this.headBtn2_2.on(cc.Node.EventType.TOUCH_END,this.onBtnHead6,this),this.headBtn2_3.on(cc.Node.EventType.TOUCH_END,this.onBtnHead7,this),this.headBtn2_4.on(cc.Node.EventType.TOUCH_END,this.onBtnHead8,this),this.headBtn3_1.on(cc.Node.EventType.TOUCH_END,this.onBtnHead9,this),this.headBtn3_2.on(cc.Node.EventType.TOUCH_END,this.onBtnHead10,this),this.headBtn3_3.on(cc.Node.EventType.TOUCH_END,this.onBtnHead11,this),this.headBtn3_4.on(cc.Node.EventType.TOUCH_END,this.onBtnHead12,this),this.headBtn4_1.on(cc.Node.EventType.TOUCH_END,this.onBtnHead13,this),this.headBtn4_2.on(cc.Node.EventType.TOUCH_END,this.onBtnHead14,this),this.headBtn4_3.on(cc.Node.EventType.TOUCH_END,this.onBtnHead15,this),this.headBtn4_4.on(cc.Node.EventType.TOUCH_END,this.onBtnHead16,this),this.headBtn5_1.on(cc.Node.EventType.TOUCH_END,this.onBtnHead17,this),this.headBtn5_2.on(cc.Node.EventType.TOUCH_END,this.onBtnHead18,this),this.headBtn5_3.on(cc.Node.EventType.TOUCH_END,this.onBtnHead19,this),this.setButtonSwallowTouches(),this.setFirstStaute(),this.csbRoot.getComponent(cc.Animation).play("show"),s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.setButtonSwallowTouches=function(){},t.prototype.setFirstStaute=function(){for(var e=c.ME.headUrl.split("/avatar/"),t=0;t<19;t++)r.headItemSize[t]==r.headItemKey[e[1]]?this["headTrue"+r.headItemSize[t]].active=!0:this["headTrue"+r.headItemSize[t]].active=!1},t.prototype.onBtnHead1=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(1)},t.prototype.onBtnHead2=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(2)},t.prototype.onBtnHead3=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(3)},t.prototype.onBtnHead4=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(4)},t.prototype.onBtnHead5=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(5)},t.prototype.onBtnHead6=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(6)},t.prototype.onBtnHead7=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(7)},t.prototype.onBtnHead8=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(8)},t.prototype.onBtnHead9=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(9)},t.prototype.onBtnHead10=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(10)},t.prototype.onBtnHead11=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(11)},t.prototype.onBtnHead12=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(12)},t.prototype.onBtnHead13=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(13)},t.prototype.onBtnHead14=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(14)},t.prototype.onBtnHead15=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(15)},t.prototype.onBtnHead16=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(16)},t.prototype.onBtnHead17=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(17)},t.prototype.onBtnHead18=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(18)},t.prototype.onBtnHead19=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.updateHeadImageByServer(19)},t.prototype.updateHeadImageByServer=function(e){if(this.touchFlag){var t=this.itemIdArray[e-1];if("undefined"!=t&&null!=t){var i=c.ME.headUrl.split("/avatar/")[0]+"/avatar/"+t,n={cmd:"user",params:{gameId:28,userId:c.ME.userId,action:"setPurl",purl:i}};a.tcp.send(n),this.node.removeFromParent(!0),this.destroy()}}},t.prototype.onDestroy=function(){s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnClose(null)},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=this.csbRoot.getComponent(cc.Animation);t.play("hide"),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(!0)}.bind(this),this)},t.prototype.onTouchBegan=function(e){return this.touchFlag=!0,this.touchY=e.getLocation().y,!0},t.prototype.onTouchMove=function(e){var t=e.getLocation().y;Math.abs(t-this.touchY)/Math.abs(t)>.04&&(this.touchFlag=!1)},t}(cc.Component);i.LobbyChangeHead=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_lobby_count_down:[function(e,t,i){"use strict";cc._RF.push(t,"a9da4J5PIVH+ZfrXabFf2Gx","fish_lobby_count_down"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../../assets_manager"),o=e("../../model/fish_model"),c=e("../../define/fish_msg_types"),a=e("../../logic/fish_tcp"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t){this.csbRoot=null,this.count_down_bg=null,this._cellType=e,this._roomId=t,this.arena_sprite=null,this.startNode=null,this.start_time_fnt=null,this.goNode=null,this.count_down_time_fnt=null,this.arenaing_sprite=null,this._seconds=0,this._secondsStart=0,this._countDownInfo=[]},t.prototype.onLoad=function(){n.evtCenter.on("evt_lobby_match_info",this.onEventLobbyMatchInfo,this),this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/lobby_room_count_down")),this.node.addChild(this.csbRoot),this.count_down_bg=cc.find("count_down_bg",this.csbRoot),this.arena_sprite=cc.find("count_down_bg/arena_sprite",this.csbRoot),this.startNode=cc.find("count_down_bg/startNode",this.csbRoot),this.start_time_fnt=cc.find("count_down_bg/startNode/start_time_fnt",this.csbRoot),this.goNode=cc.find("count_down_bg/goNode",this.csbRoot),this.count_down_time_fnt=cc.find("count_down_bg/goNode/count_down_time_fnt",this.csbRoot),this.arenaing_sprite=cc.find("count_down_bg/arenaing_sprite",this.csbRoot),this.count_down_bg.active=!1},t.prototype.onDestroy=function(){n.evtCenter.off("evt_lobby_match_info",this.onEventLobbyMatchInfo,this)},t.prototype.onEventLobbyMatchInfo=function(e,t){0==t&&"matchRoom"==this._cellType&&(this.count_down_bg.active=!0,this.arena_sprite.active=!0);var i=o.model.common.getServerNowTime()/1e3;for(var n in e)if(e[n].rid==this._roomId){this._countDownInfo=e[n];var s=e[n].end;this._seconds=s-i,this._secondsStart=e[n].start-i,this.schedule(this._countDownRoom,1)}},t.prototype._countDownRoom=function(){o.model.common.getServerNowTime();if(this._seconds--,this._secondsStart--,this._seconds>0)if(this._secondsStart/60>30){this.count_down_bg.active=!0,this.goNode.active=!1,this.arenaing_sprite.active=!1,this.startNode.active=!0;var e,t,i=new Date(1e3*this._countDownInfo.start),n=i.getHours(),s=i.getMinutes();0==n?e="00":n<10&&(e="0"+n),s<10&&(t="0"+s),this.start_time_fnt.getComponent(cc.Label).string=e+":"+t}else this._secondsStart/60<=30&&this._secondsStart/60>0?(this.count_down_bg.active=!0,this.startNode.active=!1,this.arenaing_sprite.active=!1,this.goNode.active=!0,this.count_down_time_fnt.getComponent(cc.Label).string=this.getFormatTimeFromSeconds(this._secondsStart,!1)):this._secondsStart<=0&&(this.count_down_bg.active=!0,this.startNode.active=!1,this.goNode.active=!1,this.arenaing_sprite.active=!0);else if(this._seconds<=0){this.count_down_bg.active=!1,this.unschedule(this._countDownRoom);var r={cmd:c.msgs.CMD_GAME,params:{action:"cmtb_match_info",gameId:28,userId:o.ME.userId}};a.tcp.send(r)}},t.prototype.getFormatTimeFromSeconds=function(e,t){var i,n,s=e%60,o=e/3600;return 0==o?(n=t?"00:":"",i=e/60):(n=(o<10?"0"+o:o)+":",i=e/60%60),n+((i<10?"0"+i:i)+"")+":"+(s<10?"0"+s:s)},t}(cc.Component);i.LobbyCountDown=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_lobby_diamond:[function(e,t,i){"use strict";cc._RF.push(t,"e5e7fvsze1CtJ8joWEGOHjl","fish_lobby_diamond"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../model/fish_model"),o=e("./fish_buffer"),c=e("../scene/fish_scene"),a=e("../define/fish_event_types"),r=function(e){function t(t,i){var o=e.call(this)||this;return o.diamondQueue=new n.QueueSync(o),o.addChild(o.diamondQueue),o.diamond=s.ME.diamond,o.userId=t,o.fntDiamond=i,o}return __extends(t,e),t.prototype.onEnter=function(){this.diamondQueue.onEnter(),this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString(),c.evtCenter.on(a.evts.EVT_PUSH_DIAMOND,this.onEventPushArr,this),c.evtCenter.on(a.evts.EVT_ADD_DIAMOND_ATONCE,this.onEventAddDiamondMoment,this),c.evtCenter.on(a.evts.EVT_SUB_DIAMOND,this.onEventSubDiamond,this),c.evtCenter.on(a.evts.EVT_RECV_USER_INFO,this.onEventSyncDmdAfterUserInfo,this)},t.prototype.onExit=function(){this.diamondQueue.onExit(),o.buffer.lobbyDiamond=null,c.evtCenter.off(a.evts.EVT_PUSH_DIAMOND,this.onEventPushArr,this),c.evtCenter.off(a.evts.EVT_ADD_DIAMOND_ATONCE,this.onEventAddDiamondMoment,this),c.evtCenter.off(a.evts.EVT_SUB_DIAMOND,this.onEventSubDiamond,this),c.evtCenter.off(a.evts.EVT_RECV_USER_INFO,this.onEventSyncDmdAfterUserInfo,this)},t.prototype.setFntString=function(e){var t=this.diamondQueue.getFlyNum();this.diamond+t!=s.ME.diamond&&(this.diamond=s.ME.diamond-t),this.diamond+=parseInt(e),this.fntDiamond&&(this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString()),c.evtCenter.emit(a.evts.EVT_DIAMOND_INFO_CHG,s.ME.userId,this.diamond)},t.prototype.onEventPushArr=function(e,t,i){e==s.ME.userId&&this.diamondQueue.onPushData(t,i)},t.prototype.onEventAddDiamondMoment=function(e,t){e==s.ME.userId&&(this.diamond+=parseInt(t),this.fntDiamond&&(this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString()),c.evtCenter.emit(a.evts.EVT_DIAMOND_INFO_CHG,s.ME.userId,this.diamond))},t.prototype.onEventSubDiamond=function(e,t){e==s.ME.userId&&this.diamond>=t&&(this.diamond-=parseInt(t),this.fntDiamond&&(this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString()),c.evtCenter.emit(a.evts.EVT_DIAMOND_INFO_CHG,s.ME.userId,this.diamond))},t.prototype.onEventSyncDmdAfterUserInfo=function(){var e=this.diamondQueue.getFlyNum();this.diamond+e!=s.ME.diamond&&(this.diamond=s.ME.diamond-e),this.fntDiamond&&(this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString())},t}(cc.Node);i._LobbyDiamond=r,cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_lobby_exchange_shop_cell:[function(e,t,i){"use strict";cc._RF.push(t,"ec198v3PJ1FwrvlQ/90OWBg","fish_lobby_exchange_shop_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=function(e){function t(){var t=e.call(this)||this;return t.goods_lottery_fnt=null,t.goods_lottery_name=null,t.goods_lottery_icon=null,t._self=null,t.productId=null,t.Button_1=null,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_exchange_shop_cell")),t.addChild(t.csbRoot),t.Button_1=cc.find("Button_1",t.csbRoot),t.goods_lottery_icon=cc.find("goods_lottery_icon",t.csbRoot),t.goods_lottery_name=cc.find("goods_lottery_name",t.csbRoot),t.goods_lottery_fnt=cc.find("goods_lottery_fnt",t.csbRoot),t.Button_1.on(cc.Node.EventType.TOUCH_END,t.onBtnExchange,t),t}return __extends(t,e),t.prototype.onBtnExchange=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this._self&&this._self.onClickExchangeBtn(this.productId,e.currentTarget.name,this.goods_lottery_icon)},t.prototype.setSource=function(e,t,i,s,o){var c=n.AssetsManager.getRes("img/atlas/common");this._self=e,this.productId=t.id,this.Button_1.name=t.innerId+"",s.prize_cost&&o&&(this.goods_lottery_fnt.getComponent(cc.Label).string=s.prize_cost,this.goods_lottery_name.getComponent(cc.Label).string=o,this.goods_lottery_icon.getComponent(cc.Sprite).spriteFrame=c.getSpriteFrame(s.item_icon.split(".")[0]))},t}(cc.Node);i.LobbyExchangeShopCell=s,cc._RF.pop()},{"../../../assets_manager":"assets_manager"}],fish_lobby_exchange_shop:[function(e,t,i){"use strict";cc._RF.push(t,"22a02W1/TFLOocb/9QjOIYE","fish_lobby_exchange_shop"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../define/fish_msg_types"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=e("./fish_lobby_exchange_shop_cell"),d=e("../../fish"),_=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.cellSize=null,t.tableView=null,t.tableViewLayer=null,t.resultData=n.model.shop.exchangeShop,t.lottery_fnt=null,t.cellProductId=null,t.cellTag=null,t.nodePos1=null,t.nodePos2=null,t.nodePos3=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/lobby_exchange_shop")),d.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.lottery_fnt=cc.find("bgNode/lottery_fnt",this.csbRoot),this.nodePos1=cc.find("nodePos1",this.csbRoot),this.nodePos2=cc.find("nodePos2",this.csbRoot),this.nodePos3=cc.find("nodePos3",this.csbRoot),this.tableViewLayer=cc.find("bgNode/tableViewLayer",this.csbRoot),cc.find("bgNode/btnCloseExchange",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnCloseExchange,this);var e=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),e.play("show"),this._generaTableView(),this.lottery_fnt.getComponent(cc.Label).string=n.ME.coupon.toString(),this.tableViewReloadData(),o.evtCenter.on(c.evts.EVT_EXCHANGE_STORE_BUY,this.onEventExchangeStoreBuy,this),o.evtCenter.on(c.evts.EVT_EXCHANGE_BUY_RESULT,this.onEventExchangeBuyResult,this),o.evtCenter.on(c.evts.EVT_RELOAD_EXCHANGE_SHOP,this.onEventReloadExchange,this),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnCloseExchange(null)},t.prototype.onBtnCloseExchange=function(e){o.evtCenter.off(c.evts.EVT_EXCHANGE_STORE_BUY,this.onEventExchangeStoreBuy,this),cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1);var t=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),t.play("hide"),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(!0),this.destroy()}.bind(this),this)},t.prototype._generaTableView=function(){this.tableView||(this.cellSize=cc.size(180,290),this.tableView=cc.find("bgNode/tableViewLayer/tableView",this.csbRoot).getComponent(cc.ScrollView))},t.prototype.tableViewReloadData=function(){for(var e=null,t=0;t<this.resultData.length;t++){(e=new l.LobbyExchangeShopCell).setContentSize(this.cellSize),e.setAnchorPoint(0,0),this.tableView.content.addChild(e);var i=o.configTable.prize_shop[this.resultData[t].innerId],n="";n=o.configTable.item[i.item_id]?o.configTable.item[i.item_id].item_name:"eeee";var s="";s=o.configTable.languageKey[n]?o.configTable.languageKey[n].string_zhcn:4==this.resultData[t].innerId?"500\u94bb\u77f3":"300\u94bb\u77f3",e.setSource(this,this.resultData[t],t,i,s)}},t.prototype.onClickExchangeBtn=function(e,t,i){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this.cellProductId=e,this.cellTag=t,o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u60a8\u786e\u5b9a\u8981\u82b1\u8d39"+o.configTable.prize_shop[t].prize_cost+"\u52cb\u7ae0\u5151\u6362\n\u6b64\u5151\u5956\u9053\u5177\u5417?",2,this.onBtnAction,this)},t.prototype.onBtnAction=function(){var e={cmd:a.msgs.CMD_STORE_FISH,params:{action:"order_transaction",gameId:9999,userId:n.ME.userId,clientId:r.AccountInfo.clientId,prodId:this.cellProductId,count:1,isRecharge:1}};h.tcp.send(e)},t.prototype.onEventExchangeStoreBuy=function(e,t){var i=o.configTable.item,s=o.configTable.prize_shop[this.cellTag].item_id,c=0;i[s]&&(c=Number(i[s].cash_limit)),cc.log(s);var l={cmd:a.msgs.CMD_STORE_FISH,params:{action:"buy",gameId:9999,userId:n.ME.userId,clientId:r.AccountInfo.clientId,orderId:e,prodId:t,cashLimit:c}};h.tcp.send(l)},t.prototype.onEventExchangeBuyResult=function(){n.ME.coupon-=parseInt(o.configTable.prize_shop[this.cellTag].prize_cost);var e=o.configTable.prize_shop[this.cellTag].item_id;if(this.showFlyAnimation(e),101==e||102==e){var t={cmd:a.msgs.CMD_USER_INFO,params:{gameId:9999,userId:n.ME.userId,clientId:r.AccountInfo.clientId}};h.tcp.send(t)}},t.prototype.onEventReloadExchange=function(){this.lottery_fnt.getComponent(cc.Label).string=n.ME.coupon.toString()},t.prototype.showFlyAnimation=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1)},t}(cc.Component);i.LobbyExchangeShop=_,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","./fish_lobby_exchange_shop_cell":"fish_lobby_exchange_shop_cell"}],fish_lobby_game_cell:[function(e,t,i){"use strict";cc._RF.push(t,"d8ad7gkX/JFYZgULT9Ex9Qf","fish_lobby_game_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=function(e){function t(t,i,n,s){var o=e.call(this)||this;return o.ftn_jiesuo=null,o.csbroot=null,o}return __extends(t,e),t.prototype.playAnimation=function(){this.lobbyRoomCell.addAnimation(0,"1",!0)},t.prototype.stopAnimation=function(){},t}(cc.Node);i.LobbySeniorRoom=s;var o=function(e){function t(t){var i=e.call(this)||this;return i.lobbyRoomCell=(new cc.Node).addComponent(sp.Skeleton),i.lobbyRoomCell.premultipliedAlpha=!1,i.lobbyRoomCell.skeletonData=n.AssetsManager.getRes("spine/fish_jingjichang"),i}return __extends(t,e),t.prototype.playAnimation=function(){this.lobbyRoomCell.addAnimation(0,"1",!0)},t.prototype.stopAnimation=function(){},t}(cc.Node);i.LobbyMatchRoom=o;var c=function(e){function t(t,i,n,s){var o=e.call(this)||this;return o.ftn_jiesuo=null,o.csbroot=null,o}return __extends(t,e),t.prototype.playAnimation=function(){this.lobbyRoomCell.addAnimation(0,"1",!0)},t.prototype.stopAnimation=function(){},t}(cc.Node);i.LobbyMiddleRoom=c;var a=function(e){function t(t,i,n,s){var o=e.call(this)||this;return o.ftn_jiesuo=null,o.csbroot=null,o}return __extends(t,e),t.prototype.playAnimation=function(){this.lobbyRoomCell.addAnimation(0,"1",!0)},t.prototype.stopAnimation=function(){},t}(cc.Node);i.LobbyPrimaryRoom=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager"}],fish_lobby_gold:[function(e,t,i){"use strict";cc._RF.push(t,"e3a49JL0RVA3q6QyAOt5Qy0","fish_lobby_gold"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../model/fish_model"),o=e("../scene/fish_scene"),c=e("../define/fish_event_types"),a=e("./fish_buffer"),r=function(e){function t(t,i){var o=e.call(this)||this;return o.lobbyGoldQueue=new n.QueueSync(o),o.addChild(o.lobbyGoldQueue),o.gold=s.ME.gold,o.userId=t,o.fntGold=i,o}return __extends(t,e),t.prototype.onEnter=function(){this.lobbyGoldQueue.onEnter(),this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(s.ME.gold),o.evtCenter.on(c.evts.EVT_PUSH_ACT_GOLD,this.onEventPushArr,this),o.evtCenter.on(c.evts.EVT_ADD_GOLD_ATONCE,this.onEventAddGoldMoment,this),o.evtCenter.on(c.evts.EVT_SUB_GOLD,this.onEventSubGold,this),o.evtCenter.on(c.evts.EVT_RECV_USER_INFO,this.onEventSyncGoldAfterUserInfo,this)},t.prototype.onExit=function(){this.lobbyGoldQueue.onExit(),a.buffer.lobbyGold=null,o.evtCenter.off(c.evts.EVT_PUSH_ACT_GOLD,this.onEventPushArr,this),o.evtCenter.off(c.evts.EVT_ADD_GOLD_ATONCE,this.onEventAddGoldMoment,this),o.evtCenter.off(c.evts.EVT_SUB_GOLD,this.onEventSubGold,this),o.evtCenter.off(c.evts.EVT_RECV_USER_INFO,this.onEventSyncGoldAfterUserInfo,this)},t.prototype.setFntString=function(e){var t=this.lobbyGoldQueue.getFlyNum();this.gold+t!=s.ME.gold&&(this.gold=s.ME.gold-t),this.gold+=parseInt(e),this.fntGold&&(this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold)),o.evtCenter.emit(c.evts.EVT_GOLD_INFO_CHG,s.ME.userId,this.gold)},t.prototype.onEventPushArr=function(e,t,i){e==s.ME.userId&&this.lobbyGoldQueue.onPushData(t,i)},t.prototype.onEventAddGoldMoment=function(e,t){e==s.ME.userId&&(this.gold+=parseInt(t),this.fntGold&&(this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold)),o.evtCenter.emit(c.evts.EVT_GOLD_INFO_CHG,s.ME.userId,this.gold))},t.prototype.onEventSubGold=function(e,t){e==s.ME.userId&&(this.gold-=parseInt(t),this.fntGold&&(this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold)),o.evtCenter.emit(c.evts.EVT_GOLD_INFO_CHG,s.ME.userId,this.gold))},t.prototype.onEventSyncGoldAfterUserInfo=function(){var e=this.lobbyGoldQueue.getFlyNum();this.gold+e!=s.ME.gold&&(this.gold=s.ME.gold-e),this.fntGold&&(this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold))},t}(cc.Node);i._LobbyGold=r,cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_lobby_mail_message_cell:[function(e,t,i){"use strict";cc._RF.push(t,"644e7t6HrVMh4GC+r3+wSnw","fish_lobby_mail_message_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../define/fish_msg_types"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene_login"),c=e("../../logic/fish_tcp"),a=e("../../../assets_manager"),r=function(e){function t(){var t=e.call(this)||this;return t.mailContent=null,t.mailTime=null,t.Panel_1=null,t.enableTouch=!0,t.timeNode=null,t.mailTime_1=null,t.rewardNode=null,t.spMailReward=null,t.btnMailReward=null,t.treasureSp=null,t.resultData=null,t.csbRoot=cc.instantiate(a.AssetsManager.getRes("prefabs/lobby_mail_message_cell")),t.Panel_1=cc.find("Panel_1",t.csbRoot),t.mailContent=cc.find("Panel_1/mailContent",t.csbRoot),t.mailTime=cc.find("Panel_1/rewardNode/mailTime",t.csbRoot),t.timeNode=cc.find("Panel_1/timeNode",t.csbRoot),t.mailTime_1=cc.find("Panel_1/timeNode/mailTime_1",t.csbRoot),t.rewardNode=cc.find("Panel_1/rewardNode",t.csbRoot),t.spMailReward=cc.find("Panel_1/rewardNode/btnMailReward/spMailReward",t.csbRoot),t.btnMailReward=cc.find("Panel_1/rewardNode/btnMailReward",t.csbRoot),t.treasureSp=cc.find("Panel_1/rewardNode/treasureSp",t.csbRoot),t.btnMailReward.getComponent(cc.Button).interactable=!1,t.btnMailReward.on("click",t.onBtnMailReward,t),t}return __extends(t,e),t.prototype.onDestroy=function(){this.btnMailReward.getComponent(cc.Button).interactable=!1},t.prototype.onLoad=function(){this.node.addChild(this.csbRoot),this.btnMailReward.getComponent(cc.Button).interactable=this.enableTouch},t.prototype.onBtnExchange=function(e){},t.prototype._setSource=function(e,t,i){var n=a.AssetsManager.getRes("img/atlas/scale9_8888"),s=a.AssetsManager.getRes("img/atlas/common"),o=a.AssetsManager.getRes("img/atlas/activity");this.resultData=t,t.text&&(this.mailContent.getComponent(cc.Label).string=t.text),t.time&&(this.mailTime.getComponent(cc.Label).string=t.time.substr(5,t.time.length),this.mailTime_1.getComponent(cc.Label).string=t.time.substr(5,t.time.length)),t.hasOwnProperty("attachment")?(this.rewardNode.active=!0,this.timeNode.active=!1,t.hasOwnProperty("isReceived")?(this.btnMailReward.getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("fish_button_disabled"),this.spMailReward.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_common_received"),this.spMailReward.setScale(1.2),this.treasureSp.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame("fish_meirirenwu_9"),this.btnMailReward.getComponent(cc.Button).interactable=!1,this.enableTouch=!1):(this.btnMailReward.id=t.id,this.enableTouch=!0)):(this.timeNode.active=!0,this.rewardNode.active=!1)},t.prototype.onBtnMailReward=function(e){var t={cmd:n.msgs.CMD_MESSAGE,params:{action:"receive",gameId:28,userId:parseInt(s.ME.userId),clientId:o.AccountInfo.clientId,typeid:1,msgid:parseInt(e.node.id)}};c.tcp.send(t),s.model.lobby.mailRewardId=this.resultData.attachment.assets},t}(cc.Component);i.LobbyMailMessageCell=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene_login":"fish_scene_login"}],fish_lobby_mail_message:[function(e,t,i){"use strict";cc._RF.push(t,"90ca9rdN55PWJjYXS6fbUDs","fish_lobby_mail_message"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("./fish_lobby_mail_message_cell"),r=e("../../fish"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbRoot=null,this.cellSize=null,this.tableView=null,this.noMailInfo=null,this.tableViewLayer=null,this.cellCount=e.msgs.length,this.resultData=e.msgs},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_mail_message")),r.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.noMailInfo=cc.find("Node_7/noMailInfo",this.csbRoot),this.tableViewLayer=cc.find("Node_7/tableViewLayer",this.csbRoot),cc.find("Node_7/btnCloseMail",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnCloseMail,this),this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("show"),0==this.cellCount&&(this.noMailInfo.active=!0),this._generaTableView(),o.evtCenter.on(c.evts.EVT_RELOAD_MAIL_MESSAGE,this.onReloadMailMessage,this),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){s.model.lobby.mailFlag=!0,o.evtCenter.off(c.evts.EVT_RELOAD_MAIL_MESSAGE,this.onReloadMailMessage,this),o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnCloseMail(null)},t.prototype.onReloadMailMessage=function(e){this.cellCount=e.msgs.length,this.resultData=e.msgs,this.tableViewReloadData()},t.prototype.onBtnCloseMail=function(e){cc.log("******************************************** onBtnCloseMail"),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.model.lobby.mailFlag=!0,this.csbRoot.stopAllActions();var t=this.csbRoot.getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(!0),this.destroy()}.bind(this),this),t.play("hide")},t.prototype._generaTableView=function(){this.tableView||(this.cellSize=cc.size(655,97),this.tableView=cc.find("Node_7/tableViewLayer/tableView",this.csbRoot).getComponent(cc.ScrollView),this.tableViewReloadData())},t.prototype.tableViewReloadData=function(){this.tableView.content.removeAllChildren();for(var e=0;e<this.cellCount;e++){var t=(new cc.Node).addComponent(a.LobbyMailMessageCell);t.node.setContentSize(this.cellSize),t.node.setAnchorPoint(0,0),t._setSource(this,this.resultData[e],e),this.tableView.content.addChild(t.node)}},t}(cc.Component);i.LobbyMailMessage=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_lobby_mail_message_cell":"fish_lobby_mail_message_cell"}],fish_lobby_next_level_reward:[function(e,t,i){"use strict";cc._RF.push(t,"ae9feZQio9BtqyuR3iy/UeI","fish_lobby_next_level_reward"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../model/fish_model"),c=e("../../fish"),a=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.Panel_1=null,t.group_other=null,t.fntCount=null,t.title=null,t.nodePos1=null,t.nodePos2=null,t.nodePos3=null,t.gift_num=null,t.Items=[],t.ItemNode=[],t.leftTime=5,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/rewards_panel")),c.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/reward_gain"),!1),this.title.setSpriteFrame("fish_next_levle_reward"),this.setSource();for(var e=0;e<this.gift_num;e++)new r(this.Items[e]);this.schedule(this._countDown,1)},t.prototype.onDestroy=function(){this.ItemNode=[]},t.prototype.setSource=function(){for(var e=s.configTable.timeLine[o.ME.level].lvl_gift,t=s.configTable.gift[e],i=[t.Gift1_icon,t.Gift2_icon,t.Gift3_icon,t.Gift4_icon,t.Gift5_icon],n=[t.Gift1_Number,t.Gift2_Number,t.Gift3_Number,t.Gift4_Number,t.Gift5_Number],c=0;c<4;c++)if(0!=n[c]){var a={};a[i[c]]=n[c],this.Items.push(a)}this.gift_num=this.Items.length},t.prototype._countDown=function(){this.leftTime--,this.fntCount.setString(this.leftTime),0==this.leftTime&&(this.unschedule(this._countDown),this.getRewards())},t.prototype.onBtnPanel=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.getRewards()},t.prototype.getRewards=function(){this.Panel_1.setVisible(!1),this.group_other.setVisible(!1),this.node.removeFromParent(!0)},t}(cc.Component);i.LobbyNextLevelReward=a;var r=function(e){function t(t){var i=e.call(this)||this;for(var s in i.csbNode=null,i.board=null,i.Icon=null,i.fntNum=null,i.fntCount=null,i.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/reward_Item")),i.addChild(i.csbNode),t)i.Icon.initWithSpriteFrameName(s);return i.fntNum.setString(t[s]),i}return __extends(t,e),t}(cc.Node);i.RewardNextItem=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_lobby_personal_bag_cell:[function(e,t,i){"use strict";cc._RF.push(t,"88212vHWwRE8YKrUa4DHVdK","fish_lobby_personal_bag_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=function(e){function t(t,i,s,o,c,a){var r=e.call(this)||this;return r.csbRoot=null,r.skillBtn=null,r.skillBtn_0=null,r.skillBtn_1=null,r.fish_icon_sp=null,r.fish_icon_sp_0=null,r.fish_icon_sp_1=null,r.icon_rage=null,r.icon_rage_0=null,r.icon_rage_1=null,r.skillFnt=null,r.skillFnt_0=null,r.skillFnt_1=null,r._taskId=0,r._self=t,r.lightBg=null,r.lightBg_0=null,r.lightBg_1=null,r.skillBuyImage=null,r.skillBuyImage_0=null,r.skillBuyImage_1=null,r.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_personal_bag_cell")),r.addChild(r.csbRoot),r.skillBtn=cc.find("skillBtn",r.csbRoot),r.skillBtn_0=cc.find("skillBtn_0",r.csbRoot),r.skillBtn_1=cc.find("skillBtn_1",r.csbRoot),r.fish_icon_sp=cc.find("fish_icon_sp",r.csbRoot),r.fish_icon_sp_0=cc.find("fish_icon_sp_0",r.csbRoot),r.fish_icon_sp_1=cc.find("fish_icon_sp_1",r.csbRoot),r.icon_rage=cc.find("icon_rage",r.csbRoot),r.icon_rage_0=cc.find("icon_rage_0",r.csbRoot),r.icon_rage_1=cc.find("icon_rage_1",r.csbRoot),r.skillFnt=cc.find("skillFnt",r.csbRoot),r.skillFnt_0=cc.find("skillFnt_0",r.csbRoot),r.skillFnt_1=cc.find("skillFnt_1",r.csbRoot),r.lightBg=cc.find("lightBg",r.csbRoot),r.lightBg_0=cc.find("lightBg_0",r.csbRoot),r.lightBg_1=cc.find("lightBg_1",r.csbRoot),r.lightBtnBg=cc.find("skillBtn/lightBg",r.csbRoot),r.lightBtnBg_0=cc.find("skillBtn_0/lightBg",r.csbRoot),r.lightBtnBg_1=cc.find("skillBtn_1/lightBg",r.csbRoot),r.skillBuyImage=cc.find("skillBuyImage",r.csbRoot),r.skillBuyImage_0=cc.find("skillBuyImage_0",r.csbRoot),r.skillBuyImage_1=cc.find("skillBuyImage_1",r.csbRoot),r.skillBtn.on(cc.Node.EventType.TOUCH_END,r.onBtnSkill,r),r.skillBtn_0.on(cc.Node.EventType.TOUCH_END,r.onBtnSkill_0,r),r.skillBtn_1.on(cc.Node.EventType.TOUCH_END,r.onBtnSkill_1,r),r.setSource(t,i,s,o,c,a),r}return __extends(t,e),t.prototype.setSource=function(e,t,i,o,c,a){var r=n.AssetsManager.getRes("img/atlas/common");this._taskId=t;for(var h=[this.skillBtn,this.skillBtn_0,this.skillBtn_1],l=[this.fish_icon_sp,this.fish_icon_sp_0,this.fish_icon_sp_1],d=[this.skillFnt,this.skillFnt_0,this.skillFnt_1],_=[this.skillBuyImage,this.skillBuyImage_0,this.skillBuyImage_1],f=[this.icon_rage,this.icon_rage_0,this.icon_rage_1],p=[this.lightBtnBg,this.lightBtnBg_0,this.lightBtnBg_1],u=0;u<3;u++){var m=c[3*t+u];if(o[m]){var g=o[m].big_icon.split(".")[0];p[u].active=!0,l[u].active=!0,l[u].getComponent(cc.Sprite).spriteFrame=r.getSpriteFrame(g),3104==m&&(f[u].active=!0,s.ME.vipLevel>4&&(f[u].getComponent(cc.Sprite).spriteFrame=r.getSpriteFrame("icon_rage_2"))),a[m]?(d[u].active=!0,d[u].getComponent(cc.Label).string=a[m].count):(d[u].active=!1,d[u].getComponent(cc.Label).string="0",0==o[m].cash_limit&&(_[u].active=!0)),h[u].name=m}else p[u].active=!1,h[u].active=!1;m==s.model.lobby.checkBagSkill&&(0==u?this._self&&this._self.onParentBtnSkill&&this._self.onParentBtnSkill(this,this._taskId):1==u?this._self&&this._self.onParentBtnSkill_0&&this._self.onParentBtnSkill_0(this,this._taskId):2==u&&this._self&&this._self.onParentBtnSkill_1&&this._self.onParentBtnSkill_1(this,this._taskId))}},t.prototype.onBtnSkill=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this._self&&this._self.onParentBtnSkill&&this._self.onParentBtnSkill(this,this._taskId)},t.prototype.onBtnSkill_0=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this._self&&this._self.onParentBtnSkill_0&&this._self.onParentBtnSkill_0(this,this._taskId)},t.prototype.onBtnSkill_1=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this._self&&this._self.onParentBtnSkill_1&&this._self.onParentBtnSkill_1(this,this._taskId)},t}(cc.Node);i.LobbyBagCell=o,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../model/fish_model":"fish_model"}],fish_lobby_personal_bag:[function(e,t,i){"use strict";cc._RF.push(t,"e9d01NOsfFAPZ9VGAXBjerK","fish_lobby_personal_bag"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../define/fish_msg_types"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=e("./fish_lobby_personal_bag_cell"),d=e("./fish_lobby_bonusexchange_message_box"),_=e("./fish_lobby_bag_item_message"),f=e("../../define/fish_consts"),p=e("../../fish"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.tableViewLayer=null,this.btnNode=null,this.NodeCenter=null,this.bagSkillName=null,this.bagSkillDes=null,this.goodsSp=null,this.iconRage=null,this.dikuang=null,this.resultItems=e,this._cellDelegate=null,this.itemIdArray=[],this.checkItemIdArray=[],this.itemsInfo=null,this.goodsTag=null,this.removeBtnTag=null,this.removeSpriteTag=null,this.removeLeftBtnTag=null,this.removeLeftSpriteTag=null},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_personal_bag")),p.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.tableViewLayer=cc.find("NodeCenter/tableViewLayer",this.csbRoot),this.btnNode=cc.find("NodeCenter/btnNode",this.csbRoot),this.NodeCenter=cc.find("NodeCenter",this.csbRoot),this.bagSkillName=cc.find("NodeCenter/bagSkillName",this.csbRoot),this.bagSkillDes=cc.find("NodeCenter/bagSkillDes",this.csbRoot),this.goodsSp=cc.find("NodeCenter/goodsSpBg/goodsSp",this.csbRoot),this.iconRage=cc.find("NodeCenter/goodsSpBg/iconRage",this.csbRoot),this.dikuang=cc.find("NodeCenter/dikuang",this.csbRoot),cc.find("NodeCenter/btnCloseBag",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnCloseArena,this);var e=(new cc.Node).addComponent(sp.Skeleton);e.node.name="dwc_yxsc",e.premultipliedAlpha=!1,e.skeletonData=n.AssetsManager.getRes("spine/dwc_yxsc"),e.addAnimation(0,"1",!0),e.node.setScale(1),this.dikuang.addChild(e.node,0);var t=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),t.play("show"),this._getResultItemsFromat(),this._setItemId(),this.generaTableView(),this.tableViewReloadData(),this.onShowBagGoods(s.model.lobby.checkBagSkill),o.evtCenter.on(c.evts.EVT_RELOAD_BAG_INFO,this.onEventReloadBagInfo,this),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this),s.ME.openBagFlag=!1},t.prototype.start=function(){cc.find("NodeCenter/dikuang/dwc_yxsc",this.csbRoot).getComponent(sp.Skeleton).setAnimation(0,"1",!0)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_RELOAD_BAG_INFO,this.onEventReloadBagInfo,this),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnCloseArena(null)},t.prototype.onBtnCloseArena=function(e){o.evtCenter.off(c.evts.EVT_RELOAD_BAG_INFO,this.onEventReloadBagInfo,this),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.csbRoot.stopAllActions();var t=this.csbRoot.getComponent(cc.Animation);t.play("hide"),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(),this.destroy()}.bind(this),this)},t.prototype.onEventReloadBagInfo=function(e){this.scheduleOnce(this.reloadBagData,1)},t.prototype.reloadBagData=function(){this.itemIdArray=[],this.checkItemIdArray=[],this.itemsInfo=null,this.goodsTag=null,this.resultItems=null,this.resultItems=s.ME.bagInfo,this._getResultItemsFromat(),this._setItemId(),this.generaTableView(),this.itemsInfo[s.model.lobby.checkBagSkill]||(s.model.lobby.checkBagSkill=3101),this.onShowBagGoods(s.model.lobby.checkBagSkill),this.tableViewReloadData()},t.prototype.generaTableView=function(){this.tableView||(this.tableView=cc.find("NodeCenter/tableViewLayer/tableView",this.csbRoot).getComponent(cc.ScrollView))},t.prototype.tableViewReloadData=function(){var e=Math.ceil(this.itemIdArray.length/3),t=o.configTable.item,i=this._getItemsByPrice(t);this.tableView.content.removeAllChildren();for(var n=0;n<e;n++){var s=new l.LobbyBagCell(this,n,e,i,this.checkItemIdArray,this.itemsInfo);s.setContentSize(314,110),s.setAnchorPoint(0,0),this.tableView.content.addChild(s)}},t.prototype.showBtn=function(e,t,i,n){if(this.removeBtnTag){var s=this.NodeCenter.getChildByName(""+this.removeBtnTag);this.NodeCenter.removeChild(s,!0),s=this.NodeCenter.getChildByName(""+this.removeSpriteTag),this.NodeCenter.removeChild(s,!0)}if(this.removeLeftBtnTag){s=this.NodeCenter.getChildByName(""+this.removeLeftBtnTag);this.NodeCenter.removeChild(s,!0),s=this.NodeCenter.getChildByName(""+this.removeLeftSpriteTag),this.NodeCenter.removeChild(s,!0)}if(this.goodsTag=i,1==e){var c=this._createBtn(t);c.btn.setScale(.7),c.btn.setPosition(this.btnNode.getPosition()),(a=o.utils.createSprite(c.imageUrl,"common")).setPosition(c.btn.getPosition()),this.NodeCenter.addChild(c.btn),this.NodeCenter.addChild(a),c.btn.name=t.toString(),a.name="11",c.btn.on(cc.Node.EventType.TOUCH_END,this.rightBtnClick,this),this.removeBtnTag=t,this.removeSpriteTag=11}else if(2==e){var a,r=this._createBtn(t);r.btn.setScale(.6),r.btn.setPosition(cc.v2(this.btnNode.getPosition().x+r.btn.getContentSize().width/3,this.btnNode.getPosition().y)),(a=o.utils.createSprite(r.imageUrl,"common")).setPosition(r.btn.getPosition()),this.NodeCenter.addChild(r.btn),this.NodeCenter.addChild(a),r.btn.name=t.toString(),a.name="11",r.btn.on(cc.Node.EventType.TOUCH_END,this.rightBtnClick,this),this.removeBtnTag=t,this.removeSpriteTag=11;var h=this._createBtn(n||5);h.btn.setScale(.6),h.btn.setPosition(cc.v2(this.btnNode.getPosition().x-h.btn.getContentSize().width/3,this.btnNode.getPosition().y));var l=o.utils.createSprite(h.imageUrl,"common");l.setPosition(h.btn.getPosition()),this.NodeCenter.addChild(h.btn),this.NodeCenter.addChild(l),h.btn.name="10",l.name="12",h.btn.on(cc.Node.EventType.TOUCH_END,this.leftBtnClick,this),this.removeLeftBtnTag=10,this.removeLeftSpriteTag=12}},t.prototype._createBtn=function(e){var t=new cc.Node;t.addComponent(cc.Button),t.addComponent(cc.Sprite);var i="",s=n.AssetsManager.getRes("img/atlas/scale9_8888");return 3==e?(i="fish_beibao_9",t.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_button_yellow")):1==e?(i="fish_beibao_10",t.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_button_yellow")):4==e?(i="fish_beibao_9",t.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_button_yellow")):2==e?(i="fish_beibao_8",t.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_button_yellow")):6==e?(i="fish_fenjie",t.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_button_yellow")):5==e&&(i="fish_beibao_11",t.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_choujiang_button_blue")),t.getComponent(cc.Button).transition=cc.Button.Transition.SCALE,t.getComponent(cc.Button).zoomScale=1.1,{btn:t,imageUrl:i}},t.prototype.onBackWarning=function(){o.evtCenter.emit(c.evts.EVT_BAG_MONEY_EXCHANGE,2,"",this,this.goodsTag,this.itemsInfo[this.goodsTag])},t.prototype.rightBtnClick=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=o.configTable.item;if("3"==e.currentTarget.name)1==t[this.goodsTag].cash_limit?d.BonusExchange.show(0,2,"",this,this.goodsTag,this.itemsInfo[this.goodsTag].pkg.id):2==t[this.goodsTag].cash_limit&&o.evtCenter.emit(c.evts.EVT_BAG_MONEY_EXCHANGE,2,"",this,this.goodsTag,this.itemsInfo[this.goodsTag]);else if("2"==e.currentTarget.name)this.itemsInfo[this.goodsTag]&&this.itemsInfo[this.goodsTag].count>=999?o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u5df2\u8fbe\u5230\u6570\u91cf\u4e0a\u9650\uff01"):_.BuyItemMessageBox.show(1,2,"",this,this.goodsTag);else if("1"==e.currentTarget.name)_.BuyItemMessageBox.show(2,2,"",this,this.goodsTag);else if("4"==e.currentTarget.name){if(3501==this.goodsTag)s.model.dailytask.isLobby=!0,s.model.activity.requestActivityData(8,!0),this.node.removeFromParent(!0),this.destroy();else if(3502==this.goodsTag||3503==this.goodsTag)s.model.dailytask.isLobby=!0,s.model.activity.requestActivityData(10,!0),this.node.removeFromParent(!0),this.destroy();else if(3122==this.goodsTag)s.model.dailytask.isLobby=!0,s.model.activity.requestActivityData(13,!0),this.node.removeFromParent(!0),this.destroy();else if(1==t[this.goodsTag].use_limit&&this.itemsInfo[this.goodsTag]){var i={cmd:a.msgs.CMD_ITEM,params:{action:"send",gameId:28,userId:Number(s.ME.userId),clientId:r.AccountInfo.clientId,itemId:this.itemsInfo[this.goodsTag].pkg.id,params:this.itemsInfo[this.goodsTag].pkg.actions[0].params}};h.tcp.send(i)}}else if("5"==e.currentTarget.name)if(s.ME.vipLevel>1){var l=(t=o.configTable.item)[this.goodsTag].trade_limit,p=-1;this.itemsInfo[this.goodsTag]&&(p=this.itemsInfo[this.goodsTag].count),p<l?o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u9700\u8981\u62e5\u6709"+l+"\u4e2a\u624d\u53ef\u4ee5\u8d60\u9001\u54e6~"):o.evtCenter.emit(c.evts.EVT_POPUP_PROP_GIVE,this.goodsTag,this.itemsInfo)}else o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u8d60\u9001\u529f\u80fd\u9700\u8981\u5230VIP2\u624d\u80fd\u89e3\u9501\n\u5feb\u53bb\u5347\u7ea7VIP\u7b49\u7ea7\u5427!",2,this.gotoBuyVIp,this);else if("6"==e.currentTarget.name){var u=["\u7d2b","\u84dd","\u9ec4","\u7ea2"][this.goodsTag-f.Item.CRYSTAL_PURPLE];this.itemsInfo[this.goodsTag].count<10?o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u4f60\u7684"+u+"\u6c34\u6676\u4e0d\u8db310\u4e2a\uff0c\u51fb\u6740\u5956\u91d1\u9c7c\u548cBOSS\u53ef\u4ee5\u6389\u843d\u54e6\uff01"):o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u662f\u5426\u5206\u89e310\u4e2a"+u+"\u6676\u77f3",2,this._resolveCrystal,this)}},t.prototype.leftBtnClick=function(e){if(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),3501==this.goodsTag)s.model.dailytask.isLobby=!0,s.model.activity.requestActivityData(8,!0),this.node.removeFromParent(!0);else if(3502==this.goodsTag||3503==this.goodsTag)s.model.dailytask.isLobby=!0,s.model.activity.requestActivityData(10,!0),this.node.removeFromParent(!0);else if(3122==this.goodsTag)s.model.dailytask.isLobby=!0,s.model.activity.requestActivityData(13,!0),this.node.removeFromParent(!0),this.destroy();else if(3601==this.goodsTag)d.BonusExchange.show(3,2,function(e){if(e)if(e=e.replace(/[\r\n]/g,""),cc.log(e),e.length>20)o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u6587\u5b57\u6570\u91cf\u8d85\u51fa,\u8bf7\u8f93\u516520\u4e2a\u4ee5\u5185\u5b57\u7b26.");else if(1==o.configTable.item[this.goodsTag].use_limit&&this.itemsInfo[this.goodsTag]){var t={cmd:a.msgs.CMD_ITEM,params:{action:"sendLed",gameId:28,userId:Number(s.ME.userId),clientId:r.AccountInfo.clientId,itemId:this.itemsInfo[this.goodsTag].pkg.id,params:{text:e}}};h.tcp.send(t)}},this);else if(3602==this.goodsTag){var t=o.configTable.item[this.goodsTag].trade_limit,i=-1;this.itemsInfo[this.goodsTag]&&(i=this.itemsInfo[this.goodsTag].count),s.ME.vipLevel<=1?o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u8d60\u9001\u529f\u80fd\u9700\u8981\u5230VIP2\u624d\u80fd\u89e3\u9501\n\u5feb\u53bb\u5347\u7ea7VIP\u7b49\u7ea7\u5427!",2,this.gotoBuyVIp,this):i<1?o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u9700\u8981\u62e5\u6709"+t+"\u4e2a\u624d\u53ef\u4ee5\u4f7f\u7528\u54e6~"):s.ME.gold<2e6?o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u6700\u5c11\u643a\u5e26\u9700\u8981\u643a\u5e262000000\u91d1\u5e01\u624d\u53ef\u4ee5\u4f7f\u7528\u54e6~"):o.evtCenter.emit(c.evts.EVT_POPUP_PROP_GIVE,this.goodsTag,this.itemsInfo)}else if(s.ME.vipLevel>1){t=o.configTable.item[this.goodsTag].trade_limit,i=-1;this.itemsInfo[this.goodsTag]&&(i=this.itemsInfo[this.goodsTag].count),i<t?o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u9700\u8981\u62e5\u6709"+t+"\u4e2a\u624d\u53ef\u4ee5\u8d60\u9001\u54e6~"):o.evtCenter.emit(c.evts.EVT_POPUP_PROP_GIVE,this.goodsTag,this.itemsInfo)}else o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u8d60\u9001\u529f\u80fd\u9700\u8981\u5230VIP2\u624d\u80fd\u89e3\u9501\n\u5feb\u53bb\u5347\u7ea7VIP\u7b49\u7ea7\u5427!",2,this.gotoBuyVIp,this)},t.prototype.gotoBuyVIp=function(){o.evtCenter.emit(c.evts.EVT_POPUP_VIP_WINDOW,"")},t.prototype.onParentBtnSkill=function(e,t){this._changeVisible(e),e.skillBtn.name>3e3&&(e.lightBg.active=!0,e.lightBg_1.active=!1,e.lightBg_0.active=!1,s.model.lobby.checkBagSkill=e.skillBtn.name,this.onShowBagGoods(e.skillBtn.name))},t.prototype.onParentBtnSkill_0=function(e,t){this._changeVisible(e),e.skillBtn_0.name>3e3&&(e.lightBg_0.active=!0,e.lightBg.active=!1,e.lightBg_1.active=!1,s.model.lobby.checkBagSkill=e.skillBtn_0.name,this.onShowBagGoods(e.skillBtn_0.name))},t.prototype.onParentBtnSkill_1=function(e,t){this._changeVisible(e),e.skillBtn_1.name>3e3&&(e.lightBg_1.active=!0,e.lightBg_0.active=!1,e.lightBg.active=!1,s.model.lobby.checkBagSkill=e.skillBtn_1.name,this.onShowBagGoods(e.skillBtn_1.name))},t.prototype.onShowBagGoods=function(e){var t=n.AssetsManager.getRes("img/atlas/common"),i=o.configTable.item;if(i[e]){3104==e?(this.iconRage.active=!0,s.ME.vipLevel>4?(this.iconRage.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("icon_rage_2"),this.bagSkillName.getComponent(cc.Label).string=o.configTable.languageKey.string_kuangbao2.string_zhcn,this.bagSkillDes.getComponent(cc.Label).string=o.configTable.languageKey.string_kuangbao2miaoshu.string_zhcn):(this.iconRage.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("icon_rage_1"),this.bagSkillName.getComponent(cc.Label).string=o.configTable.languageKey.string_kuangbao1.string_zhcn,this.bagSkillDes.getComponent(cc.Label).string=o.configTable.languageKey[i[e].item_description].string_zhcn)):(this.iconRage.active=!1,this.bagSkillName.getComponent(cc.Label).string=o.configTable.languageKey[i[e].item_name].string_zhcn,this.bagSkillDes.getComponent(cc.Label).string=o.configTable.languageKey[i[e].item_description].string_zhcn),this.goodsSp.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(i[e].big_icon.split(".")[0]);var c=i[e].value,a=i[e].price,r=i[e].cash_limit,h=i[e].use_limit,l=1,d=5;i[e].trade_limit>-1&&(l=2),3602==e?(l=this.itemsInfo[e]&&this.itemsInfo[e].count>0?2:1,d=4):3601!=e&&3501!=e&&3502!=e&&3503!=e&&3122!=e||(l=2,d=4,3601!=e||this.itemsInfo[e]&&this.itemsInfo[e].count>0||(l=1)),cc.log("useLimit = %s, tag2 = %s",h,d),c>0?this.showBtn(l,1,e,d):a>0?this.showBtn(l,2,e,d):r>0?e>=3111&&e<=3114?this.showBtn(l,6,e,d):this.showBtn(l,3,e,d):h>0?this.showBtn(l,4,e,d):3115==e&&this.showBtn(1,5,e,d)}},t.prototype._setItemId=function(){var e=[],t=this.itemsInfo;for(var i in t)e.push(i);var n=["3110","3104","3103","3102","3101","3601","3602"];s.model.common.getServerNowTime()/1e3-1486137600<0&&(n=["3122","3502","3503","3110","3104","3103","3102","3101","3601"]);for(var o=0;o<n.length;o++)e.push(n[o]);this.itemIdArray=this.unique(e)},t.prototype.unique=function(e){e.sort();for(var t=[e[0]],i=1;i<e.length;i++)e[i]!==t[t.length-1]&&t.push(e[i]);return t},t.prototype._getResultItemsFromat=function(){for(var e=this.resultItems.tabs[0].items,t={},i=0;i<e.length;i++){var n=!0,s={},o=null;for(var c in o=e[i].kindId>1e4?e[i].kindId-1e4:e[i].kindId,t)c==o&&(t[c].count=t[c].count+1,n=!1);n&&3088!=o&&(s.count=e[i].count,s.pkg=e[i],t[o]=s,n=!0)}this.itemsInfo=t},t.prototype._getItemsByPrice=function(e){this.checkItemIdArray=[];for(var t={},i=0;i<this.itemIdArray.length;i++){var n=e[this.itemIdArray[i]];n.price>0?(this.checkItemIdArray.push(this.itemIdArray[i]),t[this.itemIdArray[i]]=n):n.cash_limit>0&&this.itemsInfo[n.item_id]?(this.checkItemIdArray.push(this.itemIdArray[i]),t[this.itemIdArray[i]]=n):n.use_limit>0&&this.itemsInfo[n.item_id]?(this.checkItemIdArray.push(this.itemIdArray[i]),t[this.itemIdArray[i]]=n):n.value>0&&this.itemsInfo[n.item_id]?(this.checkItemIdArray.push(this.itemIdArray[i]),t[this.itemIdArray[i]]=n):n.trade_limit>0&&this.itemsInfo[n.item_id]&&(this.checkItemIdArray.push(this.itemIdArray[i]),t[this.itemIdArray[i]]=n)}return t},t.prototype._changeVisible=function(e){this._cellDelegate&&(this._cellDelegate.lightBg.active=!1,this._cellDelegate.lightBg_1.active=!1,this._cellDelegate.lightBg_0.active=!1),this._cellDelegate=e},t.prototype._resolveCrystal=function(){var e={cmd:a.msgs.CMD_GAME,params:{action:"crystalResolve",gameId:28,userId:s.ME.userId,clientId:r.AccountInfo.clientId,itemId:1e4+this.goodsTag}};h.tcp.send(e)},t}(cc.Component);i.LobbyBag=u,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","./fish_lobby_bag_item_message":"fish_lobby_bag_item_message","./fish_lobby_bonusexchange_message_box":"fish_lobby_bonusexchange_message_box","./fish_lobby_personal_bag_cell":"fish_lobby_personal_bag_cell"}],fish_lobby_personal_info_message_box:[function(e,t,i){"use strict";cc._RF.push(t,"840c5GjmPBAJZDryWtPCrY2","fish_lobby_personal_info_message_box"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../model/fish_model"),r=e("../../fish"),h=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.groupOK=null,t.groupCancel=null,t.callback=null,t.target=null,t.anchorChangeName=null,t._editBox=null,t.changNameValue=null,t.btnChangeName=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(s.AssetsManager.getRes("prefabs/lobby_personal_info_message_box")),r.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),cc.find("spBG/anchor/groupOK/btnOK",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnOK,this),cc.find("spBG/anchor/groupCancel/btnCancel",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnCancel,this),this.btnChangeName=cc.find("spBG/anchorChangeName/btnChangeName",this.csbNode),this.btnChangeName.on(cc.Node.EventType.TOUCH_END,this.onBtnChangeName,this),this.groupOK=cc.find("spBG/anchor/groupOK",this.csbNode),this.groupCancel=cc.find("spBG/anchor/groupCancel",this.csbNode),this.anchorChangeName=cc.find("spBG/anchorChangeName",this.csbNode),this.changNameValue=cc.find("spBG/anchorChangeName/changNameValue",this.csbNode),this.initEditBox(),o.evtCenter.on(c.evts.EVT_RANDOM_USER_NAME,this.onEventRandomUserName,this),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_RANDOM_USER_NAME,this.onEventRandomUserName,this),o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnCancel(null)},t.prototype.initEditBox=function(){this.changNameValue.active=!0,this._editBox=this.changNameValue.getComponent(cc.EditBox),this._editBox.node.setAnchorPoint(cc.v2(.5,.5)),this._editBox.string=a.ME.name,this._editBox.fontColor=cc.color(255,255,255),this._editBox.fontSize=26,this._editBox.returnType=cc.EditBox.KeyboardReturnType.DONE,this._editBox.node.on("editing-did-ended",this.editBoxEditingDidEnd,this)},t.prototype.editBoxEditingDidEnd=function(e){this.target.updateUserName=e.string},t.prototype.onBtnOK=function(){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this._hide(),this._callback(),i.personalMessageBox=null,o.evtCenter.off(c.evts.EVT_RANDOM_USER_NAME,this.onEventRandomUserName,this),this.node.removeFromParent(!0),this.destroy()},t.prototype.onBtnCancel=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this._hide(),this._callback(),i.personalMessageBox=null,o.evtCenter.off(c.evts.EVT_RANDOM_USER_NAME,this.onEventRandomUserName,this),this.node.removeFromParent(!0),this.destroy()},t.prototype.onEventRandomUserName=function(e){this._editBox.string=e,this.target.updateUserName=e},t.prototype.onBtnChangeName=function(){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1);var e="",t=o.configTable.user_random_name[Math.floor(60*Math.random()+1)].random1,i=o.configTable.user_random_name[Math.floor(7*Math.random()+1)].random2,n=o.configTable.user_random_name[Math.floor(100*Math.random()+1)].random3;e=0==i?t+n:t+i+n,this._editBox.string=e,this.target.updateUserName=e},t.prototype._show=function(e,t,i){e!==this.unschedule&&"function"==typeof e&&(i=t,t=e,e=1),this.callback=t||null,this.target=i||null;var n=this.csbNode.getComponent(cc.Animation);this.csbNode.stopAllActions(),n.play("show"),e&&e>1?(this.groupOK.x=-90,this.groupCancel.active=!0,this.groupCancel.x=90):(this.groupOK.x=0,this.groupCancel.active=!1)},t.prototype._hide=function(){var e=this.csbNode.getComponent(cc.Animation);this.csbNode.stopAllActions(),e.play("hide")},t.prototype._callback=function(){this.callback&&this.target&&(this.callback.call(this.target),this.callback=null,this.target=null)},t.show=function(e,s,o){i.personalMessageBox||(i.personalMessageBox=(new cc.Node).addComponent(t),cc.director.getScene().addChild(i.personalMessageBox.node,n.View.MSG_BOX)),i.personalMessageBox._show(e,s,o)},t}(cc.Component);i.PersonalMessageBox=h,i.personalMessageBox=null,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_lobby_personal_info:[function(e,t,i){"use strict";cc._RF.push(t,"279b5qJA+5EwJrPz/VLJdgF","fish_lobby_personal_info"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../define/fish_consts"),r=e("../../../config_json"),h=e("../../logic/fish_tcp"),l=e("../../../xmen_interface"),d=e("./fish_lobby_personal_info_message_box"),_=e("../../fish"),f=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.userName=null,t.userSex=null,t.userLevel=null,t.userGunLevel=null,t.userCharm=null,t.userId=null,t.userVip=null,t.userNoble=null,t.updateUserName=null,t.LoadingBar=null,t.userLoadBarFnt=null,t.userVipNode=null,t.vipNodeFnt=null,t.myselfHeadImage1=null,t.dikuang=null,t.account_bound=null,t.btnAccountBound=null,t.userGun=null,t.iconWeapon=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/lobby_personal_info")),_.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.userName=cc.find("PanelNode/userName",this.csbRoot),this.userSex=cc.find("PanelNode/userSex",this.csbRoot),this.userLevel=cc.find("PanelNode/userLevel",this.csbRoot),this.userGunLevel=cc.find("PanelNode/userGunLevel",this.csbRoot),this.userId=cc.find("PanelNode/userId",this.csbRoot),this.userCharm=cc.find("PanelNode/userCharm",this.csbRoot),this.vipNodeFnt=cc.find("PanelNode/userVipNode/vipNodeFnt",this.csbRoot),this.userLoadBarFnt=cc.find("PanelNode/userLoadBarFnt",this.csbRoot),this.LoadingBar=cc.find("PanelNode/LoadingBar",this.csbRoot),this.userVip=cc.find("PanelNode/userVip",this.csbRoot),this.userVipNode=cc.find("PanelNode/userVipNode",this.csbRoot),this.userNoble=cc.find("PanelNode/userNoble",this.csbRoot),this.userGun=cc.find("PanelNode/userGun",this.csbRoot),this.myselfHeadImage1=cc.find("PanelNode/myselfHeadImage1",this.csbRoot),this.btnClosePersonal=cc.find("PanelNode/btnClosePersonal",this.csbRoot),this.btnClosePersonal.on(cc.Node.EventType.TOUCH_END,this.onBtnClosePersonal,this),this.account_bound=cc.find("PanelNode/account_bound",this.csbRoot),this.btnAccountBound=cc.find("PanelNode/btnAccountBound",this.csbRoot),this.dikuang=cc.find("PanelNode/dikuang",this.csbRoot),this.iconWeapon=cc.find("PanelNode/userGun/iconWeapon",this.csbRoot),cc.find("PanelNode/btnUserChangeHead",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnUserHead,this),this.userGun.on(cc.Node.EventType.TOUCH_END,this.onBtnGunClicked,this),this.btnAccountBound.on(cc.Node.EventType.TOUCH_END,this.onBtnLookGift,this),cc.find("PanelNode/Button_43_1_0",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnUserName,this),cc.find("PanelNode/Button_43_1",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnUserSex,this);var e=this.csbRoot.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("loop").wrapMode=cc.WrapMode.Loop}.bind(this),this),e.play("show");var t=cc.find("PanelNode/dikuang/dwc_yxsc",this.csbRoot).getComponent(sp.Skeleton);t.premultipliedAlpha=!1,t.skeletonData=s.AssetsManager.getRes("spine/dwc_yxsc"),t.setAnimation(0,"1",!0),t.node.setScale(1);var i=s.AssetsManager.getRes("img/atlas/user_info");this.setSource();var h=r.config.config_json.main_channel_default;r.config.config_json.sub_channel_default;""!=n.ME.snsId||a.screenItem.indexOf(h),this.account_bound.active=!1,this.btnAccountBound.active=!1,""!=n.ME.phonenumber&&(this.account_bound.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_binding_account")),o.evtCenter.on(c.evts.EVT_SET_USER_INFO,this.onEventSetUserInfo,this),o.evtCenter.on(c.evts.EVT_PERSONAL_RELOAD,this.setSource,this),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_SET_USER_INFO,this.onEventSetUserInfo,this),o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnClosePersonal(null)},t.prototype.onBtnClosePersonal=function(e){n.model.lobby.btnClickHeadFlag=!0,cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this.node.stopAllActions();var t=this.csbRoot.getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(!0)}.bind(this),this),t.play("hide"),o.evtCenter.off(c.evts.EVT_SET_USER_INFO,this.onEventSetUserInfo,this),o.evtCenter.off(c.evts.EVT_PERSONAL_RELOAD,this.setSource,this)},t.prototype.onEventSetUserInfo=function(e,t){cc.log(e,t),"setName"==e?(n.ME.name=t,this.userName.getComponent(cc.Label).string=n.ME.name):"setSex"==e?(n.ME.sex=t,this.userSex.getComponent(cc.Label).string=0==n.ME.sex?"\u5e05\u54e5":"\u7f8e\u5973"):"setPurl"==e&&(n.ME.headUrl=t,o.avatarDownLoader.showHeadImage(n.ME.headUrl,this.myselfHeadImage1))},t.prototype.setSource=function(){var e=s.AssetsManager.getRes("img/atlas/vip");o.avatarDownLoader.showHeadImage(n.ME.headUrl,this.myselfHeadImage1),console.log("============ "+n.model.lobby.gunLevel);var t=n.ME.vipLevel>0?"fish_vip_weapon_"+n.ME.vipLevel:"fish_weapon_2";this.iconWeapon.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame(t);var i=o.configTable.languageKey[o.configTable.weapon[n.model.lobby.gunLevel].weapon_name].string_zhcn;this.userName.getComponent(cc.Label).string=n.ME.name,this.userSex.getComponent(cc.Label).string=0==n.ME.sex?"\u5e05\u54e5":"\u7f8e\u5973",this.userLevel.getComponent(cc.Label).string=n.ME.level.toString(),this.userGunLevel.getComponent(cc.Label).string="\u70ae\u7b49\u7ea7: "+i,this.userId.getComponent(cc.Label).string=n.ME.userId.toString(),this.userCharm.getComponent(cc.Label).string=n.ME.charm.toString(),0==n.ME.vipLevel?this.userVip.getComponent(cc.Label).string="\u666e\u901a\u7528\u6237":(this.userVip.active=!1,this.userVipNode.active=!0,this.vipNodeFnt.getComponent(cc.Label).string=n.ME.vipLevel.toString());var c=n.ME.exp,a=o.configTable.user_level[n.ME.level];a.total_exp>1e5?this.userLoadBarFnt.setScale(.8):a.total_exp>1e6?this.userLoadBarFnt.setScale(.7):a.total_exp>1e7&&(this.userLoadBarFnt.setScale(.7),this.userLoadBarFnt.x+=10),n.ME.isMember&&(this.userNoble.getComponent(cc.Label).string="\u5269\u4f59 "+n.ME.remainDays+" \u5929");var r=o.configTable.user_level[1==n.ME.level?n.ME.level:n.ME.level-1].total_exp,h=c-r>0?c-r:c,l=o.configTable.user_level[n.ME.level].exp;this.userLoadBarFnt.getComponent(cc.Label).string=h+"/"+l,this.LoadingBar.getComponent(cc.ProgressBar).progress=h/l*100},t.prototype.onBtnGunClicked=function(e){},t.prototype.onBtnVipRank=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),o.evtCenter.emit(c.evts.EVT_POPUP_VIP_WINDOW,"")},t.prototype.onBtnNoble=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),o.evtCenter.emit(c.evts.EVT_POPUP_NOBLE_GIFT)},t.prototype.onBtnUserName=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),d.PersonalMessageBox.show(2,this.setUserInfoCallBack,this)},t.prototype.onBtnUserSex=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1);var t=0;t=0==n.ME.sex?1:0;var i={cmd:"user",params:{gameId:28,userId:n.ME.userId,action:"setSex",sex:t}};h.tcp.send(i)},t.prototype.onBtnLookGift=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),l.xmen.SDKInterfaceManager.upgradeAccount()},t.prototype.setUserInfoCallBack=function(){if(null!=this.updateUserName&&""!=this.updateUserName)if(this.getStringToLength(this.updateUserName)>14)o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u540d\u79f0\u6700\u591a\u4e03\u4e2a\u5b57");else{var e={cmd:"user",params:{gameId:28,userId:n.ME.userId,action:"setName",name:this.updateUserName}};h.tcp.send(e)}},t.prototype.getStringToLength=function(e){for(var t=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);t+=n>=0&&n<=128?1:2}return t},t.prototype.onBtnUserHead=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),o.evtCenter.emit(c.evts.EVT_POPUP_CHANGE_HEAD)},t}(cc.Component);i.LobbyPersonalInfo=f,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../../config_json":"config_json","../../../xmen_interface":"xmen_interface","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_lobby_personal_info_message_box":"fish_lobby_personal_info_message_box"}],fish_lobby_quick_game:[function(e,t,i){"use strict";cc._RF.push(t,"6de19TjU8JM/7WSTMiH/80B","fish_lobby_quick_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.Sprite_1_0=null,t.Sprite_1=null,t.fish_youxiting_2_3=null,t.fish_youxiting_1_2=null,t.fish_youxiting_3_1=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/quick_game")),this.node.addChild(this.csbRoot),this.csbRoot.getComponent(cc.Animation).play("animation0"),this.Sprite_1=cc.find("Node_1/Sprite_1",this.csbRoot),this.Sprite_1_0=cc.find("Node_1/Sprite_1_0",this.csbRoot),this.fish_youxiting_2_3=cc.find("Node_1/fish_youxiting_2_3",this.csbRoot),this.fish_youxiting_1_2=cc.find("Node_1/fish_youxiting_1_2",this.csbRoot),this.fish_youxiting_3_1=cc.find("Node_1/fish_youxiting_3_1",this.csbRoot)},t.prototype.onBtnMoreGame=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.evtCenter.emit(o.evts.EVT_POPUP_MORE_GAME)},t.prototype.setBtnSize=function(e){this.Sprite_1_0.setScale(e),this.Sprite_1.setScale(e),this.fish_youxiting_2_3.setScale(e),this.fish_youxiting_1_2.setScale(e),this.fish_youxiting_3_1.setScale(e)},t}(cc.Component);i.LobbyQuickGame=c,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene"}],fish_lobby_quick_start:[function(e,t,i){"use strict";cc._RF.push(t,"8387fnmeUpBxYaozh1ykWg/","fish_lobby_quick_start"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../define/fish_msg_types"),c=e("../../scene/fish_scene_login"),a=e("../../logic/fish_tcp"),r=e("../../fish"),h=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.Node=null,t.guide_mask=null,t.guide_arrow=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/quick_start")),r.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.Node=cc.find("Node",this.csbRoot),this.guide_mask=cc.find("guide_mask",this.csbRoot),this.guide_arrow=cc.find("guide_arrow",this.csbRoot),this.btnQuickStart=cc.find("Node/btnQuickStart",this.csbRoot),this.quickStart=this.btnQuickStart.getChildByName("quick_start").getComponent(sp.Skeleton),this.quickStart.premultipliedAlpha=!1,this.quickStart.skeletonData=n.AssetsManager.getRes("spine/quick_start"),this.quickStart.setAnimation(0,"1",!0),this.btnQuickStart.on(cc.Node.EventType.TOUCH_END,this.onBtnQuickStart,this),s.model.guide.weaponGuide_30&&(s.model.guide.weaponGuide_30=!1,this.onBtnQuickStart(null))},t.prototype.onBtnQuickStart=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t={cmd:o.msgs.CMD_GAME,params:{action:"quick_start",gameId:28,userId:s.ME.userId,clientId:c.AccountInfo.clientId}};a.tcp.send(t)},t}(cc.Component);i.LobbyQuickStart=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene_login":"fish_scene_login"}],fish_lobby_ranking_cell:[function(e,t,i){"use strict";cc._RF.push(t,"90310nTKjxGG6hlCgNWPpom","fish_lobby_ranking_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=function(e){function t(t,i,s,o){var c=e.call(this)||this;return c.ranking_Num=null,c.ranking_bg=null,c.ranking_name=null,c.ranking_have_text=null,c.ranking_NumFnt=null,c.ranking_have_image=null,c.HeadImage=null,c.ranking_vipsp=null,c.ranking_vip=null,c.ranking_level=null,c.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_ranking_cell")),c.ranking_bg=cc.find("ranking_bg",c.csbRoot),c.ranking_Num=cc.find("ranking_Num",c.csbRoot),c.ranking_NumFnt=cc.find("ranking_NumFnt",c.csbRoot),c.HeadImage=cc.find("HeadImage",c.csbRoot),c.ranking_name=cc.find("ranking_name",c.csbRoot),c.ranking_have_text=cc.find("ranking_have_text",c.csbRoot),c.ranking_have_image=cc.find("ranking_have_image",c.csbRoot),c.ranking_vipsp=cc.find("ranking_vipsp",c.csbRoot),c.ranking_vip=cc.find("ranking_vip",c.csbRoot),c.ranking_level=cc.find("ranking_level",c.csbRoot),c.addChild(c.csbRoot),c.setSource(t,i,s,o),c}return __extends(t,e),t.prototype.setSource=function(e,t,i,c){var a=n.AssetsManager.getRes("img/atlas/rank");if(i.detail&&""!=i.detail.headUrl?o.avatarDownLoader.showHeadImage(i.detail.headUrl,this.HeadImage):this.HeadImage.active=!1,s.ME.userId,i.userId,i.rank<=3){var r=i.rank+3;this.ranking_Num.getComponent(cc.Sprite).spriteFrame=a.getSpriteFrame("fish_paihangbang_"+r),this.ranking_NumFnt.active=!1}else this.ranking_Num.active=!1,this.ranking_NumFnt.active=!0,this.ranking_NumFnt.getComponent(cc.Label).string=i.rank;i.detail&&(this.ranking_name.getComponent(cc.Label).string=i.detail.name,this.ranking_have_text.getComponent(cc.Label).string=i.detail.rankValue,i.detail.vipLv>0?this.ranking_vip.getComponent(cc.Label).string=i.detail.vipLv:(this.ranking_vip.active=!1,this.ranking_vipsp.active=!1),this.ranking_level.getComponent(cc.Label).string="Lv."+i.detail.uLv),"chip"==t||("exp"==t?(this.ranking_have_image.setScale(1),this.ranking_have_image.getComponent(cc.Sprite).spriteFrame=a.getSpriteFrame("fish_paihangbang_20")):"charm"==t&&(this.ranking_have_image.setScale(1),this.ranking_have_image.getComponent(cc.Sprite).spriteFrame=a.getSpriteFrame("fish_paihangbang_21")))},t}(cc.Node);i.LobbyRankingCell=c,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_lobby_ranking:[function(e,t,i){"use strict";cc._RF.push(t,"3b929h19ohJKIgSEiMR+STe","fish_lobby_ranking"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("./fish_lobby_ranking_cell"),r=e("../../buffer/fish_buffer"),h=e("../../fish"),l=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.cellSize=null,t.tableView=null,t.tableViewLayer=null,t.resultData=n.model.lobby.fishRichRanking,t.rankingType="chip",t.dikuang=null,t.btnRichImage=null,t.btnGradeImage=null,t.btnCharmImage=null,t.radiobutton_1=null,t.radiobutton_2=null,t.radiobutton_3=null,t.btnRich=null,t.btnGrade=null,t.btnCharm=null,t.myself_rank_have=null,t.myself_rank_have_txt=null,t.myself_rank_level=null,t.myself_rank_name=null,t.myself_rank_head=null,t.myself_rank_fnt=null,t.myself_rank_sp=null,t.myself_rank_vip=null,t.myself_head_image=null,t.myself_rank_vipsp=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/lobby_ranking")),h.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.dikuang=cc.find("nodeCenter/dikuang",this.csbRoot),this.btnRichImage=cc.find("nodeCenter/btnRich/btnRichImage_0",this.csbRoot),this.btnGradeImage=cc.find("nodeCenter/btnGrade/btnGradeImage",this.csbRoot),this.btnCharmImage=cc.find("nodeCenter/btnCharm/btnCharmImage",this.csbRoot),this.radiobutton_1=cc.find("nodeCenter/radiobutton_1",this.csbRoot),this.radiobutton_2=cc.find("nodeCenter/radiobutton_2",this.csbRoot),this.radiobutton_3=cc.find("nodeCenter/radiobutton_3",this.csbRoot),this.btnRich=cc.find("nodeCenter/btnRich",this.csbRoot),this.btnGrade=cc.find("nodeCenter/btnGrade",this.csbRoot),this.btnCharm=cc.find("nodeCenter/btnCharm",this.csbRoot),this.myself_rank_have=cc.find("nodeCenter/myselfRankNode/myself_rank_have",this.csbRoot),this.myself_rank_have_txt=cc.find("nodeCenter/myselfRankNode/myself_rank_have_txt",this.csbRoot),this.myself_rank_level=cc.find("nodeCenter/myselfRankNode/myself_rank_level",this.csbRoot),this.myself_rank_name=cc.find("nodeCenter/myselfRankNode/myself_rank_name",this.csbRoot),this.myself_rank_head=cc.find("nodeCenter/myselfRankNode/myself_rank_head",this.csbRoot),this.myself_rank_fnt=cc.find("nodeCenter/myselfRankNode/myself_rank_fnt",this.csbRoot),this.myself_rank_sp=cc.find("nodeCenter/myselfRankNode/myself_rank_sp",this.csbRoot),this.myself_rank_vip=cc.find("nodeCenter/myselfRankNode/myself_rank_vip",this.csbRoot),this.myself_head_image=cc.find("nodeCenter/myselfRankNode/myself_head_image",this.csbRoot),this.myself_rank_vipsp=cc.find("nodeCenter/myselfRankNode/myself_rank_vipsp",this.csbRoot),this.tableViewLayer=cc.find("nodeCenter/tableViewLayer",this.csbRoot),cc.find("nodeCenter/btnCloseRanking",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnCloseRanking,this),this.btnRich.on(cc.Node.EventType.TOUCH_END,this.onBtnRich,this),this.btnGrade.on(cc.Node.EventType.TOUCH_END,this.onBtnGrade,this),this.btnCharm.on(cc.Node.EventType.TOUCH_END,this.onBtnCharm,this);var e=s.AssetsManager.getRes("img/atlas/rank");this.csbRoot.getComponent(cc.Animation).play("show"),this._setMySelfSource("chip"),this._generaTableView(),this.btnRichImage.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_paihangbang_14"),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnCloseRanking(null)},t.prototype.onBtnCloseRanking=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this.csbRoot.stopAllActions();var t=this.csbRoot.getComponent(cc.Animation);t.play("hide"),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(),this.destroy()}.bind(this),this)},t.prototype._generaTableView=function(){this.tableView||(this.cellSize=cc.size(720,79),this.tableView=cc.find("nodeCenter/tableViewLayer/tableView",this.csbRoot).getComponent(cc.ScrollView),this.tableViewReloadData(),this.tableView.scrollToPercentVertical(1))},t.prototype.tableViewReloadData=function(){this.tableView.content.removeAllChildren();for(var e=0;e<this.resultData.length;e++){var t=this.resultData[e],i=new a.LobbyRankingCell(this,this.rankingType,t,e);i.setContentSize(this.cellSize),i.setAnchorPoint(0,0),this.tableView.content.addChild(i)}},t.prototype.onBtnRich=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this._setMySelfSource("chip"),this.rankingType="chip",this.resultData=n.model.lobby.fishRichRanking,this.tableViewReloadData(),this.radiobutton_1.active=!0,this.radiobutton_2.active=!1,this.radiobutton_3.active=!1},t.prototype.onBtnGrade=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this._setMySelfSource("exp"),this.rankingType="exp",this.resultData=n.model.lobby.fishGradeRanking,cc.log("rank exp:"+JSON.stringify(this.resultData)),this.tableViewReloadData(),this.radiobutton_1.active=!1,this.radiobutton_2.active=!0,this.radiobutton_3.active=!1},t.prototype.onBtnCharm=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this._setMySelfSource("charm"),this.rankingType="charm",this.resultData=n.model.lobby.fishCharmRanking,this.tableViewReloadData(),this.radiobutton_1.active=!1,this.radiobutton_2.active=!1,this.radiobutton_3.active=!0},t.prototype._setMySelfSource=function(e){var t=s.AssetsManager.getRes("img/atlas/rank"),i=s.AssetsManager.getRes("img/atlas/common"),c=null;"chip"==e?((c=n.model.lobby.mySelfRichRanking)&&-1!=c.rank&&c.rank<=1e3?this._setMyselfInfoByStaute(!0,c.rank):this._setMyselfInfoByStaute(!1,c.rank),this.myself_rank_have.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_101"),this.myself_rank_have.setScale(.7),this.myself_rank_have_txt.getComponent(cc.Label).string=0==c.score?o.utils.formatNumber(r.buffer.lobbyGold.gold):c.score):"exp"==e?((c=n.model.lobby.mySelfGradeRanking)&&-1!=c.rank&&c.rank<=500?this._setMyselfInfoByStaute(!0,c.rank):this._setMyselfInfoByStaute(!1,c.rank),this.myself_rank_have.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_paihangbang_20"),this.myself_rank_have.setScale(1),this.myself_rank_have_txt.getComponent(cc.Label).string=0==c.score?o.utils.formatNumber(n.ME.exp):c.score):"charm"==e&&((c=n.model.lobby.mySelfCharmRanking)&&-1!=c.rank&&c.rank<=500?this._setMyselfInfoByStaute(!0,c.rank):this._setMyselfInfoByStaute(!1,c.rank),this.myself_rank_have.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_paihangbang_21"),this.myself_rank_have.setScale(1),this.myself_rank_have_txt.getComponent(cc.Label).string=0==c.score?o.utils.formatNumber(n.ME.charm):c.score)},t.prototype._setMyselfInfoByStaute=function(e,t){var i=s.AssetsManager.getRes("img/atlas/rank");if(e)if(t<=3){var c=t+3;this.myself_rank_sp.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_paihangbang_"+c),this.myself_rank_fnt.active=!1,this.myself_rank_sp.active=!0}else this.myself_rank_fnt.getComponent(cc.Label).string=t,this.myself_rank_fnt.active=!0,this.myself_rank_sp.active=!1;else this.myself_rank_fnt.active=!1,this.myself_rank_sp.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_paihangbang_22"),this.myself_rank_sp.active=!0;this.myself_rank_level.getComponent(cc.Label).string="Lv."+n.ME.level,this.myself_rank_name.getComponent(cc.Label).string=n.ME.name,o.avatarDownLoader.showHeadImage(n.ME.headUrl,this.myself_head_image),n.ME.vipLevel>0?this.myself_rank_vip.getComponent(cc.Label).string=n.ME.vipLevel.toString():(this.myself_rank_vip.active=!1,this.myself_rank_vipsp.active=!1)},t}(cc.Component);i.LobbyRanking=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_lobby_ranking_cell":"fish_lobby_ranking_cell"}],fish_lobby_reward_panel:[function(e,t,i){"use strict";cc._RF.push(t,"f1c6aCisupGEa/L7Nv1/7Qy","fish_lobby_reward_panel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../buffer/fish_buffer"),r=e("../../fish"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t){this.csbNode=null,this.Panel_1=null,this.group_other=null,this.fntCount=null,this.archor=null,this.left=null,this.top=null,this.nodePos1=null,this.nodePos2=null,this.nodePos3=null,this.nodePos4=null,this._selfRewardText=t,this.inviteFriendsText=null,this.gift_num=e.length,this.Items=e,this.ItemNode=[],this.leftTime=5,this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/rewards_panel")),r.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/reward_gain"),!1),this.csbNode.getComponent(cc.Animation).play("show"),this.Panel_1=cc.find("Panel_1",this.csbNode),this.archor=cc.find("archor",this.csbNode),this.group_other=cc.find("archor/group_other",this.csbNode),this.fntCount=cc.find("archor/group_other/fntCount",this.csbNode),this.nodePos1=cc.find("archor/nodePos1",this.csbNode),this.nodePos2=cc.find("archor/nodePos2",this.csbNode),this.nodePos3=cc.find("archor/nodePos3",this.csbNode),this.nodePos4=cc.find("archor/nodePos4",this.csbNode),this.inviteFriendsText=cc.find("archor/group_other/inviteFriendsText",this.csbNode),this.Panel_1.on(cc.Node.EventType.TOUCH_END,this.onBtnPanel,this)},t.prototype.onLoad=function(){for(var e=0;e<this.gift_num;e++){var t=cc.find("archor/item_"+this.gift_num+"/nodeItem"+this.gift_num+"_"+e,this.csbNode),i=new l(this.Items[e]);t.addChild(i),this.ItemNode.push(t)}this._selfRewardText&&(this.inviteFriendsText.active=!0,this.inviteFriendsText.getComponent(cc.Label).string=this._selfRewardText),this.schedule(this._countDown,1)},t.prototype.onDestroy=function(){this.ItemNode=[]},t.prototype._countDown=function(){this.leftTime--,this.fntCount.getComponent(cc.Label).string=this.leftTime+"",0==this.leftTime&&(this.unschedule(this._countDown),this.getRewards())},t.prototype.onBtnPanel=function(e){this.unschedule(this._countDown),this.getRewards()},t.prototype.getRewards=function(){this.scheduleOnce(this.removePanel,1),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/fly_item"),!1),this.Panel_1.active=!1,this.group_other.active=!1;for(var e=this.nodePos1.getPosition(),t=this.nodePos2.getPosition(),i=this.nodePos3.getPosition(),s=this.nodePos4.getPosition(),o=0;o<this.gift_num;o++)if(101==this.Items[o].giftId)this.ItemNode[o].gold=this.Items[o].giftNum,a.buffer.pushGold(c.ME.userId,this.ItemNode[o].gold,.7),this.ItemNode[o].runAction(cc.sequence(cc.spawn(cc.moveTo(.7,e),cc.scaleTo(.7,.5)),cc.removeSelf()));else if(102==this.Items[o].giftId)this.ItemNode[o].diamond=this.Items[o].giftNum,a.buffer.pushDiamond(c.ME.userId,this.ItemNode[o].diamond,.7),this.ItemNode[o].runAction(cc.sequence(cc.spawn(cc.moveTo(.7,t),cc.scaleTo(.7,.5)),cc.removeSelf()));else if(103==this.Items[o].giftId){var r=parseInt(this.Items[o].giftNum),h=parseInt(this.Items[o].giftId);a.buffer.pushItem(c.ME.userId,h,r,1),this.ItemNode[o].runAction(cc.sequence(cc.spawn(cc.moveTo(.7,s),cc.scaleTo(.7,.5)),cc.removeSelf()))}else c.model.drop.updateBag(),this.ItemNode[o].runAction(cc.sequence(cc.spawn(cc.moveTo(.7,i),cc.scaleTo(.7,.5)),cc.removeSelf()))},t.prototype.removePanel=function(){this._selfRewardText&&c.model.lobby.inviteFriendsDiamond>0&&s.evtCenter.emit(o.evts.EVT_POPUP_INVITEFRIENDS_DIAMOND),this.node.removeFromParent(!0),this.destroy()},t}(cc.Component);i.RewardLobby=h;var l=function(e){function t(t){var i=e.call(this)||this;i.csbNode=null,i.board=null,i.Icon=null,i.fntNum=null,i.fntCount=null,i.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/reward_Item")),i.addChild(i.csbNode),i.board=cc.find("board",i.csbNode),i.Icon=cc.find("Icon",i.csbNode),i.fntNum=cc.find("fntNum",i.csbNode);var o=n.AssetsManager.getRes("img/atlas/common");return i.Icon.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame(t.giftIcon.split(".")[0]),i.fntNum.getComponent(cc.Label).string=s.utils.formatNumber(t.giftNum),i}return __extends(t,e),t}(cc.Node);i.RewardItem=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_lobby_room_cell:[function(e,t,i){"use strict";cc._RF.push(t,"f3b008N4uJNf4IIiDI/J06F","fish_lobby_room_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("./fish_lobby_count_down"),o=function(e){function t(t,i,s,o){var c=e.call(this)||this;return c.ftn_jiesuo=null,c.ftn_paobei=null,c.flag_lock=null,c.count_down_bg=null,c.csbroot=null,c.lobbyRoomCell=(new cc.Node).addComponent(sp.Skeleton),c.lobbyRoomCell.premultipliedAlpha=!1,c.lobbyRoomCell.skeletonData=n.AssetsManager.getRes("spine/dwc_bhjy"),c.lobbyRoomCell.addAnimation(0,"1",!0),c.lobbyRoomCell.node.setScale(.8),c.addChild(c.lobbyRoomCell.node),c.csbroot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_room_unlock")),c.ftn_jiesuo=cc.find("count_down_bg/ftn_jiesuo",c.csbroot).getComponent(cc.Label),c.ftn_paobei=cc.find("flag_lock/ftn_paobei",c.csbroot).getComponent(cc.Label),c.flag_lock=cc.find("flag_lock",c.csbroot),c.count_down_bg=cc.find("count_down_bg",c.csbroot),c.csbroot.setPosition(c.csbroot.getPosition().add(cc.v2(0,-190))),c.lobbyRoomCell.node.addChild(c.csbroot),c.ftn_jiesuo.string="300",c.ftn_paobei.string="300",s>=o.Min_Bet?c.flag_lock.active=!1:(c.lobbyRoomCell.node.color=cc.color(125,125,125),c.count_down_bg.active=!1),c}return __extends(t,e),t.prototype.playAnimation=function(){this.lobbyRoomCell.setAnimation(0,"1",!0),this.lobbyRoomCell.paused=!1},t.prototype.stopAnimation=function(){this.lobbyRoomCell.paused=!0},t}(cc.Node);i.LobbySeniorRoom=o;var c=function(e){function t(t){var i=e.call(this)||this;if(i.lobbyRoomCell=(new cc.Node).addComponent(sp.Skeleton),i.lobbyRoomCell.premultipliedAlpha=!1,i.lobbyRoomCell.skeletonData=n.AssetsManager.getRes("spine/fish_jingjichang"),i.lobbyRoomCell.addAnimation(0,"1",!0),i.addChild(i.lobbyRoomCell.node),t>=100){var o=(new cc.Node).addComponent(s.LobbyCountDown);o.ctor("matchRoom"),i.lobbyRoomCell.node.addChild(o.node)}else i.lobbyRoomCell.node.color=cc.color(125,125,125);return i}return __extends(t,e),t.prototype.playAnimation=function(){this.lobbyRoomCell.setAnimation(0,"1",!0),this.lobbyRoomCell.paused=!1},t.prototype.stopAnimation=function(){this.lobbyRoomCell.paused=!0},t}(cc.Node);i.LobbyMatchRoom=c;var a=function(e){function t(t,i,o,c){var a=e.call(this)||this;if(a.ftn_jiesuo=null,a.ftn_paobei=null,a.flag_lock=null,a.count_down_bg=null,a.csbroot=null,a.lobbyRoomCell=(new cc.Node).addComponent(sp.Skeleton),a.lobbyRoomCell.premultipliedAlpha=!1,a.lobbyRoomCell.skeletonData=n.AssetsManager.getRes("spine/dwc_sqsy"),a.lobbyRoomCell.addAnimation(0,"1",!0),a.lobbyRoomCell.node.setScale(.8),a.addChild(a.lobbyRoomCell.node),a.csbroot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_room_unlock")),a.ftn_jiesuo=cc.find("count_down_bg/ftn_jiesuo",a.csbroot).getComponent(cc.Label),a.ftn_paobei=cc.find("flag_lock/ftn_paobei",a.csbroot).getComponent(cc.Label),a.flag_lock=cc.find("flag_lock",a.csbroot),a.count_down_bg=cc.find("count_down_bg",a.csbroot),a.csbroot.setPosition(a.csbroot.getPosition().add(cc.v2(0,-190))),a.lobbyRoomCell.node.addChild(a.csbroot),a.ftn_jiesuo.string="30",a.ftn_paobei.string="30",o>=c.Min_Bet){var r=(new cc.Node).addComponent(s.LobbyCountDown);r.ctor("middleRoom",i.roomId),a.lobbyRoomCell.node.addChild(r.node),a.flag_lock.active=!1}else a.lobbyRoomCell.node.color=cc.color(125,125,125),a.count_down_bg.active=!1;return a}return __extends(t,e),t.prototype.playAnimation=function(){this.lobbyRoomCell.setAnimation(0,"1",!0),this.lobbyRoomCell.paused=!1},t.prototype.stopAnimation=function(){this.lobbyRoomCell.paused=!0},t}(cc.Node);i.LobbyMiddleRoom=a;var r=function(e){function t(t,i,s,o){var c=e.call(this)||this;return c.ftn_jiesuo=null,c.ftn_paobei=null,c.flag_lock=null,c.count_down_bg=null,c.csbroot=null,c.lobbyRoomCell=(new cc.Node).addComponent(sp.Skeleton),c.addChild(c.lobbyRoomCell.node),c.lobbyRoomCell.premultipliedAlpha=!1,c.lobbyRoomCell.skeletonData=n.AssetsManager.getRes("spine/dwc_qhtx"),c.lobbyRoomCell.addAnimation(0,"1",!0),c.lobbyRoomCell.node.setScale(.8),c.csbroot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_room_unlock")),c.ftn_jiesuo=cc.find("count_down_bg/ftn_jiesuo",c.csbroot).getComponent(cc.Label),c.ftn_paobei=cc.find("flag_lock/ftn_paobei",c.csbroot).getComponent(cc.Label),c.flag_lock=cc.find("flag_lock",c.csbroot),c.count_down_bg=cc.find("count_down_bg",c.csbroot),c.csbroot.setPosition(c.csbroot.getPosition().add(cc.v2(0,-190))),c.lobbyRoomCell.node.addChild(c.csbroot),c.ftn_jiesuo.string="1",c.ftn_paobei.string="1",s>=o.Min_Bet?c.flag_lock.active=!1:(c.lobbyRoomCell.node.color=cc.color(125,125,125),c.count_down_bg.active=!1),c}return __extends(t,e),t.prototype.playAnimation=function(){this.lobbyRoomCell.setAnimation(0,"1",!0),this.lobbyRoomCell.paused=!1},t.prototype.stopAnimation=function(){this.lobbyRoomCell.paused=!0},t}(cc.Node);i.LobbyPrimaryRoom=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","./fish_lobby_count_down":"fish_lobby_count_down"}],fish_lobby_rooms:[function(e,t,i){"use strict";cc._RF.push(t,"f116abqY4NJuKnJMeEMHDfz","fish_lobby_rooms"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../../assets_manager"),a=e("../../define/fish_msg_types"),r=e("../../logic/fish_tcp"),h=e("../../scene/fish_scene_login"),l=e("./fish_lobby_room_cell"),d=function(e){function t(){var t=e.call(this)||this;return t.lobbyRoom=null,t.tableViewLayer=null,t.gameListView=null,t.btnTableViewBack=null,t.cellSize=null,t.tableView=null,t.gameView=null,t.resultData=[],t.seniorGunNum=null,t.needGold=0,t.lobby_middle=null,t.Node_1=null,t.lobby_prospect=null,t.LobbyMatchRoom=null,t.LobbyPrimaryRoom=null,t.LobbyMiddleRoom=null,t.LobbySeniorRoom=null,t.room1=!1,t.room2=!1,t.room3=!1,t.room4=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=this.node,this.resultData=n.model.lobby.rooms,this.gameListView=cc.find("gameListView",this.csbRoot),this.tableViewLayer=cc.find("tableViewLayer",this.csbRoot),this.btnTableViewBack=cc.find("btnTableViewBack",this.csbRoot);var e=cc.view.getFrameSize().width/cc.view.getFrameSize().height>2,t=this.tableViewLayer.getComponent(cc.Widget);e&&(t.horizontalCenter=0,t.isAlignHorizontalCenter=!0,t.updateAlignment());var i=cc.find("fish_bj_3",this.csbRoot);s.evtCenter.on(o.evts.EVT_QUICK_START,this.onEventQuickStart,this),this._generaTableView(),this._generaGameView();var a=i.getChildByName("dwc_bg").getComponent(sp.Skeleton);a.skeletonData=c.AssetsManager.getRes("spine/dwc_bg"),a.setAnimation(0,"1",!0),a.node.setScale(1),this.onBtnJingDian(null),this.btnTableViewBack.active=!1;var r=s.configTable.weapon[n.model.lobby.gunLevel];r.multiple<30?(this.LobbyPrimaryRoom.playAnimation(),this.showRoomCellBgLight(this.LobbyPrimaryRoom),this.LobbyPrimaryRoom.setScale(1),this.LobbyMiddleRoom.stopAnimation(),this.LobbySeniorRoom.stopAnimation(),this.room1=!0,this.room2=!1,this.room3=!1,this.room4=!1):r.multiple>=30&&r.multiple<300?(this.LobbyMiddleRoom.playAnimation(),this.showRoomCellBgLight(this.LobbyMiddleRoom),this.LobbyMiddleRoom.setScale(1),n.ME.level<14&&this.LobbyPrimaryRoom.stopAnimation(),this.LobbySeniorRoom.stopAnimation(),this.room1=!1,this.room2=!0,this.room3=!1,this.room4=!1):r.multiple>=300&&(this.LobbySeniorRoom.playAnimation(),this.showRoomCellBgLight(this.LobbySeniorRoom),this.LobbySeniorRoom.setScale(1),this.LobbyMiddleRoom.stopAnimation(),n.ME.level<14&&this.LobbyPrimaryRoom.stopAnimation(),this.room1=!1,this.room2=!1,this.room3=!0,this.room4=!1),0!=n.ME.showMember&&this.getMatchCountDown(),cc.log(JSON.stringify(this.resultData))},t.prototype.getMatchCountDown=function(){var e={cmd:a.msgs.CMD_GAME,params:{action:"cmtb_match_info",gameId:28,userId:n.ME.userId}};r.tcp.send(e)},t.prototype.onDestroy=function(){s.evtCenter.off(o.evts.EVT_QUICK_START,this.onEventQuickStart,this),this.resultData=null},t.prototype._generaGameView=function(){this.tableView&&(this.tableView.node.active=!0),this.btnTableViewBack.active=!1;var e=this.gameListView.getChildByName("btnJingDian"),t=e.getChildByName("dwc_jdms").getComponent(sp.Skeleton);t.premultipliedAlpha=!1,t.skeletonData=c.AssetsManager.getRes("spine/dwc_jdms"),t.setAnimation(0,"1",!0),t.node.setScale(1),(t=(e=this.gameListView.getChildByName("btnJinJiChang")).getChildByName("dwc_jjc").getComponent(sp.Skeleton)).premultipliedAlpha=!1,t.skeletonData=c.AssetsManager.getRes("spine/dwc_jjc"),t.setAnimation(0,"1",!0),t.node.setScale(1);var i=this.gameListView.getChildByName("btnListView");(t=(e=i.getChildByName("btnLongHu")).getChildByName("dwc_lthx").getComponent(sp.Skeleton)).premultipliedAlpha=!1,t.skeletonData=c.AssetsManager.getRes("spine/dwc_lthx"),t.setAnimation(0,"1",!0),t.node.setScale(1),(t=(e=i.getChildByName("btnMore")).getChildByName("dwc_xyx").getComponent(sp.Skeleton)).premultipliedAlpha=!1,t.skeletonData=c.AssetsManager.getRes("spine/dwc_xyx"),t.setAnimation(0,"1",!0),t.node.setScale(1)},t.prototype._generaTableView=function(){this.tableView||(this.cellSize=cc.size(378.6,380),this.tableView=cc.find("tableViewLayer/tableView",this.csbRoot).getComponent(cc.ScrollView),this.tableViewReloadData())},t.prototype.setRunActionRoomCellBegin=function(e){e.setScale(.95)},t.prototype.setRunActionRoomCell=function(e){e.runAction(cc.sequence(cc.scaleTo(.1,.95).easing(cc.easeIn(1)),cc.scaleTo(.2,1.07).easing(cc.easeOut(3)),cc.scaleTo(7/30,.98),cc.scaleTo(.1,1)))},t.prototype.tableViewReloadData=function(){var e=2;this.resultData.length>=3&&(e=3);for(var t=0;t<e;t++)if(t==e){var i=n.model.lobby.gunLevel,o=s.configTable.weapon[i];this.LobbyMatchRoom=new l.LobbyMatchRoom(o.multiple),this.LobbyMatchRoom.name=t.toString(),this.LobbyMatchRoom.setContentSize(this.cellSize),this.LobbyMatchRoom.setPosition(cc.v2(this.LobbyMatchRoom.getPosition().x+190,this.LobbyMatchRoom.getPosition().y+200)),this.tableView.content.addChild(this.LobbyMatchRoom),this.LobbyMatchRoom.on(cc.Node.EventType.TOUCH_END,this.tableCellTouche,this)}else{var c=this._onConfigInfo(this.resultData[t].sceneName);o=s.configTable.weapon[c.Min_Bet],i=n.model.lobby.gunLevel;if("string_menghuanshanhu"==this.resultData[t].sceneName)this.LobbyPrimaryRoom=new l.LobbyPrimaryRoom(o,this.resultData[t],i,c),this.LobbyPrimaryRoom.name=t.toString(),this.LobbyPrimaryRoom.setContentSize(this.cellSize),this.LobbyPrimaryRoom.setPosition(cc.v2(this.LobbyPrimaryRoom.x+190,this.LobbyPrimaryRoom.y+200)),this.tableView.content.addChild(this.LobbyPrimaryRoom),this.LobbyPrimaryRoom.on(cc.Node.EventType.TOUCH_END,this.tableCellTouche,this);else if("string_haidibaozang"==this.resultData[t].sceneName)this.LobbyMiddleRoom=new l.LobbyMiddleRoom(o,this.resultData[t],i,c),this.LobbyMiddleRoom.name=t.toString(),this.LobbyMiddleRoom.setContentSize(this.cellSize),this.LobbyMiddleRoom.setPosition(cc.v2(this.LobbyMiddleRoom.x+180,this.LobbyMiddleRoom.y+200)),this.tableView.content.addChild(this.LobbyMiddleRoom),this.LobbyMiddleRoom.on(cc.Node.EventType.TOUCH_END,this.tableCellTouche,this);else if("string_binglongchaoxue"==this.resultData[t].sceneName){var a=new l.LobbySeniorRoom(o,this.resultData[t],i,c);this.LobbySeniorRoom=a,this.LobbySeniorRoom.name=t.toString(),this.LobbySeniorRoom.setContentSize(this.cellSize),this.LobbySeniorRoom.setPosition(cc.v2(a.x+170,a.y+200)),this.tableView.content.addChild(a),this.LobbySeniorRoom.on(cc.Node.EventType.TOUCH_END,this.tableCellTouche,this)}}},t.prototype.tableCellTouche=function(e){var t=parseInt(e.currentTarget.name),i=2;if(this.resultData.length>=3&&(i=3),t!=i){var l=this._onConfigInfo(this.resultData[t].sceneName),d=n.model.lobby.gunLevel,_=this._onConfigInfo(this.resultData[t].sceneName),f=s.configTable.weapon[_.Min_Bet];this.seniorGunNum=f.multiple,this.needGold=_.Min_Gold,f.multiple<30?d>=l.Min_Bet?this.room1?this._intoChooseRoom(this.resultData[t].roomId):(this.room1=!0,this.room2=!1,this.room3=!1,this.room4=!1,cc.audioEngine.stopAllEffects(),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/lanternfish_room"),!1),this.LobbyPrimaryRoom.playAnimation(),this.showRoomCellBgLight(this.LobbyPrimaryRoom),this.LobbyMiddleRoom.stopAnimation(),this.LobbySeniorRoom.stopAnimation(),this.setRunActionRoomCell(this.LobbyPrimaryRoom)):this._intoChooseRoom(this.resultData[t].roomId):f.multiple>=30&&f.multiple<300?d>=l.Min_Bet?this.room2?this._intoChooseRoom(this.resultData[t].roomId):(this.room1=!1,this.room2=!0,this.room3=!1,this.room4=!1,cc.audioEngine.stopAllEffects(),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/numbfish_room"),!1),this.LobbyMiddleRoom.playAnimation(),this.showRoomCellBgLight(this.LobbyMiddleRoom),3==i&&this.LobbyPrimaryRoom.stopAnimation(),this.LobbySeniorRoom.stopAnimation(),this.setRunActionRoomCell(this.LobbyMiddleRoom)):this._intoChooseRoom(this.resultData[t].roomId):f.multiple>=300&&(d>=l.Min_Bet?this.room3?this._intoChooseRoom(this.resultData[t].roomId):(this.room1=!1,this.room2=!1,this.room3=!0,this.room4=!1,cc.audioEngine.stopAllEffects(),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/iceDragon_room"),!1),this.LobbySeniorRoom.playAnimation(),this.showRoomCellBgLight(this.LobbySeniorRoom),3==i&&this.LobbyPrimaryRoom.stopAnimation(),this.LobbyMiddleRoom.stopAnimation(),this.setRunActionRoomCell(this.LobbySeniorRoom)):this._intoChooseRoom(this.resultData[t].roomId))}else{d=n.model.lobby.gunLevel;if((f=s.configTable.weapon[d]).multiple<100)s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u53ea\u6709\u6355\u9c7c\u9ad8\u624b\u624d\u80fd\u53c2\u52a0\u7ade\u6280\u573a- \n\u89e3\u9501100\u500d\u70ae\u4ee5\u540e\u518d\u6765\u53c2\u52a0\u5427!");else if(this.room4){var p=n.model.arena.matchList;if(p.length>0){var u={cmd:a.msgs.CMD_ROOM,params:{action:"match_info",gameId:28,userId:n.ME.userId,clientId:h.AccountInfo.clientId,roomId:p[0].roomId}};r.tcp.send(u)}}else this.room1=!1,this.room2=!1,this.room3=!1,this.room4=!0,cc.audioEngine.stopAllEffects(),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/cheer"),!1),this.LobbyMatchRoom.playAnimation(),this.showRoomCellBgLight(this.LobbyMatchRoom),this.LobbyMiddleRoom.stopAnimation(),3==i&&this.LobbyPrimaryRoom.stopAnimation(),this.LobbySeniorRoom.stopAnimation(),this.setRunActionRoomCell(this.LobbyMatchRoom)}this.room1||n.ME.level<14&&this.LobbyPrimaryRoom.setScale(1),this.room2||this.LobbyMiddleRoom.setScale(1),this.room3||this.LobbySeniorRoom.setScale(1),this.room4},t.prototype.showRoomCellBgLight=function(e){if(this.lobbyRoom){var t=this.lobbyRoom.getChildByName("100");this.lobbyRoom.removeChild(t)}this.lobbyRoom=e;var i=cc.instantiate(c.AssetsManager.getRes("prefabs/lobby_recommend_animation"));this.lobbyRoom.addChild(i,-1,"100"),i.setPosition(i.getPosition().x,i.getPosition().y-190),i.getComponent(cc.Animation).play("showAnimation").wrapMode=cc.WrapMode.Loop},t.prototype._intoChooseRoom=function(e){var t={cmd:a.msgs.CMD_GAME,params:{action:"quick_start",gameId:28,userId:n.ME.userId,clientId:h.AccountInfo.clientId,roomId:e}};r.tcp.send(t)},t.prototype._onConfigInfo=function(e){return s.configTable.scene[e]},t.prototype.onEventQuickStart=function(e){switch(e){case 1:s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u53ea\u6709\u8fbe\u5230"+this.seniorGunNum+"\u500d\u70ae\u4ee5\u540e, \u624d\u80fd\u8fdb\u5165\u8be5\u623f\u95f4\u3002\u60a8\u53ef\u5c1d\u8bd5\u70b9\u51fb\u5feb\u901f\u5f00\u59cb\u8fdb\u5165\u623f\u95f4\u54e6\uff01");break;case 2:s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u91d1\u5e01\u5927\u4e8e"+this.needGold+"\u624d\u53ef\u8fdb\u5165\uff01",this._goToShoping.bind(this));break;case 3:s.evtCenter.emit(o.evts.EVT_MSG_BOX,"------\u5185\u90e8\u9519\u8bef----");break;case 4:s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u60a8\u5df2\u7ecf\u4e0d\u662f\u65b0\u624b\u4e86\uff0c\u8bf7\u524d\u5f80\u66f4\u9ad8\u7ea7\u623f\u95f4\u6355\u9c7c\uff01")}},t.prototype._goToShoping=function(){n.model.dailytask.isLobby=!0,cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),s.evtCenter.emit(o.evts.EVT_POPUP_SHOP_WINDOW,n.model.shop.SHOP_GOLD)},t.prototype.onBtnJingDian=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.tableView&&(this.tableView.node.active=!0),this.gameListView&&(this.gameListView.active=!1),this.btnTableViewBack.active=!0},t.prototype.onBtnTableViewBack=function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.tableView&&(this.tableView.node.active=!1),this.gameListView&&(this.gameListView.active=!0),this.btnTableViewBack.active=!1},t.prototype.onBtnJingJiChang=function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u656c\u8bf7\u671f\u5f85\uff01")},t.prototype.onBtnLongHu=function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u656c\u8bf7\u671f\u5f85\uff01")},t.prototype.onBtnMore=function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u656c\u8bf7\u671f\u5f85\uff01")},t}(cc.Component);i.LobbyRooms=d,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","./fish_lobby_room_cell":"fish_lobby_room_cell"}],fish_lobby_sys_notice:[function(e,t,i){"use strict";cc._RF.push(t,"6bf59v3HGBPVZqtacaH/lFJ","fish_lobby_sys_notice"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbRoot=null,this.web_view_node=null,this._url=e},t.prototype.onLoad=function(){this.csbRoot=this.node,cc.find("archor/ButtonClose",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.btnCloseSystemNotice,this),this.web_view_node=cc.find("archor/web_view_node",this.csbRoot);var e=this.csbRoot.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),this._url&&(this.webView=(new cc.Node).addComponent(cc.WebView),this.webView.node.setContentSize(this.web_view_node.getContentSize()),this.webView.url=this._url,this.web_view_node.addChild(this.webView.node))}.bind(this),this),e.play("animation0"),s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.btnCloseSystemNotice(null)},t.prototype.btnCloseSystemNotice=function(e){this.node.removeFromParent(!0),this.destroy(),n.model.guide.isPlayerSigned?n.ME.isMember&&n.ME.isMemberReward&&s.evtCenter.emit(o.evts.EVT_POPUP_NOBLE_GIFT_EVERYDAY):n.model.dailysign.requestDailySignData(!n.model.activity.showFestivalLogin)},t}(cc.Component);i.LobbySystemNotice=c,cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_lobby_top:[function(e,t,i){"use strict";cc._RF.push(t,"6f702STLgFOZ4T/PwNr9tAK","fish_lobby_top"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../../config_json"),a=e("../../../assets_manager"),r=e("../../define/fish_msg_types"),h=e("../../scene/fish_scene_login"),l=e("../../logic/fish_tcp"),d=e("../../../xmen_interface"),_=e("../../buffer/fish_buffer"),f=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.chipNum=null,t.diamondNum=null,t.userLoadBarFnt=null,t.userName=null,t.lobbyUserLoadingBar=null,t.vipFnt=null,t.chipRecharge=null,t.anchorRight=null,t.userLevel=null,t.Panel_mask=null,t.myselfHeadImage=null,t.btnNobleGift=null,t.anchorLeft=null,t.userID=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(a.AssetsManager.getRes("prefabs/lobby_top")),this.node.addChild(this.csbRoot),this.anchorLeft=this.csbRoot.getChildByName("anchorLeft"),this.anchorRight=this.csbRoot.getChildByName("anchorTop"),this.myselfHeadImage=this.anchorLeft.getChildByName("myselfHeadImage"),this.userName=this.anchorLeft.getChildByName("userName").getComponent(cc.Label),this.vipFnt=this.anchorLeft.getChildByName("vipFnt").getComponent(cc.Label),this.userLevel=this.anchorLeft.getChildByName("userLevel").getComponent(cc.Label),this.userID=this.anchorLeft.getChildByName("userID").getComponent(cc.Label),this.lobbyUserLoadingBar=this.anchorLeft.getChildByName("lobbyUserLoadingBar").getComponent(cc.ProgressBar),this.chipRecharge=this.anchorRight.getChildByName("chipRecharge"),this.chipRecharge.on(cc.Node.EventType.TOUCH_END,this.onBtnChipRecharge.bind(this)),this.anchorRight.getChildByName("diamondRecharge").on(cc.Node.EventType.TOUCH_END,this.onBtnDiamondRecharge.bind(this)),this.chipNum=this.anchorRight.getChildByName("chipNum"),this.diamondNum=this.anchorRight.getChildByName("diamondNum"),_.buffer.lobbyGold=_.buffer.bind(_.buffer.LobbyGold,n.ME.userId,this.chipNum),_.buffer.lobbyGold.onEnter(),this.chipNum.addChild(_.buffer.lobbyGold),_.buffer.lobbyDiamond=_.buffer.bind(_.buffer.LobbyDiamond,n.ME.userId,this.diamondNum),_.buffer.lobbyDiamond.onEnter(),this.diamondNum.addChild(_.buffer.lobbyDiamond),this.anchorLeft.getChildByName("userHeadBg").on(cc.Node.EventType.TOUCH_END,this.onBtnUserHead,this),s.evtCenter.on(o.evts.EVT_LOBBY_UPDATE_USER_IFNO,this.onEventUpdateUserInfo,this),s.evtCenter.on(o.evts.EVT_PERSONAL_RELOAD,this._showUserInfo,this),s.evtCenter.on(o.evts.EVT_RECV_USER_INFO,this._showUserInfo,this);var e=c.config.config_json.main_channel_default;""==n.ME.snsId&&"midanji"!=e&&this._showIconTips(),this._showUserInfo()},t.prototype.onDestroy=function(){s.evtCenter.off(o.evts.EVT_LOBBY_UPDATE_USER_IFNO,this.onEventUpdateUserInfo,this),s.evtCenter.off(o.evts.EVT_PERSONAL_RELOAD,this._showUserInfo,this),s.evtCenter.off(o.evts.EVT_RECV_USER_INFO,this._showUserInfo,this)},t.prototype._showUserInfo=function(){var e=n.ME.level;this.userName.string=n.ME.name,this.vipFnt.string=n.ME.vipLevel.toString(),this.userLevel.string=e.toString(),this.userID.string=n.ME.userId.toString(),s.avatarDownLoader.showHeadImage(n.ME.headUrl,this.myselfHeadImage);var t=n.ME.exp,i=s.configTable.user_level[1==e?e:e-1].total_exp,o=t-i>0?t-i:t,c=s.configTable.user_level[e].exp;this.lobbyUserLoadingBar.progress=o/c*100},t.prototype.onBtnUserHead=function(){if(cc.audioEngine.playEffect(a.AssetsManager.getRes("sound/button"),!1),n.model.lobby.btnClickHeadFlag){n.model.lobby.btnClickHeadFlag=!1,s.evtCenter.emit(o.evts.EVT_POPUP_HEAD_PERSONAL);var e={cmd:r.msgs.CMD_GAME,params:{action:"data",gameId:28,userId:n.ME.userId,clientId:h.AccountInfo.clientId}};l.tcp.send(e)}},t.prototype.onBtnChipRecharge=function(){n.model.dailytask.isLobby=!0,cc.audioEngine.playEffect(a.AssetsManager.getRes("sound/button"),!1),s.evtCenter.emit(o.evts.EVT_POPUP_SHOP_WINDOW,n.model.shop.SHOP_GOLD)},t.prototype.onBtnShare=function(){cc.log("\u70b9\u51fb\u4e86\u5206\u4eab\u6309\u94ae"),d.xmen.WeiXin.share()},t.prototype.onBtnDiamondRecharge=function(){n.model.dailytask.isLobby=!0,cc.audioEngine.playEffect(a.AssetsManager.getRes("sound/button"),!1),s.evtCenter.emit(o.evts.EVT_POPUP_SHOP_WINDOW,n.model.shop.SHOP_DIAMOND)},t.prototype.onEventUpdateUserInfo=function(e,t){"setName"==e?this.userName.getComponent(cc.Label).string=t:"setPurl"==e&&s.avatarDownLoader.showHeadImage(t,this.myselfHeadImage)},t.prototype._showIconTips=function(){""==n.ME.phonenumber&&n.ME.vipLevel,0},t}(cc.Component);i.LobbyTop=f,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../../config_json":"config_json","../../../xmen_interface":"xmen_interface","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_lobby_ui:[function(e,t,i){"use strict";cc._RF.push(t,"cb60cbBSLlE5a/6dvwNr6rf","fish_lobby_ui"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("./fish_lobby_quick_start"),c=e("../../../xmen_interface"),a=e("../../scene/fish_scene"),r=e("../../define/fish_event_types"),h=e("../../define/fish_msg_types"),l=e("../../scene/fish_scene_login"),d=e("../../logic/fish_tcp"),_=e("../subsidy/fish_view_subsidy_lobby"),f=e("../fish_view"),p=e("./fish_lobby_quick_game"),u=e("../../fish"),m=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.chipNum=null,t.diamondNum=null,t.userLoadBarFnt=null,t.userName=null,t.lobbyUserLoadingBar=null,t.vipFnt=null,t.chipRecharge=null,t.btnBottmSetting=null,t.btnChange=null,t.btnExchange=null,t.btnTuCao=null,t.btnActivity=null,t.settingStauts=!0,t.btnQuickStart=null,t.anchorRight=null,t.userLevel=null,t.Panel_mask=null,t.myselfHeadImage=null,t.btnNobleGift=null,t.btnVip=null,t.btnFriends=null,t.btnRanking=null,t.btnGift=null,t.notice_activity=null,t.notice_menu=null,t.notice_sign=null,t.notice_mail=null,t.notice_friend=null,t.notice_friends=null,t.btnStorehouse=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_ui")),u.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.Panel_mask=cc.find("Panel_mask",this.csbRoot),this.anchorRight=cc.find("anchorRight",this.csbRoot),this.btnStorehouse=cc.find("anchorLeft/btnStorehouse",this.csbRoot),this.btnGift=cc.find("anchorLeft/btnGift",this.csbRoot),this.btnChange=cc.find("anchorLeft/btnChange",this.csbRoot),this.btnTuCao=cc.find("anchorRight/btnTuCao",this.csbRoot),this.btnBottmSetting=cc.find("anchorLeft/btnBottmSetting",this.csbRoot),this.btnExchange=cc.find("anchorLeft/btnExchange",this.csbRoot),this.btnActivity=cc.find("anchorLeft/btnActivity",this.csbRoot),this.btnRanking=cc.find("anchorLeft/btnRanking",this.csbRoot),this.btnVip=cc.find("anchorLeft/btnVip",this.csbRoot),this.btnMaill=cc.find("anchorLeft/btnMaill",this.csbRoot),this.btnFriends=cc.find("anchorLeft/btnFriends",this.csbRoot),this.notice_menu=cc.find("anchorLeft/btnBottmSetting/notice_menu",this.csbRoot),this.notice_sign=cc.find("anchorLeft/btnSign/notice_sign",this.csbRoot),this.notice_mail=cc.find("anchorLeft/btnMaill/notice_mail",this.csbRoot),this.notice_friend=cc.find("anchorLeft/btnFriend/notice_friend",this.csbRoot),this.notice_activity=cc.find("anchorLeft/btnActivity/notice_activity",this.csbRoot),this.notice_friends=cc.find("anchorLeft/btnFriends/notice_friends",this.csbRoot),this.btnStorehouse.on(cc.Node.EventType.TOUCH_END,this.onBtnStorehouse,this),this.btnGift.on(cc.Node.EventType.TOUCH_END,this.onBtnOpenNobleGift,this),this.btnVip.on(cc.Node.EventType.TOUCH_END,this.onBtnOpenVip,this),this.btnBottmSetting.on(cc.Node.EventType.TOUCH_END,this.onBtnBottmSetting,this),this.btnFriends.on(cc.Node.EventType.TOUCH_END,this.onBtnFriends,this),this.btnChange.on(cc.Node.EventType.TOUCH_END,this.onBtnChange,this),this.btnExchange.on(cc.Node.EventType.TOUCH_END,this.onBtnExchange,this),this.btnActivity.on(cc.Node.EventType.TOUCH_END,this.onBtnActivity,this),this.btnRanking.on(cc.Node.EventType.TOUCH_END,this.onBtnRanking,this),this.btnMaill.on(cc.Node.EventType.TOUCH_END,this.onBtnMail,this),cc.find("anchorLeft/Button_3",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnDiamondRecharge,this),this.btnLobbyMusic=cc.find("anchorLeft/btnLobbyMusic",this.csbRoot),this.btnLobbyMusic.on(cc.Node.EventType.TOUCH_END,this.onBtnMusic,this),cc.find("anchorLeft/btnLobbygonggao",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnNotice,this),cc.find("anchorLeft/btnLobbyCustom",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnCustom,this),cc.find("anchorLeft/btnSign",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnSign,this),cc.find("anchorRight/btnQuit",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnQuit,this),this.csbRoot.getComponent(cc.Animation).play("firstRecharge").wrapMode=cc.WrapMode.Loop;var e=cc.find("anchorLeft/btnGift/dwc_jbgm",this.csbRoot).getComponent(sp.Skeleton);e.premultipliedAlpha=!1,e.skeletonData=n.AssetsManager.getRes("spine/dwc_jbgm"),e.setAnimation(0,"1",!0),e.node.setScale(.8),(e=cc.find("anchorLeft/btnChange/dwc_jbgm",this.csbRoot).getComponent(sp.Skeleton)).premultipliedAlpha=!1,e.skeletonData=n.AssetsManager.getRes("spine/dwc_jbgm"),e.setAnimation(0,"1",!0),e.node.setScale(.8),this.showReviewStatus(),s.model.guide.penny&&(this.btnChange.active=!1,this.btnTuCao.active=!1),this.node.addChild((new cc.Node).addComponent(_.almsLobby).node),s.model.subsidy.sendYesterdaySubsidy(),s.model.notice.updateModuleTip();var t=(new cc.Node).addComponent(o.LobbyQuickStart);if(this.node.addChild(t.node),this.Panel_mask.active=!1,0!=s.ME.showMember&&0!=s.ME.arcade&&this.initMiniGame(),a.evtCenter.on(r.evts.EVT_UPDATE_RED_TIP,this.onEventNoticeRedTip,this),a.evtCenter.on(r.evts.EVT_GET_CHANGE_REWARD,this.onEventChargeChange,this),a.evtCenter.on(r.evts.EVT_SHOW_BANKRUPT_PACKAGE_BTN,this.onEventShowBankruptPackageBtn,this),a.evtCenter.on(r.evts.EVT_REMOVE_BANKRUPT_PACKAGE_BTN,this.onEventRemoveBankruptPackageBtn,this),s.model.bankrupt_package.current_package){cc.log("****************************************************** fish_lobby_ui");var i=new f.view.BrptPackageNode(!0);i.onEnter(),this.node.addChild(i),a.evtCenter.emit(r.evts.EVT_SHOW_BANKRUPT_PACKAGE_BTN,!0)}var c={cmd:h.msgs.CMD_GAME,params:{action:"data",gameId:28,userId:s.ME.userId,clientId:l.AccountInfo.clientId}};d.tcp.send(c)},t.prototype.onDestroy=function(){s.model.guide.isBenin2Lobby=!1,a.evtCenter.off(r.evts.EVT_UPDATE_RED_TIP,this.onEventNoticeRedTip,this),a.evtCenter.off(r.evts.EVT_GET_CHANGE_REWARD,this.onEventChargeChange,this),a.evtCenter.off(r.evts.EVT_SHOW_BANKRUPT_PACKAGE_BTN,this.onEventShowBankruptPackageBtn,this),a.evtCenter.off(r.evts.EVT_REMOVE_BANKRUPT_PACKAGE_BTN,this.onEventRemoveBankruptPackageBtn,this)},t.prototype.showReviewStatus=function(){if(0==s.ME.showMember)this.btnBottmSetting.active=!1,this.btnExchange.active=!1,this.btnActivity.active=!1,this.btnRanking.active=!1,this.btnStorehouse.active=!1,this.btnNobleGift.active=!1,this.btnChange.active=!1,this.btnTuCao.active=!1,this.btnFriends.active=!1,0!=s.model.guide.guideStep&&0!=s.model.guide.guideStep&&s.model.dailysign.requestDailySignData(!s.model.activity.showFestivalLogin);else{if(this._showIconTips(),0!=s.model.guide.guideStep){if(s.model.common.systemNoticeFlag)return this.sendSystemNotice(),void(s.model.common.systemNoticeFlag=!1);if(s.ME.isMember&&s.ME.isMemberReward)return void a.evtCenter.emit(r.evts.EVT_POPUP_NOBLE_GIFT_EVERYDAY)}s.model.guide.isBenin2Lobby||s.model.guide.isShowPay||(s.model.guide.isShowPay=!0,s.model.guide.penny?s.ME.isMember&&a.evtCenter.emit(r.evts.EVT_POPUP_NOBLE_GIFT):(s.model.dailytask.isLobby=!0,s.model.shop.showFirstCharge()))}},t.prototype.onEventChargeChange=function(){s.model.guide.penny=1,this.btnChange.active=!1,this.btnTuCao.active=!0},t.prototype.onEventShowBankruptPackageBtn=function(e){e&&(this.btnChange.active=!1,this.btnTuCao.active=!1)},t.prototype.onEventRemoveBankruptPackageBtn=function(){s.model.guide.penny?(this.btnChange.active=!1,this.btnTuCao.active=!0):this.btnChange.active=!0},t.prototype.sendSystemNotice=function(){var e={cmd:h.msgs.MSG_SET_USER_INFO,params:{action:"hallNotice",gameId:28,userId:s.ME.userId,clientId:l.AccountInfo.clientId}};d.tcp.send(e)},t.prototype.initMiniGame=function(){var e=new p.LobbyQuickGame;this.node.addChild(e.node,1)},t.prototype.onBtnOpenVip=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),a.evtCenter.emit(r.evts.EVT_POPUP_VIP_WINDOW,"")},t.prototype.onBtnOpenNobleGift=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),a.evtCenter.emit(r.evts.EVT_POPUP_NOBLE_GIFT)},t.prototype.onBtnTuCao=function(e){a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u5982\u679c\u60a8\u5728\u6e38\u620f\u8fc7\u7a0b\u4e2d\u9047\u5230\u4efb\u4f55\u95ee\u9898\uff0c\u6b22\u8fce\u8054\u7cfb\u6211\u4eec\n\u5ba2\u670d\u70ed\u7ebf\uff1a0898-36690405")},t.prototype.onBtnStorehouse=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.ME.openBagFlag=!0;var t={cmd:h.msgs.CMD_ITEM,params:{action:"list",gameId:28,userId:s.ME.userId,clientId:l.AccountInfo.clientId}};d.tcp.send(t)},t.prototype.onBtnRanking=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t={cmd:h.msgs.CMD_GAME,params:{action:"fish_ranking",rankKey:"normal_28",gameId:28,userId:s.ME.userId,clientId:l.AccountInfo.clientId}};d.tcp.send(t)},t.prototype.onBtnActivity=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.model.dailytask.isLobby=!0,s.model.activity.requestActivityData(1,!0),s.model.notice.isShowInviteFriend=!1},t.prototype.onBtnFriends=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.model.friends.openFriends(),s.model.friends.showFriendsView()},t.prototype.onBtnExchange=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.model.shop.requestShopInfo(s.model.shop.SHOP_EXCHANGE)},t.prototype.onBtnBottmSetting=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.settingStauts?(this.onShowSettingPage(),this.btnBottmSetting.getComponent(cc.Button).enabled=!1):this.onHiddenSettingPage()},t.prototype.onBtnQuit=function(e){a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u60a8\u771f\u7684\u6253\u7b97\u8981\u8d70\u5417?",2,this.onAfrimQuit,this)},t.prototype.onAfrimQuit=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),cc.audioEngine.stopMusic(),cc.audioEngine.stopAllEffects(),this._gameLeave(),cc.sys.localStorage.setItem("show_sdk_login","true"),cc.director.loadScene("update")},t.prototype._gameLeave=function(){var e={cmd:h.msgs.CMD_GAME,params:{action:"leave",gameId:28,userId:s.ME.userId,clientId:l.AccountInfo.clientId}};d.tcp.send(e)},t.prototype.onBtnMusic=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),a.evtCenter.emit(r.evts.EVT_POP_SETTING)},t.prototype.onBtnNotice=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.sendSystemNotice()},t.prototype.onBtnInviteFriends=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u6b64\u529f\u80fd\u6682\u672a\u5f00\u653e, \u656c\u8bf7\u671f\u5f85!")},t.prototype.onBtnActivation=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1)},t.prototype.onBtnCustom=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.ME.level<15?a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u90ae\u7bb1\u5730\u5740\uff1aZzbu008@163.com"):a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u5fae\u4fe1\u53f7\uff1aA15692088591")},t.prototype.onBtnSign=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.model.dailytask.isLobby=!0,s.model.dailysign.requestDailySignData(!0)},t.prototype.onBtnChipRecharge=function(e){s.model.dailytask.isLobby=!0,cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),a.evtCenter.emit(r.evts.EVT_POPUP_SHOP_WINDOW,s.model.shop.SHOP_GOLD)},t.prototype.onBtnDiamondRecharge=function(e){s.model.dailytask.isLobby=!0,cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),a.evtCenter.emit(r.evts.EVT_POPUP_SHOP_WINDOW,s.model.shop.SHOP_DIAMOND)},t.prototype.onBtnChange=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),a.evtCenter.emit(r.evts.EVT_POP_FIRST_CHARGE,this)},t.prototype.onBtnMail=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t={cmd:h.msgs.CMD_MESSAGE,params:{action:"list",gameId:28,userId:s.ME.userId,clientId:l.AccountInfo.clientId,typeid:1}};d.tcp.send(t),this.onHiddenSettingPage(),s.model.notice.reportModuleTip()},t.prototype.onShowSettingPage=function(e){void 0===e&&(e=null),this.btnBottmSetting.getComponent(cc.Button).normalSprite=this.btnBottmSetting.getComponent(cc.Button).disabledSprite;var t=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),t.play("showSetting"),this.settingStauts=!1,this.notice_menu.active=!1},t.prototype.onHiddenSettingPage=function(e){if(void 0===e&&(e=null),this.btnBottmSetting.getComponent(cc.Button).normalSprite=this.btnBottmSetting.getComponent(cc.Button).hoverSprite,this.btnBottmSetting.getComponent(cc.Button).enabled=!0,this.btnMaill.active){var t=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),t.play("firstRecharge").wrapMode=cc.WrapMode.Loop}.bind(this),this),t.play("hiddenSetting")}this.settingStauts=!0;var i=s.model.notice.noticeTip;this.notice_menu.active=i.message||i.checkin||i.inviteFriend},t.prototype.onBtnClose=function(e){void 0===e&&(e=null),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.onHiddenSettingPage(),this.btnBottmSetting.getComponent(cc.Button).enabled=!0},t.prototype._showIconTips=function(){if(this._getResultItemsFromat())n.AssetsManager.getRes("img/atlas/scale9_8888"),this.btnStorehouse.x,this.btnStorehouse.getContentSize().width,this.btnStorehouse.getContentSize().height},t.prototype._getResultItemsFromat=function(){for(var e=s.ME.bagInfo.tabs[0].items,t=0;t<e.length;t++){var i=null;if((i=e[t].kindId>1e4?e[t].kindId-1e4:e[t].kindId)>3300&&i<3400)return!0}return!1},t.prototype.showSubsidyOrFestivalLogin=function(){},t.prototype.onEventNoticeRedTip=function(e){var t=s.model.notice.noticeTip;this.notice_menu.active=t.message||t.checkin||t.inviteFriend,this.notice_sign.active=t.checkin,this.notice_mail.active=t.message,this.notice_friend.active=t.initeFriend,this.notice_friends.active=t.fishFriends;var i=c.xmen.SystemInfo.getConfig().main_channel_default;t=s.model.notice.noticeTip;"ditui"==i||"cpa"==i||"xmen"==i||"midanji"==i||"360"==i||"maimaicy"==i||"official"==i||"weile"==i&&cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.OS_WINDOWS?this.notice_activity.active=t.actGup||t.actDailyTk||t.inviteFriend&&s.model.notice.isShowInviteFriend||t.act_Charge||t.dailyInvite&&s.model.notice.isShowInviteFriend:this.notice_activity.active=t.actGup||t.actDailyTk||t.inviteFriend&&s.model.notice.isShowInviteFriend||t.act_Charge,cc.log("update notice red tip"),cc.log(JSON.stringify(t))},t}(cc.Component);i.LobbyUI=m,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","../fish_view":"fish_view","../subsidy/fish_view_subsidy_lobby":"fish_view_subsidy_lobby","./fish_lobby_quick_game":"fish_lobby_quick_game","./fish_lobby_quick_start":"fish_lobby_quick_start"}],fish_lottery_card:[function(e,t,i){"use strict";cc._RF.push(t,"8a8ec8pGG5EnpsdZL1Of2I3","fish_lottery_card"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/lottery_card")),this.node.addChild(this.csbNode)},t.prototype.cardRunAction=function(e){if(this.csbNode.stopAllActions(),1==e)(t=this.csbNode.getComponent(cc.Animation)).play("flip_select"),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),t.play("rotate_select").wrapMode=cc.WrapMode.Loop}.bind(this),this);else if(2==e){var t;(t=this.csbNode.getComponent(cc.Animation)).play("flip_other")}},t.prototype.cardResetData=function(e,t,i){var a=n.AssetsManager.getRes("img/atlas/lottery"),r=n.AssetsManager.getRes("img/atlas/common"),h=(t=t+1,s.model.lottery.lotteryInfo.getCurGradeInfo(t)),l=h["prize"+i],d="prize"+i+"_icon",_=cc.find("reward_6/rewardIcon",this.csbNode),f=cc.find("reward_6/rewardNum",this.csbNode),p=cc.find("reward_6/reward_name",this.csbNode),u=cc.find("reward_6/rewardFrame",this.csbNode);l>="3101"&&l<="3110"?(_.setScale(.6),u.setScale(.6),u.active=!0):(_.setScale(.7),u.active=!1);var m=h[d];_.getComponent(cc.Sprite).spriteFrame=r.getSpriteFrame(m.split(".")[0]),f.getComponent(cc.Label).string=h["prize"+i+"_number"];var g=this.getPrizeNameById(l);p.getComponent(cc.Sprite).spriteFrame=a.getSpriteFrame(g),o.evtCenter.emit(c.evts.EVT_LOTTERY_SHOWCARD,e)},t.prototype.getPrizeNameById=function(e){switch(e){case"101":return"fish_choujiang_gold";case"102":return"fish_choujiang_zuanshi";case"103":return"fish_choujiang_duihuanquan";case"104":return"fish_choujiang_yuquan";case"3104":return"fish_choujiang_kuangbao";case"3106":return"fish_choujiang_jiguang1";case"3107":return"fish_choujiang_jiguang2";case"3108":return"fish_choujiang_jiguang3";case"3109":return"fish_choujiang_jiguang4";case"3110":return"fish_choujiang_paodan"}},t.prototype.onDestroy=function(){},t}(cc.Component);i.LotteryCard=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_lottery_info:[function(e,t,i){"use strict";cc._RF.push(t,"e9239GT5cVMoInSTAy8IXo5","fish_lottery_info"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../model/fish_model"),o=function(){function e(){this.curNeedFishNum=5}return e.prototype.getCurGrade=function(e){for(var t=1;t<=6;t++){if(e<n.configTable.lottery[t].threshold_value)break}return t-=1},e.prototype.getCurGradeInfo=function(e){return e>=1&&e<=6?n.configTable.lottery[e]:n.configTable.lottery[6]},e.prototype.getCurThreshold=function(e){if(e>=1&&e<=6)return n.configTable.lottery[e].threshold},e.prototype.getNextThreshold=function(e){return e>=1&&e<=5?n.configTable.lottery[e+1].threshold:6==e?n.configTable.lottery[e].threshold:void 0},e.prototype.isCanLottery=function(){return s.model.lottery.curBonusFishNum>=this.curNeedFishNum},e}();i.LotteryInfo=o,cc._RF.pop()},{"../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene"}],fish_lottery_panel:[function(e,t,i){"use strict";cc._RF.push(t,"5fcf9PiFjlDKaLOngzAyOjE","fish_lottery_panel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../model/fish_model"),c=e("../../../assets_manager"),a=e("../../buffer/fish_buffer"),r=e("../../fish"),h=function(e){function t(){var t=e.call(this)||this;return t.curNeedFishNum=5,t.csbNode=null,t.anchor=null,t.panelLottery=null,t.btnLottery=null,t.btnDraw=null,t.groupInProgress=null,t.groupCompleted=null,t.loadingBar=null,t.txtProgress=null,t.fntPot=null,t.blink1=null,t.blink2=null,t.canLottery=!1,t.isVisible=!1,t.isBankrupt=!1,t.lastLotteryFishNum=o.model.lottery.curBonusFishNum,t.nativeFishNum=o.model.lottery.curBonusFishNum,t.lastJackPot=o.model.lottery.curJackpot,t.nativeJackPot=o.model.lottery.curJackpot,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(c.AssetsManager.getRes("prefabs/lottery_panel")),r.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),this.anchor=cc.find("anchor",this.csbNode),this.panelLottery=cc.find("anchor/panelLottery",this.csbNode),this.btnLottery=cc.find("anchor/btnLottery",this.csbNode),this.btnDraw=cc.find("anchor/panelLottery/btnDraw",this.csbNode),this.groupInProgress=cc.find("anchor/panelLottery/group/groupInProgress",this.csbNode),this.groupCompleted=cc.find("anchor/panelLottery/group/groupCompleted",this.csbNode),this.loadingBar=cc.find("anchor/panelLottery/group/groupInProgress/loadingBar",this.csbNode),this.txtProgress=cc.find("anchor/panelLottery/group/groupInProgress/txtProgress",this.csbNode),this.fntPot=cc.find("anchor/panelLottery/group/groupPot/fntPot",this.csbNode),this.blink1=cc.find("anchor/panelLottery/blink1",this.csbNode),this.blink2=cc.find("anchor/panelLottery/blink2",this.csbNode),this.btnLottery.on(cc.Node.EventType.TOUCH_END,this.onBtnLottery,this),this.btnDraw.on(cc.Node.EventType.TOUCH_END,this.onBtnDraw,this),n.evtCenter.on(s.evts.EVT_GOLD_BUF_FINISHED,this._checkShowDrawPanel,this),n.evtCenter.on(s.evts.EVT_GOLD_INFO_CHG,this.onEventInfoChange,this),n.evtCenter.on(s.evts.EVT_CATCH_SUCCESS,this.onEventCatchSuccess,this),n.evtCenter.on(s.evts.EVT_LASER_CATCH,this.onEventLaserCatch,this),n.evtCenter.on(s.evts.EVT_BANKRUPT,this.onEventBankrupt,this),n.evtCenter.on(s.evts.EVT_LOTTERY_RESULT,this.onEventLotteryResult,this),n.evtCenter.on(s.evts.EVT_RMATCH_SHOW_RANK,this.onEventHideLottery,this),n.evtCenter.on(s.evts.EVT_RMATCH_HIDE_RANK,this.onEventShowLottery,this),this.btnDraw.opacity=0},t.prototype.onEventHideLottery=function(){this.anchor&&(this.anchor.active=!1)},t.prototype.onEventShowLottery=function(){this.anchor&&(this.anchor.active||(this.anchor.active=!0))},t.prototype.onEventInfoChange=function(e,t){e==o.ME.userId&&this.isBankrupt&&t>0&&(this.isBankrupt=!1,this.btnLottery.getComponent(cc.Button).enabled=!0,this._hide())},t.prototype.onEventCatchSuccess=function(e,t,i,n){if(e==o.model.table.seatId){var s=o.model.table.getFishInfoByFishId(i);if(!s)return;if(3==s.fishType||5==s.fishType){for(var c=0,a=n.length;c<a;c++){var r=n[c];1==r.itemId&&(this.nativeFishNum++,o.model.lottery.curBonusFishNum++,this.lastJackPot=this.nativeJackPot,this.nativeJackPot+=Math.floor(r.itemNum/9),o.model.lottery.curJackpot=this.nativeJackPot)}this._checkShowDrawPanel()}}},t.prototype.onEventLaserCatch=function(e,t,i,n){if(e==o.model.table.seatId){var s=o.model.table.getFishInfoByFishId(t);if(!s)return;if(!o.model.table.getPlayerInfo(e))return;3!=s.fishType&&5!=s.fishType||(this.nativeFishNum++,o.model.lottery.curBonusFishNum++,this.lastJackPot=this.nativeJackPot,this.nativeJackPot+=Math.floor(i/9),o.model.lottery.curJackpot=this.nativeJackPot,this._checkShowDrawPanel())}},t.prototype.onEventBankrupt=function(e){e==o.model.table.seatId&&o.model.lottery.lotteryInfo.isCanLottery()&&(this.isBankrupt=!0,this.btnLottery.getComponent(cc.Button).enabled=!1,this._show())},t.prototype.onEventLotteryResult=function(e,t){0==e&&(o.model.lottery.curJackpot=0,o.model.lottery.curBonusFishNum=0,this.lastLotteryFishNum=o.model.lottery.curBonusFishNum,this.nativeFishNum=o.model.lottery.curBonusFishNum,this.nativeJackPot=o.model.lottery.curJackpot,this._checkShowDrawPanel(),this.hideBlink())},t.prototype.onEventWeaponUpgrade=function(e){e==o.ME.userId&&(o.ME.playerInfo.maxWeapon.weaponId>=2136&&(this.anchor.runAction(cc.moveBy(.2,0,-90)),cc.log("onEventWeaponUpgrade")))},t.prototype.showBlink=function(){this.btnDraw.opacity=255,this.blink1.active=!0,this.blink1.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.5,100),cc.fadeTo(.5,255)))),this.blink2.active=!0,this.blink2.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.5,100),cc.fadeTo(.5,255))))},t.prototype.hideBlink=function(){this.blink1.stopAllActions(),this.blink2.stopAllActions(),this.blink1.active=!1,this.blink2.active=!1},t.prototype._checkShowDrawPanel=function(e){void 0===e&&(e=null);var t=this.nativeFishNum;this.canLottery=!1;var i=o.model.lottery.lotteryInfo.getCurGrade(o.model.lottery.curJackpot);o.model.lottery.lotteryInfo.getCurGradeInfo(i).threshold_value;if(this.txtProgress.getComponent(cc.Label).string=t+"/"+this.curNeedFishNum,n.effect.rollNumber(.2,this.fntPot,this.lastJackPot,this.nativeJackPot,15),this.fntPot.getContentSize().width>90&&(this.fntPot.scaleX=90/this.fntPot.getContentSize().width),this.loadingBar.getComponent(cc.ProgressBar).progress=100*t/this.curNeedFishNum/100,this.btnLottery.getComponent(cc.Button).enabled=!0,t>=this.curNeedFishNum){if(this.canLottery=!0,this.groupCompleted.active=!0,this.groupInProgress.active=!1,this.showBlink(),a.buffer.gameGold.gold<=0)return this.isBankrupt=!0,this.btnLottery.getComponent(cc.Button).enabled=!1,this._show(),!0;this.lastLotteryFishNum<t&&(this.lastLotteryFishNum=t,this._showLotteryPanel(5))}else this.lastLotteryFishNum<t&&(this.lastLotteryFishNum=t,this._showLotteryPanel(3));return t<this.curNeedFishNum&&(this.groupCompleted.active=!1,this.groupInProgress.active=!0,this.btnLottery.getComponent(cc.Button).enabled=!0),!1},t.prototype.onBtnLottery=function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.isVisible?(this.isVisible=!1,this.unscheduleAllCallbacks(),this._hide()):(this.isVisible=!0,this._show(),this.scheduleOnce(this._hide,3))},t.prototype.onBtnDraw=function(){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),n.evtCenter.emit(s.evts.EVT_POPUP_LOTTERY)},t.prototype._show=function(){this.csbNode.stopAllActions(),this.csbNode.getComponent(cc.Animation).play("show"),this.isVisible=!0},t.prototype._hide=function(){this.csbNode.stopAllActions(),this.csbNode.getComponent(cc.Animation).play("hide"),this.isVisible=!1},t.prototype._showLotteryPanel=function(e){e=e||3,this.isVisible?(this.unscheduleAllCallbacks(),this.scheduleOnce(this._hide,e)):(this._show(),this.scheduleOnce(this._hide,3))},t}(cc.Component);i.LotteryPanel=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_lottery_window:[function(e,t,i){"use strict";cc._RF.push(t,"2c4ebO8p4hOtpI7t20FtQUF","fish_lottery_window"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("./fish_lottery_card"),r=e("../../fish"),h=e("../../buffer/fish_buffer"),l=e("../../define/fish_msg_types"),d=e("../../scene/fish_scene_login"),_=e("../../logic/fish_tcp"),f=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.curNeedFishNum=5,t.groupFishNotEnough=null,t.groupContinue=null,t.groupHigher=null,t.groupProgress=null,t.fntJackpot=null,t.fntPoolNum=null,t.label_curLotteryName=null,t.btnLottery=null,t.SpBtnLottery=null,t.btnShowFish=null,t.label_showfish=null,t.endNode=null,t.btnClose=null,t.groupCardBtn=null,t.fntCountDown=null,t._countTime=null,t.potLoadingBar=null,t.fishLoadingBar=null,t.fntFishNum=null,t.tag=0,t.level=0,t.grade=0,t.btnArr=[],t.btnTip=[],t.arrTip=[],t.labelBtn=[],t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lottery_window")),r.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.groupFishNotEnough=cc.find("anchor/panel_rightdown/groupFishNotEnough",this.csbRoot),this.groupContinue=cc.find("anchor/panel_rightdown/groupContinue",this.csbRoot),this.groupHigher=cc.find("anchor/panel_rightdown/groupHigher",this.csbRoot),this.groupProgress=cc.find("anchor/panel_rightdown/groupProgress",this.csbRoot),this.fntJackpot=cc.find("anchor/panel_leftdown/fntJackpot",this.csbRoot),this.fntPoolNum=cc.find("anchor/panel_rightdown/groupProgress/fntPoolNum",this.csbRoot),this.label_curLotteryName=cc.find("anchor/panel_rightdown/groupProgress/label_curLotteryName",this.csbRoot),this.btnLottery=cc.find("anchor/panel_rightdown/btnLottery",this.csbRoot),this.SpBtnLottery=cc.find("anchor/panel_rightdown/btnLottery/SpBtnLottery",this.csbRoot),this.btnShowFish=cc.find("anchor/panel_rightdown/btnShowFish",this.csbRoot),this.label_showfish=cc.find("anchor/panel_rightdown/btnShowFish/label_showfish",this.csbRoot),this.endNode=cc.find("anchor/endNode",this.csbRoot),this.btnClose=cc.find("anchor/panel_bg/btnClose",this.csbRoot),this.groupCardBtn=cc.find("anchor/groupCardBtn",this.csbRoot),this.fntCountDown=cc.find("anchor/title_node/fntCountDown",this.csbRoot),this.potLoadingBar=cc.find("anchor/panel_rightdown/groupProgress/potLoadingBar",this.csbRoot),this.fishLoadingBar=cc.find("anchor/panel_rightdown/groupFishNotEnough/fishLoadingBar",this.csbRoot),this.fntFishNum=cc.find("anchor/panel_rightdown/groupFishNotEnough/fntFishNum",this.csbRoot),this.btnLottery.on("click",this.onBtnLottery,this),this.btnShowFish.on("click",this.onBtnShowFish,this),this.btnClose.on("click",this.onBtnClose,this),cc.find("anchor/panel_rightdown/groupHigher/btnHigh",this.csbRoot).on("click",this.onClickBtnHigh,this),cc.find("anchor/endNode/endingBtn",this.csbRoot).on("click",this.onClickEndingBtn,this),this.fntCountDown.active=!1,this.endNode.active=!1;for(var e=["Normal","Bronze","Silver","Gold","Platinum","Extreme"],t=1;t<=6;t++){var i=cc.find("anchor/panel_middle/groupBtn/node"+e[t-1]+"/btnTip_"+t,this.csbRoot);this.btnTip.push(i);var a=cc.find("anchor/panel_middle/groupBtn/node_arrow/arrow_"+t,this.csbRoot);this.arrTip.push(a);var h=cc.find("anchor/panel_middle/groupBtn/node"+e[t-1]+"/label_btn_"+t,this.csbRoot);this.labelBtn.push(h);var l=cc.find("anchor/panel_middle/groupBtn/node"+e[t-1]+"/btnLottery_"+t,this.csbRoot);l.on("click",this.onBtnGrade,this),this.btnArr.push(l),i.active=!1,i.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(10/30,25),cc.fadeTo(10/30,255))))}this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("animate_card6");var d=s.model.lottery.lotteryInfo.getCurGrade(s.model.lottery.curJackpot);this.showCradPanelInit(d),o.evtCenter.on(c.evts.EVT_LOTTERY_RESULT,this.onEventLotteryResult,this),o.evtCenter.on(c.evts.EVT_LOTTERY_SHOWCARD,this.onEventLotteryShowCard,this),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.showCradPanelInit=function(e){var t=n.AssetsManager.getRes("img/atlas/lottery"),i=n.AssetsManager.getRes("img/atlas/common"),o=n.AssetsManager.getRes("img/atlas/scale9_8888"),c=s.model.lottery.lotteryInfo.getCurGradeInfo(e),a=s.model.lottery.lotteryInfo.getCurGradeInfo(e+1),r=s.model.lottery.curJackpot;this.fntJackpot.getComponent(cc.Label).string=r+"";for(var h=1;h<=6;h++){var l=c["prize"+h],d=this.getPrizeNameById(l),_=cc.find("anchor/panel_middle/card_"+h+"/prizeName_"+h,this.csbRoot),f=cc.find("anchor/panel_middle/card_"+h+"/prizeNum_"+h,this.csbRoot),p=cc.find("anchor/panel_middle/prizeNode_"+h+"/prizeIcon_"+h,this.csbRoot),u=cc.find("anchor/panel_middle/prizeNode_"+h+"/prizeFrame_"+h,this.csbRoot),m="prize"+h+"_number",g="prize"+h+"_icon";f.getComponent(cc.Label).string=c[m],p.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame(c[g].split(".")[0]),_.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(d),l>="3101"&&l<="3110"?(p.setScale(.8),u.active=!0):(p.setScale(1),u.active=!1)}for(h=0;h<this.btnArr.length;h++)this.btnArr[h].getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame("fish_choujiang_qieye2"),this.arrTip[h].active=!1,this.labelBtn[h].getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_lottery_btn_"+(h+1));this.btnArr[e-1].getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame("fish_choujiang_qieye1"),this.arrTip[e-1].active=!0,this.labelBtn[e-1].getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_choujiang_name_"+e);var v=s.model.lottery.lotteryInfo.getCurGrade(s.model.lottery.curJackpot);if((b=s.model.lottery.curBonusFishNum)>=this.curNeedFishNum)this.btnTip[v-1].active=!0,this.groupFishNotEnough.active=!1,this.groupHigher.active=!1,this.groupContinue.active=!0,this.btnTip[v-1].active=!1,this.btnLottery.active=!0,this.btnShowFish.active=!1,this.SpBtnLottery.active=!0,this.label_showfish.active=!1,this.groupProgress.active=!0;else{this.btnTip[v-1].active=!0,this.groupFishNotEnough.active=!0,this.groupHigher.active=!1,this.groupContinue.active=!1,this.groupProgress.active=!1,this.btnLottery.active=!1,this.btnShowFish.active=!0,this.SpBtnLottery.active=!1,this.label_showfish.active=!0;var b=s.model.lottery.curBonusFishNum;this.fishLoadingBar.getComponent(cc.ProgressBar).progress=b/this.curNeedFishNum,this.fntFishNum.getComponent(cc.Label).string=b+"/"+this.curNeedFishNum}6!=e?(this.potLoadingBar.getComponent(cc.ProgressBar).progress=r/a.threshold_value,this.fntPoolNum.getComponent(cc.Label).string=r+"/"+a.threshold_value,this.label_curLotteryName.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_choujiang_name_"+(e+1))):(r>c.threshold_value?(this.potLoadingBar.getComponent(cc.ProgressBar).progress=1,this.fntPoolNum.getComponent(cc.Label).string=r+""):(this.potLoadingBar.getComponent(cc.ProgressBar).progress=r/c.threshold_value,this.fntPoolNum.getComponent(cc.Label).string=r+"/"+c.threshold_value),this.label_curLotteryName.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_choujiang_name_"+e));var y=this.fntPoolNum.getContentSize().width;y>200&&(this.fntPoolNum.scaleX=200/y)},t.prototype.onBtnGrade=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=e.node.name.split("_")[1];this.showCradPanel(parseInt(t),!0)},t.prototype.onClickBtnHigh=function(e){var t=s.model.lottery.lotteryInfo.getCurGrade(s.model.lottery.curJackpot);this.showCradPanel(t,!0)},t.prototype.showCradPanel=function(e,t){var i=n.AssetsManager.getRes("img/atlas/lottery"),o=n.AssetsManager.getRes("img/atlas/common"),c=n.AssetsManager.getRes("img/atlas/scale9_8888"),a=s.model.lottery.lotteryInfo.getCurGradeInfo(e),r=s.model.lottery.lotteryInfo.getCurGradeInfo(e+1),h=s.model.lottery.curJackpot;this.fntJackpot.getComponent(cc.Label).string=h+"";for(var l=1;l<=6;l++){var d=a["prize"+l],_=this.getPrizeNameById(d),f=cc.find("anchor/panel_middle/card_"+l+"/prizeName_"+l,this.csbRoot),p=cc.find("anchor/panel_middle/card_"+l+"/prizeNum_"+l,this.csbRoot),u=cc.find("anchor/panel_middle/prizeNode_"+l+"/prizeIcon_"+l,this.csbRoot),m=cc.find("anchor/panel_middle/prizeNode_"+l+"/prizeFrame_"+l,this.csbRoot),g="prize"+l+"_number",v="prize"+l+"_icon";p.getComponent(cc.Label).string=a[g],u.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame(a[v].split(".")[0]),f.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame(_),d>="3101"&&d<="3110"?(u.setScale(.8),m.active=!0):(u.setScale(1),m.active=!1)}t&&(this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("show_card"));for(l=0;l<this.btnArr.length;l++)this.btnArr[l].getComponent(cc.Sprite).spriteFrame=c.getSpriteFrame("fish_choujiang_qieye2"),this.arrTip[l].active=!1,this.labelBtn[l].getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_lottery_btn_"+(l+1));this.arrTip[e-1].active=!0,this.btnArr[e-1].getComponent(cc.Sprite).spriteFrame=c.getSpriteFrame("fish_choujiang_qieye1"),this.labelBtn[e-1].getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_choujiang_name_"+e);var b=s.model.lottery.lotteryInfo.getCurGrade(s.model.lottery.curJackpot),y=(C=s.model.lottery.curBonusFishNum)>=this.curNeedFishNum;1==e||e==b&&6!=b?(this.potLoadingBar.getComponent(cc.ProgressBar).progress=h/r.threshold_value,this.fntPoolNum.getComponent(cc.Label).string=h+"/"+r.threshold_value,this.label_curLotteryName.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_choujiang_name_"+(e+1))):(h>a.threshold_value?(this.potLoadingBar.getComponent(cc.ProgressBar).progress=1,this.fntPoolNum.getComponent(cc.Label).string=h+""):(this.potLoadingBar.getComponent(cc.ProgressBar).progress=h/r.threshold_value,this.fntPoolNum.getComponent(cc.Label).string=h+"/"+a.threshold_value),this.label_curLotteryName.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_choujiang_name_"+e));var E=this.fntPoolNum.getContentSize().width;if(E>200&&(this.fntPoolNum.scaleX=200/E),y)this.btnTip[b-1].active=!0,this.groupFishNotEnough.active=!1,this.groupProgress.active=!0,e<b?(this.groupHigher.active=!0,this.groupContinue.active=!1,this.btnLottery.active=!1,this.btnShowFish.active=!1,this.SpBtnLottery.active=!1,this.label_showfish.active=!0,this.groupProgress.active=!1):e==b?(this.groupHigher.active=!1,this.groupContinue.active=!0,this.btnTip[b-1].active=!1,this.btnLottery.getComponent(cc.Button).enabled=!0,this.btnLottery.active=!0,this.btnShowFish.active=!1,this.SpBtnLottery.active=!0,this.label_showfish.active=!1,this.groupProgress.active=!0):(this.btnLottery.getComponent(cc.Button).enabled=!1,this.groupHigher.active=!1,this.groupContinue.active=!0,this.btnLottery.active=!1,this.btnShowFish.active=!0,this.SpBtnLottery.active=!1,this.label_showfish.active=!0,this.groupProgress.active=!0);else{this.groupFishNotEnough.active=!0,this.groupHigher.active=!1,this.groupContinue.active=!1,this.groupProgress.active=!1,this.btnLottery.active=!1,this.btnShowFish.active=!0,this.SpBtnLottery.active=!1,this.label_showfish.active=!0;var C=s.model.lottery.curBonusFishNum;this.fishLoadingBar.getComponent(cc.ProgressBar).progress=C/this.curNeedFishNum,this.fntFishNum.getComponent(cc.Label).string=C+"/"+this.curNeedFishNum}},t.prototype.onBtnLottery=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=s.model.lottery.curJackpot,i=s.model.lottery.lotteryInfo.getCurGrade(s.model.lottery.curJackpot),a=s.model.lottery.lotteryInfo.getCurGradeInfo(i+1).threshold_value-t;i<6?o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u60a8\u8ddd\u79bb"+{1:"\u666e\u901a",2:"\u9752\u94dc",3:"\u767d\u94f6",4:"\u9ec4\u91d1",5:"\u767d\u91d1",6:"\u81f3\u5c0a",7:"\u81f3\u5c0a"}[i+1]+"\u62bd\u5956\u4ec5\u5dee"+a+"\u91d1\u5e01\u4e86,\u60a8\u786e\u5b9a\u7ee7\u7eed\u62bd\u5956\u5417",2,this.sendLotteryMsg,this):this.sendLotteryMsg()},t.prototype.sendLotteryMsg=function(){var e={cmd:l.msgs.CMD_TABLE_CALL,params:{action:"lottery_task",gameId:28,userId:s.ME.userId,roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId,clientId:d.AccountInfo.clientId}};_.tcp.send(e)},t.prototype.onEventLotteryResult=function(e,t,i){if(0==e&&i==s.ME.userId){this._refreshBtn(!1),this.csbRoot.stopAllActions();var o=this.csbRoot.getComponent(cc.Animation);o.on(cc.Animation.EventType.FINISHED,function(){o.targetOff(this),this.showCountDown(),this.addLotteryCard()}.bind(this),this),o.play("lottery"),this.level=t.level;var c=t.prize;this.grade=0;for(var a=1;a<=6;a++)if(c=="prize"+a){this.grade=a;break}cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/shuffle"),!1)}},t.prototype.onClickCardBtn=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.unscheduleAllCallbacks();var t=e.node.name.split("_")[1];this.tag=parseInt(t);var i=this.groupCardBtn.getChildByName(t).getComponent(a.LotteryCard);null!=i&&(e.node.active=!1,i.node.zIndex=100,this.fntCountDown.active=!1,i.cardRunAction(1),i.cardResetData(t,this.level,this.grade))},t.prototype.onEventLotteryShowCard=function(e){for(var t=n.AssetsManager.getRes("img/atlas/lottery"),i=n.AssetsManager.getRes("img/atlas/common"),o=this.level+1,c=s.model.lottery.lotteryInfo.getCurGradeInfo(o),r="0",h="prize"+this.grade+"_icon",l=1;l<=6;l++){var d=this.groupCardBtn.getChildByName(l+"").getComponent(a.LotteryCard),_=this.groupCardBtn.getChildByName("cardBtn_"+l);if(_.active=!1,_.getComponent(cc.Button).enabled=!1,l!=e){var f=cc.find("reward_6/rewardIcon",d.csbNode),p=cc.find("reward_6/rewardNum",d.csbNode),u=cc.find("reward_6/reward_name",d.csbNode),m=cc.find("reward_6/rewardFrame",d.csbNode);l==this.grade?(h="prize"+e+"_icon",r=c["prize"+e],f.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame(c[h].split(".")[0]),p.getComponent(cc.Label).string=c["prize"+e+"_number"],u.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(this.getPrizeNameById(r)),r>="3101"&&r<="3110"?(f.setScale(.6),m.setScale(.6),m.active=!0):(f.setScale(.7),m.active=!1)):(h="prize"+l+"_icon",r=c["prize"+l],f.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame(c[h].split(".")[0]),p.getComponent(cc.Label).string=c["prize"+l+"_number"],u.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(this.getPrizeNameById(r)),r>="3101"&&r<="3110"?(f.setScale(.6),m.setScale(.6),m.active=!0):(f.setScale(.7),m.active=!1))}}this.scheduleOnce(this.otherCardFlip,3)},t.prototype.otherCardFlip=function(){for(var e=1;e<=6;e++){var t=this.groupCardBtn.getChildByName(e+"").getComponent(a.LotteryCard),i=this.groupCardBtn.getChildByName("cardBtn_"+e);i.active=!1,i.getComponent(cc.Button).enabled=!1,e!=this.tag&&t.cardRunAction(2)}this.countDown(),this.endNode.active=!0},t.prototype.showCountDown=function(){this._countTime=10,this.fntCountDown.active=!0,this.fntCountDown.getComponent(cc.Label).string=this._countTime+"",this.schedule(this._updateLabel,1)},t.prototype._updateLabel=function(){if(this._countTime>1)this._countTime--,this.fntCountDown.getComponent(cc.Label).string=this._countTime+"";else{this.fntCountDown.active=!1,this.unscheduleAllCallbacks();var e=Math.floor(6*Math.random()+1);this.tag=e;var t=this.groupCardBtn.getChildByName(e+"").getComponent(a.LotteryCard),i=this.groupCardBtn.getChildByName("cardBtn_"+e);null!=t&&(i.active=!1,i.getComponent(cc.Button).enabled=!1,t.node.zIndex=100,this.fntCountDown.active=!1,t.cardRunAction(1),t.cardResetData(e,this.level,this.grade))}},t.prototype.countDown=function(){this._countTime=10,this.fntCountDown.active=!0,this.fntCountDown.getComponent(cc.Label).string=this._countTime+"",this.schedule(this._update,1)},t.prototype._update=function(){this._countTime>1?(this._countTime--,this.fntCountDown.getComponent(cc.Label).string=this._countTime+""):(this.fntCountDown.active=!1,this.unscheduleAllCallbacks(),this.scheduleOnce(this._showCardEffect))},t.prototype.onClickEndingBtn=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.fntCountDown.active=!1,this.unscheduleAllCallbacks(),this.scheduleOnce(this._showCardEffect)},t.prototype.getPrizeNameById=function(e){switch(e){case"101":return"fish_choujiang_gold";case"102":return"fish_choujiang_zuanshi";case"103":return"fish_choujiang_duihuanquan";case"104":return"fish_choujiang_yuquan";case"3104":return"fish_choujiang_kuangbao";case"3106":return"fish_choujiang_jiguang1";case"3107":return"fish_choujiang_jiguang2";case"3108":return"fish_choujiang_jiguang3";case"3109":return"fish_choujiang_jiguang4";case"3110":return"fish_choujiang_paodan"}},t.prototype._refreshBtn=function(e){for(var t=0;t<this.btnArr.length;t++)this.btnArr[t].getComponent(cc.Button).enabled=e;this.btnLottery.getComponent(cc.Button).enabled=e,this.btnShowFish.getComponent(cc.Button).enabled=e,this.btnClose.getComponent(cc.Button).enabled=e},t.prototype._showCardEffect=function(){this.csbRoot.active=!1;var e=this.level+1,t=s.model.lottery.lotteryInfo.getCurGradeInfo(e),i=new cc.Node;this.node.addChild(i),i.setPosition(cc.v2(cc.winSize.width/2,cc.winSize.height/2));var a="prize"+this.grade+"_icon",l=t["prize"+this.grade],d=o.utils.createSprite("fish_choujiang_kuang","game_common");d.setScale(.76,.83);var _=o.utils.createSprite(t[a].split(".")[0],"common"),f=t["prize"+this.grade+"_number"],p=r.fish.createWithBMFont("fnt06",f),u=o.utils.createSprite(this.getPrizeNameById(l),"lottery"),m=o.utils.createSprite("icon_head_frame","scale9_8888");i.addChild(m),i.addChild(d),i.addChild(_),i.addChild(p),i.addChild(u),p.y=-77,u.setPosition(cc.v2(0,82)),l>="3101"&&l<="3110"?(_.setScale(.7),m.setScale(.7),m.active=!0):(_.setScale(.8),m.active=!1),101==l?h.buffer.pushGold(s.ME.userId,parseInt(f),1):102==l?h.buffer.pushDiamond(s.ME.userId,parseInt(f),1):h.buffer.pushItem(s.ME.userId,l,f,1);var g=o.utils.getSeatPosition(o.utils.getRelativeSeat(s.model.table.seatId));i.runAction(cc.sequence(cc.delayTime(1.2),cc.callFunc(function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/fly_item"),!1)}),cc.spawn(cc.scaleTo(11/30,.8),cc.moveBy(11/30,cc.v2(-40,80))),cc.spawn(cc.scaleTo(10/30,.5).easing(cc.easeIn(1)),cc.rotateBy(10/30,90).easing(cc.easeIn(1)),cc.moveTo(10/30,g).easing(cc.easeIn(1))),cc.callFunc(function(){o.evtCenter.emit(c.evts.EVT_REMOVE_LOTTERY)})))},t.prototype.onBackKey=function(){this.onBtnClose(null)},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),o.evtCenter.emit(c.evts.EVT_REMOVE_LOTTERY)},t.prototype.onBtnShowFish=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),o.evtCenter.emit(c.evts.EVT_FISH_BOOK_SHOW)},t.prototype.onDestroy=function(){this.btnArr=[],this.btnTip=[],this.arrTip=[],this.labelBtn=[],o.evtCenter.off(c.evts.EVT_LOTTERY_RESULT,this.onEventLotteryResult,this),o.evtCenter.off(c.evts.EVT_LOTTERY_SHOWCARD,this.onEventLotteryShowCard,this),o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.addLotteryCard=function(){for(var e=1;e<=6;e++){var t=cc.find("anchor/groupCardBtn/cardBtn_"+e,this.csbRoot);t.on("click",this.onClickCardBtn,this);var i=(new cc.Node).addComponent(a.LotteryCard);this.groupCardBtn.addChild(i.node,0,e+""),i.node.setPosition(t.getPosition())}},t}(cc.Component);i.LotteryWindow=f,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","./fish_lottery_card":"fish_lottery_card"}],fish_match_info:[function(e,t,i){"use strict";cc._RF.push(t,"ce8e7SgFjhDm7nXJUEuIqqj","fish_match_info"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(e){this.sceneName=e.sceneName,this.roomId=e.rid,this.type=e.type}}();i.MatchInfo=n,cc._RF.pop()},{}],fish_match_property:[function(e,t,i){"use strict";cc._RF.push(t,"dc4c6gHvXVE2oIjIXOZntuN","fish_match_property"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../fish"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.playerInfo=e,this.fntCup=null,this.fntBullet=null,this.curScore=0,this.curBullet=0,this.ptTips=null,this.fntTips=null},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/player_property_match")),this.node.addChild(this.csbRoot),this.fntCup=cc.find("fntCup",this.csbRoot),this.fntBullet=cc.find("fntBullet",this.csbRoot),this.ptTips=cc.find("ptTips",this.csbRoot),this.curScore=this.playerInfo.score||0,this.curBullet=this.playerInfo.leftBullet||0,this.fntBullet.getComponent(cc.Label).string=this.curBullet+"",this.fntCup.getComponent(cc.Label).string=this.curScore+"";var e=this.ptTips.getPosition();this.fntTips=s.fish.createWithBMFont("fnt01",""),o.utils.getRelativeSeat(this.playerInfo.seatId)<=2?this.fntTips.setPosition(cc.v2(e.x,-e.y)):this.fntTips.setPosition(cc.v2(e.x,e.y)),this.csbRoot.addChild(this.fntTips),this.fntTips.setScale(.4),this.fntTips.opacity=0,o.evtCenter.on(c.evts.EVT_ARENA_SUB_BULLET,this.onEventFireBroadcast,this),o.evtCenter.on(c.evts.EVT_ARENA_SYNC_SCORE,this.onEventSyncScore,this),o.evtCenter.on(c.evts.EVT_ARENA_SYNC_BULLET,this.onEventSyncBullet,this)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_ARENA_SUB_BULLET,this.onEventFireBroadcast,this),o.evtCenter.off(c.evts.EVT_ARENA_SYNC_SCORE,this.onEventSyncScore,this),o.evtCenter.off(c.evts.EVT_ARENA_SYNC_BULLET,this.onEventSyncBullet,this)},t.prototype.onEventSyncScore=function(e,t){if(e==this.playerInfo.userId){var i=t-this.curScore;this._tips(i),this.curScore=t,this.fntTips.getComponent(cc.Label).string=t+""}},t.prototype._tips=function(e){this.fntTips.stopAllActions(),this.fntTips.getComponent(cc.Label).string="+"+e,this.fntTips.opacity=0,this.fntTips.runAction(cc.sequence(cc.fadeIn(4/30),cc.delayTime(1),cc.fadeOut(4/30)))},t.prototype.onEventSyncBullet=function(e,t){e==this.playerInfo.userId&&(this.curBullet=t,this.fntBullet.getComponent(cc.Label).string=t+"")},t.prototype.onEventFireBroadcast=function(e){this.playerInfo.seatId==e&&(this.curBullet--,this.curBullet<0&&(this.curBullet=0),this.fntBullet.getComponent(cc.Label).string=this.curBullet+"")},t}(cc.Component);i.MatchProperty=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../scene/fish_scene":"fish_scene"}],fish_match_settlement:[function(e,t,i){"use strict";cc._RF.push(t,"80463RGbiRK2aN4uKCtFzDM","fish_match_settlement"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../scene/loading/fish_scene_loading_game_to_lobby"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i,n,s,o){this.csbRoot=null,this.btnCloseSettle=null,this.score=e,this.vipAdd=t,this.weaponAdd=i,this.totalScore=n,this.topScore=s,this.rank=o,this.fntScore=null,this.fntAdd=null,this.fntWeaponAdd=null,this.fntTotal=null,this.fntHighest=null,this.fntRank=null,this.fntRewardRank=null,this.rankRewardData=[],this.arena_cell_sp=null,this.arena_cell_sp=null,this.reward=null,this.no_reward=null},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_arena_settlement")),this.node.addChild(this.csbRoot),this.fntScore=cc.find("box/Image_1/fntScore",this.csbRoot),this.fntAdd=cc.find("box/Image_1_0/fntAdd",this.csbRoot),this.fntWeaponAdd=cc.find("box/Image_1_1/fntWeaponAdd",this.csbRoot),this.fntTotal=cc.find("box/fish_heji_1/fntTotal",this.csbRoot),this.fntHighest=cc.find("box/Image_1_0_0/fntHighest",this.csbRoot),this.fntRank=cc.find("box/fish_zanjupaiming_3/fntRank",this.csbRoot),this.fntRewardRank=cc.find("box/fish_zanjupaiming_3/fntRewardRank",this.csbRoot),this.btnCloseSettle=cc.find("box/btnCloseSettle",this.csbRoot),this.arena_cell_sp=cc.find("box/fish_zenjupaiming_3/reward/arena_cell_sp",this.csbRoot),this.arena_cell_num=cc.find("box/fish_zenjupaiming_3/reward/arena_cell_num",this.csbRoot),this.reward=cc.find("box/fish_zenjupaiming_3/reward",this.csbRoot),this.no_reward=cc.find("box/fish_zenjupaiming_3/no_reward",this.csbRoot),this.btnCloseSettle.on("click",this.onBtnCloseSettleMent,this),this.fntScore.getComponent(cc.Label).string=this.score,this.fntAdd.getComponent(cc.Label).string=this.vipAdd+"%",this.fntWeaponAdd.getComponent(cc.Label).string=this.weaponAdd+"%",this.fntTotal.getComponent(cc.Label).string=this.totalScore+"",this.fntHighest.getComponent(cc.Label).string=this.topScore+"",this.fntRewardRank.getComponent(cc.Label).string="100",this.rank&&(this.initReward(),this.fntRank.getComponent(cc.Label).string=this.rank),this.btnCloseSettle.getComponent(cc.Button).enabled=!1;var e=this.csbRoot.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){"end"==e.currentClip.name?(this.btnCloseSettle.getComponent(cc.Button).enabled=!0,e.play("show")):"show"==e.currentClip.name&&e.targetOff(this)}.bind(this),this),e.play("end")},t.prototype.onDestroy=function(){},t.prototype.initReward=function(){var e=n.AssetsManager.getRes("img/atlas/common"),t=null;if(this.rank>=1&&this.rank<=3?t=s.configTable.competition_reward[this.rank]:this.rank>=4&&this.rank<=10?t=s.configTable.competition_reward[4]:this.rank>=11&&this.rank<=50?t=s.configTable.competition_reward[11]:this.rank>=51&&this.rank<=100?t=s.configTable.competition_reward[51]:(this.reward.active=!1,this.no_reward.active=!0),t){var i=s.configTable.item[t.reward_type].big_icon;this.arena_cell_sp.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame(i.split(".")[0]),this.arena_cell_sp.setScale(.8),this.arena_cell_num.getComponent(cc.Label).string="x"+t.reward_number}},t.prototype.setRankRewardData=function(){for(var e in s.configTable.competition_reward){var t=parseInt(e);0!=t&&this.rankRewardData.push(s.configTable.competition_reward[t])}},t.prototype.onBtnCloseSettleMent=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.evtCenter.emit(o.evts.EVT_POPUP_LOADING,c.SceneGameToLobby)},t}(cc.Component);i.MatchSettlement=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../../scene/loading/fish_scene_loading_game_to_lobby":"fish_scene_loading_game_to_lobby"}],fish_match_task:[function(e,t,i){"use strict";cc._RF.push(t,"c50c95xLCxFjrAgPxKdPW+1","fish_match_task"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbRoot=null,this.matchTaskId=6201,this.rewardTime=null,this._seconds=0,this.treasureFly=null,this.MaskFish=[],this.timeImage=null,this.terasureFish1=null,this.terasureFish1=null,this.terasureFish1=null,this.table=null,this.successResult=null,this.userName=null,this.rewardKey=null,this.fntRollScore=null,this.fntGainScore=null,this.gainScore=e},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/treasure_0")),this.node.addChild(this.csbRoot),this.csbRoot.active=!1;for(var e=0;e<3;e++){var t=cc.find("table/terasureFish"+(e+1),this.csbRoot);this.MaskFish.push(t)}this.fntGainScore.getComponent(cc.Label).string=this.gainScore,s.evtCenter.on(o.evts.EVT_ARENA_TASK,this.onMatchTask,this),s.evtCenter.on(o.evts.EVT_CATCH_SUCCESS,this.onEventCatchSuccess,this),s.evtCenter.on(o.evts.EVT_POP_ARENA_SETTLEMENT,this._removeTreasureAll,this),s.evtCenter.on(o.evts.EVT_ARENA_ABORTION,this._removeTreasureAll,this),this._show()},t.prototype.onDestroy=function(){this.MaskFish=[],c.model.arena.taskRewardEnd=!1,s.evtCenter.off(o.evts.EVT_ARENA_TASK,this.onMatchTask,this),s.evtCenter.off(o.evts.EVT_CATCH_SUCCESS,this.onEventCatchSuccess,this),s.evtCenter.off(o.evts.EVT_POP_ARENA_SETTLEMENT,this._removeTreasureAll,this),s.evtCenter.off(o.evts.EVT_ARENA_ABORTION,this._removeTreasureAll,this)},t.prototype.onMatchTask=function(e){},t.prototype.radialProgress=function(e,t,i,n){},t.prototype.radialProgressClear=function(e){var t=e.getChildByName("radialProgress");t&&e.removeChild(t)},t.prototype.getFormatTimeFromSeconds=function(e,t){},t.prototype._show=function(){},t.prototype._countDownMttMatch=function(){},t.prototype._treasureFlyAction=function(e){},t.prototype.trophyFly=function(){},t.prototype.onEventCatchSuccess=function(e,t,i,n){},t.prototype._showFishTaskInfo=function(e){},t.prototype._removeTreasureAll=function(){this.node.removeFromParent(!0)},t}(cc.Component);i.MatchTask=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_match_tree:[function(e,t,i){"use strict";cc._RF.push(t,"4287ct3XsZBsrALFL8cMI0T","fish_match_tree"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_msg_types"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../../assets_manager"),r=function(e){function t(){var t=e.call(this)||this;return t.playerInfo=c.model.table.getPlayerInfo(c.ME.userId),t.fntCup=null,t.fntBullet=null,t.bullet_bg=null,t.bullet_icon=null,t.pole=null,t.cup_icon=null,t.fish_chilun_1=null,t.fntRewardScore_2=null,t.fntRewardNum_2=null,t.reward_icon_2=null,t.fntRewardScore_2=null,t.fntRewardNum_2=null,t.reward_icon_2=null,t.goal_node_1=null,t.goal_node_2=null,t.goal1=0,t.goal2=0,t.progress=null,t.fly_node=null,t.node_info=null,t.ptCup=null,t.fntBullet=null,t.ptTips=null,t.fntTips=null,t.ptGold=null,t.stage1=!1,t.stage1=!1,t.matchData=n.configTable.competition[c.model.arena.bigPrizeCfgId],t.initBulletNum=t.matchData.competition_bullet_number,t}return __extends(t,e),t.prototype.onLoad=function(){if(null!=this.playerInfo){var e=n.utils.getRelativeSeat(c.model.table.seatId);this.csbRoot=1==e?cc.instantiate(a.AssetsManager.getRes("prefabs/match_tree_left")):cc.instantiate(a.AssetsManager.getRes("prefabs/match_tree_right")),this.node.addChild(this.csbRoot),this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("flow").wrapMode=cc.WrapMode.Loop,this.curScore=this.playerInfo.score||0,this.curBullet=this.playerInfo.leftBullet||this.initBulletNum,this.fntBullet.getComponent(cc.Label).string=this.curBullet+"",this.fntCup.getComponent(cc.Label).string=this.curScore+"",n.msgCenter.on(s.msgs.MSG_FIRE_RESPONSE,this.onMsgFireResponse,this),n.evtCenter.on(o.evts.EVT_ARENA_SYNC_SCORE,this.onEventSyncScore,this),n.evtCenter.on(o.evts.EVT_ARENA_SYNC_BULLET,this.onEventSyncBullet,this),n.evtCenter.on(o.evts.EVT_ARENA_TASK_ADDSCORE,this.onMatchTask,this)}},t.prototype.onDestroy=function(){n.msgCenter.off(s.msgs.MSG_FIRE_RESPONSE,this.onMsgFireResponse,this),n.evtCenter.off(o.evts.EVT_ARENA_SYNC_SCORE,this.onEventSyncScore,this),n.evtCenter.off(o.evts.EVT_ARENA_SYNC_BULLET,this.onEventSyncBullet,this),n.evtCenter.off(o.evts.EVT_ARENA_TASK_ADDSCORE,this.onMatchTask,this)},t.prototype.initRewardPanel1=function(){},t.prototype.initRewardPanel2=function(){},t.prototype.onEventSyncScore=function(e,t){},t.prototype.onEventSyncBullet=function(e,t){},t.prototype.onMsgFireResponse=function(e){},t.prototype._bounceNode=function(e){e.stopAllActions(),e.runAction(cc.sequence(cc.scaleTo(1/30,1.3),cc.scaleTo(1/30,1)))},t.prototype._tips=function(e){},t.prototype.onMatchTask=function(e){c.model.arena.taskRewardEnd=!1;var t=e;this._tips(t),this._goldFlash(),this._bounceNode(this.fntCup),this.curScore+=e,this.fntCup.getComponent(cc.Label).string=this.curScore,this.initRewardPanel1(),this.initRewardPanel2()},t.prototype.onEventAddGold=function(e,t){this.playerInfo.userId},t.prototype.onEventTipsGold=function(e,t){e==this.playerInfo.userId&&(this._tips(t),this._goldFlash())},t.prototype._goldFlash=function(){var e=n.utils.createSprite("#fish_jiangbei.png","arena_8888");this.node_info.addChild(e),e.runAction(cc.sequence(cc.spawn(cc.scaleTo(10/30,1.2).easing(cc.easeOut(3)),cc.fadeOut(10/30)),cc.removeSelf()))},t}(cc.Component);i.MatchTree=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_match_ui:[function(e,t,i){"use strict";cc._RF.push(t,"1a924D1tCdC0JaBxCGCU5dy","fish_match_ui"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../define/fish_msg_types"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene_login"),c=e("../../logic/fish_tcp"),a=e("../../scene/fish_scene"),r=e("../../define/fish_event_types"),h=e("../../define/fish_consts"),l=e("../../buffer/fish_buffer"),d=e("../fish_view"),_=e("../../../assets_manager"),f=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.btnFury=null,t.btnAuto=null,t.btnLock=null,t.auto=null,t.frameAuto=null,t.lock_frame=null,t.node_arena=null,t.fntFuryCount=null,t.furyPrice=null,t.fntLockCount=null,t.lockPrice=null,t.changeWeaponLight=null,t.lock=null,t.btnHideMenu=null,t.PanelSkillNum=null,t.node_end=null,t.fntMinute=null,t.matchData=a.configTable.competition[s.model.arena.bigPrizeCfgId],t.menuVisible=!1,t.isFirstShowMenu=!0,s.model.table.fireNumLock=0,s.model.table.fireNumSW=0,s.model.table.isHaveUesedLock=!1,s.model.table.isHaveUesedSuperWeapon=!1,t}return __extends(t,e),t.prototype.onLoad=function(){a.utils.getRelativeSeat(s.model.table.seatId);this.node.addChild(this.csbRoot,d.View.UI),this.node_end.setOpacity(0),l.buffer.fury=l.buffer.bind(l.buffer.Fury,s.ME.userId,this.fntFuryCount),this.fntFuryCount.addChild(l.buffer.fury),l.buffer.lock=l.buffer.bind(l.buffer.Lock,s.ME.userId,this.fntLockCount),this.fntLockCount.addChild(l.buffer.lock);for(var e=1;e<=4;e++)this._playerLeave(e);this._setBtnState(),0==s.ME.showMember&&(this.auto.setVisible(!1),this.btnDaily.setVisible(!1)),this.onBtnShowMenu(null),this.btnHideMenu.setSwallowTouches(!1),this.PanelSkillNum.setSwallowTouches(!1),a.evtCenter.emit(r.evts.EVT_SHOW_SUBSIDY),a.evtCenter.on(r.evts.EVT_BAGGAGE_UPDATE,this.onEventBaggageUpdate,this),a.evtCenter.on(r.evts.EVT_PLAYER_ENTER,this.onEventPlayerEnter,this),a.evtCenter.on(r.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this),a.evtCenter.on(r.evts.EVT_SET_LOCK_STAT,this.onEventSetLock,this),a.evtCenter.on(r.evts.EVT_SET_FURY_STAT,this.onEventSetFury,this),a.evtCenter.on(r.evts.EVT_REMIND_CHG_WP,this.onEventRemindChangeWeapon,this),a.evtCenter.on(r.evts.EVT_USE_LOCK_TIP,this.onEventUseLockTip,this),a.evtCenter.on(r.evts.EVT_REMOVE_LOCK_TIP,this.onEventHideLockTip,this),a.evtCenter.on(r.evts.EVT_TIP_LOCK_FISH,this.onEventSetLockFish,this),a.evtCenter.on(r.evts.EVT_REMOVE_TIP_LICK_FISH,this.onEventRemoveLockFish,this),a.evtCenter.on(r.evts.EVT_SHOW_SWEAPON_TIP,this.onEventSuperWeaponTip,this),a.evtCenter.emit(r.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this),a.evtCenter.on(r.evts.EVT_SHOW_AUTO_PARTICLE,this.onEventShowParticle,this),a.evtCenter.on(r.evts.EVT_ARENA_HIDE_TITLE,this.onEventHideTitle,this),a.evtCenter.on(r.evts.EVT_ARENA_SHOW_TITLE,this.onEventShowTitle,this),a.evtCenter.on(r.evts.EVT_ARENA_END_NOTIFY,this.onEventMinuteLeft,this)},t.prototype.onDestroy=function(){a.evtCenter.off(r.evts.EVT_BAGGAGE_UPDATE,this.onEventBaggageUpdate,this),a.evtCenter.off(r.evts.EVT_PLAYER_ENTER,this.onEventPlayerEnter,this),a.evtCenter.off(r.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this),a.evtCenter.off(r.evts.EVT_SET_LOCK_STAT,this.onEventSetLock,this),a.evtCenter.off(r.evts.EVT_SET_FURY_STAT,this.onEventSetFury,this),a.evtCenter.off(r.evts.EVT_REMIND_CHG_WP,this.onEventRemindChangeWeapon,this),a.evtCenter.off(r.evts.EVT_USE_LOCK_TIP,this.onEventUseLockTip,this),a.evtCenter.off(r.evts.EVT_REMOVE_LOCK_TIP,this.onEventHideLockTip,this),a.evtCenter.off(r.evts.EVT_TIP_LOCK_FISH,this.onEventSetLockFish,this),a.evtCenter.off(r.evts.EVT_REMOVE_TIP_LICK_FISH,this.onEventRemoveLockFish,this),a.evtCenter.off(r.evts.EVT_SHOW_SWEAPON_TIP,this.onEventSuperWeaponTip,this),a.evtCenter.emit(r.evts.EVT_POP_BACK_KEY,this.onBackKey,this),a.evtCenter.off(r.evts.EVT_SHOW_AUTO_PARTICLE,this.onEventShowParticle,this),a.evtCenter.off(r.evts.EVT_ARENA_HIDE_TITLE,this.onEventHideTitle,this),a.evtCenter.off(r.evts.EVT_ARENA_SHOW_TITLE,this.onEventShowTitle,this),a.evtCenter.off(r.evts.EVT_ARENA_END_NOTIFY,this.onEventMinuteLeft,this)},t.prototype.onBackKey=function(){this.onBtnLeave(null)},t.prototype.onEventHideTitle=function(){this.node_arena.runAction(cc.fadeOut(.5))},t.prototype.onEventShowTitle=function(){this.node_arena.runAction(cc.fadeIn(.5))},t.prototype.onEventMinuteLeft=function(e){cc.log("LeftMinute Motifice:"+e),this.fntMinute.setString(e),this.node_end.stopAllActions(),this.node_end.runAction(cc.sequence(cc.fadeIn(4/30),cc.delayTime(5),cc.fadeOut(4/30)))},t.prototype.onEventBaggageUpdate=function(){this._setBtnState()},t.prototype.onEventPlayerEnter=function(e){this._playerEnter(e.seatId)},t.prototype.onEventPlayerLeave=function(e,t){this._playerLeave(t)},t.prototype.onEventSetLock=function(e,t){e==s.model.table.seatId&&(t?a.effect.radialProgress(this.btnLock,"fish_skill_mask",18):s.model.table.isFury||a.effect.radialProgressClear(this.btnLock))},t.prototype.onEventSetFury=function(e,t){e==s.model.table.seatId&&(t?(a.effect.radialProgress(this.btnLock,"fish_skill_mask",18),a.effect.radialProgress(this.btnFury,"fish_skill_mask",18,1)):(a.effect.radialProgressClear(this.btnLock),a.effect.radialProgressClear(this.btnFury)))},t.prototype.onEventRemindChangeWeapon=function(){this.changeWeaponLight.setVisible(!0),this.changeWeaponLight.runAction(cc.rotateBy(1,360))},t.prototype.onBtnShowMenu=function(e){cc.audioEngine.playEffect(_.AssetsManager.getRes("sound/button"),!1),this.csbRoot.stopAllActions(),this.csbRoot.play("showMenu",!1),this.menuVisible=!0},t.prototype.onBtnHideMenu=function(e){cc.audioEngine.playEffect(_.AssetsManager.getRes("sound/button"),!1),this.menuVisible&&(this.isFirstShowMenu&&(this.isFirstShowMenu=!1,a.evtCenter.emit(r.evts.EVT_SHOW_MY_POSITION)),this.csbRoot.stopAllActions(),this.csbRoot.play("hideMenu",!1),this.menuVisible=!1)},t.prototype.onBtnChangeWeapon=function(){cc.audioEngine.playEffect(_.AssetsManager.getRes("sound/button"),!1),this.changeWeaponLight.stopAllActions(),this.changeWeaponLight.setVisible(!1),this.onBtnHideMenu(null),a.evtCenter.emit(r.evts.EVT_POPUP_CHG_WP);var e={cmd:n.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:s.ME.userId,action:"activeGunCrg",roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId}};c.tcp.send(e)},t.prototype.onBtnFishBook=function(){cc.audioEngine.playEffect(_.AssetsManager.getRes("sound/button"),!1),this.onBtnHideMenu(null),a.evtCenter.emit(r.evts.EVT_FISH_BOOK_SHOW)},t.prototype.onBtnSetting=function(){cc.audioEngine.playEffect(_.AssetsManager.getRes("sound/button"),!1),this.onBtnHideMenu(null),a.evtCenter.emit(r.evts.EVT_POP_SETTING)},t.prototype.onBtnLeave=function(e){cc.audioEngine.playEffect(_.AssetsManager.getRes("sound/button"),!1),s.model.subsidy.isBankrupt&&s.model.subsidy.brptState==s.model.subsidy.RUPT_USEUP?a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u60a8\u771f\u7684\u60f3\u8981\u79bb\u5f00\u623f\u95f4\u4e48?",2,this.sendLeaveMsg,this):s.model.subsidy.isBankrupt&&!s.model.subsidy.isCanGetSubsidyNow?a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u60a8\u771f\u7684\u60f3\u73b0\u5728\u79bb\u5f00\u4e48\uff1f\u9a6c\u4e0a\u5c31\u53ef\u4ee5\u9886\u53d6\u8865\u507f\u91d1\u4e86\u54e6",2,this.sendLeaveMsg,this):s.model.subsidy.isBankrupt&&s.model.subsidy.isCanGetSubsidyNow?a.evtCenter.emit(r.evts.EVT_MSG_BOX2,"\u53ef\u4ee5\u9886\u53d6\u8865\u507f\u91d1\u4e86\u54e6\uff0c\u662f\u5426\u518d\u73a9\u4e00\u4f1a?",2,this.sendLeaveMsg,this):a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u60a8\u771f\u7684\u60f3\u8981\u79bb\u5f00\u623f\u95f4\u4e48?",2,this.sendLeaveMsg,this)},t.prototype.sendLeaveMsg=function(){var e={cmd:n.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:s.ME.userId,clientId:o.AccountInfo.clientId,action:"leave",roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId}};c.tcp.send(e)},t.prototype.onBtnFury=function(){cc.audioEngine.playEffect(_.AssetsManager.getRes("sound/button"),!1);var e=s.ME.baggage.getItem(h.Item.FURY);if(s.model.table.isFury)a.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u6280\u80fd\u6b63\u5728\u51b7\u5374\u4e2d",2);else{var t=a.configTable.skill[h.Skill.FURY];e&&e.count>0?this.sendFuryMsg():s.ME.vipLevel<3?a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u9700\u8981VIP3\u624d\u80fd\u8d2d\u4e70\u72c2\u66b4\u6280\u80fd\u54e6\uff01",this.showVipView,this):e&&0!=e.count||(s.ME.diamond<t.cost?a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u5f88\u62b1\u6b49\uff0c\u60a8\u7684\u94bb\u77f3\u4e0d\u8db3"+t.cost+",\u672a\u80fd\u6210\u529f\u8d2d\u4e70\uff0c\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",2,this.showShopView,this):s.model.table.isShowBuyTip?a.evtCenter.emit(r.evts.EVT_MSG_BUY_ITEM,{itemNum:t.cost,btn:2,callback:this.sendFuryMsg,target:this,position:!1,fishKingFlag:!1}):this.sendFuryMsg())}},t.prototype.sendFuryMsg=function(){var e=s.ME.baggage.getItem(h.Item.FURY),t={cmd:"table_call",params:{gameId:28,userId:s.ME.userId,action:"skill",skillId:h.Skill.FURY,subAction:"use",roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId,useDmd:e&&e.count>0?0:1}};c.tcp.send(t)},t.prototype.onBtnAuto=function(){cc.audioEngine.playEffect(_.AssetsManager.getRes("sound/button"),!1),s.ME.isMember?s.model.table.isAuto?(s.model.table.isAuto=!1,a.evtCenter.emit(r.evts.EVT_SET_AUTO_STAT,!1),a.evtCenter.emit(r.evts.EVT_SHOW_AUTO_PARTICLE,!1)):(s.model.table.isAuto=!0,a.evtCenter.emit(r.evts.EVT_SET_AUTO_STAT,!0),a.evtCenter.emit(r.evts.EVT_SHOW_AUTO_PARTICLE,!0)):a.evtCenter.emit(r.evts.EVT_POPUP_NOBLE_GIFT)},t.prototype.onBtnShop=function(){cc.audioEngine.playEffect(_.AssetsManager.getRes("sound/button"),!1),a.evtCenter.emit(r.evts.EVT_POPUP_SHOP_WINDOW,s.model.shop.SHOP_GOLD)},t.prototype.onBtnLock=function(){if(cc.audioEngine.playEffect(_.AssetsManager.getRes("sound/button"),!1),s.model.table.isLock)a.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u6280\u80fd\u6b63\u5728\u51b7\u5374\u4e2d",2);else{var e=s.ME.baggage.getItem(h.Item.LOCK);if(e&&e.count>0)this.sendLockMsg();else if(!e||0==e.count){var t=a.configTable.skill[h.Skill.LOCK];if(s.ME.diamond<t.cost)return void a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u5f88\u62b1\u6b49\uff0c\u60a8\u7684\u94bb\u77f3\u4e0d\u8db3"+t.cost+",\u672a\u80fd\u6210\u529f\u8d2d\u4e70\uff0c\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",2,this.showShopView,this);s.model.table.isShowBuyTip?a.evtCenter.emit(r.evts.EVT_MSG_BUY_ITEM,{itemNum:t.cost,btn:2,callback:this.sendLockMsg,target:this,position:!1,fishKingFlag:!1}):this.sendLockMsg()}}},t.prototype.sendLockMsg=function(){var e=s.ME.baggage.getItem(h.Item.LOCK),t={cmd:"table_call",params:{gameId:28,userId:s.ME.userId,action:"skill",skillId:h.Skill.LOCK,subAction:"use",roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId,useDmd:e&&e.count>0?0:1}};c.tcp.send(t)},t.prototype._playerEnter=function(e){a.utils.getRelativeSeat(e)},t.prototype._playerLeave=function(e){a.utils.getRelativeSeat(e)},t.prototype._setBtnState=function(){s.ME.autoFireUnlock||this.btnAuto.setTouchEnabled(!1);var e=s.ME.baggage.getItem(h.Item.FURY),t=s.ME.baggage.getItem(h.Item.LOCK);s.ME.vipLevel,e.count>0?(this.fntFuryCount.setVisible(!0),this.furyPrice.setVisible(!1)):(this.fntFuryCount.setVisible(!1),this.furyPrice.setVisible(!0)),t.count>0?(this.fntLockCount.setVisible(!0),this.lockPrice.setVisible(!1)):(this.fntLockCount.setVisible(!1),this.lockPrice.setVisible(!0))},t.prototype.showVipView=function(){a.evtCenter.emit(r.evts.EVT_POPUP_VIP_WINDOW,"")},t.prototype.showShopView=function(){a.evtCenter.emit(r.evts.EVT_POPUP_SHOP_WINDOW,s.model.shop.SHOP_DIAMOND)},t.prototype.onEventUseLockTip=function(){if(!s.model.table.isHaveUesedLock){var e=this.lock.getPosition(),t=cc.v2(e.x,e.y+200);a.effect.showLockTips(this.csbRoot,"fish_lock_tip.png",t),this.lock_frame.setVisible(!0),this.lock_frame.runAction(cc.sequence(cc.repeat(cc.sequence(cc.fadeTo(.4,0),cc.fadeTo(.4,255)),15),cc.fadeOut(.4)))}},t.prototype.onEventHideLockTip=function(){this.lock_frame.setVisible(!1),this.lock_frame.stopAllActions();var e=this.csbRoot.getChildByName("use_lock_tip");e&&e.removeFromParent(!0)},t.prototype.onEventSetLockFish=function(){a.evtCenter.emit(r.evts.EVT_REMOVE_MSG_LABEL,this);var e=a.utils.getSeatPosition(a.utils.getRelativeSeat(s.model.table.seatId)),t=cc.v2(e.x,e.y+200);if(!this.csbRoot.getChildByName("node_lock_tip")){var i=new cc.Node;this.csbRoot.addChild(i,0,"node_lock_tip"),i.setPosition(t.x-200,t.y)}},t.prototype.onEventRemoveLockFish=function(){this.csbRoot.getChildByName("node_lock_tip")&&this.csbRoot.removeChildByName("node_lock_tip",!0)},t.prototype.onEventSuperWeaponTip=function(){var e=a.utils.getSeatPosition(a.utils.getRelativeSeat(s.model.table.seatId)),t=cc.v2(e.x,e.y+200);a.effect.publicTipsShow(this.csbRoot,"fish_text19.png",t)},t.prototype.showParticle=function(e){if(!e.wpupParticle){var t=new cc.Node;e.addChild(t),e.wpupParticle=t}},t.prototype.hideParticle=function(e){e.wpupParticle&&(e.removeChild(e.wpupParticle),e.wpupParticle=null)},t.prototype.onEventShowParticle=function(e){e?this.showParticle(this.frameAuto):this.hideParticle(this.frameAuto)},t}(cc.Component);i.MatchUI=f,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","../fish_view":"fish_view"}],fish_math:[function(e,t,i){"use strict";cc._RF.push(t,"bb3dc3Z3BBCoZ+IZlezjc8w","fish_math"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.getAngle=function(e,t){var i=e.x*t.y-e.y*t.x,n=e.x*t.x+e.y*t.y;return 57.29577951308232*Math.atan2(i,n)},e}();i.fish_Math=n,cc._RF.pop()},{}],fish_mermaid_coin:[function(e,t,i){"use strict";cc._RF.push(t,"d45bf7gREpM6rAboDKXJ0ws","fish_mermaid_coin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene_login"),o=e("../../define/fish_msg_types"),c=e("../../model/fish_model"),a=e("../../logic/fish_tcp"),r=e("../../scene/fish_scene"),h=e("../../define/fish_event_types"),l=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.coinBtn=null,t.coin=null,t.fntGold=null,t.Node_1=null,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/mermaid_coin")),t.coinBtn=cc.find("coinBtn",t.csbRoot),t.Node_1=cc.find("Node_1",t.csbRoot),t.coin=cc.find("coin",t.csbRoot),t.fntGold=cc.find("fntGold",t.csbRoot),t.coinBtn.tagId=0,t.coinBtn.on(cc.Node.EventType.TOUCH_END,t.onClickBtnCoin,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbRoot)},t.prototype.onClickBtnCoin=function(e){var t=parseInt(e.currentTarget.tagId);cc.log("Btn Tag:"+t),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var i={cmd:o.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:c.ME.userId,cardId:8101,action:"miniGame",subAction:"draw",roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId,loc:t,clientId:s.AccountInfo.clientId}};a.tcp.send(i)},t.prototype.setBtnTag=function(e){this.coinBtn.tagId=e},t.prototype.getBtnTag=function(){return this.coinBtn.tagId},t.prototype.setData=function(e){var t=cc.instantiate(n.AssetsManager.getRes("img/atlas/mini_game"));switch(this.coinBtn.getComponent(cc.Button).enabled=!1,e){case 1:this.coin.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_mermaid_coin");break;case 2:this.coin.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_mermaid_gold");break;case 3:this.coin.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_witch_coin");break;default:this.coin.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_normal_coin0")}},t.prototype._showSoundCoin=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/mini_game_coin"),!1)},t.prototype.runCoinAction=function(e,t,i){if(t&&(this.fntGold.getComponent(cc.Label).string="+"+t),1==i)this.csbRoot.stopAllActions(),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/flip_coin_mermaid"),!1),this.scheduleOnce(this._showSoundCoin,.7),(s=this.csbRoot.getComponent(cc.Animation)).on(cc.Animation.EventType.FINISHED,function(){s.targetOff(this),s.play("animate_mermaid")}.bind(this),this),s.play(e);else if(2==i){this.csbRoot.stopAllActions(),(s=this.csbRoot.getComponent(cc.Animation)).on(cc.Animation.EventType.FINISHED,function(){s.targetOff(this),s.play("animate_gold"),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/flip_coin"),!1)}.bind(this),this),s.play(e)}else{var s;this.csbRoot.stopAllActions(),(s=this.csbRoot.getComponent(cc.Animation)).on(cc.Animation.EventType.FINISHED,function(){s.currentClip.name==e?s.play("animate_witch"):"animate_witch"==s.currentClip.name?(r.evtCenter.emit(h.evts.EVT_MERMAID_TEST,this.Node_1),s.play("animation0")):"animation0"==s.currentClip.name&&s.targetOff(this)}.bind(this),this),s.play(e)}},t.prototype.runFlipAction=function(e){this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play(e)},t.prototype.runCoinWaitAction=function(){this.runFlipAction("standby")},t.prototype.setBtnEnable=function(e){this.coinBtn.getComponent(cc.Button).enabled=e},t.prototype.onDestroy=function(){},t}(cc.Component);i.MermaidCoin=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_mermaid_game:[function(e,t,i){"use strict";cc._RF.push(t,"74dbdl6g1dKQqym2t/yiOJs","fish_mermaid_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("./fish_mermaid_coin"),o=e("../../scene/fish_scene"),c=e("../../buffer/fish_buffer"),a=e("../../model/fish_model"),r=e("../../define/fish_event_types"),h=e("../../fish"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i){this.csbRoot=null,this.coinNum=12,this.groupBtn=null,this.fntScore=null,this.curScore=0,this.lastScore=i||0,this.heart_2=null,this.heart_1=null,this.heartBoard=null,this.archor=null,this.reward=e,this.loc=t,this.isEnd=!1,this.coinArr=[],this.mermaidIsClicked=this.loc||[]},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/mermaid_game")),h.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.groupBtn=cc.find("archor/groupGame/groupBtn",this.csbRoot),this.fntScore=cc.find("archor/groupScore/fntScore",this.csbRoot),this.heart_1=cc.find("archor/groupHeart/heart_1",this.csbRoot),this.heart_2=cc.find("archor/groupHeart/heart_2",this.csbRoot),this.heartBoard=cc.find("archor/groupHeart/heartBoard",this.csbRoot),this.archor=cc.find("archor",this.csbRoot),this.scheduleOnce(this.showAction,.02),o.evtCenter.emit(r.evts.EVT_HIDE_MG_CARD),o.evtCenter.on(r.evts.EVT_MERMAID_DRAW,this.onEventMermaidDraw,this),o.evtCenter.on(r.evts.EVT_MERMAID_TEST,this.onEventTest,this),o.audio.pushBg("sound/bg_mini_mermaid"),o.evtCenter.emit(r.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.showAction=function(){this.initGamePanel(),this.csbRoot.stopAllActions();var e=this.csbRoot.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){this.groupBtn.active=!0}.bind(this),this),e.play("show_mermaid")},t.prototype.onEventTest=function(e){var t=this.heartBoard.getPosition(),i=e.getParent().convertToNodeSpaceAR(t),n=cc.v2(i.x,i.y+20);e.runAction(cc.moveTo(10/30,n))},t.prototype.initGamePanel=function(){if(this.groupBtn.active=!1,this.showCoinFlash(),this.loc){for(e=0;e<this.coinNum;e++){t=(new cc.Node).addComponent(s.MermaidCoin);this.coinArr.push(t),this.groupBtn.addChild(t.node);i=Math.floor(e/4),n=Math.floor(e%4);t.node.setPosition(cc.v2(360+140*n,360-120*i)),t.setBtnTag(e)}this.fntScore.getComponent(cc.Label).string=this.lastScore+"";for(e=0;e<this.loc.length;e++)3==this.reward[e]&&(this.heart_2.active=!1),this.coinArr[this.loc[e]].setData(this.reward[e])}else for(var e=0;e<this.coinNum;e++){var t=(new cc.Node).addComponent(s.MermaidCoin);this.coinArr.push(t),this.groupBtn.addChild(t.node);var i=Math.floor(e/4),n=Math.floor(e%4);t.node.setPosition(cc.v2(360+140*n,360-120*i)),t.setBtnTag(e)}},t.prototype.onEventMermaidDraw=function(e){var t=e.reward,i=e.isEnd,n=(e.seatId,e.loc),s=e.win,r=e.totalWin;switch(this.mermaidIsClicked.push(n),this.isEnd=i,this.curScore=r||this.curScore,this.mermaidIsClicked.length==this.coinNum&&(this.isEnd||(this.isEnd=!0)),this.setBtnStatus(!1),t){case 1:case 2:this.coinArr[n].runCoinAction("animate_common",s,t);h=this.coinArr[n].node.getPosition();this.showGoldFlyData={position:h,reward:t},this.winScore=this.curScore-s,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(.6),cc.callFunc(function(){this.setBtnStatus(!0)}.bind(this)),cc.delayTime(.2),cc.callFunc(this.showGoldFly,this),cc.callFunc(function(){o.effect.rollNumber(.2,this.fntScore,this.winScore,this.curScore,15)}.bind(this))));break;case 3:this.coinArr[n].runCoinAction("animate_common",1,t);var h=this.coinArr[n].node.getPosition();this.node.stopAllActions(),this.fntScore.getComponent(cc.Label).string=this.curScore+"",this.node.runAction(cc.sequence(cc.delayTime(.8),cc.delayTime(1),cc.callFunc(this._breakHeart,this)))}this.isEnd&&(c.buffer.pushGold(a.ME.userId,r,8),this.archor.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(4),cc.callFunc(this._FlipOthers,this),cc.delayTime(2),cc.callFunc(function(){this._runCSBAction("hide")}.bind(this)),cc.callFunc(this._goBigWin,this),cc.callFunc(this._showGoldRain,this),cc.delayTime(4),cc.removeSelf())))},t.prototype.onBackKey=function(){cc.log("onBackKey in MiniGame")},t.prototype.setBtnStatus=function(e){for(var t=0;t<this.coinNum;t++)this._checkArr(t,this.mermaidIsClicked)||this.coinArr[t].setBtnEnable(e)},t.prototype._breakHeart=function(){this.setBtnStatus(!0),this.isEnd?this._runCSBAction("break_heart1"):this._runCSBAction("break_heart2")},t.prototype._FlipOthers=function(){for(var e=0;e<this.coinNum;e++)this._checkArr(e,this.mermaidIsClicked)||(e%4==0||e%3==0?this.coinArr[e].runFlipAction("other_mermaid"):this.coinArr[e].runFlipAction("other_gold"))},t.prototype.showCoinFlash=function(){this.archor.stopAllActions(),this.archor.runAction(cc.repeatForever(cc.sequence(cc.callFunc(this.showProcess1,this),cc.delayTime(.1),cc.callFunc(this.showProcess2,this),cc.delayTime(.1),cc.callFunc(this.showProcess3,this),cc.delayTime(.1),cc.callFunc(this.showProcess4,this),cc.delayTime(.1),cc.callFunc(this.showProcess5,this),cc.delayTime(.1),cc.callFunc(this.showProcess6,this),cc.delayTime(2+Math.random()))))},t.prototype.showProcess1=function(){this._checkArr(0,this.mermaidIsClicked)||this.coinArr[0].runCoinWaitAction()},t.prototype.showProcess2=function(){this._checkArr(1,this.mermaidIsClicked)||this.coinArr[1].runCoinWaitAction(),this._checkArr(4,this.mermaidIsClicked)||this.coinArr[4].runCoinWaitAction()},t.prototype.showProcess3=function(){this._checkArr(2,this.mermaidIsClicked)||this.coinArr[2].runCoinWaitAction(),this._checkArr(5,this.mermaidIsClicked)||this.coinArr[5].runCoinWaitAction(),this._checkArr(8,this.mermaidIsClicked)||this.coinArr[8].runCoinWaitAction()},t.prototype.showProcess4=function(){this._checkArr(3,this.mermaidIsClicked)||this.coinArr[3].runCoinWaitAction(),this._checkArr(6,this.mermaidIsClicked)||this.coinArr[6].runCoinWaitAction(),this._checkArr(9,this.mermaidIsClicked)||this.coinArr[9].runCoinWaitAction()},t.prototype.showProcess5=function(){this._checkArr(7,this.mermaidIsClicked)||this.coinArr[7].runCoinWaitAction(),this._checkArr(10,this.mermaidIsClicked)||this.coinArr[10].runCoinWaitAction()},t.prototype.showProcess6=function(){this._checkArr(11,this.mermaidIsClicked)||this.coinArr[11].runCoinWaitAction()},t.prototype._checkArr=function(e,t){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},t.prototype._goBigWin=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/big_win"),!1),o.effect.goldBigWin1(this.csbRoot,this.curScore),o.audio.popBg()},t.prototype.againBigWinGoldSound=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/big_win_gold"),!1)},t.prototype._showGoldRain=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/big_win_gold"),!1),this.scheduleOnce(this.againBigWinGoldSound,.2),o.effect.miniGoldRain(this.csbRoot,200,this.curScore)},t.prototype._runCSBAction=function(e){this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play(e)},t.prototype.showGoldFly=function(e){var t=cc.v2(700,480),i=1==this.showGoldFlyData.reward?9:5;o.effect.mermaidCoinFly(this.csbRoot,this.showGoldFlyData.position,t,i),delete this.showGoldFlyData},t.prototype.onDestroy=function(){this.coinArr=[],this.mermaidIsClicked=[],o.evtCenter.off(r.evts.EVT_MERMAID_DRAW,this.onEventMermaidDraw,this),o.evtCenter.off(r.evts.EVT_MERMAID_TEST,this.onEventTest,this),o.evtCenter.emit(r.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t}(cc.Component);i.MermaidGame=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_mermaid_coin":"fish_mermaid_coin"}],fish_message_box2:[function(e,t,i){"use strict";cc._RF.push(t,"61f52S5VvBDAbHasn4Mj6mX","fish_message_box2"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../fish"),a=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.groupOK=null,t.groupCancel=null,t.txt=null,t.callback=null,t.target=null,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/message_box")),c.fish.adapterScreen(t.csbNode),t.addChild(t.csbNode),t.txt=cc.find("anchor/txt",t.csbNode).getComponent(cc.Label),t.groupOK=cc.find("anchor/groupOK",t.csbNode),t.groupCancel=cc.find("anchor/groupCancel",t.csbNode),cc.find("anchor/groupOK/btnOK",t.csbNode).on(cc.Node.EventType.TOUCH_END,t.onBtnOK,t),cc.find("anchor/groupCancel/btnCancel",t.csbNode).on(cc.Node.EventType.TOUCH_END,t.onBtnCancel,t),t.txt.node.setContentSize(cc.size(340,180)),t.txt.horizontalAlign=cc.Label.HorizontalAlign.CENTER,t.txt.verticalAlign=cc.Label.VerticalAlign.CENTER,t}return __extends(t,e),t.prototype.onBtnOK=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/buton"),!1),this._hide()},t.prototype.onBtnCancel=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/buton"),!1),this._hide(),this._callback()},t.prototype.show=function(e,t,i,n){void 0!==t&&"function"==typeof t&&(n=i,i=t,t=1),this.txt.string=e,this.callback=i||null,this.target=n||null,this.csbNode.stopAllActions(),this.csbNode.getComponent(cc.Animation).play("show"),t&&t>1?(this.groupOK.x=-90,this.groupCancel.active=!0,this.groupCancel.x=90):(this.groupOK.x=0,this.groupCancel.active=!1),s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype._hide=function(){this.csbNode.stopAllActions(),this.csbNode.getComponent(cc.Animation).play("hide"),s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(e){this.onBtnOK(null)},t.prototype._callback=function(){this.callback&&this.target&&(this.callback.call(this.target),this.callback=null,this.target=null)},t}(cc.Node);i.MessageBox2=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../scene/fish_scene":"fish_scene"}],fish_message_box:[function(e,t,i){"use strict";cc._RF.push(t,"cc1a0IVuz1DWKg+vAOMEQTh","fish_message_box"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../fish"),a=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.spBg=null,t.title=null,t.groupOK=null,t.groupCancel=null,t.txt=null,t.cbOK=null,t.targetOK=null,t.cbCancel=null,t.targetCancel=null,t.isShowing=!1,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/message_box")),c.fish.adapterScreen(t.csbNode),t.addChild(t.csbNode),t.txt=cc.find("anchor/txt",t.csbNode).getComponent(cc.Label),t.spBg=cc.find("anchor/spBG",t.csbNode).getComponent(cc.Sprite),t.title=cc.find("anchor/spBG/title",t.csbNode),t.groupOK=cc.find("anchor/groupOK",t.csbNode),t.groupCancel=cc.find("anchor/groupCancel",t.csbNode),cc.find("anchor/groupOK/btnOK",t.csbNode).on(cc.Node.EventType.TOUCH_END,t.onBtnOK,t),cc.find("anchor/groupCancel/btnCancel",t.csbNode).on(cc.Node.EventType.TOUCH_END,t.onBtnCancel,t),t.txt.node.setContentSize(cc.size(340,180)),t.txt.horizontalAlign=cc.Label.HorizontalAlign.CENTER,t.txt.verticalAlign=cc.Label.VerticalAlign.CENTER,t.txt.overflow=cc.Label.Overflow.RESIZE_HEIGHT,t}return __extends(t,e),t.prototype.onBtnOK=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/buton"),!1),this._hide(),this._callbackOK()},t.prototype.onBtnCancel=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/buton"),!1),this._hide(),this._callbackCancel()},t.prototype.onBackKey=function(){this.onBtnCancel()},t.prototype.show=function(e,t,i,n,c,a){if(void 0!==t&&"function"==typeof t&&(n=i,i=t,t=1),this.txt.string=e,this.cbOK=i||null,this.targetOK=n||null,this.cbCancel=c||null,this.targetCancel=a||null,e.length<=50?(this.spBg.node.setContentSize(cc.size(432,260)),this.title.y=230,this.txt.node.y=10):(this.spBg.node.setContentSize(cc.size(432,312)),this.title.y=288,this.txt.node.y=50),!this.isShowing){s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this);var r=this.csbNode.getComponent(cc.Animation);this.csbNode.stopAllActions(),r.play("show")}t&&t>1?(this.groupOK.x=-90,this.groupCancel.active=!0,this.groupCancel.x=90):(this.groupOK.x=0,this.groupCancel.active=!1),this.isShowing=!0},t.prototype._hide=function(){var e=this.csbNode.getComponent(cc.Animation);this.csbNode.stopAllActions(),e.play("hide"),s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this),this.isShowing=!1},t.prototype._callbackOK=function(){this.cbOK&&this.targetOK&&(this.cbOK.call(this.targetOK),this.cbOK=null,this.targetOK=null)},t.prototype._callbackCancel=function(){this.cbCancel&&this.targetCancel&&(this.cbCancel.call(this.targetCancel),this.cbCancel=null,this.targetCancel=null)},t}(cc.Node);i.MessageBox=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../scene/fish_scene":"fish_scene"}],fish_message_center:[function(e,t,i){"use strict";cc._RF.push(t,"d47336k/xhNtoHFiqzYI+Jb","fish_message_center"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(cc.EventTarget);i.MessageCenter=n,cc._RF.pop()},{}],fish_message_item_buy:[function(e,t,i){"use strict";cc._RF.push(t,"1ee58QO6ftGManFS7M/B0y6","fish_message_item_buy"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../fish"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i,s,o,c){this.csbNode=null,this.groupOK=null,this.groupCancel=null,this.txt=null,this.hammerText=null,this.item_num=null,this.mark=null,this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/buy_item_tip")),a.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),this.groupOK=cc.find("anchor/groupOK",this.csbNode),this.groupCancel=cc.find("anchor/groupCancel",this.csbNode),this.txt=cc.find("anchor/grop_detail/txt",this.csbNode).getComponent(cc.Label),this.hammerText=cc.find("anchor/grop_detail/hammerText",this.csbNode).getComponent(cc.Label),this.item_num=cc.find("anchor/grop_detail/item_num",this.csbNode).getComponent(cc.Label),this.mark=cc.find("anchor/grop_detail/mark",this.csbNode),this.groupOK.getChildByName("btnOK").on(cc.Node.EventType.TOUCH_END,this.onBtnOK,this),this.groupCancel.getChildByName("btnCancel").on(cc.Node.EventType.TOUCH_END,this.onBtnCancel,this),cc.find("anchor/grop_detail/btnMark",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnMark,this),o&&(this.hammerText.node.active=!0),c&&(this.hammerText.node.active=!0,this.hammerText.string="\u662f\u5426\u786e\u5b9a\u6d88\u8017\u94bb\u77f3\u518d\u6b21\u53c2\u8d5b\uff1f"),this.show(e,t,i,s,o,c)},t.prototype.onLoad=function(){s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnCancel(null)},t.prototype.onBtnOK=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/buton"),!1),this._callback(),this._hide()},t.prototype.onBtnCancel=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/buton"),!1),this.groupCancel.active||this._callback(),this._hide()},t.prototype.onBtnMark=function(e){this.position?(this.mark.active=c.model.lobby.doubleDanUseDiamond,c.model.lobby.doubleDanUseDiamond=!c.model.lobby.doubleDanUseDiamond):this.fishFlag?(this.mark.active=c.model.lobby.fishKingFlag,c.model.lobby.fishKingFlag=!c.model.lobby.fishKingFlag):(this.mark.active=c.model.table.isShowBuyTip,c.model.table.isShowBuyTip=!c.model.table.isShowBuyTip)},t.prototype.show=function(e,t,i,n,s,o){void 0!==t&&"function"==typeof t&&(n=i,i=t,t=1),this.item_num.string=e.toString(),this.callback=i||null,this.target=n||null,this.position=s||null,this.fishFlag=o||null},t.prototype._hide=function(){this.node.removeFromParent(),this.destroy()},t.prototype._callback=function(){this.callback&&this.target&&(this.callback.call(this.target),this.callback=null,this.target=null,this.position=null,this.fishFlag=null)},t}(cc.Component);i.MessageItemBuy=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_message_label:[function(e,t,i){"use strict";cc._RF.push(t,"af390zaIvlCjqDjBFEncEdF","fish_message_label"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../../assets_manager"),c=e("../../model/fish_model"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t){this.csbNode=null,this.txt=null,this.tip_bg=null,this.message=e,this.timeout=t},t.prototype.onLoad=function(){n.evtCenter.emit(s.evts.EVT_REMOVE_TIP_LICK_FISH,this),this.csbNode=cc.instantiate(o.AssetsManager.getRes("prefabs/message_tip_label"));var e=n.utils.getSwingPosition(n.utils.getRelativeSeat(c.model.table.seatId));this.txt=cc.find("archor/txt",this.csbNode).getComponent(cc.Label),this.tip_bg=cc.find("archor/tip_bg",this.csbNode),this.csbNode.setPosition(e),this.node.addChild(this.csbNode),this.txt.string=this.message;var t=this.txt.node.getContentSize(),i=this.tip_bg.getContentSize();this.tip_bg.setContentSize(cc.size(t.width+80,i.height)),this.show(this.timeout),n.evtCenter.on(s.evts.EVT_REMOVE_MSG_LABEL,this._hide,this)},t.prototype.onDestroy=function(){},t.prototype.show=function(e){this.timeout=e||3,this.timeout>0&&(this.unschedule(this._hide),this.scheduleOnce(this._hide,this.timeout))},t.prototype._hide=function(){this.unschedule(this._hide),this.node.removeFromParent()},t}(cc.Component);i.MessageTipLabel=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_message_tips:[function(e,t,i){"use strict";cc._RF.push(t,"a75c0cq4DVL56hrZHj1e3br","fish_message_tips"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../fish"),o=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.txt=null,t.timeout=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/message_tips")),s.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),this.txt=cc.find("txt",this.csbNode).getComponent(cc.Label)},t.prototype.onDestroy=function(){},t.prototype.onTouchHide=function(){this._hide()},t.prototype.show=function(e,t){this.txt.string=e,this.timeout=t||2,this.timeout>0&&(this.unschedule(this._hide),this.scheduleOnce(this._hide,this.timeout));var i=this.csbNode.getComponent(cc.Animation);this.node.stopAllActions(),i.play("show")},t.prototype._hide=function(){var e=this.csbNode.getComponent(cc.Animation);this.node.stopAllActions(),e.play("hide")},t}(cc.Component);i.MessageTips=o,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../fish":"fish"}],fish_mini_card:[function(e,t,i){"use strict";cc._RF.push(t,"95c023mZWVL/YvBxMGou9CR","fish_mini_card"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../buffer/fish_buffer"),a=e("../../model/fish_model"),r=e("../../define/fish_msg_types"),h=e("../../scene/fish_scene_login"),l=e("../../logic/fish_tcp"),d=e("../../fish"),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t){this.csbRoot=null,this.drop=e,this.fromPos=t,this.beShake=!1,this.light_effect=null,this.question_mark_1=null},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/minigame_card")),d.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.light_effect=cc.find("archor/groupMiniGame/light_effect",this.csbRoot),this.question_mark_1=cc.find("archor/groupMiniGame/Node_26/panelMiniGame/question_mark_1",this.csbRoot),cc.find("archor/groupMiniGame/Node_26/panelMiniGame/btnMiniGame",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onClickBtnMiniGame,this),this.light_effect.active=!0,this.drop&&(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/mini_card_drop"),!1),this.runDropAction(this.fromPos),this.csbRoot.active=!1),this.question_mark_1.stopAllActions(),this.question_mark_1.runAction(cc.repeatForever(cc.sequence(cc.tintTo(.5,255,255,255),cc.tintTo(.8,255,128,255),cc.tintTo(.5,255,255,255),cc.tintTo(.8,128,255,255),cc.tintTo(.5,255,255,255),cc.tintTo(.8,255,255,128)))),this.light_effect.runAction(cc.repeatForever(cc.rotateBy(1,67.5))),s.evtCenter.on(o.evts.EVT_HIDE_MG_CARD,this.onEventRemoveMGCard,this),s.evtCenter.on(o.evts.EVT_MINI_GAME_START,this.onEventMiniGameStart,this),s.evtCenter.on(o.evts.EVT_MG_CONDITION,this.onEventMGCondition,this)},t.prototype.onEventRemoveMGCard=function(){this.node.removeFromParent(!0),this.destroy()},t.prototype.runDropAction=function(e){var t=cc.winSize,i=cc.v2(t.width-40,120),s=new cc.Node;this.node.addChild(s),s.setPosition(e);var o=cc.instantiate(n.AssetsManager.getRes("prefabs/card_drop"));s.addChild(o),cc.find("bg_light",o).runAction(cc.repeatForever(cc.rotateBy(1,67.5))),cc.find("card_node/question_mark",o).runAction(cc.repeatForever(cc.sequence(cc.tintTo(.5,255,255,255),cc.tintTo(.8,255,128,255),cc.tintTo(.5,255,255,255),cc.tintTo(.8,128,255,255),cc.tintTo(.5,255,255,255),cc.tintTo(.8,255,255,128))));var c=o.getComponent(cc.Animation);c.on(cc.Animation.EventType.FINISHED,function(){c.targetOff(this),s.stopAllActions(),s.runAction(cc.sequence(cc.spawn(cc.moveTo(1,i),cc.rotateBy(1,375)),cc.callFunc(function(){s.removeFromParent(),this.csbRoot.active=!0}.bind(this),null,this.miniCard)))}.bind(this),this),c.play("animate_drop")},t.prototype.onClickBtnMiniGame=function(e){if(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),1==a.model.mini.miniGameLevel){var t=s.configTable.mini_game1[a.model.mini.miniGameLevel];if(a.ME.playerInfo.maxWeapon.weaponId<t.Unlock_weapon){var i=s.configTable.weapon[t.Unlock_weapon];s.evtCenter.emit(o.evts.EVT_MG_OPEN_TIP,"gun",parseInt(i.multiple))}else if(c.buffer.gameGold.gold<t.Min_Gold)s.evtCenter.emit(o.evts.EVT_MG_OPEN_TIP,"gold",t.Min_Gold);else{var d={cmd:r.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:a.ME.userId,action:"miniGame",subAction:"start",roomId:a.model.table.roomId,tableId:a.model.table.tableId,seatId:a.model.table.seatId,clientId:h.AccountInfo.clientId}};l.tcp.send(d)}}else if(2==a.model.mini.miniGameLevel){t=s.configTable.mini_game2[a.model.mini.miniGameLevel];if(a.ME.playerInfo.maxWeapon.weaponId<t.unlock_weapon){i=s.configTable.weapon[t.unlock_weapon];s.evtCenter.emit(o.evts.EVT_MG_OPEN_TIP,"gun",parseInt(i.multiple))}else c.buffer.gameGold.gold<t.min_Gold?s.evtCenter.emit(o.evts.EVT_MG_OPEN_TIP,"gold",t.min_Gold):(d={cmd:r.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:a.ME.userId,action:"miniGame",subAction:"start",roomId:a.model.table.roomId,tableId:a.model.table.tableId,seatId:a.model.table.seatId,clientId:h.AccountInfo.clientId}},l.tcp.send(d))}},t.prototype.onEventMiniGameStart=function(e,t,i,c){if(i==a.model.table.seatId){this.csbRoot.stopAllActions();var r=this.csbRoot.getComponent(cc.Animation);r.on(cc.Animation.EventType.FINISHED,function(){8101==t?(r.targetOff(this),r.on(cc.Animation.EventType.FINISHED,function(){r.play("mermaid_tip"),s.evtCenter.emit(o.evts.EVT_POPUP_MERMAID_FORCE,e,[],0)}.bind(this),this),r.play("show_mermaid")):8201==t&&(r.targetOff(this),r.on(cc.Animation.EventType.FINISHED,function(){r.play("chest_tip"),s.evtCenter.emit(o.evts.EVT_POPUP_CHEST_FORCE,e,c,[],0)}.bind(this),this),r.play("show_octupos"))}.bind(this),this),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/mini_card_fly"),!1),r.play("card_fly")}},t.prototype.onEventMGCondition=function(){var e=c.buffer.gameGold.gold;if(1==a.model.mini.miniGameLevel){var t=s.configTable.mini_game1[a.model.mini.miniGameLevel];if(a.ME.playerInfo.maxWeapon.weaponId>=t.Unlock_weapon&&e>=t.Min_Gold){if(!this.beShake)this.beShake=!0,this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("card_shake").wrapMode=cc.WrapMode.Loop}else this.beShake=!1,this.csbRoot.stopAllActions()}else if(2==a.model.mini.miniGameLevel){t=s.configTable.mini_game2[a.model.mini.miniGameLevel];if(a.ME.playerInfo.maxWeapon.weaponId>=t.unlock_weapon&&e>=t.min_gold){if(!this.beShake)this.beShake=!0,this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("card_shake").wrapMode=cc.WrapMode.Loop}else this.beShake=!1,this.csbRoot.stopAllActions()}},t.prototype.onDestroy=function(){s.evtCenter.off(o.evts.EVT_HIDE_MG_CARD,this.onEventRemoveMGCard,this),s.evtCenter.off(o.evts.EVT_MINI_GAME_START,this.onEventMiniGameStart,this),s.evtCenter.off(o.evts.EVT_MG_CONDITION,this.onEventMGCondition,this)},t}(cc.Component);i.MiniCard=_,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_model_activity:[function(e,t,i){"use strict";cc._RF.push(t,"182ec5QOHJKo4fJiBT3jjS1","fish_model_activity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("./fish_model"),c=e("../scene/fish_scene_login"),a=e("../logic/fish_tcp"),r=e("../define/fish_event_types"),h=e("../../xmen_interface"),l=e("../buffer/fish_buffer"),d=function(){function e(){this.firstCharge={},this.openActArr=[],this.curWeapon=0,this.weaponReward=[],this.selWeaponLv=2101,this.rmbs=0,this.rw=0,this.satisfy=0,this.crystal_rmbs=0,this.crystal_rw=0,this.crystal=0,this.crystal_time=0,this.curCell=0,this.activity_exist=!1,this.doubleDan=!1,this.newYearData=null,this.newYearMyRankingData=null,this.newYearAllRankingData=null,this.beatBeastUseDiamondTip=!0,this.showFestivalLogin=!1,this.isPopActivity=!1,this.newYearShowType=null,this.channelRewardData=null,this.myChannelRank=null,this.actSharkOrBeast=1,this.actSharkTime="",n.msgCenter.on(s.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.on(s.msgs.MSG_FISH_ACTIVITY,this.onMsgActivity,this),n.msgCenter.on(s.msgs.MSG_GAME,this.onMsgDoubleDan,this),n.msgCenter.on(s.msgs.MSG_GAME,this.onMsgNewYearData,this),n.msgCenter.on(s.msgs.MSG_GAME,this.onMsgBeatBeastResult,this),n.msgCenter.on(s.msgs.MSG_GAME,this.onMsgGetFireworks,this),n.msgCenter.on(s.msgs.MSG_GAME,this.onMsgRankingData,this),n.msgCenter.on(s.msgs.MSG_GAME,this.onMsgChannelData,this)}return e.prototype.release=function(){this.openActArr=[],this.firstCharge=[],this.weaponReward=[],this.newYearData=null,n.msgCenter.off(s.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.off(s.msgs.MSG_FISH_ACTIVITY,this.onMsgActivity,this),n.msgCenter.off(s.msgs.MSG_GAME,this.onMsgDoubleDan,this),n.msgCenter.off(s.msgs.MSG_GAME,this.onMsgNewYearData,this),n.msgCenter.off(s.msgs.MSG_GAME,this.onMsgBeatBeastResult,this),n.msgCenter.off(s.msgs.MSG_GAME,this.onMsgGetFireworks,this),n.msgCenter.off(s.msgs.MSG_GAME,this.onMsgRankingData,this),n.msgCenter.off(s.msgs.MSG_GAME,this.onMsgChannelData,this)},e.prototype.onMsgGameData=function(e){if(e.userId==o.ME.userId&&9999==e.gameId){var t=e.gdata;t.hasOwnProperty("activityCheckin")&&(this.showFestivalLogin=t.activityCheckin)}},e.prototype.onMsgActivity=function(e){var t=e.code;if(cc.log("--------------------"),cc.log(JSON.stringify(e)),cc.log("--------------------"),"update"===e.action){this.openActArr=[];for(var i=0;i<e.info.length;i++)if("inviteReward"===e.info[i].Id)this.openActArr.push({idx:1,sortId:3});else if("huafei"===e.info[i].Id)this.openActArr.push({idx:2,sortId:4});else if("FirstRecharge"===e.info[i].Id)this.openActArr.push({idx:3,sortId:8}),this.firstCharge=e.info[i].info;else if("dailyTask"===e.info[i].Id)this.openActArr.push({idx:4,sortId:5});else if("redenvelope"===e.info[i].Id)this.openActArr.push({idx:5,sortId:6});else if("GunUp"===e.info[i].Id)this.openActArr.push({idx:6,sortId:7}),this.curWeapon=e.info[i].info.gLv,this.weaponReward=e.info[i].info.rewarded;else if("randomChargeDouble"===e.info[i].Id)this.openActArr.push({idx:7,sortId:9});else if("shuangdan"===e.info[i].Id)this.openActArr.push({idx:8,sortId:10});else if("charge"===e.info[i].Id)this.openActArr.push({idx:9,sortId:2}),this.rmbs=e.info[i].info.rmbs,this.rw=e.info[i].info.rw,this.satisfy=e.info[i].info.satisfy;else if("chinese_new_year"===e.info[i].Id)this.newYearShowType=e.info[i].info.showType,this.openActArr.push({idx:13,sortId:1}),this.formatSharkTime(e.info[i].info.startTime,e.info[i].info.endData);else if("activity_checkin"===e.info[i].Id);else if("recharge_rank"===e.info[i].Id)if(this.openActArr.push({idx:11,"sortId:":11}),o.model.dailytask.isLobby){var d={cmd:s.msgs.CMD_GAME,params:{action:"getRechargeRank",gameId:28,userId:o.ME.userId,clientId:c.AccountInfo.clientId}};a.tcp.send(d),cc.log("======111111==========")}else{var _={cmd:"table_call2",params:{gameId:28,userId:o.ME.userId,action:"getRechargeRank",clientId:c.AccountInfo.clientId,roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId}};a.tcp.send(_),cc.log("======222222======")}else"charge_crystal"===e.info[i].Id&&(this.openActArr.push({idx:12,sortId:1}),this.crystal_rmbs=e.info[i].info.rmbs,this.crystal_rw=e.info[i].info.rw,this.crystal=e.info[i].info.satisfy,this.chargeCrystalTime(e.info[i].info.startTime,e.info[i].info.endTs));"baidusearch"==h.xmen.SystemInfo.getConfig().main_channel_default&&this.openActArr.push({idx:14,sortId:14}),this.openActArr.push({idx:0,sortId:20}),this.openActArr.sort(function(e,t){return e.sortId>t.sortId?1:-1}),this.isPopActivity&&this.showActivityView()}else if("reward"==e.action){if(0!=t)return void(e.userId==o.ME.userId&&(1==t?n.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u5df2\u9886\u53d6\uff01"):2==t?n.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u4e0d\u6ee1\u8db3\u9886\u53d6\u6761\u4ef6\uff01"):3==t&&n.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u5185\u90e8\u9519\u8bef\uff01")));if("FirstRecharge"==e.activityId){var f=n.configTable.gift[7244],p=[];for(i=1;i<=5;i++){var u=f["Gift"+i];if(u&&0!=u){var m={giftId:u,giftIcon:f["Gift"+i+"_icon"],giftNum:f["Gift"+i+"_Number"]};p.push(m)}}if(e.userId==o.ME.userId)o.model.guide.isFirstCharge=!0,o.model.guide.isGetFirstChargeReward=!0,n.evtCenter.emit(r.evts.EVT_GET_FIRST_REWARD,this),n.evtCenter.emit(r.evts.EVT_POP_REWARD_PANEL,p,"");else{var g=e.rwx;l.buffer.onRwxDrop(g,e.userId)}}else if("GunUp"==e.activityId)if(e.userId==o.ME.userId)this.weaponReward.push(this.selWeaponLv),n.evtCenter.emit(r.evts.EVT_UPDATE_ACT_LV,this),n.evtCenter.emit(r.evts.EVT_POP_REWARD_PANEL,this.getRewardData(e.gLv),"");else{g=e.rwx;l.buffer.onRwxDrop(g,e.userId)}else if("charge"==e.activityId){if(e.userId==o.ME.userId){p=[{giftId:3106,giftIcon:"fish_jiguang1.png",giftNum:1},{giftId:3110,giftIcon:"fish_hedan.png",giftNum:1}];n.evtCenter.emit(r.evts.EVT_GET_ARTIFACT_REWARD,this),n.evtCenter.emit(r.evts.EVT_POP_REWARD_PANEL,p,"")}}else if("charge_crystal"==e.activityId&&e.userId==o.ME.userId){p=[{giftId:3111,giftIcon:"fish_crystal_purple.png",giftNum:10},{giftId:3112,giftIcon:"fish_crystal_blue.png",giftNum:10},{giftId:3113,giftIcon:"fish_crystal_yellow.png",giftNum:10},{giftId:3114,giftIcon:"fish_crystal_red.png",giftNum:10}];n.evtCenter.emit(r.evts.EVT_GET_CRYSTAL_REWARD,this),n.evtCenter.emit(r.evts.EVT_POP_REWARD_PANEL,p,"")}}},e.prototype.isWeaponInRewarded=function(e){if(this.weaponReward.length<=0)return!1;for(var t=0;t<this.weaponReward.length;t++)if(e==this.weaponReward[t])return!0;return!1},e.prototype.getRewardData=function(e){for(var t=0,i=0;i<6;i++)if(n.configTable.weaponup_reward[i].weapon_lvl==e){t=n.configTable.weaponup_reward[i].lvlup_reward;break}for(var s=n.configTable.gift[t],o=[],c=1;c<=5;c++){var a=s["Gift"+c];if(a&&0!=a){var r={giftId:a,giftIcon:s["Gift"+c+"_icon"],giftNum:s["Gift"+c+"_Number"]};o.push(r)}}return o},e.prototype.requestActivityData=function(e,t){this.curCell=e,this.isPopActivity=t;var i={cmd:s.msgs.CMD_FISH_ACTIVITY,params:{action:"update",gameId:28,userId:o.ME.userId,clientId:c.AccountInfo.clientId}};a.tcp.send(i)},e.prototype.showActivityView=function(){this.activity_exist||(this.activity_exist=!0,n.evtCenter.emit(r.evts.EVT_POP_ACTIVITY,this.curCell))},e.prototype.onMsgDoubleDan=function(e){if(cc.log("**************************** onMsgDoubleDan",e),e.userId==o.ME.userId)n.evtCenter.emit(r.evts.EVT_DOUBLE_DAN_RESULT,e);else{if(0!=e.reason)return;if("hitEgg"!=e.action)return;for(var t in e.rwx)e.rwx.hasOwnProperty(t)&&"user:chip"==t&&l.buffer.pushGold(e.userId,e.rwx[t],1)}},e.prototype.onMsgNewYearData=function(e){cc.log("**************************** onMsgNewYearData",e),e&&e.userId==o.ME.userId&&"enterCNYDefend"==e.action&&(4==e.reason?(this.newYearData={small_firecrackers:e.small_firecrackers,big_firecrackers:e.big_firecrackers,can_get_sfirecracker:e.can_get_sfirecracker,can_get_bfirecracker:e.can_get_bfirecracker,nian_type:e.nian_type,nian_hp:e.nian_hp,full_hp:e.nian_full_hp,isReceived:e.isReceived,is_last_day:e.is_last_day,is_Undead:e.isUndead},n.evtCenter.emit(r.evts.EVT_BEAT_COMPLETED,this)):99==e.reason&&n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2),this.newYearData={small_firecrackers:e.small_firecrackers,big_firecrackers:e.big_firecrackers,can_get_sfirecracker:e.can_get_sfirecracker,can_get_bfirecracker:e.can_get_bfirecracker,nian_type:e.nian_type,nian_hp:e.nian_hp,full_hp:e.nian_full_hp,isReceived:e.isReceived,is_last_day:e.is_last_day},n.evtCenter.emit(r.evts.EVT_UPDATE_NEW_YEAR_DATA,e.reason,this))},e.prototype.onMsgBeatBeastResult=function(e){if(cc.log("**************************** onMsgBeatBeastResult",e),(!e||"hitNian"==e.action)&&e.userId==o.ME.userId)return e&&0!=e.reason?(1==e.reason?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u9053\u5177\u6570\u91cf\u4e0d\u591f",2):2==e.reason?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u94bb\u77f3\u4e0d\u8db3",2):99==e.reason?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u4e0d\u5728\u6d3b\u52a8\u65f6\u95f4\u5185",2):4==e.reason||n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2),void n.evtCenter.emit(r.evts.EVT_BEAT_BEAST_ERROR,this)):void(e.userId==o.ME.userId&&(this.newYearData.damage=e.damage,this.newYearData.nian_type=e.nian_type,this.newYearData.nian_hp=e.nian_hp,this.newYearData.full_hp=e.nian_full_hp,this.newYearData.small_firecrackers=e.small_firecrackers,this.newYearData.big_firecrackers=e.big_firecrackers,this.newYearData.changed=e.changed,this.newYearData.isOver=e.isOver,e.cost_diamond>0&&l.buffer.subDiamond(o.ME.userId,e.cost_diamond),n.evtCenter.emit(r.evts.EVT_BEAT_BEAST_RESULT,this),n.evtCenter.emit(r.evts.EVT_RUN_BEAST_ACTION,e.rwx,e.damage)))},e.prototype.onMsgGetFireworks=function(e){if(cc.log("**************************** onMsgGetFireworks",e),(!e||"getFirecracker"==e.action)&&e.userId==o.ME.userId){if(e&&0!=e.reason)return void(99==e.reason?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u4e0d\u5728\u6d3b\u52a8\u65f6\u95f4\u5185",2):1==e.reason?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u4eca\u65e5\u5df2\u9886\u8fc7\u70ae\u7af9",2):n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2));this.newYearData.small_firecrackers=e.small_firecrackers,this.newYearData.big_firecrackers=e.big_firecrackers,this.newYearData.isReceived=1;var t=[],i=null;this.actSharkOrBeast?e.big_inc>0&&(i={giftId:3122,giftIcon:"fish_icon_torpedo.png",giftNum:e.big_inc},t.push(i)):(e.small_inc>0&&(i={giftId:3502,giftIcon:"fish_newyear_xiaopaozhu.png",giftNum:e.small_inc},t.push(i)),e.big_inc>0&&(i={giftId:3503,giftIcon:"fish_newyear_dapaozhu.png",giftNum:e.big_inc},t.push(i))),t.length>0&&(n.evtCenter.emit(r.evts.EVT_POP_REWARD_PANEL,t,""),n.evtCenter.emit(r.evts.EVT_BEAT_BEAST_RESULT,this),n.evtCenter.emit(r.evts.EVT_GET_FIRE_RESULT,this))}},e.prototype.onMsgRankingData=function(e){cc.log("**************************** onMsgRankingData",e),e&&"getCNYRank"!=e.action||e&&0!=e.reason||null!=e.tabs&&e.userId==o.ME.userId&&(this.newYearMyRankingData=e.tabs[0].myself,this.newYearAllRankingData=e.tabs[1].rankDatas,n.evtCenter.emit(r.evts.EVT_UPDATE_RANKING_DATA,this))},e.prototype.onMsgChannelData=function(e){cc.log("**************************** onMsgChannelData",e),e&&"getRechargeRank"!=e.action||e&&0!=e.reason||null!=e.tabs&&0==e.reason&&"getRechargeRank"==e.action&&(this.channelRewardData=e.tabs[1].rankDatas,this.myChannelRank=e.tabs[0].myself,cc.log("==========33333333======"+JSON.stringify(this.myChannelRank)))},e.prototype.chargeCrystalTime=function(e,t){if(this.crystal_time="",0!=e.length&&0!=t.length){var i=parseInt(e.substr(5,2)),n=parseInt(e.substr(8,2)),s=e.substr(11,5),o=parseInt(t.substr(5,2)),c=parseInt(t.substr(8,2)),a=t.substr(11,5);this.crystal_time=i+"\u6708"+n+"\u65e5"+s+"-"+o+"\u6708"+c+"\u65e5"+a}},e.prototype.formatSharkTime=function(e,t){if(this.actSharkTime="",0!=e.length&&0!=t.length){var i=parseInt(e.substr(4,2)),n=parseInt(e.substr(6,2)),s=parseInt(t.substr(4,2)),o=parseInt(t.substr(6,2));this.actSharkTime=i+"\u6708"+n+"\u65e5-"+s+"\u6708"+o+"\u65e5"}},e.prototype.ReadBoolFromLocalStorage=function(e,t){var i=cc.sys.localStorage.getItem(e);return i?"true"===i:t},e}();i.Activity=d,cc._RF.pop()},{"../../xmen_interface":"xmen_interface","../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model_arena:[function(e,t,i){"use strict";cc._RF.push(t,"e87ce76K1JC/pK4xdXhT+CP","fish_model_arena"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("../define/fish_event_types"),c=e("../view/arena/fish_match_info"),a=e("../scene/loading/fish_scene_loading_game_to_lobby"),r=function(){function e(){this.matchList=[],this.toDayMatchList=null,this.matchRewardInfo=null,this.taskRewardEnd=!1,this.taskRewardGainScore=!1,this.openArenaWindowFlag=!0,this.bigPrizeCfgId=9101,n.msgCenter.on(s.msgs.MSG_MATCH_LIST,this.onMsgMatchList,this),n.msgCenter.on(s.msgs.MSG_MATCH_INFO,this.onMsgMatchInfo,this),n.msgCenter.on(s.msgs.MSG_MATCH_ENTER,this.onMsgMatchEnter,this),n.msgCenter.on(s.msgs.MSG_MATCH_FAMOUS,this.onMsgMatchFamous,this),n.msgCenter.on(s.msgs.MSG_MATCH_REWARD_LIST,this.onMsgMatchRewardList,this),n.msgCenter.on(s.msgs.MSG_MATCH_INFO_YSTD,this.onMsgMatchInfoYstd,this),n.msgCenter.on(s.msgs.MSG_MATCH_REWARD,this.onMsgMatchReward,this),n.msgCenter.on(s.msgs.MSG_MATCH_END_TIP,this.onMsgMatchEndTip,this),n.msgCenter.on(s.msgs.MSG_MATCH_RESULT,this.onMsgMatchResult,this),n.msgCenter.on(s.msgs.MSG_TLMT_TASK,this.onMsgMatchTask,this)}return e.prototype.release=function(){this.matchList=[],n.msgCenter.on(s.msgs.MSG_MATCH_LIST,this.onMsgMatchList,this),n.msgCenter.on(s.msgs.MSG_MATCH_INFO,this.onMsgMatchInfo,this),n.msgCenter.on(s.msgs.MSG_MATCH_ENTER,this.onMsgMatchEnter,this),n.msgCenter.on(s.msgs.MSG_MATCH_FAMOUS,this.onMsgMatchFramous,this),n.msgCenter.on(s.msgs.MSG_MATCH_REWARD_LIST,this.onMsgMatchRewardList,this),n.msgCenter.on(s.msgs.MSG_MATCH_INFO_YSTD,this.onMsgMatchInfoYstd,this),n.msgCenter.on(s.msgs.MSG_MATCH_REWARD,this.onMsgMatchReward,this),n.msgCenter.on(s.msgs.MSG_MATCH_END_TIP,this.onMsgMatchEndTip,this),n.msgCenter.on(s.msgs.MSG_MATCH_RESULT,this.onMsgMatchResult,this),n.msgCenter.on(s.msgs.MSG_TLMT_TASK,this.onMsgMatchTask,this)},e.prototype.onMsgMatchList=function(e){this.matchList=[];for(var t=e.rooms,i=0;i<t.length;i++){var s=new c.MatchInfo(t[i]);this.matchList.push(s)}n.evtCenter.emit(o.evts.EVT_RECV_MATCH_LIST)},e.prototype.onMsgMatchInfo=function(e){cc.log("**************************** onMsgMatchInfo",e),this.toDayMatchList=null,this.toDayMatchList=e,this.openArenaWindowFlag&&n.evtCenter.emit(o.evts.EVT_POPUP_ARENA_WINDOW,e)},e.prototype.onMsgMatchEnter=function(e){cc.log("**************************** onMsgMatchEnter",e),(e=e).reason&&n.evtCenter.emit(o.evts.EVT_RECV_MATCH_ENTER,e.reason)},e.prototype.onMsgMatchFamous=function(e){cc.log("**************************** onMsgMatchFramous",e),n.evtCenter.emit(o.evts.EVT_POPUP_ARENA_MANITO,e)},e.prototype.onMsgMatchRewardList=function(e){cc.log("**************************** onMsgMatchRewardList",e),null==this.matchRewardInfo?(this.matchRewardInfo=e,n.evtCenter.emit(o.evts.EVT_POPUP_ARENA_REWARD,e)):(this.matchRewardInfo=e,n.evtCenter.emit(o.evts.EVT_RECV_ARENA_REWARD_INFO,e))},e.prototype.onMsgMatchInfoYstd=function(e){cc.log("**************************** onMsgMatchInfoYstd",e),n.evtCenter.emit(o.evts.EVT_RECV_MATCH_INFO_YSTD,e)},e.prototype.onMsgMatchReward=function(e){cc.log("**************************** onMsgMatchReward",e),n.evtCenter.emit(o.evts.EVT_RECV_MATCH_REWARD,e)},e.prototype.onMsgMatchEndTip=function(e){cc.log("**************************** onMsgMatchEndTip",e),n.evtCenter.emit(o.evts.EVT_ARENA_END_NOTIFY,e.minutesLeft)},e.prototype.onMsgMatchResult=function(e){if(cc.log("**************************** onMsgMatchResult",e),e.hasOwnProperty("reason")&&0!=e.reason)return n.evtCenter.emit(o.evts.EVT_ARENA_ABORTION,this),void n.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u60a8\u5728\u6bd4\u8d5b\u7ed3\u675f\u524d\u6ca1\u80fd\u5b8c\u6210\u6bd4\u8d5b\uff0c\u4e0b\u6b21\u8981\u6293\u7d27\u65f6\u95f4\u54e6",1,this.sendLeaveMsg,this);n.evtCenter.emit(o.evts.EVT_POP_ARENA_SETTLEMENT,{score:e.score,vipAdd:e.vipAdd,weaponAdd:e.weaponAdd,totalScore:e.totalScore,topScore:e.topScore,rank:e.rank})},e.prototype.sendLeaveMsg=function(){n.evtCenter.emit(o.evts.EVT_POPUP_LOADING,a.SceneGameToLobby)},e.prototype.onMsgMatchTask=function(e){"ready"==e.action&&(this.taskRewardGainScore=e.score,n.evtCenter.emit(o.evts.EVT_POP_ARENA_TASK,e.score)),n.evtCenter.emit(o.evts.EVT_ARENA_TASK,e)},e}();i.Arena=r,cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../scene/fish_scene":"fish_scene","../scene/loading/fish_scene_loading_game_to_lobby":"fish_scene_loading_game_to_lobby","../view/arena/fish_match_info":"fish_match_info"}],fish_model_bankrupt_package:[function(e,t,i){"use strict";cc._RF.push(t,"75688xtp9BDKK/qDoocLMLC","fish_model_bankrupt_package"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_event_types"),o=e("../define/fish_msg_types"),c=e("./fish_model"),a=e("../scene/fish_scene_login"),r=e("../logic/fish_tcp"),h=e("../../xmen_interface"),l=function(){function e(){this.current_package=null,this.bChongXiaoQian=!1,this.charging_param={TY28BKRUPT0001:{name:"1\u5143\u9650\u65f6\u793c\u5305",price:1},TY28BKRUPT0012:{name:"1\u5143\u9650\u65f6\u793c\u5305",price:1},TY28BKRUPT0030:{name:"1\u5143\u9650\u65f6\u793c\u5305",price:1},TY28BKRUPT0098:{name:"1\u5143\u9650\u65f6\u793c\u5305",price:1},TY28BKRUPT0198:{name:"1\u5143\u9650\u65f6\u793c\u5305",price:1}},n.evtCenter.on(s.evts.EVT_CHECK_BANKRUPT_PACKAGE,this.checkBankruptPackage,this),n.msgCenter.on(o.msgs.MSG_BANKRUPT_PACKAGE,this.onResponseBankrupt,this),n.msgCenter.on(o.msgs.MSG_STORE_FISH,this.onMsgStoreFish,this),n.msgCenter.on(o.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.on(o.msgs.MSG_PROD_DELIVERY,this.onMsgProdDelivery,this)}return e.prototype.release=function(){n.evtCenter.off(s.evts.EVT_CHECK_BANKRUPT_PACKAGE,this.checkBankruptPackage,this),n.msgCenter.off(o.msgs.MSG_BANKRUPT_PACKAGE,this.onResponseBankrupt,this),n.msgCenter.off(o.msgs.MSG_STORE_FISH,this.onMsgStoreFish,this),n.msgCenter.off(o.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.off(o.msgs.MSG_PROD_DELIVERY,this.onMsgProdDelivery,this)},e.prototype.checkBankruptPackage=function(e){if(cc.log("**************************** checkBankruptPackage",e),this.current_package)this.showBankruptPackageUI();else{var t={action:o.msgs.CMD_BANKRUPT_PACKAGE,gameId:28,userId:c.ME.userId,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId,clientId:a.AccountInfo.clientId};r.tcp.send({cmd:o.msgs.CMD_TABLE_CALL_2,params:t}),n.evtCenter.emit(s.evts.EVT_NET_SHOW_WAITING)}},e.prototype.onResponseBankrupt=function(e){cc.log("**************************** onResponseBankrupt",e),cc.log("onResponseBankrupt"),n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING),0==e.reason?(this.__getCurrentPackage(e.productId,e.giftId,e.timeStamp,e.countDown),this.showBankruptPackageUI(!0)):c.model.guide.penny?n.evtCenter.emit(s.evts.EVT_POPUP_SHOP_WINDOW,c.model.shop.SHOP_GOLD):n.evtCenter.emit(s.evts.EVT_POP_FIRST_CHARGE,this)},e.prototype.purchasePackage=function(e){var t={cmd:o.msgs.CMD_STORE_FISH,params:{action:"order_transaction",gameId:9999,userId:c.ME.userId,clientId:a.AccountInfo.clientId,prodId:this.current_package.productId,count:1,bkrptSetTs:this.current_package.start_time,isRecharge:0}};r.tcp.send(t),n.evtCenter.emit(s.evts.EVT_NET_SHOW_WAITING)},e.prototype.onMsgStoreFish=function(e){cc.log("**************************** onMsgStoreFish",e);var t=this.charging_param[e.prodId];switch(e.prodId){case"TY28BKRUPT0001":case"TY28BKRUPT0012":case"TY28BKRUPT0030":case"TY28BKRUPT0030":case"TY28BKRUPT0030":n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING);var i=e.orderId;if(!i||""==i)return;h.xmen.SDKInterfaceManager.payDiamond(e.prodId,1,t.name,t.price,"",i,0,c.ME.userId)}},e.prototype.onMsgGameData=function(e){if(e.userId==c.ME.userId&&9999==e.gameId){var t=e.gdata&&e.gdata.bkrptSet;t?(this.__getCurrentPackage(t.productId,t.giftId,t.timeStamp,t.countDown),this.current_package&&n.evtCenter.emit(s.evts.EVT_SHOW_BANKRUPT_PACKAGE_BTN,!0)):this.current_package=null}},e.prototype.onMsgProdDelivery=function(e){if(cc.log("**************************** onMsgProdDelivery",e),this.current_package)return e.prodId==this.current_package.productId?(n.evtCenter.emit(s.evts.EVT_POP_REWARD_PANEL,this.current_package.items,""),n.evtCenter.emit(s.evts.EVT_PURCHASE_BANKRUPT_PACKAGE_SUCCESS),void(this.current_package=null)):void 0},e.prototype.showBankruptPackageUI=function(e){void 0===e&&(e=!1),this.bChongXiaoQian?n.evtCenter.emit(s.evts.EVT_POP_FIRST_CHARGE,this):this.current_package&&n.evtCenter.emit(s.evts.EVT_SHOW_BANKRUPT_PACKAGE,e)},e.prototype.getPackageEndTime=function(){return this.current_package?this.current_package.endtime:Date.now()/1e3+1800},e.prototype.__removeCurrentPackage=function(){this.current_package=null},e.prototype.__getCurrentPackage=function(e,t,i,s){if("TY28P000610102"==e)return this.current_package=null,void(this.bChongXiaoQian=!0);this.bChongXiaoQian=!1;var o={};o.productId=e,o.giftId=t,o.start_time=i,o.endtime=Date.now()/1e3+s;var c=n.configTable.bankruptcy_gift[t];o.priceInfo=c;for(var a=n.configTable.gift[t],r=[],h=1;h<=5;h++){var l=a["Gift"+h];if(l&&0!=l){var d={giftId:l,giftIcon:a["Gift"+h+"_icon"],giftNum:a["Gift"+h+"_Number"]};r.push(d)}}return o.items=r,this.current_package=o,o},e}();i.BankruptPackage=l,cc._RF.pop()},{"../../xmen_interface":"xmen_interface","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model_common:[function(e,t,i){"use strict";cc._RF.push(t,"5a1b4Kv1ppGL5cGzUFijMwU","fish_model_common"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.timeDifferences=0,this.tableStartTime=0,this.systemNoticeFlag=!0}return e.prototype.release=function(){},e.prototype.setServerNowTime=function(e){this.timeDifferences=1e3*e-Date.now()},e.prototype.getServerNowTime=function(){return Date.now()+this.timeDifferences},e.prototype.setTableStartTime=function(e){this.tableStartTime=1e3*e},e.prototype.getTableStartTime=function(){return this.tableStartTime},e.prototype.getTableElapseTime=function(e){return e>0?e-this.tableStartTime/1e3:(Date.now()+this.timeDifferences-this.tableStartTime)/1e3},e}();i.Common=n,cc._RF.pop()},{}],fish_model_dailysign:[function(e,t,i){"use strict";cc._RF.push(t,"195cceW6fZFnrbYJPE6hZ3s","fish_model_dailysign"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("./fish_model"),c=e("../scene/fish_scene_login"),a=e("../logic/fish_tcp"),r=e("../define/fish_event_types"),h=e("../buffer/fish_buffer"),l=function(){function e(){this.rewardDayList=[],this.checkInDays=[],this.rewardStates=[],this.isNormalSign=!0,this.isNewBieSign=!1,this.year="",this.month="",this.day="",this.sign_exist=!1,this.FestivalDays=["20170127","20170128","20170129","20170130","20170131","20170201","20170202","20170203","20170204","20170205","20170206"],this.FestivalSignDays=[],this.curDays="",n.msgCenter.on(s.msgs.MSG_FISH_DAILY_SIGN,this.onMsgDailySignQuest,this)}return e.prototype.release=function(){this.rewardDayList=[],this.checkInDays=[],this.rewardStates=[],n.msgCenter.off(s.msgs.MSG_FISH_DAILY_SIGN,this.onMsgDailySignQuest,this)},e.prototype.onMsgDailySignQuest=function(e){if("update"===e.action){if(0!=e.code)return void n.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u5185\u90e8\u9519\u8bef!");if(this.isNormalSign){for(var t in this.rewardDayList=e.rewardDaysList,this.year=e.curDate.substr(0,4),this.month=e.curDate.substr(4,2),this.day=e.curDate.substr(6,2),this.checkInDays.length=0,e.checkinDates)this.checkInDays.push(parseInt(e.checkinDates[t].substr(6,2)));for(var t in this.rewardStates.length=0,e.daysRewards)this.rewardStates.push(e.daysRewards[t].state);if(this.sign_exist)return;this.sign_exist=!0,n.evtCenter.emit(r.evts.EVT_POPUP_DAILY_SIGN)}else{if(this.FestivalSignDays=e.checkinDates,this.curDays=e.curDate,this.sign_exist)return;this.sign_exist=!0,n.evtCenter.emit(r.evts.EVT_POP_FESTIVAL_LOGIN)}}else if("checkin"===e.action){if(!this.assertsSignResult(e.action,e.code))return;if(this.isNewBieSign)return;if(e.userId==o.ME.userId)this.isNormalSign?(this.sysSignData(e),n.evtCenter.emit(r.evts.EVT_MSG_DAILY_SIGN,e.code,e.action),e.rwx&&n.evtCenter.emit(r.evts.EVT_POP_REWARD_PANEL,this.parseRewardData(e.rwx),"")):n.evtCenter.emit(r.evts.EVT_MSG_DAILY_SIGN,e.rwx,e.action);else{var i=e.rwx;h.buffer.onRwxDrop(i,e.userId)}}else if("getDaysReward"===e.action){if(!this.assertsSignResult(e.action,e.code))return;e.userId==o.ME.userId&&(this.sysSignData(e),n.evtCenter.emit(r.evts.EVT_MSG_DAILY_SIGN,e.code,e.action),n.evtCenter.emit(r.evts.EVT_POP_REWARD_PANEL,this.parseRewardData(e.rwx),""))}},e.prototype.requestDailySignData=function(e){this.isNormalSign=e;var t={cmd:"month_checkin_fish",params:{action:"update",gameId:9999,userId:o.ME.userId,clientId:c.AccountInfo.clientId}};a.tcp.send(t)},e.prototype.requestGetReward=function(e){this.isNewBieSign=e;var t={cmd:"month_checkin_fish",params:{action:"checkin",gameId:9999,userId:o.ME.userId,clientId:c.AccountInfo.clientId}};a.tcp.send(t)},e.prototype.requestGetDaysReward=function(e){var t={cmd:"month_checkin_fish",params:{action:"getDaysReward",gameId:9999,userId:o.ME.userId,clientId:c.AccountInfo.clientId,days:e}};a.tcp.send(t)},e.prototype.parseRewardData=function(e){var t=[],i=null;for(var s in e)if(e.hasOwnProperty(s))if("chip"==s)i={giftId:101,giftIcon:"fish_101.png",giftNum:e[s]},t.push(i);else if("dmd"==s)i={giftId:102,giftIcon:"fish_102.png",giftNum:e[s]},t.push(i);else if("coupon"==s)i={giftId:103,giftIcon:"fish_103.png",giftNum:e[s]},t.push(i);else{var o=parseInt(s.split(":")[1]);o>1e4&&(o-=1e4);var c=n.configTable.item[o];i={giftId:c.item_id,giftIcon:c.big_icon,giftNum:e[s]},t.push(i)}return t},e.prototype.sysSignData=function(e){for(var t in this.rewardStates.length=0,this.rewardStates=[],e.daysRewards)this.rewardStates.push(e.daysRewards[t].state);for(var t in this.checkInDays.length=0,e.checkinDateList)this.checkInDays.push(parseInt(e.checkinDateList[t].substr(6,2)));this.rewardDayList=e.rewardDaysList},e.prototype.assertsSignResult=function(e,t){var i=!0;return"getDaysReward"===e?0!=t&&(1==t?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u5956\u52b1\u5df2\u9886",2):2==t?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u5929\u6570\u4e0d\u8db3,\u65e0\u6cd5\u9886\u53d6\u5956\u52b1",2):4==t?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u4f5c\u5f0a\u884c\u4e3a",2):n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2),i=!1):"checkin"===e&&0!=t&&(1==t?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u5df2\u7ecf\u7b7e\u8fc7",2):2==t?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2):3==t?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2):4==t?n.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u4f5c\u5f0a\u884c\u4e3a",2):5==t&&n.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u8bf7\u5148\u89e3\u950130\u500d\u70ae\n\u9ad8\u624b\u8fc7\u5927\u5e74\uff0c\u5929\u5929\u9001\u8c6a\u793c!"),i=!1),i},e.prototype.isNeedCallbackSign=function(){for(var e in this.rewardStates)if(1==this.rewardStates[e])return!0;return!1},e}();i.DailySign=l,cc._RF.pop()},{"../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model_dailytask:[function(e,t,i){"use strict";cc._RF.push(t,"d1dc4fBYMNFGL7fvYxcg8Rx","fish_model_dailytask"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("../define/fish_event_types"),c=e("./fish_model"),a=e("../buffer/fish_buffer"),r=function(){function e(){this.boxTag=0,this.firstRewardTag=0,this.dailyDataLength=13,this.completed=[],this.stateList=[],this.totalValue=0,this.rewardItems=[],this.isLobby=!1,this.goMatch=!1,n.msgCenter.on(s.msgs.MSG_FISH_DAILY_TASK,this.onMsgDailyQuest,this)}return e.prototype.release=function(){this.completed=[],this.stateList=[],this.rewardItems=[],n.msgCenter.off(s.msgs.MSG_FISH_DAILY_TASK,this.onMsgDailyQuest,this)},e.prototype.onMsgDailyQuest=function(e){if(cc.log("****************************** onMsgDailyQuest",e),"update"===e.action)this.totalValue=e.totalValue,this.stateList=e.list,this.stateList.sort(function(e,t){return e.Id<t.Id?1:-1}),this.completed=e.gotReward,n.evtCenter.emit(o.evts.EVT_POPUP_DAILY_TASK);else if("reward"===e.action&&0===e.reason)if(e.userId==c.ME.userId)this.completed=e.gotReward,this.rewardItems=this.parseRewardData(e.rwx),n.evtCenter.emit(o.evts.EVT_MSG_DAILY_REWARD,e.rewardLevel);else{var t=e.rwx;a.buffer.onRwxDrop(t,e.userId)}},e.prototype.parseRewardData=function(e){var t=[],i=null;for(var s in e)if(e.hasOwnProperty(s))if("chip"==s)i={giftId:101,giftIcon:"fish_101.png",giftNum:e[s]},t.push(i);else if("dmd"==s)i={giftId:102,giftIcon:"fish_102.png",giftNum:e[s]},t.push(i);else if("coupon"==s)i={giftId:103,giftIcon:"fish_103.png",giftNum:e[s]},t.push(i);else{var o=parseInt(s.split(":")[1]);o>1e4&&(o-=1e4);var c=n.configTable.item[o];i={giftId:c.item_id,giftIcon:c.big_icon,giftNum:e[s]},t.push(i)}return t},e.prototype.setFirstRewardTag=function(){for(var e=1;e<=5;e++){var t=n.configTable.dailyquest_reward[e];if(this.totalValue>=t.active_value&&!this.isInCompleted(e)){this.firstRewardTag=e;break}}},e.prototype.isInCompleted=function(e){for(var t=0;t<this.completed.length;t++)if(e==this.completed[t])return!0;return!1},e}();i.DailyTask=r,cc._RF.pop()},{"../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../scene/fish_scene":"fish_scene","./fish_model":"fish_model"}],fish_model_drop:[function(e,t,i){"use strict";cc._RF.push(t,"11fcfmP2R5N0KzwXyU5qHQw","fish_model_drop"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("./fish_model"),c=e("../define/fish_event_types"),a=e("../scene/fish_scene_login"),r=e("../logic/fish_tcp"),h=e("../buffer/fish_buffer"),l=function(){function e(){n.msgCenter.on(s.msgs.MSG_SKILL_RETURN,this.onMsgSkillReturn,this)}return e.prototype.release=function(){n.msgCenter.off(s.msgs.MSG_SKILL_RETURN,this.onMsgSkillReturn,this)},e.prototype.onMsgSkillReturn=function(e){for(var t in cc.log("****************************** onMsgSkillReturn",e),e.gain)if(e.gain.hasOwnProperty(t)){var i=parseInt(t.split(":")[1]),s=e.gain[t];i>1e4&&(i-=1e4),e.gain.hasOwnProperty("dmd")?h.buffer.pushDiamond(o.ME.userId,s,1):h.buffer.pushItem(o.ME.userId,i,s,1)}n.evtCenter.emit(c.evts.EVT_SKILL_RETURN,this)},e.prototype.updateBag=function(){var e={cmd:s.msgs.CMD_ITEM,params:{action:"list",gameId:28,userId:o.ME.userId,clientId:a.AccountInfo.clientId}};r.tcp.send(e)},e}();i.Drop=l,cc._RF.pop()},{"../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model_friends:[function(e,t,i){"use strict";cc._RF.push(t,"5fcedkweMNMA5naJ6ELp2+O","fish_model_friends"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("../define/fish_event_types"),c=e("./fish_model"),a=e("../scene/fish_scene_login"),r=e("../logic/fish_tcp"),h=function(){return function(e){this.userId=e.userId,this.name=e.name,this.purl=e.icon,this.vipLevel=e.vip_level,this.isMember=e.is_member&&e.is_member>0,this.isPraised=e.isPraised&&e.isPraised>0,this.isOnline=e.isOnline&&e.isOnline>0,this.exp=e.exp}}();i.FriendsInfo=h;var l=function(){function e(){this.friendsIds=[],this.friendsInfoList={},this.requestList={new:[],old:[]},this.messageList={new:[],old:[]},this.max_friendsCount=10,this.praiseLimit=10,this.praiseLeftCount=this.max_friendsCount,this.recommendFriends=[],this.recPage=0,this.recBatchIndex=0,this.friendsApplyed={},this.recommendTitle="recommend_title"}return e.prototype.release=function(){this.friendsIds=null,this.friendsInfoList=null,this.requestList=null,this.messageList=null,this.recommendFriends=null,this.friendsApplyed=null},e.prototype.applyFriendSuccess=function(e){e&&(this.friendsApplyed[e]=!0)},e.prototype.isFriendsApplyed=function(e){return!!this.friendsApplyed[e]},e.prototype.setFriendsLimit=function(e){this.max_friendsCount=e},e.prototype.getFriendsLimit=function(){return this.max_friendsCount},e.prototype.setPraiseLimit=function(e){this.praiseLimit=e},e.prototype.getPraiseLimit=function(){return this.praiseLimit},e.prototype.setPraiseLeftCount=function(e){this.praiseLeftCount=e||0},e.prototype.getPraiseLeftCount=function(){return this.praiseLeftCount},e.prototype.getPraisedCount=function(){for(var e=0,t=0;t<this.friendsIds.length;++t)this.friendsInfoList[this.friendsIds[t]].isPraised&&++e;return e},e.prototype.isAllClaimed=function(){for(var e=0;e<this.messageList.new.length;++e)if(!this.messageList.new[e].isGiftsGot)return!1;for(e=0;e<this.messageList.old.length;++e)if(!this.messageList.old[e].isGiftsGot)return!1;return!0},e.prototype.agreeFriendsApply=function(e,t){void 0===t&&(t=null),this.friendsIds.unshift(e),t&&(this.friendsInfoList[e]=t),this.requestList.new=this.requestList.new.filter(function(t){return t!=e}),this.requestList.old=this.requestList.old.filter(function(t){return t!=e})},e.prototype.denyFriendsApply=function(e){this.requestList.new=this.requestList.new.filter(function(t){return t!=e}),this.requestList.old=this.requestList.old.filter(function(t){return t!=e})},e.prototype.onPraiseFriends=function(e){if(e)for(var t=0;t<e.length;++t){var i=this.friendsInfoList[e[t]];i&&(i.isPraised=!0)}},e.prototype.removeFriend=function(e){this.friendsIds=this.friendsIds.filter(function(t){return t!=e})},e.prototype.setFriendList=function(e){e.sort(function(e,t){function i(e){return 100*e.isOnline+10*e.is_member+e.vip_level}var n=i(e),s=i(t);return n>s?-1:n<s?1:e.exp>t.exp?-1:e.exp<t.exp?1:0}),this.friendsIds=[];for(var t=0;t<e.length;++t){var i=e[t];this.friendsIds.push(i.userId),this.friendsInfoList[i.userId]=new h(i)}n.evtCenter.emit(o.evts.EVT_RECEIVE_FRIENDS_LIST)},e.prototype.__addApplicants=function(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];t.push(n.userId),this.friendsInfoList[n.userId]=new h(n)}},e.prototype.setApplicants=function(e){this.requestList={new:[],old:[]},this.__addApplicants(e.new,this.requestList.new),this.__addApplicants(e.old,this.requestList.old),n.evtCenter.emit(o.evts.EVT_RECEIVE_FRIENDS_APPLICANTS)},e.prototype.__addNotices=function(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];t.push({userId:n.userId,infoId:n.infoId,ts:n.ts,gifts:n.gifts,isGiftsGot:n.isGiftsGot>0}),this.friendsInfoList[n.userId]=new h(n)}},e.prototype.setNotices=function(e){this.messageList={new:[],old:[]},this.__addNotices(e.new,this.messageList.new),this.__addNotices(e.old,this.messageList.old),n.evtCenter.emit(o.evts.EVT_RECEIVE_FRIENDS_INFOS)},e.prototype.getFriendsCount=function(){return this.friendsIds.length},e.prototype.getFriendInfo=function(e){if(e>=0&&e<this.friendsIds.length)return this.friendsInfoList[this.friendsIds[e]]},e.prototype.getRecommendFriendsCount=function(){return this.recommendFriends.length},e.prototype.getShowRecommendFriendsCount=function(){var e=this.getRecommendFriendsCount()-10*this.recBatchIndex;return e>10?10:e<=0?0:e},e.prototype.getRecommendFriendInfo=function(e){if((e+=10*this.recBatchIndex)>=0&&e<this.recommendFriends.length)return this.friendsInfoList[this.recommendFriends[e]]},e.prototype.setReommendFriends=function(e,t){cc.log("setRecommendFriends: "+e.length),this.recommendFriends=[],this.recBatchIndex=0,this.recPage=t+1;for(var i=0;i<e.length;++i){var n=e[i];this.recommendFriends.push(n.userId),this.friendsInfoList[n.userId]=new h(n)}},e.prototype.pruneRecommendFriends=function(){for(var e=[],t=0;t<this.recommendFriends.length;++t){var i=this.recommendFriends[t];this.friendsApplyed[i]||e.push(i)}this.recommendFriends=e,this.recBatchIndex=0},e.prototype.getFriendName=function(e){if(e){var t=this.friendsInfoList[e];if(t)return t.name}return""},e.prototype.getRequestCount=function(){return this.requestList.new.length+this.requestList.old.length},e.prototype.getRequestInfo=function(e){return e>=0&&e<this.requestList.new.length?this.friendsInfoList[this.requestList.new[e]]:(e-=this.requestList.new.length)>=0&&e<this.requestList.old.length?this.friendsInfoList[this.requestList.old[e]]:void 0},e.prototype.getMessageCount=function(){return this.messageList.new.length+this.messageList.old.length},e.prototype.getMessageInfo=function(e){var t;return e>=0&&e<this.messageList.new.length?{msgInfo:t=this.messageList.new[e],friendsInfo:this.friendsInfoList[t.userId]}:(e-=this.messageList.new.length)>=0&&e<this.messageList.old.length?{msgInfo:t=this.messageList.old[e],friendsInfo:this.friendsInfoList[t.userId]}:void 0},e.prototype.removeMessage=function(e){if("0"==e)return this.messageList.new=[],void(this.messageList.old=[]);this.messageList.new=this.messageList.new.filter(function(t){return t.infoId!=e}),this.messageList.old=this.messageList.old.filter(function(t){return t.infoId!=e})},e.prototype.__removeNotices=function(e){this.messageList.new=this.messageList.new.filter(function(t){return!e.some(function(e){return t.infoId==e.infoId})}),this.messageList.old=this.messageList.old.filter(function(t){return!e.some(function(e){return t.infoId==e.infoId})})},e.prototype.__removeApplicants=function(e){this.requestList.new=this.requestList.new.filter(function(t){return!e.some(function(e){return t.userId==e.userId})}),this.requestList.old=this.requestList.old.filter(function(t){return!e.some(function(e){return t.userId==e.userId})})},e.prototype.onReceiveNotify=function(e,t){switch(e){case 0:this.__addNotices(t.info,this.messageList.new),this.__addApplicants(t.applicants,this.requestList.new);break;case 1:this.__removeNotices(t.info),this.__removeApplicants(t.applicants)}},e.prototype.isFriends=function(e){return this.friendsIds.some(function(t){return t==e})},e}();i.FriendsData=l;var d=function(){function e(){this.messageActions={OPEN:"open",CLOSE:"close",APPLY:"apply",REMOVE:"delete",AGREE:"agree",DENY:"disagree",PRAISE:"praise",CHAT:"chat",READ_FRIENDS:"read_friends",READ_APPLICANTS:"read_applicants",READ_INFO:"read_info",GET_INFO_GIFTS:"get_info_gifts",READ_RELATION:"read_relation",NOTIFY:"notify",RECOMMEND:"recommend"},this.friendsData=new l,this.friends_view_exit=!1,n.msgCenter.on(s.msgs.MSG_FRIENDS,this.onMessageFriends,this)}return e.prototype.release=function(){this.messageActions=null,n.msgCenter.off(s.msgs.MSG_FRIENDS,this.onMessageFriends,this)},e.prototype.onMessageFriends=function(e){if(cc.log("************************** onMessageFriends",e),e&&e.action)switch(e.action){case this.messageActions.APPLY:this.onMsgApplyFriend(e);break;case this.messageActions.REMOVE:this.onMsgRemoveFriend(e);break;case this.messageActions.AGREE:this.onMsgAgreeWithApply(e);break;case this.messageActions.DENY:this.onMsgDenyApply(e);break;case this.messageActions.PRAISE:this.onMsgPraiseFriend(e);break;case this.messageActions.CHAT:break;case this.messageActions.READ_FRIENDS:this.onMsgReadFriendsList(e);break;case this.messageActions.READ_APPLICANTS:this.onMsgReadApplicants(e);break;case this.messageActions.READ_INFO:this.onMsgReadInfo(e);break;case this.messageActions.GET_INFO_GIFTS:this.onMsgGetInfoGift(e);break;case this.messageActions.READ_RELATION:this.onMsgReadRelation(e);break;case this.messageActions.OPEN:this.onMsgOpenFriends(e);break;case this.messageActions.CLOSE:this.onMsgCloseFriends(e);break;case this.messageActions.NOTIFY:break;case this.messageActions.RECOMMEND:this.onMsgRecommendFriends(e)}},e.prototype.__sendRequest=function(e,t){var i={action:e,gameId:9999,userId:c.ME.userId,clientId:a.AccountInfo.clientId};t&&(i.objectUserId=t),r.tcp.send({cmd:s.msgs.CMD_FRIENDS,params:i})},e.prototype.readFriendsList=function(){this.__sendRequest(this.messageActions.READ_FRIENDS)},e.prototype.onMsgReadFriendsList=function(e){if(e.userId==c.ME.userId)switch(e.code){case 0:this.friendsData.setFriendsLimit(e.maxCount),this.friendsData.setPraiseLimit(e.maxPraiseCount),this.friendsData.setPraiseLeftCount(e.praiseLeftCount),this.friendsData.setFriendList(e.friends);break;case 1:break;default:this.showFriendsView()}},e.prototype.readApplicants=function(){this.__sendRequest(this.messageActions.READ_APPLICANTS)},e.prototype.onMsgReadApplicants=function(e){if(e.userId==c.ME.userId)switch(e.code){case 0:this.friendsData.setApplicants(e.applicants)}else n.evtCenter.emit(o.evts.EVT_RECEIVE_FRIENDS_APPLICANTS,e.code,e.userId)},e.prototype.readInfo=function(){this.__sendRequest(this.messageActions.READ_INFO)},e.prototype.onMsgReadInfo=function(e){if(e.userId==c.ME.userId)switch(e.code){case 0:this.friendsData.setNotices(e.info);break;case 1:n.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2)}},e.prototype.applyFriend=function(e){this.__sendRequest(this.messageActions.APPLY,e)},e.prototype.onMsgApplyFriend=function(e){if(e.userId==c.ME.userId){switch(e.code){case 0:case 8:this.friendsData.applyFriendSuccess(e.objectUserId)}n.evtCenter.emit(o.evts.EVT_APPLY_FRIENDS,e.code,e.objectUserId)}},e.prototype.agreeWithApply=function(e){this.__sendRequest(this.messageActions.AGREE,e)},e.prototype.onMsgAgreeWithApply=function(e){if(e.userId==c.ME.userId){switch(e.code){case 0:this.friendsData.agreeFriendsApply(e.objectUserId);break;case 1:this.friendsData.denyFriendsApply(e.objectUserId)}n.evtCenter.emit(o.evts.EVT_AGREE_WITH_APPLY,e.code,e.objectUserId,this.friendsData.getFriendName(e.objectUserId))}},e.prototype.denyWithApply=function(e){this.__sendRequest(this.messageActions.DENY,e)},e.prototype.onMsgDenyApply=function(e){if(e.userId==c.ME.userId)switch(e.code){case 0:this.friendsData.denyFriendsApply(e.objectUserId),n.evtCenter.emit(o.evts.EVT_RECEIVE_FRIENDS_APPLICANTS);break;case 1:n.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u6ca1\u6709\u8be5\u7533\u8bf7",2),this.friendsData.denyFriendsApply(e.objectUserId),n.evtCenter.emit(o.evts.EVT_RECEIVE_FRIENDS_APPLICANTS);break;case 2:n.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2)}},e.prototype.praiseFriend=function(e){if(e>0)this.__sendRequest(this.messageActions.PRAISE,e);else{var t={action:this.messageActions.PRAISE,gameId:9999,userId:c.ME.userId,objectUserId:e,clientId:a.AccountInfo.clientId};r.tcp.send({cmd:s.msgs.CMD_FRIENDS,params:t})}},e.prototype.onMsgPraiseFriend=function(e){if(e.userId==c.ME.userId){switch(e.code){case 0:this.friendsData.onPraiseFriends(e.objectUsers),this.friendsData.setPraiseLeftCount(e.praiseLeftCount)}n.evtCenter.emit(o.evts.EVT_PRAISE_FRIENDS,e.code,e.objectUsers,e.rewards),n.evtCenter.emit(o.evts.EVT_RECEIVE_FRIENDS_LIST)}},e.prototype.removeFriend=function(e){this.__sendRequest(this.messageActions.REMOVE,e)},e.prototype.onMsgRemoveFriend=function(e){if(e.userId==c.ME.userId){switch(e.code){case 0:case 1:this.friendsData.removeFriend(e.objectUserId),n.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u5220\u9664\u6210\u529f!",2);break;case 2:n.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u5220\u9664\u5931\u8d25, \u8bf7\u7a0d\u540e\u518d\u8bd5!",2)}n.evtCenter.emit(o.evts.EVT_RECEIVE_FRIENDS_LIST)}},e.prototype.getInfoGift=function(e){r.tcp.send({cmd:s.msgs.CMD_FRIENDS,params:{action:this.messageActions.GET_INFO_GIFTS,gameId:9999,userId:c.ME.userId,infoId:e,clientId:a.AccountInfo.clientId}})},e.prototype.onMsgGetInfoGift=function(e){if(e.userId==c.ME.userId){switch(e.code){case 0:this.friendsData.removeMessage(e.infoId)}n.evtCenter.emit(o.evts.EVT_GET_GIGT_FRIENDS,e.code,e.infoId,e.rewards)}},e.prototype.readRelation=function(e){this.__sendRequest(this.messageActions.READ_RELATION,e)},e.prototype.onMsgReadRelation=function(e){if(e.userId==c.ME.userId)switch(e.code){case 0:n.evtCenter.emit(o.evts.EVT_FRIENDS_RELATION,e.objectUserId,e.relation);break;case 1:n.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u5185\u90e8\u9519\u8bef",2)}},e.prototype.openFriends=function(){r.tcp.send({cmd:s.msgs.CMD_FRIENDS,params:{action:this.messageActions.OPEN,gameId:9999,userId:c.ME.userId,clientId:a.AccountInfo.clientId}}),this.readFriendsList()},e.prototype.onMsgOpenFriends=function(e){n.evtCenter.emit(o.evts.EVT_OPEN_FRIENDS,e.newInfo||0,e.newApplicants||0)},e.prototype.closeFriends=function(){r.tcp.send({cmd:s.msgs.CMD_FRIENDS,params:{action:this.messageActions.CLOSE,gameId:9999,userId:c.ME.userId,clientId:a.AccountInfo.clientId}})},e.prototype.onMsgCloseFriends=function(e){},e.prototype.onMsgNotify=function(e){e.userId==c.ME.userId&&this.friendsData.onReceiveNotify(e.type,e.content)},e.prototype.getRecommendFriends=function(){if(this.friendsData.recBatchIndex++,this.friendsData.getShowRecommendFriendsCount()>0)n.evtCenter.emit(o.evts.EVT_RECEIVE_FRIENDS_APPLICANTS);else{var e={action:this.messageActions.RECOMMEND,gameId:9999,userId:c.ME.userId,clientId:a.AccountInfo.clientId,recPage:this.friendsData.recPage};r.tcp.send({cmd:s.msgs.CMD_FRIENDS,params:e})}},e.prototype.onMsgRecommendFriends=function(e){if(e.userId==c.ME.userId){switch(e.code){case 0:this.friendsData.setReommendFriends(e.randMembers,e.recPage)}n.evtCenter.emit(o.evts.EVT_RECEIVE_FRIENDS_APPLICANTS)}},e.prototype.isFriendsViewExist=function(){return this.friends_view_exit},e.prototype.setFriendsViewExist=function(e){this.friends_view_exit=e},e.prototype.showFriendsView=function(){this.isFriendsViewExist()||(this.setFriendsViewExist(!0),n.evtCenter.emit(o.evts.EVT_POP_FRIENDS))},e}();i.Friends=d,cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model_game_notice:[function(e,t,i){"use strict";cc._RF.push(t,"e93f9AyGatFnKfZ5STBuU4h","fish_model_game_notice"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../define/fish_msg_types"),s=e("./fish_model"),o=e("../scene/fish_scene_login"),c=e("../logic/fish_tcp"),a=e("../scene/fish_scene"),r=e("../define/fish_event_types"),h=function(){function e(){this.noticeTip={actGup:!1,actFirstRecharge:!1,actDailyTk:!1,checkin:!1,message:!1,inviteFriend:!1,act_Charge:!1,act_charge_crystal:!1,fishFriends:!1,dailyInvite:!1},this.isShowInviteFriend=!0,a.msgCenter.on(n.msgs.MSG_UPDATE_MODULE_TIP,this.onMsgUpdateModuleTip,this)}return e.prototype.release=function(){a.msgCenter.off(n.msgs.MSG_UPDATE_MODULE_TIP,this.onMsgUpdateModuleTip,this)},e.prototype.updateModuleTip=function(){var e={cmd:n.msgs.CMD_UPDATE_MODULE_TIP,params:{action:"update",gameId:9999,userId:s.ME.userId,clientId:o.AccountInfo.clientId,modules:["actGup","act_Charge","act_charge_crystal","actDailyTk","checkin","message","inviteFriend","fishFriends","dailyInvite"]}};c.tcp.send(e)},e.prototype.onMsgUpdateModuleTip=function(e){if(void 0!==e&&!(e.modules.length<=0)){for(var t=0;t<e.modules.length;t++){var i=e.modules[t];this.noticeTip[i.name]=i.count>0}cc.log("refresh"),a.evtCenter.emit(r.evts.EVT_UPDATE_RED_TIP,this)}},e.prototype.reportModuleTip=function(){var e=new Date,t={cmd:n.msgs.CMD_UPDATE_MODULE_TIP,params:{action:"report",gameId:9999,userId:s.ME.userId,clientId:o.AccountInfo.clientId,modules:["message"],time:e.getTime()}};c.tcp.send(t)},e.prototype.onMsgReportTip=function(e){},e}();i.Game_Notice=h,cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model_guide:[function(e,t,i){"use strict";cc._RF.push(t,"8c949ZXy/xO0pbw4JIXfv1W","fish_model_guide"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("./fish_model"),c=e("../define/fish_event_types"),a=e("../scene/fish_scene_login"),r=e("../logic/fish_tcp"),h=e("../buffer/fish_buffer"),l=function(){function e(){this.isFirstLogin=0,this.weaponGuide_30=!1,this.guideStep=0,this.isFirstCharge=!1,this.isGetFirstChargeReward=!1,this.isPlayerSigned=!1,this.penny=0,this.isBenin2Lobby=!1,this.isShowPay=!1,this.newbieInGameFinished=!0,this.missionId=6401,this.progress=0,this.isrewarded=0,this.isMissionFinish=!1,this.isNewbieTaskFinish=!0,this.isLastRewardPanel=!1,n.msgCenter.on(s.msgs.MSG_SET_USER_INFO,this.onMsgFreshStep,this),n.msgCenter.on(s.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.on(s.msgs.MSG_GAME,this.onMsgGame,this),n.msgCenter.on(s.msgs.MSG_TABLE_INFO,this.onMsgTableInfo,this),n.msgCenter.on(s.msgs.MSG_MULTIPLE_CHANGED,this.onMsgMultipleChanged,this)}return e.prototype.release=function(){n.msgCenter.off(s.msgs.MSG_SET_USER_INFO,this.onMsgFreshStep,this),n.msgCenter.off(s.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.off(s.msgs.MSG_GAME,this.onMsgGame,this),n.msgCenter.off(s.msgs.MSG_TABLE_INFO,this.onMsgTableInfo,this),n.msgCenter.off(s.msgs.MSG_MULTIPLE_CHANGED,this.onMsgMultipleChanged,this)},e.prototype.onMsgMultipleChanged=function(e){cc.log("****************************** onMsgMultipleChanged",e),e.reason&&e.reason>0||e.seatId||2102==e.gLv&&this.requestNewbieReward(2)},e.prototype.onMsgFreshStep=function(e){if(cc.log("****************************** onMsgFreshStep",e),0==e.code||"userGuideStep"!=e.action){if("userGuideStep"==e.action&&(this.guideStep=e.step),0!=e.code&&"newUserGift"==e.action)return cc.log("checking ....................... onMsgFreshStep"),this.refreshGuideStep(1),void n.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u793c\u5305\u5df2\u9886\u53d6\uff0c\u8bf7\u91cd\u65b0\u767b\u9646\u6e38\u620f");"newUserGift"==e.action&&(this.refreshGuideStep(1),this.isPlayerSigned=!0,e.rwx.hasOwnProperty("coupon")&&(o.ME.coupon+=e.rwx.coupon),e.rwx.hasOwnProperty("chip")&&h.buffer.pushGold(o.ME.userId,e.rwx.chip,.3),o.model.drop.updateBag(),n.evtCenter.emit(c.evts.EVT_RECEIVE_NEW_GIFTS))}},e.prototype.onMsgGameData=function(e){if(9999==e.gameId){var t=e.gdata;this.isFirstCharge=t.firstRecharge.isFirstRecharged,this.isGetFirstChargeReward=t.firstRecharge.reward,this.isPlayerSigned=t.checkIn,this.penny=t.penny,this.isFirstLogin=this.isFirstLogin^t.fishFirst}28==e.gameId&&((t=e.gdata)&&t.userGuideStep&&(this.guideStep=t.userGuideStep))},e.prototype.onMsgTableInfo=function(e){e&&(this.newbieInGameFinished=e.isNewUserGuideFinish,this.isEmptyObject(e.newUserMissionInfo)?(this.isNewbieTaskFinish=!1,this.newbieInGameFinished=!0,this.onMsgNewbieTaskInfo(o.ME.userId,e.newUserMissionInfo)):(this.isNewbieTaskFinish=!0,this.isLastRewardPanel=!0))},e.prototype.isEmptyObject=function(e){for(var t in e)return!0;return!1},e.prototype.refreshGuideStep=function(e){var t={cmd:s.msgs.MSG_SET_USER_INFO,params:{gameId:28,userId:o.ME.userId,action:"userGuideStep",step:e,clientId:a.AccountInfo.clientId}};r.tcp.send(t)},e.prototype.requestNewGift=function(e){void 0===e&&(e=null);var t={cmd:s.msgs.MSG_SET_USER_INFO,params:{gameId:28,userId:o.ME.userId,action:"newUserGift",clientId:a.AccountInfo.clientId}};r.tcp.send(t)},e.prototype.onMsgGame=function(e){if(cc.log("****************************** fish_model_guide.onMsgGame",e),e.userId==o.ME.userId)if("newUserGuideReward"==e.action){if(0!=e.code)return;if(1==e.step)n.evtCenter.emit(c.evts.EVT_NEWBIE_DIAMOND_REWARD,this);else if(2==e.step)n.evtCenter.emit(c.evts.EVT_NEWBIE_GUNUP,this);else if(3==e.step)h.buffer.pushGold(o.ME.userId,e.reward[0].count,2),n.evtCenter.emit(c.evts.EVT_NEWBIE_GOLD_FISH,this);else if(4==e.step){n.evtCenter.emit(c.evts.EVT_NEWBIE_LOTTERY_SUCCESS,0,{prize:"prize1",level:0},o.ME.userId)}}else"newUserMissionInfo"==e.action?(this.newbieInGameFinished=!0,e.info&&this.onMsgNewbieTaskInfo(e.userId,e.info)):"newUserMissionReward"==e.action&&this.onMsgNewbieTaskReward(e)},e.prototype.requestNewbieReward=function(e){cc.log("requestNewbieReward:"+e);var t={cmd:s.msgs.CMD_TABLE_CALL_2,params:{gameId:28,userId:o.ME.userId,action:"newUserGuideReward",clientId:a.AccountInfo.clientId,roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId,step:e}};r.tcp.send(t)},e.prototype.requestNewbieTaskInfo=function(e){void 0===e&&(e=null);var t={cmd:s.msgs.CMD_TABLE_CALL_2,params:{gameId:28,userId:o.ME.userId,action:"newUserMissionInfo",clientId:a.AccountInfo.clientId,roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId}};r.tcp.send(t)},e.prototype.onMsgNewbieTaskInfo=function(e,t){e==o.ME.userId&&t&&(this.missionId=t.missionId,this.progress=t.progress,this.isrewarded=t.isrewarded,this.isMissionFinish=t.isFinish,n.evtCenter.emit(c.evts.EVT_POPUP_NEWBIE_TASK,this.missionId))},e.prototype.requestNewbieTaskReward=function(e){var t={cmd:s.msgs.CMD_TABLE_CALL_2,params:{gameId:28,userId:o.ME.userId,action:"newUserMissionReward",clientId:a.AccountInfo.clientId,roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId,missionId:e}};r.tcp.send(t)},e.prototype.onMsgNewbieTaskReward=function(e){if(e.userId==o.ME.userId&&0==e.code){var t=[],i=null;6401==e.missionId?(i={giftId:102,giftIcon:"fish_102.png",giftNum:2},t.push(i),this.isLastRewardPanel=!1,n.evtCenter.emit(c.evts.EVT_POP_REWARD_PANEL,t),this.requestNewbieTaskInfo()):6402==e.missionId?(i={giftId:3101,giftIcon:"fish_suoding.png",giftNum:2},t.push(i),this.isLastRewardPanel=!1,n.evtCenter.emit(c.evts.EVT_POP_REWARD_PANEL,t),this.requestNewbieTaskInfo()):6403==e.missionId?(i={giftId:3102,giftIcon:"fish_bingfeng.png",giftNum:2},t.push(i),this.isLastRewardPanel=!1,n.evtCenter.emit(c.evts.EVT_POP_REWARD_PANEL,t),this.requestNewbieTaskInfo()):6404==e.missionId?(i={giftId:101,giftIcon:"fish_101.png",giftNum:500},t.push(i),this.isLastRewardPanel=!1,n.evtCenter.emit(c.evts.EVT_POP_REWARD_PANEL,t),this.requestNewbieTaskInfo()):6405==e.missionId&&(i={giftId:103,giftIcon:"fish_103.png",giftNum:2},t.push(i),this.isLastRewardPanel=!0,n.evtCenter.emit(c.evts.EVT_POP_REWARD_PANEL,t))}},e}();i.Guide=l,cc._RF.pop()},{"../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model_led:[function(e,t,i){"use strict";cc._RF.push(t,"0c0cfuaGnBJwpr8+bt2NZih","fish_model_led"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("../define/fish_event_types"),c=function(){function e(){n.msgCenter.on(s.msgs.MSG_LED,this.onMsgLed,this)}return e.prototype.release=function(){n.msgCenter.off(s.msgs.MSG_RED_ENVELOPE,this.onMsgLed,this)},e.prototype.onMsgLed=function(e){switch(cc.log("****************************** onMsgLed",e),e.action){case"prepareGrabEvlp":n.evtCenter.emit(o.evts.EVT_LED,n.configTable.languageKey.string_led4.string_zhcn);break;case"grabingEvlp":n.evtCenter.emit(o.evts.EVT_LED,n.configTable.languageKey.string_led5.string_zhcn);break;case"killboss":var t=n.configTable.languageKey.string_led1.string_zhcn,i=n.configTable.languageKey.string_led1_1.string_zhcn.split("|")[Math.floor(5*Math.random()+0)],s=e.params.name,c=n.configTable.languageKey[n.configTable.fish[e.params.fishId].fish_name].string_zhcn,a=t.split("$$"),r="";for(var h in e.params.gain)"chip"==h&&(r+=e.params.gain[h]+"\u91d1\u5e01 "),"dmd"==h&&(r+=e.params.gain[h]+"\u94bb\u77f3 ");var l=a[0]+s+a[1]+c+a[2]+r+a[3]+i;n.evtCenter.emit(o.evts.EVT_LED,l);break;case"severRestart":var d=(E=n.configTable.languageKey.string_led8.string_zhcn).split("$$");E=d[0]+e.params.startTime+d[1]+e.params.takeMinutes+d[2],n.evtCenter.emit(o.evts.EVT_LED,E);break;case"killPhonefareBoss":var _=n.configTable.languageKey.string_led9.string_zhcn,f=n.configTable.languageKey.string_led9_1.string_zhcn.split("|")[Math.floor(4*Math.random()+0)],p=e.params.name,u="";u=1601==e.params.fishId?"1":"5";var m=_.split("$$"),g=m[0]+p+m[1]+u+m[2]+f;n.evtCenter.emit(o.evts.EVT_LED,g);break;case"phonefareBossStart":var v=n.configTable.languageKey.string_led11.string_zhcn;n.evtCenter.emit(o.evts.EVT_LED,v);break;case"cmTbMatchAdvNotice":var b=(E=n.configTable.languageKey.string_led12.string_zhcn).split("$$"),y=b[0]+e.params.roomMulti[0]+b[1]+e.params.roomMulti[1]+b[2];n.evtCenter.emit(o.evts.EVT_LED,y);break;case"shuihuReward":e.text&&e.ts&&n.evtCenter.emit(o.evts.EVT_LED,e.text,e.ts);break;case"chineseNewYear":var E;y=(a=(E=n.configTable.languageKey.string_led15.string_zhcn).split("$$"))[0]+e.params.name+a[1];n.evtCenter.emit(o.evts.EVT_LED,y);break;case void 0:var C=e.text,T="";if(C&&"38"==e.gameId){for(var S=0;S<C.length;S++)T+=e.text[S].text;n.evtCenter.emit(o.evts.EVT_LED,T)}else if(C)for(S=0;S<C.length;S++)n.evtCenter.emit(o.evts.EVT_LED,e.text[S].text)}},e}();i.Led=c,cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../scene/fish_scene":"fish_scene"}],fish_model_lobby:[function(e,t,i){"use strict";cc._RF.push(t,"bd567qSbOpPm4dN4qtOiplX","fish_model_lobby"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("../../xmen_interface"),c=e("./fish_model"),a=e("../define/fish_event_types"),r=e("../logic/fish_room_info"),h=e("../scene/fish_scene_login"),l=e("../logic/fish_tcp"),d=e("../define/fish_consts"),_=e("../buffer/fish_buffer"),f=function(){function e(){this.gunLevel=null,this.inviteFriendsDiamond=null,this.rooms=[],this.toDayMatchList=null,this.matchRewardInfo=null,this.checkBagSkill=3101,this.inviteFriendsInfo=null,this.invitePOPUP=!0,this.isNeenInviteInfo=!1,this.fishRichRanking=[],this.fishGradeRanking=[],this.fishCharmRanking=[],this.mySelfRichRanking=null,this.mySelfGradeRanking=null,this.mySelfCharmRanking=null,this.btnClickHeadFlag=!0,this.mailFlag=!0,this.mailRewardId="",this.bindUserFlag=!0,this.doubleDanUseDiamond=!0,this.fishKingFlag=!0,this.showTipsFlag=!0,this.rewardText=null,this.rewardItem=null,n.msgCenter.on(s.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.on(s.msgs.MSG_ROOM_LIST,this.onMsgRoomList,this),n.msgCenter.on(s.msgs.MSG_ITEM,this.onMsgItemList,this),n.msgCenter.on(s.msgs.MSG_FISH_RANKING,this.onMsgFishRanking,this),n.msgCenter.on(s.msgs.MSG_MAIL_MESSAGE,this.onMsgMailMessage,this),n.msgCenter.on(s.msgs.MSG_STORE_FISH,this.onMsgStoreFish,this),n.msgCenter.on(s.msgs.MSG_WEAPON_UPGRADE,this.onMsgWeaponUpgrade,this),n.msgCenter.on(s.msgs.MSG_ITEM_FISH,this.onMsgItemDmd,this),n.msgCenter.on(s.msgs.MSG_SET_USER_INFO,this.onMsgSetUserInfo,this),n.msgCenter.on(s.msgs.MSG_QUICK_START,this.onMsgQuickStart,this),n.msgCenter.on(s.msgs.MSG_PROD_DELIVERY,this.onMsgProdDelivery,this),n.msgCenter.on(s.msgs.MSG_INVITE_FRIENDS,this.onMsgInviteFriends,this),n.msgCenter.on(s.msgs.CMD_INVITE_FRIENDS_IN_TABLE,this.onMsgInviteFriendsInTable,this),n.msgCenter.on("cmtb_match_info",this.onMsgLobbyMatchInfo,this),o.xmen.EventDispatcher.on(o.xmen.EventType.MSG_WECHAT_SHARE_FAILED,this.onEventWechatShareFailed,this),o.xmen.EventDispatcher.on(o.xmen.EventType.MSG_WECHAT_SHARE_SUCCESS,this.onEvetWechatShareSuccess,this),o.xmen.EventDispatcher.on(o.xmen.EventType.WILL_ENTER_BACKGROUND,this.onEventWillEnterBackRound,this),o.xmen.EventDispatcher.on(o.xmen.EventType.MSG_CONSUME_USERID_ERROR_RET,this.onEventConsumeUserIdError,this)}return e.prototype.release=function(){this.rooms=[],n.msgCenter.off(s.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.off(s.msgs.MSG_ROOM_LIST,this.onMsgRoomList,this),n.msgCenter.off(s.msgs.MSG_ITEM,this.onMsgItemList,this),n.msgCenter.off(s.msgs.MSG_FISH_RANKING,this.onMsgFishRanking,this),n.msgCenter.off(s.msgs.MSG_MAIL_MESSAGE,this.onMsgMailMessage,this),n.msgCenter.off(s.msgs.MSG_STORE_FISH,this.onMsgStoreFish,this),n.msgCenter.off(s.msgs.MSG_WEAPON_UPGRADE,this.onMsgWeaponUpgrade,this),n.msgCenter.off(s.msgs.MSG_ITEM_FISH,this.onMsgItemDmd,this),n.msgCenter.off(s.msgs.MSG_SET_USER_INFO,this.onMsgSetUserInfo,this),n.msgCenter.off(s.msgs.MSG_QUICK_START,this.onMsgQuickStart,this),n.msgCenter.off(s.msgs.MSG_PROD_DELIVERY,this.onMsgProdDelivery,this),n.msgCenter.off(s.msgs.MSG_INVITE_FRIENDS,this.onMsgInviteFriends,this),n.msgCenter.off(s.msgs.CMD_INVITE_FRIENDS_IN_TABLE,this.onMsgInviteFriendsInTable,this),n.msgCenter.off("cmtb_match_info",this.onMsgLobbyMatchInfo,this),o.xmen.EventDispatcher.off(o.xmen.EventType.MSG_WECHAT_SHARE_FAILED,this.onEventWechatShareFailed,this),o.xmen.EventDispatcher.off(o.xmen.EventType.MSG_WECHAT_SHARE_SUCCESS,this.onEvetWechatShareSuccess,this),o.xmen.EventDispatcher.off(o.xmen.EventType.WILL_ENTER_BACKGROUND,this.onEventWillEnterBackRound,this),o.xmen.EventDispatcher.off(o.xmen.EventType.MSG_CONSUME_USERID_ERROR_RET,this.onEventConsumeUserIdError,this)},e.prototype.onEventConsumeUserIdError=function(e){cc.log("****************************** onEventConsumeUserIdError",e),n.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u8d26\u53f7\u72b6\u6001\u5f02\u5e38\u65e0\u6cd5\u5145\u503c\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",2,this.onConsumeUserIdCallBack,this)},e.prototype.onConsumeUserIdCallBack=function(e){cc.log("****************************** onConsumeUserIdCallBack",e),cc.audioEngine.stopMusic(),cc.audioEngine.stopAllEffects(),this._gameLeave(),cc.sys.localStorage.setItem("show_sdk_login","true"),cc.director.loadScene("update")},e.prototype._gameLeave=function(){var e={cmd:s.msgs.CMD_GAME,params:{action:"leave",gameId:28,userId:c.ME.userId,clientId:h.AccountInfo.clientId}};l.tcp.send(e)},e.prototype.onMsgLobbyMatchInfo=function(e){e.info&&n.evtCenter.emit("evt_lobby_match_info",e.info,e.bigPrizeTask)},e.prototype.onEventWechatShareFailed=function(e){cc.log("****************************** onEventWechatShareFailed",e),n.evtCenter.emit(a.evts.EVT_MSG_TIPS,"\u9080\u8bf7\u53d1\u9001\u5931\u8d25,\u8bf7\u91cd\u65b0\u5c1d\u8bd5",2)},e.prototype.onEventWillEnterBackRound=function(e){cc.log("****************************** onEventWillEnterBackRound",e),0!=c.model.table.roomId&&(n.evtCenter.emit(a.evts.EVT_STOP_FIRE),n.evtCenter.emit(a.evts.EVT_SET_AUTO_STAT,!1),n.evtCenter.emit(a.evts.EVT_SHZ_CANCEL_AUTO_GAME))},e.prototype.onEvetWechatShareSuccess=function(e){cc.log("****************************** onEvetWechatShareSuccess",e);var t={params:{action:"inviteReward",gameId:28,userId:c.ME.userId,clientId:h.AccountInfo.clientId,inviteInfoType:2,inviterId:0}};0==c.model.table.roomId?t.cmd=s.msgs.CMD_INVITE_FRIENDS:(t.cmd=s.msgs.CMD_INVITE_FRIENDS_IN_TABLE,t.params.roomId=c.model.table.roomId,t.params.tableId=c.model.table.tableId,t.params.seatId=c.model.table.seatId),l.tcp.send(t),n.evtCenter.emit(a.evts.EVT_MSG_TIPS,"\u9080\u8bf7\u53d1\u9001\u6210\u529f\u5566!",2),n.evtCenter.emit(a.evts.EVT_DAILY_RELOAD,this)},e.prototype.onMsgInviteFriendsInTable=function(e){if(cc.log("****************************** onMsgInviteFriendsInTable",e),"inviteReward"==e.action&&e.seatId==c.model.table.seatId)if(0==e.code){for(var t=n.configTable.gift[e.giftId],i=[],s=1;s<=5;s++){var o=t["Gift"+s];if(o&&0!=o){var r={giftId:o,giftIcon:t["Gift"+s+"_icon"],giftNum:t["Gift"+s+"_Number"]};i.push(r)}}var h="";if("inviter"==e.rewardType)h=n.configTable.languageKey.string_haoyouzhaohuan2.string_zhcn,n.evtCenter.emit(a.evts.EVT_POP_REWARD_PANEL,i,h),n.evtCenter.emit(a.evts.EVT_CLOSE_INVITE_FRIENDS);else if("invitee"==e.rewardType){var l=n.configTable.languageKey.string_haoyouzhaohuan1.string_zhcn.split("$$");this.rewardText=h=l[0]+e.fromUserName+l[1],this.rewardItem=i,e.inviteesNum>=10?n.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u60a8\u586b\u5199\u7684ID\u8d26\u53f7\u9080\u8bf7\u597d\u53cb\u5df2\u8fbe10\u4eba\u4e0a\u9650,\u6240\u4ee5\u4ed6\u6ca1\u6709\u66f4\u591a\u7684\u5956\u52b1\u4e86 \u4e0d\u7528\u62c5\u5fc3,\u60a8\u7684\u5956\u52b1\u4e0d\u53d7\u5f71\u54cd",this.onBtnCallBack,this):this.onBtnCallBack()}else if("dailyInvite"==e.rewardType)h="\u9080\u8bf7\u597d\u53cb\u6210\u529f,\u83b7\u5f97\u5956\u52b1",n.evtCenter.emit(a.evts.EVT_POP_REWARD_PANEL,i,h),n.evtCenter.emit(a.evts.EVT_CLOSE_INVITE_FRIENDS);else{var _=n.configTable.languageKey.string_haoyouzhaohuan3.string_zhcn.split("$$");h=_[0]+e.fromUserName+_[1]+e.rewardType+_[2],n.evtCenter.emit(a.evts.EVT_POP_REWARD_PANEL,i,h),n.evtCenter.emit(a.evts.EVT_CLOSE_INVITE_FRIENDS)}}else"dailyInvite"!=e.rewardType&&n.evtCenter.emit(a.evts.EVT_MSG_BOX,d.InviteFriendRewardError[e.code])},e.prototype.onBtnCallBack=function(e){void 0===e&&(e=null),cc.log("****************************** onBtnCallBack",e),n.evtCenter.emit(a.evts.EVT_POP_REWARD_PANEL,this.rewardItem,this.rewardText),n.evtCenter.emit(a.evts.EVT_CLOSE_INVITE_FRIENDS)},e.prototype.onBtnCallBackLobby=function(e){void 0===e&&(e=null),cc.log("****************************** onBtnCallBackLobby",e),n.evtCenter.emit(a.evts.EVT_POP_REWARD_PANEL,this.rewardItem,this.rewardText)},e.prototype.onMsgInviteFriends=function(e){if(cc.log("****************************** onMsgInviteFriends",e),"inviteInfo"==e.action)this.inviteFriendsDiamond=e.info.gotDiamond,this.inviteFriendsInfo=e.info,this.invitePOPUP?(this.invitePOPUP=!1,n.evtCenter.emit(a.evts.EVT_POPUP_INVITE_FRIENDS)):(n.evtCenter.emit(a.evts.EVT_SET_INFO_INVITE_FRIENDS),n.evtCenter.emit(a.evts.EVT_RELOAD_NEW_REWARD));else if("inviteReward"==e.action)if(0==e.code){for(var t=n.configTable.gift[e.giftId],i=[],o=1;o<=5;o++){var r=t["Gift"+o];if(r&&0!=r){var _={giftId:r,giftIcon:t["Gift"+o+"_icon"],giftNum:t["Gift"+o+"_Number"]};i.push(_)}}var f="";if("inviter"==e.rewardType)f=n.configTable.languageKey.string_haoyouzhaohuan2.string_zhcn,n.evtCenter.emit(a.evts.EVT_POP_REWARD_PANEL,i,f);else if("invitee"==e.rewardType){var p=n.configTable.languageKey.string_haoyouzhaohuan1.string_zhcn.split("$$");f=p[0]+e.fromUserName+p[1],this.rewardText=f=p[0]+e.fromUserName+p[1],this.rewardItem=i,e.inviteesNum>=10?n.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u60a8\u586b\u5199\u7684ID\u8d26\u53f7\u9080\u8bf7\u597d\u53cb\u5df2\u8fbe10\u4eba\u4e0a\u9650,\u6240\u4ee5\u4ed6\u6ca1\u6709\u66f4\u591a\u7684\u5956\u52b1\u4e86 \u4e0d\u7528\u62c5\u5fc3,\u60a8\u7684\u5956\u52b1\u4e0d\u53d7\u5f71\u54cd",this.onBtnCallBackLobby,this):this.onBtnCallBackLobby()}else if("dailyInvite"==e.rewardType)f="\u9080\u8bf7\u597d\u53cb\u6210\u529f,\u83b7\u5f97\u5956\u52b1",n.evtCenter.emit(a.evts.EVT_POP_REWARD_PANEL,i,f);else{var u=n.configTable.languageKey.string_haoyouzhaohuan3.string_zhcn.split("$$");f=u[0]+e.fromUserName+u[1]+e.rewardType+u[2],n.evtCenter.emit(a.evts.EVT_POP_REWARD_PANEL,i,f)}var m={cmd:s.msgs.CMD_INVITE_FRIENDS,params:{action:"inviteInfo",gameId:28,userId:c.ME.userId,clientId:h.AccountInfo.clientId}};l.tcp.send(m)}else"dailyInvite"!=e.rewardType&&n.evtCenter.emit(a.evts.EVT_MSG_BOX,d.InviteFriendRewardError[e.code])},e.prototype.onMsgSetUserInfo=function(e){if(cc.log("onMsgSetUserInfo ....................."),cc.log(e),"randomName"==e.action)n.evtCenter.emit(a.evts.EVT_RANDOM_USER_NAME,e.name);else if("fishExCode"==e.action){if(0!=e.code)return void n.evtCenter.emit(a.evts.EVT_MSG_BOX,d.exCodeError[e.code]);for(var t=n.configTable.gift[e.rw],i=[],s=1;s<=5;s++){var r=t["Gift"+s];if(r&&0!=r){var h={giftId:r,giftIcon:t["Gift"+s+"_icon"],giftNum:t["Gift"+s+"_Number"]};i.push(h)}}n.evtCenter.emit(a.evts.EVT_POP_REWARD_PANEL,i,"")}else if("hallNotice"==e.action)""!=e.notice?"osex"!=o.xmen.SystemInfo.getConfig().client_default&&n.evtCenter.emit(a.evts.EVT_POPUP_SYSTEM_NOTICE,e.notice):c.model.dailysign.requestDailySignData(!c.model.activity.showFestivalLogin);else if(0==e.code)"setName"==e.action?(n.evtCenter.emit(a.evts.EVT_SET_USER_INFO,e.action,e.name),n.evtCenter.emit(a.evts.EVT_LOBBY_UPDATE_USER_IFNO,e.action,e.name)):"setSex"==e.action?(n.evtCenter.emit(a.evts.EVT_SET_USER_INFO,e.action,e.sex),n.evtCenter.emit(a.evts.EVT_LOBBY_UPDATE_USER_IFNO,e.action,e.sex)):"setPurl"==e.action&&(n.evtCenter.emit(a.evts.EVT_SET_USER_INFO,e.action,e.purl),n.evtCenter.emit(a.evts.EVT_LOBBY_UPDATE_USER_IFNO,e.action,e.purl));else if(2==e.code&&"setName"==e.action)return void n.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u5305\u542b\u654f\u611f\u8bcd, \u8bf7\u4fee\u6539!")},e.prototype.showVipView=function(){n.evtCenter.emit(a.evts.EVT_POPUP_VIP_WINDOW,"")},e.prototype.onMsgItemDmd=function(e){if(cc.log("****************************** onMsgItemDmd",e),"buy"==e.action){if(2==e.code?n.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u6ca1\u6709\u514d\u8d39\u6280\u80fd\uff0c\u9700\u8981VIP2\u624d\u80fd\u8d2d\u4e70\uff01",this.showVipView,this):n.evtCenter.emit(a.evts.EVT_MSG_BOX,d.ItemShopInfo.ActionIsBuy[e.code]),0==e.code){var t=e.itemId-1e4,i=n.configTable.item[t].price;_.buffer.subDiamond(c.ME.userId,i*e.count)}}else"recycle"==e.action?(n.evtCenter.emit(a.evts.EVT_MSG_BOX,d.ItemShopInfo.ActionIsRecyle[e.code]),0==e.code&&_.buffer.addGoldMoment(c.ME.userId,e.gain.chip)):"exchange"==e.action&&(e.item>=13116&&e.item<=13121&&0==e.code?n.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u5151\u6362\u7533\u8bf7\u6210\u529f\u53d1\u9001\uff0c\u5ba2\u670d\u4f1a\u572815\u4e2a\u5de5\u4f5c\u65e5\u5185\u8054\u7cfb\u60a8\u786e\u8ba4\u5177\u4f53\u53d1\u8d27\u4fe1\u606f\uff0c\u8bf7\u4fdd\u6301\u901a\u8baf\u7545\u901a\uff0c\u795d\u60a8\u6e38\u620f\u6109\u5feb"):n.evtCenter.emit(a.evts.EVT_MSG_BOX,d.ItemShopInfo.ActionDummy[e.code]));if(0==e.code){var o={cmd:s.msgs.CMD_ITEM,params:{action:"list",gameId:28,userId:c.ME.userId,clientId:h.AccountInfo.clientId}};l.tcp.send(o),n.evtCenter.emit(a.evts.EVT_RELOAD_BAG_INFO)}},e.prototype.onMsgGameData=function(e){if(28==e.gameId){var t=e.gdata;this.gunLevel=t.gunLevel,c.model.common.setServerNowTime(t.nowServerTime),n.evtCenter.emit(a.evts.EVT_RECV_GAME_DATA)}},e.prototype.onMsgRoomList=function(e){this.rooms=[];for(var t=e.rooms,i=0;i<t.length;i++){var s=new r.RoomInfo(t[i]);this.rooms.push(s)}n.evtCenter.emit(a.evts.EVT_RECV_ROOM_LIST)},e.prototype.onMsgItemList=function(e){cc.log("************************************************************ model_lobby.onMsgItemList"),n.evtCenter.emit(a.evts.EVT_RELOAD_BAG_INFO)},e.prototype.onMsgFishRanking=function(e){cc.log("****************************** onMsgFishRanking",e);for(var t=0;t<e.tabs.length;t++)"chip"==e.tabs[t].name?(this.mySelfRichRanking=e.tabs[t].myself,e.tabs[t].rankDatas.length>0&&(this.fishRichRanking=e.tabs[t].rankDatas.filter(function(e){return!e.detail||"0"!=e.detail.rankValue}))):"exp"==e.tabs[t].name?(this.mySelfGradeRanking=e.tabs[t].myself,e.tabs[t].rankDatas.length>0&&(this.fishGradeRanking=e.tabs[t].rankDatas.filter(function(e){return!e.detail||"0"!=e.detail.rankValue}))):"charm"==e.tabs[t].name&&(this.mySelfCharmRanking=e.tabs[t].myself,e.tabs[t].rankDatas.length>0&&(this.fishCharmRanking=e.tabs[t].rankDatas.filter(function(e){return!e.detail||"0"!=e.detail.rankValue})));n.evtCenter.emit(a.evts.EVT_POPUP_RANKING)},e.prototype.onMsgMailMessage=function(e){cc.log("****************************** onMsgMailMessage",e),this.mailFlag?(n.evtCenter.emit(a.evts.EVT_POPUP_MAIL_MESSAGE,e),this.mailFlag=!1):(n.evtCenter.emit(a.evts.EVT_RELOAD_MAIL_MESSAGE,e),this.mailRewardId&&(this.showRewardPackage(this.mailRewardId),this.mailRewardId=""))},e.prototype.showRewardPackage=function(e){var t=[];for(var i in e){var s=e[i].itemId.substr(0,4);if("user"==s){if("chip"==(c=e[i].itemId.substr(5,e[i].itemId.length))){var o={giftId:101,giftIcon:"fish_101.png",giftNum:e[i].count};t.push(o)}else if("diamond"==c){o={giftId:102,giftIcon:"fish_102.png",giftNum:e[i].count};t.push(o)}else if("coupon"==c){o={giftId:103,giftIcon:"fish_103.png",giftNum:e[i].count};t.push(o)}}else if("item"==s){var c=e[i].itemId.substr(6,e[i].itemId.length),r=n.configTable.item[c];if(r){var h={giftId:r.item_id,giftIcon:r.big_icon,giftNum:e[i].count};t.push(h)}}}n.evtCenter.emit(a.evts.EVT_POP_REWARD_PANEL,t,"")},e.prototype.onMsgStoreFish=function(e){cc.log("****************************** onMsgStoreFish",e),"buy"==e.action?0==e.code?n.evtCenter.emit(a.evts.EVT_EXCHANGE_BUY_RESULT):n.evtCenter.emit(a.evts.EVT_MSG_BOX,d.Error.ExchangeShopError[e.code]):"order_transaction"==e.action&&(0==e.code?n.evtCenter.emit(a.evts.EVT_EXCHANGE_STORE_BUY,e.orderId,e.prodId):n.evtCenter.emit(a.evts.EVT_MSG_BOX,d.Error.ExchangeHuaFeiError[e.code]))},e.prototype.onMsgWeaponUpgrade=function(e){cc.log("****************************** onMsgWeaponUpgrade",e),0!=e.reason||e.seatId||(this.gunLevel=e.gLv)},e.prototype.onMsgQuickStart=function(e){cc.log("****************************** onMsgQuickStart",e),28==e.gameId&&n.evtCenter.emit(a.evts.EVT_QUICK_START,e.reason)},e.prototype.onMsgProdDelivery=function(e){if(cc.log("****************************** onMsgProdDelivery",e),e.content2)for(var t in c.model.shop.requestShopInfo(c.model.shop.SHOP_GOLD),e.content2)if("chip"==t)c.model.guide.isFirstCharge=!0,c.ME.gold+=e.content2[t],_.buffer.pushGold(c.ME.userId,e.content2[t],1),n.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u5145\u503c\u6210\u529f,\u83b7\u5f97"+e.content2[t]+"\u91d1\u5e01,\u60a8\u7684\u8c6a\u6c14\u7167\u4eae\u4e86\u6574\u4e2a\u6e38\u620f!");else if("diamond"==t)if(c.model.guide.isFirstCharge=!0,"TY28_MEMBER"==e.prodId){var i="string_yueka";c.ME.remainDays>30&&(i="string_yuekaxufei"),c.ME.diamond+=e.content2[t],_.buffer.addDiamondMoment(c.ME.userId,e.content2[t]),n.evtCenter.emit(a.evts.EVT_MSG_BOX,n.configTable.languageKey[i].string_zhcn)}else"TY28P000110101"==e.prodId?(n.evtCenter.emit(a.evts.EVT_GET_CHANGE_REWARD,this),c.ME.diamond+=e.content2[t],_.buffer.addDiamondMoment(c.ME.userId,e.content2[t])):"TY28P000610102"==e.prodId?(n.evtCenter.emit(a.evts.EVT_GET_CHANGE_REWARD,this),c.ME.diamond+=e.content2[t],_.buffer.addDiamondMoment(c.ME.userId,e.content2[t])):(c.ME.diamond+=e.content2[t],_.buffer.addDiamondMoment(c.ME.userId,e.content2[t]),n.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u5145\u503c\u6210\u529f,\u83b7\u5f97"+e.content2[t]+"\u94bb\u77f3,\u60a8\u7684\u8c6a\u6c14\u7167\u4eae\u4e86\u6574\u4e2a\u6e38\u620f!"))},e}();i.Lobby=f,cc._RF.pop()},{"../../xmen_interface":"xmen_interface","../buffer/fish_buffer":"fish_buffer","../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_room_info":"fish_room_info","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model_lottery:[function(e,t,i){"use strict";cc._RF.push(t,"62727hWa21FoIovburK2Vgk","fish_model_lottery"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("./fish_model"),c=e("../define/fish_event_types"),a=e("../buffer/fish_buffer"),r=e("../logic/fish_lottery_info"),h=function(){function e(){this.curBonusFishNum=0,this.curJackpot=0,this.lotteryInfo=new r.LotteryInfo,n.msgCenter.on(s.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.on(s.msgs.MSG_LOTTERY_TASK,this.onMsgLotteryResult,this)}return e.prototype.release=function(){this.lotteryInfo=null,n.msgCenter.off(s.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.off(s.msgs.MSG_LOTTERY_TASK,this.onMsgLotteryResult,this)},e.prototype.onMsgGameData=function(e){if(28==e.gameId){var t=e.gdata;this.curBonusFishNum=t.lotteryFishNum,this.curJackpot=t.lotteryPool}},e.prototype.onMsgLotteryResult=function(e){if(cc.log("****************************** onMsgLotterResult",e),0==e.reason)if(e.userId==o.ME.userId)n.evtCenter.emit(c.evts.EVT_LOTTERY_RESULT,e.reason,e.reward,e.userId);else{for(var t=e.reward.level,i=e.reward.prize,s=0,r=1;r<=6;r++)if(i=="prize"+r){s=r;break}var h=this.lotteryInfo.getCurGradeInfo(t+1),l=h["prize"+s],d=h["prize"+s+"_number"];a.buffer.pushItem(e.userId,l,d,3)}},e}();i.Lottery=h,cc._RF.pop()},{"../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_lottery_info":"fish_lottery_info","../scene/fish_scene":"fish_scene","./fish_model":"fish_model"}],fish_model_me:[function(e,t,i){"use strict";cc._RF.push(t,"999df+jgK5DKILLc9y87owJ","fish_model_me"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("../logic/fish_tcp"),c=e("../scene/fish_scene_login"),a=e("../define/fish_event_types"),r=e("./fish_model"),h=e("../logic/fish_baggage"),l=e("../buffer/fish_buffer"),d=function(){function e(){this.playerInfo=null,this.userId=0,this.name="",this.gold=0,this.diamond=0,this.sex=0,this.coupon=0,this.charm=0,this.headUrl="",this.phonenumber="",this.snsId="",this.vipExpCurrent=0,this.vipExpNext=0,this.vipName=null,this.vipExp=0,this.vipLevel=0,this.showMember=1,this.isMember=!1,this.remainDays=0,this.isMemberReward=0,this.arcade=0,this.exp=0,this.level=1,this.weaponId=2101,this.autoFireUnlock=!0,this.baggage=new h.Baggage,this.bagInfo=null,this._inited=!1,this.openBagFlag=!1,n.msgCenter.on(s.msgs.MSG_UPDATE_NOTIFY,this.onMsgUpdateNotify,this),n.msgCenter.on(s.msgs.MSG_USER_INFO,this.onMsgUserInfo,this),n.msgCenter.on(s.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.on(s.msgs.MSG_ITEM,this.onMsgItem,this),n.msgCenter.on(s.msgs.MSG_CHANGE,this.onMsgChange,this),n.msgCenter.on(s.msgs.MSG_LEVEL_UP,this.onMsgLevelUp,this)}return e.prototype.release=function(){n.msgCenter.off(s.msgs.MSG_UPDATE_NOTIFY,this.onMsgUpdateNotify,this),n.msgCenter.off(s.msgs.MSG_USER_INFO,this.onMsgUserInfo,this),n.msgCenter.off(s.msgs.MSG_GAME_DATA,this.onMsgGameData,this),n.msgCenter.off(s.msgs.MSG_ITEM,this.onMsgItem,this),n.msgCenter.off(s.msgs.MSG_CHANGE,this.onMsgChange,this),n.msgCenter.off(s.msgs.MSG_LEVEL_UP,this.onMsgLevelUp,this)},e.prototype.setPlayerInfo=function(e){this.playerInfo=e,this.userId=e.userId},e.prototype.onMsgUpdateNotify=function(e){cc.log("***************************** onMsgUpdateNotify",e),this._systemNotice=!1;for(var t=e.changes,i={params:{gameId:9999,userId:r.ME.userId,clientId:c.AccountInfo.clientId}},n=0;n<t.length;n++){switch(t[n]){case"udata":i.cmd=s.msgs.CMD_USER_INFO;break;case"gdata":i.cmd=s.msgs.CMD_GAME,i.params.action="data";break;case"item":i.cmd=s.msgs.CMD_ITEM,i.params.action="list";break;case"message":i.cmd=s.msgs.CMD_MESSAGE,i.params.action="list",i.params.typeid=1}o.tcp.send(i)}},e.prototype.onMsgUserInfo=function(e){var t=e.udata;this.name=t.name,this.gold=t.chip,this.diamond=t.diamond,this._inited||(this.coupon=t.coupon,this._inited=!0),this.sex=t.sex,this.charm=t.charm,this.headUrl=t.purl,this.phonenumber=t.phonenumber,this.snsId=t.snsId;var i=t.vipInfo;this.vipExpCurrent=i.expCurrent,this.vipExpNext=i.expNext,this.vipName=i.name,this.vipExp=i.exp,this.vipLevel=i.level;var s=t.memberInfo;this.isMember=s.isMember,this.remainDays=s.remainDays,this.isMemberReward=s.isMemberReward;var h={cmd:"item",params:{action:"list",gameId:9999,userId:r.ME.userId,clientId:c.AccountInfo.clientId}};o.tcp.send(h),n.evtCenter.emit(a.evts.EVT_RECV_USER_INFO),n.evtCenter.emit(a.evts.EVT_RELOAD_NOBLE_GIFT),n.evtCenter.emit(a.evts.EVT_RELOAD_EXCHANGE_SHOP)},e.prototype.onMsgItem=function(e){cc.log("*********************************************** model_me.onMsgItem"),this.baggage.parse(e),this.bagInfo&&(this.bagInfo=null),this.bagInfo=e,n.evtCenter.emit(a.evts.EVT_BAGGAGE_UPDATE),this.openBagFlag&&n.evtCenter.emit(a.evts.EVT_POPUP_PERSONAL_BAG,r.ME.bagInfo)},e.prototype.onMsgGameData=function(e){if(9999==e.gameId&&(t=e.gdata),28==e.gameId){var t=e.gdata;this.exp=t.exp,this.level=t.level,this.weaponId=t.gunLevel}n.evtCenter.emit(a.evts.EVT_PERSONAL_RELOAD)},e.prototype.onMsgChange=function(e){if(cc.log("***************************** onMsgChange"),e.userId==this.userId){var t=e.ud;t&&(void 0!=t.name&&(this.name=t.name),void 0!=t.charm&&(this.charm=t.charm),void 0!=t.diamond&&(r.ME.diamond=t.diamond),void 0!=t.chip&&(r.ME.gold=t.chip));var i=e.gd;i&&(void 0!=i.exp&&(this.exp=i.exp),void 0!=i.level&&(this.level=i.level));var n=e.itm;if(n)for(var s in n)if(n.hasOwnProperty(s)){var o=parseInt(s.split(":1")[1]),c=n[s];this.baggage.updateItemCount(o,c)}}},e.prototype.onMsgLevelUp=function(e){if(cc.log("***************************** onMsgLevelUp",e),e.userId==this.userId){var t=(r=e.gain).chip||0,i=r.dmd||0,s=[];for(var o in r)if(r.hasOwnProperty(o)&&-1!=o.indexOf("item")){var c=parseInt(o.split(":1")[1]);s.push({itemId:c,count:r[o]})}this.level=e.uLv,n.evtCenter.emit(a.evts.EVT_LEVEL_UPGRADE,this.level,t,i,s[0],s[1])}else{var r;t=(r=e.gain).chip||0,i=r.dmd||0;t>0&&l.buffer.addGoldMoment(e.userId,t),i>0&&l.buffer.addDiamondMoment(e.userId,i)}},e}();i.Me=d,cc._RF.pop()},{"../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_baggage":"fish_baggage","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model_mini:[function(e,t,i){"use strict";cc._RF.push(t,"2fa9dz2SvNIba4gKN5QqKVC","fish_model_mini"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("../define/fish_event_types"),c=e("./fish_model"),a=e("../buffer/fish_buffer"),r=function(){function e(){this.miniGameData=null,this.allMiniGameSids=null,this.miniGameLevel=0,this.miniGameNum=0,this.miniGameMulti=0,n.msgCenter.on(s.msgs.MSG_TABLE_INFO,this.onMsgTableInfo,this),n.msgCenter.on(s.msgs.MSG_WEAPON_UPGRADE,this.onMsgWeaponUpgrade,this),n.msgCenter.on(s.msgs.MSG_MINI_GAME,this.onMsgStartMiniGame,this),n.msgCenter.on(s.msgs.MSG_MINIGAME_DRAW,this.onMsgMiniGameDraw,this),n.msgCenter.on(s.msgs.MSG_MG_CONTINUE,this.onMsgMGContinue,this),n.msgCenter.on(s.msgs.MSG_MG_SPIN,this.onMsgMGSpin,this),n.evtCenter.on(o.evts.EVT_GOLD_INFO_CHG,this.onMsgChange,this)}return e.prototype.release=function(){this.miniGameData=null,this.allMiniGameSids=null,n.msgCenter.off(s.msgs.MSG_TABLE_INFO,this.onMsgTableInfo,this),n.msgCenter.off(s.msgs.MSG_WEAPON_UPGRADE,this.onMsgWeaponUpgrade,this),n.msgCenter.off(s.msgs.MSG_MINI_GAME,this.onMsgStartMiniGame,this),n.msgCenter.off(s.msgs.MSG_MINIGAME_DRAW,this.onMsgMiniGameDraw,this),n.msgCenter.off(s.msgs.MSG_MG_CONTINUE,this.onMsgMGContinue,this),n.msgCenter.off(s.msgs.MSG_MG_SPIN,this.onMsgMGSpin,this),n.evtCenter.off(o.evts.EVT_GOLD_INFO_CHG,this.onMsgChange,this)},e.prototype.onMsgTableInfo=function(e){e.miniGame&&(this.miniGameData=e||this.miniGameData,this.allMiniGameSids=e.allMiniGameSids||this.allMiniGameSids,this.miniGameLevel=this.miniGameData.miniGame.level,this.miniGameNum=this.miniGameData.miniGame.cardNum||0,this.miniGameMulti=this.miniGameData.miniGame.multi)},e.prototype.onMsgChange=function(e,t){cc.log("****************************** onMsgChange"),this.miniGameNum>0&&e==c.ME.userId&&n.evtCenter.emit(o.evts.EVT_MG_CONDITION,t)},e.prototype.onMsgWeaponUpgrade=function(e){cc.log("****************************** onMsgWeaponUpgrade",e),e.reason&&e.reason>0||e.seatId==c.model.table.seatId&&this.miniGameNum>0&&n.evtCenter.emit(o.evts.EVT_MG_CONDITION,a.buffer.gameGold.gold)},e.prototype.onMsgStartMiniGame=function(e){if(cc.log("****************************** onMsgStartMiniGame",e),0==e.reason){this.miniGameMulti=e.multi,n.evtCenter.emit(o.evts.EVT_MINI_GAME_PLAYING,e.seatId);var t=e.reward2||null;n.evtCenter.emit(o.evts.EVT_MINI_GAME_START,e.reward,e.cardId,e.seatId,t)}},e.prototype.onMsgMiniGameDraw=function(e){cc.log("****************************** onMsgMiniGameDraw",e),0==e.reason&&e.isEnd&&n.evtCenter.emit(o.evts.EVT_MINI_GAME_END,e.totalWin,e.seatId,6);var t=c.model.table.getPlayerInfo(e.seatId);void 0!=t&&t.userId!=c.ME.userId||0==e.reason&&n.evtCenter.emit(o.evts.EVT_MERMAID_DRAW,{reward:e.reward,isEnd:e.isEnd,seatId:e.seatId,loc:e.loc,win:e.win,totalWin:e.totalWin})},e.prototype.onMsgMGContinue=function(e){if(cc.log("****************************** onMsgMGContinue",e),n.evtCenter.emit(o.evts.EVT_MINI_GAME_PLAYING,e.seatId),void 0!=this.miniGameData.miniGame&&e.seatId==c.model.table.seatId){var t=this.miniGameData.miniGame.current;if(8101==t.cardId)n.evtCenter.emit(o.evts.EVT_POPUP_MERMAID_FORCE,t.reward,t.locs,t.totalWin);else if(8201==t.cardId){var i=t.phase1,s=t.phase2;n.evtCenter.emit(o.evts.EVT_POPUP_CHEST_FORCE,i.reward,s.reward,i.locs,i.totalWin)}}},e.prototype.onMsgMGSpin=function(e){(cc.log("****************************** onMsgMGSpin",e),0==e.reason&&n.evtCenter.emit(o.evts.EVT_MINI_GAME_END,e.totalWin,e.seatId,19),0==e.reason)&&(c.model.table.getPlayerInfo(e.seatId).userId==c.ME.userId&&n.evtCenter.emit(o.evts.EVT_SPIN_OVER,e.reward,e.win,e.totalWin))},e}();i.Mini=r,cc._RF.pop()},{"../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../scene/fish_scene":"fish_scene","./fish_model":"fish_model"}],fish_model_red_envelope:[function(e,t,i){"use strict";cc._RF.push(t,"11280rNVEFEd5BziuMD0cq5","fish_model_red_envelope"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("./fish_model"),c=e("../define/fish_event_types"),a=function(){function e(){this.showFlag=!0,n.msgCenter.on(s.msgs.MSG_RED_ENVELOPE,this.onMsgRedEnvelope,this)}return e.prototype.release=function(){n.msgCenter.off(s.msgs.MSG_RED_ENVELOPE,this.onMsgRedEnvelope,this)},e.prototype.onMsgRedEnvelope=function(e){switch(cc.log("****************************** onMsgRedEnvelope",e),e.action){case"prepare":if(this.showFlag){var t=e.startTime-o.model.common.getServerNowTime();n.evtCenter.emit(c.evts.EVT_RED_ENVELOPE_SHOW,t,e.evlpId,e.isSys,e.charm),this.showFlag=!1}break;case"grab":n.evtCenter.emit(c.evts.EVT_RED_ENVELOPE_RESULT,e);break;case"othersGrab":var i=null,s=0;for(var a in e.gain)"chip"==a?(i="\u91d1\u5e01",a,s=e.gain.chip):(i="\u94bb\u77f3",a,s=e.gain.diamond),s=void 0==e.gain[a]?0:e.gain[a];var r=e.name+"\u6210\u529f\u9886\u53d6\u60a8\u7684\u7ea2\u5305\uff0c\u83b7\u5f97"+i+"\uff1a"+s,h=n.configTable.languageKey.string_mobaini.string_zhcn.split("|"),l=Math.floor(Math.random()*h.length);n.evtCenter.emit(c.evts.EVT_RED_ENVELOPE_OTHER,r+", "+h[l])}n.evtCenter.emit(c.evts.EVT_RELOAD_BAG_INFO,o.ME.bagInfo)},e}();i.RedEnvelope=a,cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../scene/fish_scene":"fish_scene","./fish_model":"fish_model"}],fish_model_roommatch:[function(e,t,i){"use strict";cc._RF.push(t,"cc24653t2dGxIpMHY33lpE2","fish_model_roommatch"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("../define/fish_event_types"),c=e("./fish_model"),a=e("../buffer/fish_buffer"),r=function(){function e(){this._inited=!1,this.rmatchId="",this.rmatchCfgId=0,this.rmatchLevel=1,this.rmatchState=-2,this.isJoinedRmatch=!1,this.isCanUseFreeze=!0,this.rmatchTimeLeft=0,this.tableRank=0,this.allRank=0,this.tableRkList=[],this.rankListEnd=[],this.receiveEndTime=0,this.receiveStartTime=0,n.msgCenter.on(s.msgs.MSG_TABLE_INFO,this.onMsgTableInfo,this),n.msgCenter.on(s.msgs.MSG_ROOM_MATCH,this.onMsgRoomMatch,this),n.evtCenter.on(o.evts.EVT_EXIT_GAME_SCENE,this.onEventExitGameScene,this)}return e.prototype.release=function(){this.tableRkList=[],this.rankListEnd=[],n.msgCenter.off(s.msgs.MSG_TABLE_INFO,this.onMsgTableInfo,this),n.msgCenter.off(s.msgs.MSG_ROOM_MATCH,this.onMsgRoomMatch,this),n.evtCenter.off(o.evts.EVT_EXIT_GAME_SCENE,this.onEventExitGameScene,this)},e.prototype.onMsgTableInfo=function(e){if(!this._inited&&void 0!=typeof e&&(this._inited=!0,this.tableRkList=[],void 0!=e.cmTbMatch))if(this.rmatchCfgId=e.cmTbMatch.matchConfId,this.rmatchState=e.cmTbMatch.state,this.rmatchTimeLeft=e.cmTbMatch.timerLeft,this.rmatchLevel=n.configTable.room_match[this.rmatchCfgId].match_lvl,-1==this.rmatchState);else{this.rmatchId=e.cmTbMatch.matchId;for(var t=e.cmTbMatch.tableRkList,i=0;i<t.length;i++){var s=n.utils.getRelativeSeat(t[i].sid);this.tableRkList[s]=t[i].sc}0==this.rmatchState||(1==this.rmatchState?(this.isJoinedRmatch=!0,this.isCanUseFreeze=!1):2==this.rmatchState?(this.isCanUseFreeze=!1,this.isJoinedRmatch=!1):(this.isCanUseFreeze=!0,this.isJoinedRmatch=!1))}},e.prototype.onMsgRoomMatch=function(e){if(cc.log("****************************** onMsgRoomMatch",e),void 0!=typeof e||void 0!=typeof e.action)switch(e.action){case"countDownStart":this.rmatchCfgId=e.matchConfId,this.rmatchLevel=n.configTable.room_match[this.rmatchCfgId].match_lvl;var t=e.seconds;this.rmatchState=0,n.evtCenter.emit(o.evts.EVT_RMATCH_READY,t),n.evtCenter.emit(o.evts.EVT_RMATCH_BANNER,0);break;case"start":this.receiveStartTime=Date.now(),this.isCanUseFreeze=!1,this.isJoinedRmatch=!0,this.rmatchId=e.matchId,this.rmatchState=1,n.evtCenter.emit(o.evts.EVT_RMATCH_START_VIEW,0,e.timeLong,this);break;case"countDownEnd":this.rmatchState=2,n.evtCenter.emit(o.evts.EVT_RMATCH_BANNER,2);break;case"end":this.rankListEnd=[],this.tableRkList=[],this.isJoinedRmatch=!1,this.isCanUseFreeze=!0,this.rmatchState=-2,this.rankListEnd=e.rankList,this.tableRank=e.tableRank,this.allRank=e.rank,n.evtCenter.emit(o.evts.EVT_HIDE_RMATCH_GUIDE,this),0!=e.rank&&n.evtCenter.emit(o.evts.EVT_RMATCH_END,e.rank,e.score,e.tableRank,e.nextTime);break;case"score":n.evtCenter.emit(o.evts.EVT_RMATCH_UPDATE_SCORE,e.userId,e.rank,e.score);break;case"rank":n.evtCenter.emit(o.evts.EVT_RMATCH_UPDATE_RANK,e.ranks,e.loc,e.len);break;case"reward":if(0==e.code)if(e.userId==c.ME.userId)this.rmatchId="",this.isJoinedRmatch=!1,this.isCanUseFreeze=!0,n.evtCenter.emit(o.evts.EVT_POP_REWARD_PANEL,this.getRmatchRewardData(this.allRank,this.tableRank));else{var i=e.rw;a.buffer.onRwxDrop(i,e.userId)}else 1==e.code||e.code}},e.prototype.onEventExitGameScene=function(){cc.log("****************************** onEventExitGameScene"),this._inited=!1,this.rmatchId="",this.rmatchCfgId=0,this.tableRkList=[],this.rankListEnd=[],this.isCanUseFreeze=!0,this.rmatchState=-2,this.isJoinedRmatch=!1},e.prototype.getRmatchRewardData=function(e,t){var i=n.configTable.room_match[this.rmatchCfgId],s=n.configTable.room_match_reward[i.match_lvl],o=[],c="",a=s["rank"+e+"reward_type"],r=s["rank"+e+"reward_number"];if(a&&r&&0!=a&&0!=r){a>=3101&&a<=3312?c=n.configTable.item[a].big_icon:101==a?c="fish_101.png":102==a&&(c="fish_102.png");var h={giftId:a,giftIcon:c,giftNum:r};o.push(h)}if(1==t){var l={giftId:s.tableno1_type,giftIcon:"fish_"+s.tableno1_type+".png",giftNum:s.tableno1_number};o.push(l)}return o},e}();i.RoomMatch=r,cc._RF.pop()},{"../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../scene/fish_scene":"fish_scene","./fish_model":"fish_model"}],fish_model_shop:[function(e,t,i){"use strict";cc._RF.push(t,"e3634+gMxhKbKZeWIP8qHxZ","fish_model_shop"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("../../xmen_interface"),c=e("../define/fish_event_types"),a=e("../define/fish_consts"),r=e("./fish_model"),h=e("../scene/fish_scene_login"),l=e("../logic/fish_tcp"),d=function(){function e(){this.SHOP_GOLD=1,this.SHOP_DIAMOND=2,this.SHOP_EXCHANGE=3,this.showType=null,this.isNeedRequestShopData=!0,this.updateSec=0,n.msgCenter.on(s.msgs.MSG_SHOP_INFO,this.onMsgShopInfo,this),n.msgCenter.on(s.msgs.MSG_STORE_FISH,this.onMsgStoreFish,this),o.xmen.EventDispatcher.on(o.xmen.EventType.MSG_BUY_COIN_DIRECT_SUCCESS,this.onEventBuyCoinSuccess,this),o.xmen.EventDispatcher.on(o.xmen.EventType.MSG_BUY_COIN_DIRECT_FAILED,this.onEventBuyCoinFailed,this),o.xmen.EventDispatcher.on(o.xmen.EventType.MSG_PAY_DIAMOND_SUCCESS,this.onEventBuyDiamondSuccess,this),o.xmen.EventDispatcher.on(o.xmen.EventType.MSG_PAY_DIAMOND_FAILED,this.onEventBuyDiamondFaild,this),n.evtCenter.on(o.xmen.EventType.TCP_ERROR,this.onEventSockError,this),n.evtCenter.on(o.xmen.EventType.TCP_CLOSE,this.onEventSockError,this)}return e.prototype.release=function(){this.goldData=[],this.diamondData=[],this.exchangeShop=[],n.msgCenter.off(s.msgs.MSG_SHOP_INFO,this.onMsgShopInfo,this),n.msgCenter.off(s.msgs.MSG_STORE_FISH,this.onMsgStoreFish,this),o.xmen.EventDispatcher.off(o.xmen.EventType.MSG_BUY_COIN_DIRECT_SUCCESS,this.onEventBuyCoinSuccess,this),o.xmen.EventDispatcher.off(o.xmen.EventType.MSG_BUY_COIN_DIRECT_FAILED,this.onEventBuyCoinFailed,this),o.xmen.EventDispatcher.off(o.xmen.EventType.MSG_PAY_DIAMOND_SUCCESS,this.onEventBuyDiamondSuccess,this),o.xmen.EventDispatcher.off(o.xmen.EventType.MSG_PAY_DIAMOND_FAILED,this.onEventBuyDiamondFaild,this),n.evtCenter.off(o.xmen.EventType.TCP_ERROR,this.onEventSockError,this),n.evtCenter.off(o.xmen.EventType.TCP_CLOSE,this.onEventSockError,this)},e.prototype.onMsgShopInfo=function(e){cc.log("****************************** onMsgShopInfo",e),this.goldData=[],this.diamondData=[],this.exchangeShop=[],this.updateSec=e.updateSeconds||0;for(var t=e.tabs,i=0;i<t.length;i++)if("chip"===t[i].subStore){this.goldData=t[i].items,this.goldData.sort(function(e,t){return e.innerId-t.innerId});for(var s=0;s<this.goldData.length;s++)cc.log(this.goldData[s].innerId)}else if("diamond"===t[i].subStore){this.diamondData=t[i].items,this.diamondData.sort(function(e,t){return e.buyTimes-t.buyTimes});for(var o=0;o<this.diamondData.length;o++)cc.log(this.diamondData[o].innerId)}else if("coupon"===t[i].subStore){this.exchangeShop=t[i].items,this.exchangeShop.sort(function(e,t){return cc.log("a id "+e.innerId+" priority"+n.configTable.prize_shop[e.innerId].priority),cc.log("b id "+t.innerId+" priority"+n.configTable.prize_shop[t.innerId].priority),Number(n.configTable.prize_shop[e.innerId].priority)>Number(n.configTable.prize_shop[t.innerId].priority)?1:-1});for(o=0;o<this.exchangeShop.length;o++)cc.log("id "+this.exchangeShop[o].innerId+" priority "+n.configTable.prize_shop[this.exchangeShop[o].innerId].priority)}this.showType==this.SHOP_EXCHANGE?n.evtCenter.emit(c.evts.EVT_POPUP_EXCHANGE_SHOP):n.evtCenter.emit(c.evts.EVT_UPDATE_SHOP_WINDOW,this.showType)},e.prototype.onMsgStoreFish=function(e){if(cc.log("****************************** onMsgStoreFish",e),0==e.code&&"order_transaction"==e.action)if(e.orderId&&""!=e.orderId){var t=a.Mall[e.prodId];switch(e.prodId){case"TY28C000610101":case"TY28C001210102":case"TY28C003010103":case"TY28C009810104":case"TY28C019810105":case"TY28C032810106":case"TY28C064810107":case"TY28C000611101":case"TY28C001211102":case"TY28C003011103":case"TY28C009811104":case"TY28C019811105":case"TY28C032811106":case"TY28C064811107":case"TY28D000610201":case"TY28D001210202":case"TY28D003010203":case"TY28D009810204":case"TY28D019810205":case"TY28D032810206":case"TY28D064810207":case"TY28_MEMBER":case"TY28D002810209":case"TY28P000110101":case"TY28P000610102":case"TY28D000611201":case"TY28D001211202":case"TY28D003011203":case"TY28D009811204":case"TY28D019811205":case"TY28D032811206":case"TY28D064811207":o.xmen.SDKInterfaceManager.payH5(e.prodId,t.name,1,e.orderId,t.price)}}else n.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u8bf7\u6c42\u5546\u54c1\u4fe1\u606f\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u6211\u4eec\u5ba2\u670d\n,\u70ed\u7ebf\u7535\u8bdd\uff1a0898-36690405")},e.prototype.onEventBuyCoinSuccess=function(e){cc.log("****************************** onEventBuyCoinSuccess",e),r.model.guide.isFirstCharge=!0},e.prototype.onEventBuyCoinFailed=function(e){cc.log("****************************** onEventBuyCoinFailed",e),n.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u5145\u503c\u5931\u8d25\uff1f\u4e0d\u4f1a\u5145\u503c\uff1f\u65e0\u6cd5\u89e3\u51b3\u7684\u5145\u503c\u96be\u9898\uff1f\n\u5ba2\u670d\u7535\u8bdd\uff1a0898-36690405")},e.prototype.onEventBuyDiamondSuccess=function(e){cc.log("****************************** onEventBuyDiamondSuccess",e),r.model.guide.isFirstCharge=!0},e.prototype.onEventBuyDiamondFaild=function(e){cc.log("****************************** onEventBuyDiamondFaild",e),n.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u5145\u503c\u5931\u8d25\uff1f\u4e0d\u4f1a\u5145\u503c\uff1f\u65e0\u6cd5\u89e3\u51b3\u7684\u5145\u503c\u96be\u9898\uff1f\n\u5ba2\u670d\u7535\u8bdd\uff1a0898-36690405")},e.prototype.requestShopInfo=function(e){this.showType=e;var t={cmd:s.msgs.MSG_SHOP_INFO,params:{action:"update",gameId:9999,userId:r.ME.userId,clientId:h.AccountInfo.clientId}};l.tcp.send(t)},e.prototype.showFirstCharge=function(){0!=r.ME.showMember&&(r.model.guide.isGetFirstChargeReward||n.evtCenter.emit(c.evts.EVT_POP_FIRST_CHARGE,this))},e.prototype.onEventSockError=function(){cc.log("****************************** onEventSockError"),this.isNeedRequestShopData=!0},e.prototype.getPriceByProductId=function(e,t){switch(t){case"TY28_MEMBER":case"TY28D002810209":case"TY28P000110101":case"TY28P000610102":return a.Mall[t].price}for(var i=0;i<e.length;++i)if(e[i].id==t)return n.configTable.shop[e[i].innerId].prize},e}();i.Shop=d,cc._RF.pop()},{"../../xmen_interface":"xmen_interface","../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model_subsidy:[function(e,t,i){"use strict";cc._RF.push(t,"8016bkKa+1KWarfHN4xb4rk","fish_model_subsidy"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../define/fish_msg_types"),s=e("./fish_model"),o=e("../scene/fish_scene_login"),c=e("../logic/fish_tcp"),a=e("../scene/fish_scene"),r=e("../define/fish_event_types"),h=e("../buffer/fish_buffer"),l=e("../../assets_manager"),d=function(){function e(){this.cdStartTime=0,this.cdLeftTime=-1,this.isGetSubSidyInLobby=!1,this.isCanGetSubsidyNow=!1,this.isBankrupt=!1,this.brptState=this.RUPT_USEUP,this.remainTimes=0,a.msgCenter.on(n.msgs.MSG_FISH_BENEFITS,this.onMsgBenefits,this),a.msgCenter.on(n.msgs.MSG_BANKRUPTCY,this.onMsgPlayerBankruptcy,this),a.evtCenter.on(r.evts.EVT_GOLD_INFO_CHG,this.onEventPlayerInfoChange,this)}return e.prototype.release=function(){a.msgCenter.off(n.msgs.MSG_FISH_BENEFITS,this.onMsgBenefits,this),a.msgCenter.off(n.msgs.MSG_BANKRUPTCY,this.onMsgPlayerBankruptcy,this),a.evtCenter.off(r.evts.EVT_GOLD_INFO_CHG,this.onEventPlayerInfoChange,this)},e.prototype.onMsgBenefits=function(e){switch(cc.log("****************************** onMsgBenefits",e),e.action){case"useup":this.isBankrupt=!0,this.brptState=this.RUPT_USEUP,a.evtCenter.emit(r.evts.EVT_SHOW_SUBSIDY);break;case"countdown":if(e.userId!=s.ME.userId)return;this.isBankrupt=!0,this.cdStartTime=Date.now(),this.cdLeftTime=e.senconds,this.isCanGetSubsidyNow=this.cdLeftTime<=0,this.isCanGetSubsidyNow?this.brptState=this.RUPT_BENEFIT:this.brptState=this.RUPT_WAIT,a.evtCenter.emit(r.evts.EVT_SHOW_SUBSIDY);break;case"get":if(0==e.reason)if(this.isBankrupt=!1,this.isCanGetSubsidyNow=!1,this.isGetSubSidyInLobby){if(e.userId!=s.ME.userId)return;this.cdStartTime=0,this.cdLeftTime=-1,h.buffer.addGoldMoment(s.ME.userId,e.chip),a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u606d\u559c\u4f60\u6210\u529f\u9886\u53d6\u4e86"+e.chip+"\u91d1\u5e01,\u8d76\u5feb\u8fdb\u5165\u6e38\u620f\u5427!",this.onQuickStart,this)}else e.userId==s.ME.userId?(this.cdStartTime=0,this.cdLeftTime=-1,s.model.subsidy.isBrokeAndUseUp=!1,h.buffer.pushGold(s.ME.userId,e.chip,3),a.evtCenter.emit(r.evts.EVT_HIDE_SUBSIDY,e.userId,e.chip)):h.buffer.addGoldMoment(e.userId,e.chip);break;case"yesterday_send":e.userId==s.ME.userId&&(h.buffer.addGoldMoment(s.ME.userId,e.chip),a.evtCenter.emit(r.evts.EVT_MSG_TIPS,"\u6628\u65e5\u8865\u507f\u91d1\u5df2\u9886\u53d6",2));break;case"timesLeft":this.remainTimes=e.left,e.left<=0&&(this.isBankrupt=!0,this.brptState=this.RUPT_USEUP)}},e.prototype.onMsgPlayerBankruptcy=function(e){cc.log("****************************** onMsgPlayerBankruptcy",e);s.model.table.getPlayerInfo(e.seatId);a.evtCenter.emit(r.evts.EVT_BANKRUPT,e.seatId),cc.sys.localStorage.setItem("bankrupt","true")},e.prototype.onQuickStart=function(){cc.audioEngine.playEffect(l.AssetsManager.getRes("sound/button"),!1);var e={cmd:n.msgs.CMD_GAME,params:{action:"quick_start",gameId:28,userId:s.ME.userId,clientId:o.AccountInfo.clientId}};c.tcp.send(e)},e.prototype.onEventPlayerInfoChange=function(e,t){cc.log("****************************** onEventPlayerInfoChange"),e==s.ME.userId&&t>0&&(this.isBankrupt=!1,this.isCanGetSubsidyNow=!1)},e.prototype.ReadBoolFromLocalStorage=function(e,t){var i=cc.sys.localStorage.getItem(e);return i?"true"===i:t},e.prototype.sendYesterdaySubsidy=function(){var e={cmd:n.msgs.CMD_SUBSIDY_RECEIVE,params:{action:"login",gameId:28,userId:s.ME.userId,clientId:o.AccountInfo.clientId}};c.tcp.send(e)},e}();i.Subsidy=d,cc._RF.pop()},{"../../assets_manager":"assets_manager","../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model_table:[function(e,t,i){"use strict";cc._RF.push(t,"8cce9ChROxM/oFeAzlxeRiD","fish_model_table"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("../define/fish_event_types"),c=e("./fish_model"),a=e("../logic/fish_player_info"),r=e("../scene/loading/fish_scene_loading_lobby_to_game"),h=e("../scene/loading/fish_scene_loading_lobby_to_match"),l=e("../fish"),d=e("../logic/fish_fish_info"),_=e("../define/fish_consts"),f=e("../scene/loading/fish_scene_loading_game_to_lobby"),p=e("../buffer/fish_buffer"),u=e("../../assets_manager"),m=function(e){function t(){var t=e.call(this)||this;return t.roomId=0,t.tableId=0,t.seatId=0,t.minMultiple=0,t.minCostGold=0,t.isAuto=!1,t.isLock=!1,t.isFury=!1,t.isLaser=!1,t.isFrozen=!1,t.isNbomb=!1,t.isMatch=0,t.isShowBuyTip=!0,t.fireNumLock=0,t.isHaveUesedLock=!1,t.isHaveUesedSuperWeapon=!1,t.fireNumSW=0,t.frozenBgnTime=0,t.frozenEndTime=0,t.isBatteryFrozen=!1,t.inTreasureTask=!1,t.isHaveSuperWeapon=!1,t.fishes={},t.players={},t.waveQueue=[],t.HeartBeat=!1,n.msgCenter.on(s.msgs.MSG_CHANGE,t.onMsgChange,t),n.msgCenter.on(s.msgs.MSG_TABLE_INFO,t.onMsgTableInfo,t),n.msgCenter.on(s.msgs.MSG_PLAYER_ENTER,t.onMsgPlayerEnter,t),n.msgCenter.on(s.msgs.MSG_PLAYER_LEAVE,t.onMsgPlayerLeave,t),n.msgCenter.on(s.msgs.MSG_ADD_FISH_GROUP,t.onMsgAddFishGroup,t),n.msgCenter.on(s.msgs.MSG_FIRE_RESPONSE,t.onMsgFireResponse,t),n.msgCenter.on(s.msgs.MSG_FIRE_BROADCAST,t.onMsgFireBroadcast,t),n.msgCenter.on(s.msgs.MSG_CATCH_SUCCESS,t.onMsgCatchSuccess,t),n.msgCenter.on(s.msgs.MSG_CATCH_FAILED,t.onMsgCatchFailed,t),n.msgCenter.on(s.msgs.MSG_SKILL_FURY_BGN,t.onMsgFuryBegin,t),n.msgCenter.on(s.msgs.MSG_SKILL_FURY_FISH,t.onMsgFuryFish,t),n.msgCenter.on(s.msgs.MSG_SKILL_FURY_END,t.onMsgFuryEnd,t),n.msgCenter.on(s.msgs.MSG_SKILL_SUMMON,t.onMsgSummon,t),n.msgCenter.on(s.msgs.MSG_SKILL_FRZ_BGN,t.onMsgFreezeBegin,t),n.msgCenter.on(s.msgs.MSG_SKILL_FRZ_END,t.onMsgFreezeEnd,t),n.msgCenter.on(s.msgs.MSG_SKILL_LOCK_BGN,t.onMsgLockBegin,t),n.msgCenter.on(s.msgs.MSG_SKILL_LOCK_FISH,t.onMsgLockFish,t),n.msgCenter.on(s.msgs.MSG_SKILL_LOCK_END,t.onMsgLockEnd,t),n.msgCenter.on(s.msgs.MSG_SKILL_LASER_BGN,t.onMsgLaserBegin,t),n.msgCenter.on(s.msgs.MSG_SKILL_LASER_FIRE,t.onMsgLaserFire,t),n.msgCenter.on(s.msgs.MSG_SKILL_LASER_HIT,t.onMsgLaserHit,t),n.msgCenter.on(s.msgs.MSG_SKILL_LASER_END,t.onMsgLaserEnd,t),n.msgCenter.on(s.msgs.MSG_SKILL_NBOMB_BGN,t.onMsgNbombBegin,t),n.msgCenter.on(s.msgs.MSG_SKILL_NBOMB_FIRE,t.onMsgNbombFire,t),n.msgCenter.on(s.msgs.MSG_ICE_DRAGON,t.onMsgIceDragon,t),n.msgCenter.on(s.msgs.MSG_TREASURE_TASK,t.onMsgTreasureTask,t),n.msgCenter.on(s.msgs.MSG_TABLE_CHAT,t.onMsgTableChat,t),n.msgCenter.on(s.msgs.MSG_TABLE_SMILE,t.onMsgTableSmile,t),n.msgCenter.on(s.msgs.MSG_VIP_ADDCHIP,t.onMsgVIPAddChip,t),n.msgCenter.on(s.msgs.MSG_SPECIAL_FISH,t.onMsgSpecialFish,t),n.evtCenter.on(o.evts.EVT_ENTER_GAME_SCENE,t.onEventEnterGameScene,t),n.evtCenter.on(o.evts.EVT_EXIT_GAME_SCENE,t.onEventExitGameScene,t),n.evtCenter.on(o.evts.EVT_SET_FROZEN,t.onEventSetFreeze,t),n.evtCenter.on(o.evts.EVT_FISH_EXIT,t.onEvtFishExit,t),t}return __extends(t,e),t.prototype.release=function(){n.msgCenter.off(s.msgs.MSG_CHANGE,this.onMsgChange,this),n.msgCenter.off(s.msgs.MSG_TABLE_INFO,this.onMsgTableInfo,this),n.msgCenter.off(s.msgs.MSG_PLAYER_ENTER,this.onMsgPlayerEnter,this),n.msgCenter.off(s.msgs.MSG_PLAYER_LEAVE,this.onMsgPlayerLeave,this),n.msgCenter.off(s.msgs.MSG_ADD_FISH_GROUP,this.onMsgAddFishGroup,this),n.msgCenter.off(s.msgs.MSG_FIRE_RESPONSE,this.onMsgFireResponse,this),n.msgCenter.off(s.msgs.MSG_FIRE_BROADCAST,this.onMsgFireBroadcast,this),n.msgCenter.off(s.msgs.MSG_CATCH_SUCCESS,this.onMsgCatchSuccess,this),n.msgCenter.off(s.msgs.MSG_CATCH_FAILED,this.onMsgCatchFailed,this),n.msgCenter.off(s.msgs.MSG_SKILL_FURY_BGN,this.onMsgFuryBegin,this),n.msgCenter.off(s.msgs.MSG_SKILL_FURY_FISH,this.onMsgFuryFish,this),n.msgCenter.off(s.msgs.MSG_SKILL_FURY_END,this.onMsgFuryEnd,this),n.msgCenter.off(s.msgs.MSG_SKILL_SUMMON,this.onMsgSummon,this),n.msgCenter.off(s.msgs.MSG_SKILL_FRZ_BGN,this.onMsgFreezeBegin,this),n.msgCenter.off(s.msgs.MSG_SKILL_FRZ_END,this.onMsgFreezeEnd,this),n.msgCenter.off(s.msgs.MSG_SKILL_LOCK_BGN,this.onMsgLockBegin,this),n.msgCenter.off(s.msgs.MSG_SKILL_LOCK_FISH,this.onMsgLockFish,this),n.msgCenter.off(s.msgs.MSG_SKILL_LOCK_END,this.onMsgLockEnd,this),n.msgCenter.off(s.msgs.MSG_SKILL_LASER_BGN,this.onMsgLaserBegin,this),n.msgCenter.off(s.msgs.MSG_SKILL_LASER_FIRE,this.onMsgLaserFire,this),n.msgCenter.off(s.msgs.MSG_SKILL_LASER_HIT,this.onMsgLaserHit,this),n.msgCenter.off(s.msgs.MSG_SKILL_LASER_END,this.onMsgLaserEnd,this),n.msgCenter.off(s.msgs.MSG_SKILL_NBOMB_BGN,this.onMsgNbombBegin,this),n.msgCenter.off(s.msgs.MSG_SKILL_NBOMB_FIRE,this.onMsgNbombFire,this),n.msgCenter.off(s.msgs.MSG_ICE_DRAGON,this.onMsgIceDragon,this),n.msgCenter.off(s.msgs.MSG_TREASURE_TASK,this.onMsgTreasureTask,this),n.msgCenter.off(s.msgs.MSG_TABLE_CHAT,this.onMsgTableChat,this),n.msgCenter.off(s.msgs.MSG_TABLE_SMILE,this.onMsgTableSmile,this),n.msgCenter.off(s.msgs.MSG_VIP_ADDCHIP,this.onMsgVIPAddChip,this),n.evtCenter.off(o.evts.EVT_ENTER_GAME_SCENE,this.onEventEnterGameScene,this),n.evtCenter.off(o.evts.EVT_EXIT_GAME_SCENE,this.onEventExitGameScene,this),n.evtCenter.off(o.evts.EVT_SET_FROZEN,this.onEventSetFreeze,this),n.evtCenter.off(o.evts.EVT_FISH_EXIT,this.onEvtFishExit,this)},t.prototype.onMsgChange=function(e){cc.log("****************************** onMsgBenefits");var t=this.players[e.userId];if(t){var i=e.ud;i&&(void 0!=i.name&&(t.name=i.name),void 0!=i.charm&&(t.charm=i.charm),void 0!=i.purl&&(t.purl=i.purl),i.diamond,void 0!=i.chip&&(e.userId==c.ME.userId?c.ME.gold=i.chip:t.gold=i.chip));var n=e.gd;n&&void 0!=n.level&&(t.level=n.level),e.gd&&e.gd.miniGame&&(c.model.mini.miniGameNum=e.gd.miniGame.cardNum)}},t.prototype.onMsgTableInfo=function(e){if(cc.log("\u76d1\u542c\u6d88\u606f****table_info****"),0==this.roomId&&0==this.tableId&&0==this.seatId){this.roomId=e.roomId,this.tableId=e.tableId,this.seatId=e.seatId,this.isMatch=e.isMatch,this.minMultiple=e.minGunLevel;var t=n.configTable.weapon[this.minMultiple];this.minCostGold=parseInt(t.weapon_cost),c.model.common.setServerNowTime(e.nowServerTime),c.model.common.setTableStartTime(e.tStartTime),this.tempTracks=[];for(var i=0;i<e.groups.length;i++){var s=e.groups[i];this.tempTracks.push(s)}for(i=0;i<e.players.length;i++){var l=new a.PlayerInfo(e.players[i]);this.players[l.userId]=l,this.players[l.seatId]=l,this.players[l.charm]=l,this.players[l.purl]=l,l.seatId==e.seatId&&c.ME.setPlayerInfo(l)}e.frozenTime>0?(this.frozenBgnTime=e.frozenTime,this.isFrozen=!0):(this.frozenBgnTime=0,this.isFrozen=!1),e.isMatch?n.evtCenter.emit(o.evts.EVT_POPUP_LOADING,h.SceneLobbyToMatch):(cc.log("*********\u8fdb\u5165\u6e38\u620f\u573a\u666f******"),n.evtCenter.emit(o.evts.EVT_POPUP_LOADING,r.SceneLobbyToGame))}},t.prototype.onMsgPlayerEnter=function(e){cc.log("****************************** onMsgPlayerEnter",e);var t=new a.PlayerInfo(e.info);this.players[t.userId]=t,this.players[t.seatId]=t,this.players[t.charm]=t,this.players[t.purl]=t,n.evtCenter.emit(o.evts.EVT_PLAYER_ENTER,t),n.evtCenter.emit(o.evts.EVT_SEAT_BTN_TYPE)},t.prototype.onMsgPlayerLeave=function(e){if(cc.log("****************************** onMsgPlayerLeave",e),1!=e.reason){n.evtCenter.emit(o.evts.EVT_PLAYER_LEAVE,e.userId,e.seatId);var t=this.players[e.seatId];t&&(this.players[t.userId]=null,this.players[t.seatId]=null,this.players[t.charm]=null,this.players[t.purl]=null),n.evtCenter.emit(o.evts.EVT_SEAT_BTN_TYPE),e.hasOwnProperty("isForce")&&0==e.isForce||e.userId==c.ME.userId&&n.evtCenter.emit(o.evts.EVT_POPUP_LOADING,f.SceneGameToLobby)}else n.evtCenter.emit(o.evts.EVT_POPUP_LOADING,f.SceneGameToLobby)},t.prototype.onMsgAddFishGroup=function(e){for(var t=!1,i="",s=0;s<e.groups.length;s++){var a=e.groups[s];this.addFishes(a.grpId,a.fStartId,a.enT,[],0),t||(-1!=a.grpId.indexOf("boss")?(t=!0,i="boss"):-1!=a.grpId.indexOf("huafei")&&(t=!0,i="huafei"))}if(t){if(n.evtCenter.emit(o.evts.EVT_SPECIAL_FISH_COMING,i),!c.model.guide.isLastRewardPanel)return;var r=c.ME.baggage.getItem(_.Item.LOCK);if(!this.isHaveUesedLock&&r&&r.count>0)cc.director.getScheduler().schedule(this._showLockTip,this,0,0,15,!1)}},t.prototype.onMsgFireResponse=function(e){cc.log("****************************** onMsgFireResponse");this.players[this.seatId];if(c.ME.gold=e.gold,n.evtCenter.emit(o.evts.EVT_FIRE_RESPONSE,e.reason),0!=e.reason)n.evtCenter.emit(o.evts.EVT_FIRE_FAILED,this.seatId,e.bulletId,e.reason);else{if(!c.model.guide.isLastRewardPanel)return;var t=c.ME.baggage.getItem(_.Item.LOCK);!this.isHaveUesedLock&&t&&t.count>0&&(this.fireNumLock<100&&(this.fireNumLock+=1),100==this.fireNumLock&&(this.fireNumLock++,this._showLockTip())),this.isHaveSuperWeapon=this.isOwnSuperWeapon(),!this.isHaveUesedSuperWeapon&&this.isHaveSuperWeapon&&(this.fireNumSW+=1,200==this.fireNumSW&&(this.fireNumSW=0,this.isHaveUesedSuperWeapon=!0,n.evtCenter.emit(o.evts.EVT_SHOW_SWEAPON_TIP,this)))}},t.prototype.onMsgFireBroadcast=function(e){if(cc.log("****************************** onMsgFireBroadcast",e),e.seatId!=this.seatId){var t=n.utils.p2vx(e.x),i=n.utils.p2vy(e.y);t=n.utils.convertX(t),i=n.utils.convertY(i),n.evtCenter.emit(o.evts.EVT_FIRE_BROADCAST,e.seatId,e.bulletId,e.weaponId,cc.v2(t,i),e.gold)}},t.prototype.onMsgCatchSuccess=function(e){cc.log("****************************** onMsgCatchSuccess");var t=this.fishes[e.fishId];if(t.fishResId>=1404&&t.fishResId<=1406){var i=this.getFishInfosByFishResId(t.fishResId);if(i.length>0){var s=[];for(var c in s.push(t.fishId),i){var a=i[c];a.fishId!=t.fishId&&s.push(a.fishId)}n.evtCenter.emit(o.evts.EVT_COMBINE_FISH,e.seatId,s,e.items[0].itemNum)}}else cc.log(e),n.evtCenter.emit(o.evts.EVT_CATCH_SUCCESS,e.seatId,e.bulletId,e.fishId,e.items),delete this.fishes[e.fishId]},t.prototype.onMsgCatchFailed=function(e){cc.log("****************************** onMsgCatchFailed",e),3!=e.reason?n.evtCenter.emit(o.evts.EVT_CATCH_FAILED,this.seatId,e.bulletId):this.fishes.hasOwnProperty(e.fishId)&&n.evtCenter.emit(o.evts.EVT_FIRE_FAILED,this.seatId,e.bulletId,e.reason)},t.prototype.onMsgFuryBegin=function(e){if(cc.log("****************************** onMsgFuryBegin",e),!(e.reason&&e.reason>0)){var t=this.players[e.seatId];if(t){if(t.userId==c.ME.userId&&(this.isLock=!0,this.isFury=!0),t.fireIsFury=!0,1==e.useDmd){var i=n.configTable.skill[_.Skill.FURY];p.buffer.subDiamond(t.userId,i.cost)}0==e.useDmd&&t.userId==c.ME.userId&&p.buffer.subFury(t.userId,1),n.evtCenter.emit(o.evts.EVT_SET_FURY_STAT,e.seatId,!0)}}},t.prototype.onMsgFuryFish=function(e){cc.log("****************************** onMsgFuryFish",e);var t=this.players[e.seatId];t&&(t.fireLockFishId=e.fId,n.evtCenter.emit(o.evts.EVT_SET_LOCK_FISH,e.seatId,e.fId))},t.prototype.onMsgFuryEnd=function(e){cc.log("****************************** onMsgFuryEnd",e);var t=this.players[e.seatId];t&&(t.userId==c.ME.userId&&(this.isLock=!1,this.isFury=!1),t.fireIsFury=!1,t.fireLockFishId=0,n.evtCenter.emit(o.evts.EVT_SET_FURY_STAT,e.seatId,!1))},t.prototype.onMsgSummon=function(e){if(cc.log("****************************** onMsgSummon",e),!(e.reason&&e.reason>0)){var t=this.players[e.seatId];if(1==e.useDmd&&t){var i=n.configTable.skill[_.Skill.SUMMON],s=parseInt(i.cost);p.buffer.subDiamond(t.userId,s)}0==e.useDmd&&t.userId==c.ME.userId&&p.buffer.subSummon(t.userId,1),n.evtCenter.emit(o.evts.EVT_SUMMON,e.seatId,e.groupId)}},t.prototype.onMsgFreezeBegin=function(e){cc.log("****************************** onMsgFreezeBegin",e);var t=this.players[e.seatId];if(t&&e.reason&&e.reason>0)8==e.reason&&t.userId==c.ME.userId?n.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u62b1\u6b49\uff0c\u5f53\u524d\u4e3a\u5927\u5956\u8d5b\u65f6\u95f4\uff0c\u65e0\u6cd5\u4f7f\u7528\u51b0\u51bb\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",2):7==e.reason&&t.userId==c.ME.userId?n.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u62b1\u6b49\uff0c\u5f53\u524d\u4e3a\u8bdd\u8d39\u8d5b\u65f6\u95f4\uff0c\u65e0\u6cd5\u4f7f\u7528\u51b0\u51bb\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",2):6==e.reason&&t.userId==c.ME.userId?n.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u5b9d\u85cf\u4efb\u52a1\u8fdb\u884c\u65f6\u4e0d\u80fd\u4f7f\u7528\u51b0\u51bb",2):1==e.reason&&t.userId==c.ME.userId&&n.evtCenter.emit(o.evts.EVT_MSG_TIPS,"\u6280\u80fd\u6b63\u5728\u51b7\u5374\u4e2d",2);else{if(1==e.useDmd&&t){var i=n.configTable.skill[_.Skill.FREEZE],s=parseInt(i.cost);p.buffer.subDiamond(t.userId,s)}0==this.frozenBgnTime&&(this.frozenBgnTime=e.frozenTime),l.fish.gameView.freeze(this.frozenBgnTime),this.isFrozen=!0,n.evtCenter.emit(o.evts.EVT_SET_FROZEN,!0,e.seatId,e.frozenTime),0==e.useDmd&&t.userId==c.ME.userId&&p.buffer.subFreeze(t.userId,1)}},t.prototype.onMsgFreezeEnd=function(e){cc.log("****************************** onMsgFreezeEnd",e),this.frozenEndTime=e.releaseTime,n.evtCenter.emit(o.evts.EVT_SET_FROZEN,!1),l.fish.gameView.unfreeze(this.frozenBgnTime,this.frozenEndTime),this.frozenBgnTime=0,this.frozenEndTime=0,this.isFrozen=!1},t.prototype.onMsgLockBegin=function(e){if(cc.log("****************************** onMsgLockBegin",e),!(e.reason&&e.reason>0)){n.evtCenter.emit(o.evts.EVT_REMOVE_LOCK_TIP,this);var t=this.players[e.seatId];if(t){if(t.userId==c.ME.userId&&(this.isLock=!0,this.fireNumLock=0,this.isHaveUesedLock||(this.isHaveUesedLock=!0)),1==e.useDmd){var i=n.configTable.skill[_.Skill.LOCK],s=parseInt(i.cost);p.buffer.subDiamond(t.userId,s)}n.evtCenter.emit(o.evts.EVT_SET_LOCK_STAT,e.seatId,!0),0==e.useDmd&&t.userId==c.ME.userId&&p.buffer.subLock(t.userId,1)}}},t.prototype.onMsgLockFish=function(e){cc.log("****************************** onMsgLockFish",e);var t=this.players[e.seatId];t&&(t.fireLockFishId=e.fId,n.evtCenter.emit(o.evts.EVT_SET_LOCK_FISH,e.seatId,e.fId))},t.prototype.onMsgLockEnd=function(e){cc.log("****************************** onMsgLockEnd",e);var t=this.players[e.seatId];t&&(t.userId==c.ME.userId&&(this.isLock=!1),t.fireLockFishId=0,n.evtCenter.emit(o.evts.EVT_SET_LOCK_STAT,e.seatId,!1))},t.prototype.onMsgLaserBegin=function(e){if(cc.log("****************************** onMsgLaserBegin",e),!(e.reason&&e.reason>0)){this.isHaveUesedSuperWeapon=!0;var t=this.players[e.seatId];t&&(t.userId==c.ME.userId&&(this.isLaser=!0,p.buffer.subLaser(c.ME.userId,e.skillId,1)),t.fireLaserId=parseInt(e.skillId),n.evtCenter.emit(o.evts.EVT_LASER_BEGIN,e.seatId,e.skillId))}},t.prototype.onMsgLaserFire=function(e){cc.log("****************************** onMsgLaserFire",e);var t=n.utils.p2vx(e.loc[0]),i=n.utils.p2vy(e.loc[1]);t=n.utils.convertX(t),i=n.utils.convertY(i),n.evtCenter.emit(o.evts.EVT_LASER_FIRE,e.seatId,cc.v2(t,i))},t.prototype.onMsgLaserHit=function(e){if(cc.log("****************************** onMsgLaserHit",e),e.isCatched){var t=this.players[e.seatId];if(t){if(t.userId==c.ME.userId)for(var i in e.gain)if(e.gain.hasOwnProperty(i)){var n=parseInt(i.split(":")[1]);n>1e4&&n-1e4}l.fish.gameView.fishDie(e.fId,_.DieReason.LASER,e.seatId,[]),this.deleteFish(e.fId)}}},t.prototype.onMsgLaserEnd=function(e){cc.log("****************************** onMsgLaserEnd",e);var t=this.players[e.seatId];t&&(t.userId==c.ME.userId&&(this.isLaser=!1),t.fireLaserId=0,l.fish.gameView.laserEnd(e.seatId),n.evtCenter.emit(o.evts.EVT_LASER_END,e.seatId,e.win))},t.prototype.onMsgNbombBegin=function(e){if(cc.log("****************************** onMsgNbombBegin",e),!(e.reason&&e.reason>0)){this.isNbomb=!0,this.isHaveUesedSuperWeapon=!0;var t=this.players[e.seatId];if(1==e.useDmd&&t){var i=n.configTable.skill[_.Skill.NBOMB],s=parseInt(i.cost);p.buffer.subDiamond(t.userId,s)}0==e.useDmd&&t.userId==c.ME.userId&&p.buffer.subNbomb(t.userId,1),n.evtCenter.emit(o.evts.EVT_NBOMB_USE,e.seatId)}},t.prototype.onMsgNbombFire=function(e){for(var t in cc.log("****************************** onMsgNbombFire",e),n.evtCenter.emit(o.evts.EVT_NBOMB_FIRE,e.loc,e.win,e.seatId,e.catched),e.catched)this.deleteFish(e.catched[t]);this.isNbomb=!1},t.prototype.onMsgIceDragon=function(e){switch(cc.log("****************************** onMsgIceDragon",e),e.action){case"start":n.evtCenter.emit(o.evts.EVT_SPECIAL_FISH_COMING,"dragon");var t=c.ME.baggage.getItem(_.Item.LOCK);!this.isHaveUesedLock&&t&&t.count;break;case"piton":var i=e.ptStartId,s=360/e.num;if(l.fish.gameView)for(var a=0;a<e.num;++a)l.fish.gameView.castIcePiton(i+a,s*a);cc.audioEngine.playEffect(u.AssetsManager.getRes("sound/cast_piton"),!1);break;case"shot":0==e.reason&&n.evtCenter.emit(o.evts.EVT_PITON_DIE,e.seatId,e.pitonId,e.chip);break;case"shlt":n.evtCenter.emit(o.evts.EVT_FIRE_FENCE_SETUP,e.seatId);break;case"shltrmv":n.evtCenter.emit(o.evts.EVT_FIRE_FENCE_REMOVE,e.seatId);break;case"frozen":e.seatId==this.seatId&&(this.isBatteryFrozen=!0),n.evtCenter.emit(o.evts.EVT_BATTERY_FROZEN,e.seatId);break;case"thaw":e.seatId==this.seatId&&(this.isBatteryFrozen=!1),n.evtCenter.emit(o.evts.EVT_BATTERY_UNFROZEN,e.seatId);break;case"end":this.isBatteryFrozen=!1,n.evtCenter.emit(o.evts.EVT_ICE_DRAGON_DIE),this.waveQueue=this.waveQueue.filter(function(e){return e.fishResId!=_.SpecialFish.FlameFish});var r=this.getFishInfosByFishResId(_.SpecialFish.FlameFish);if(r.length>0)for(var h in r){var d=r[h];l.fish.gameView.fishDie(d.fishId,_.DieReason.EXIT,this.seatId,[]),this.deleteFish(d.fishId)}l.fish.gameView.fishDummyDieByFishResId(_.SpecialFish.FlameFish)}},t.prototype.onMsgTreasureTask=function(e){switch(cc.log("****************************** onMsgTreasureTask",e),e.action){case"ready":this.inTreasureTask=!0,n.evtCenter.emit(o.evts.EVT_POPUP_TREASURE);break;case"finish":this.inTreasureTask=!1}n.evtCenter.emit(o.evts.EVT_TREASURE,e)},t.prototype.onMsgTableChat=function(e){cc.log("****************************** onMsgTableChat",e),n.evtCenter.emit(o.evts.EVT_TABLE_CHAT,e)},t.prototype.onMsgTableSmile=function(e){if(cc.log("****************************** onMsgTableSmile",e),0==e.code){var t=this.getPlayerInfo(e.seatId);n.evtCenter.emit(o.evts.EVT_TABLE_SMILE,e);var i=n.configTable.experssion[e.smileId].expression_cost;p.buffer.subGold(t.userId,i)}else this.seatId==e.seatId&&n.evtCenter.emit(o.evts.EVT_MSG_TIPS,_.Error.ExpressionError[e.code])},t.prototype.onMsgVIPAddChip=function(e){cc.log("****************************** onMsgVIPAddChip",e),9999==e.gameId&&n.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u5c0a\u8d35\u7684VIP\u7528\u6237\uff0c\u73b0\u5df2\u5c06\u60a8\u7684\u91d1\u5e01\u8865\u5145\u81f3"+e.toNum+"\u3002")},t.prototype.onMsgSpecialFish=function(e){cc.log("****************************** onMsgSpecialFish",e),"electric"==e.fType?n.evtCenter.emit(o.evts.EVT_ELECTRIC_FISH,e.seatId,e.struck,e.gain.chip):"bomb"==e.fType&&n.evtCenter.emit(o.evts.EVT_BOMB_FISH,e.seatId,e.struck,e.gain.chip);for(var t=0;t<e.struck.length;t++)this.deleteFish(e.struck[t])},t.prototype.onEventEnterGameScene=function(){for(;this.tempTracks.length>0;){var e=this.tempTracks.pop();this.addFishes(e.grpId,e.fishesStartId,e.enT,e.died,this.frozenBgnTime)}delete this.tempTracks;for(var t=1;t<=4;t++){var i=this.players[t];i&&n.evtCenter.emit(o.evts.EVT_PLAYER_ENTER,i)}this.frozenBgnTime>0&&(l.fish.gameView.freeze(this.frozenBgnTime),n.evtCenter.emit(o.evts.EVT_SET_FROZEN,!0,0,this.frozenBgnTime)),cc.director.getScheduler().scheduleUpdate(this,0,!1)},t.prototype.onEventExitGameScene=function(){this.roomId=0,this.tableId=0,this.seatId=0,this.minMultiple=0,this.minCostGold=0,this.isAuto=!1,this.isLock=!1,this.isFury=!1,this.isLaser=!1,this.isFrozen=!1,this.frozenBgnTime=0,this.frozenEndTime=0,this.isBatteryFrozen=!1,this.inTreasureTask=!1,this.fishes={},this.players={},this.waveQueue=[],cc.director.getScheduler().unscheduleUpdate(this)},t.prototype.onEventSetFreeze=function(e,t,i){cc.log("****************************** onEventSetFreeze");for(var n=0;n<this.waveQueue.length;n++)this.waveQueue[n].frozenTime=i},t.prototype.onEvtFishExit=function(e){delete this.fishes[e]},t.prototype.addFishes=function(e,t,i,s,o){for(var a=n.configTrack.getTrack(e),r=c.model.common.getTableElapseTime(o),h=0;h<a.length;h++){var l=t+h;if(-1==s.indexOf(l)){var d=a[h];if(!(r>=i+d.exitTime)){var _={fishResId:d.fishResId,fishId:l,pathId:d.pathId,enterTime:i+d.enterTime,frozenTime:o};this.waveQueue.push(_)}}}},t.prototype.deleteFish=function(e){delete this.fishes[e]},t.prototype.fishDie=function(e,t){n.evtCenter.emit(o.evts.EVT_CATCH_SUCCESS,t,0,e,[]),delete this.fishes[e]},t.prototype.getFishInfoByFishId=function(e){return this.fishes[e]},t.prototype.getFishInfosByFishResId=function(e){var t=[];for(var i in this.fishes)if(this.fishes.hasOwnProperty(i)){var n=this.fishes[i];n&&n.fishResId==e&&t.push(n)}return t},t.prototype.getPlayerInfo=function(e){return this.players[e]},t.prototype.update=function(e){for(;this.waveQueue.length>0;){var t=this.waveQueue.shift();l.fish.gameView.fishDummyEnter(t.fishResId,t.fishId,t.pathId,t.enterTime,t.frozenTime)}for(var i=l.fish.gameView.fishEnterBatch();i.length>0;){var s=i.shift(),o=n.configTable.fish[s.fishResId];o&&(this.fishes[s.fishId]=new d.FishInfo(s.fishId,s.fishResId,o.fish_type,o.score,o.value))}},t.prototype._showLockTip=function(){n.evtCenter.emit(o.evts.EVT_USE_LOCK_TIP,this)},t.prototype.isOwnSuperWeapon=function(){if(p.buffer.laser1||p.buffer.laser2||p.buffer.laser3||p.buffer.laser4||p.buffer.nbomb)return p.buffer.laser1.laser1>0||p.buffer.laser2.laser2>0||p.buffer.laser3.laser3>0||p.buffer.laser4.laser4>0||p.buffer.nbomb.nbomb>0},t}(cc.Node);i.Table=m,cc._RF.pop()},{"../../assets_manager":"assets_manager","../buffer/fish_buffer":"fish_buffer","../define/fish_consts":"fish_consts","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../fish":"fish","../logic/fish_fish_info":"fish_fish_info","../logic/fish_player_info":"fish_player_info","../scene/fish_scene":"fish_scene","../scene/loading/fish_scene_loading_game_to_lobby":"fish_scene_loading_game_to_lobby","../scene/loading/fish_scene_loading_lobby_to_game":"fish_scene_loading_lobby_to_game","../scene/loading/fish_scene_loading_lobby_to_match":"fish_scene_loading_lobby_to_match","./fish_model":"fish_model"}],fish_model_weapon:[function(e,t,i){"use strict";cc._RF.push(t,"c0a79qyPURBRpy8bXHEPDpo","fish_model_weapon"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../define/fish_msg_types"),o=e("./fish_model"),c=e("../scene/fish_scene_login"),a=e("../logic/fish_tcp"),r=e("../define/fish_event_types"),h=e("../buffer/fish_buffer"),l=function(){function e(){n.msgCenter.on(s.msgs.MSG_WEAPON_UPGRADE,this.onMsgWeaponUpgrade,this),n.msgCenter.on(s.msgs.MSG_MULTIPLE_CHANGED,this.onMsgMultipleChanged,this),n.msgCenter.on(s.msgs.MSG_WEAPON_CHANGED,this.onMsgWeaponChanged,this),n.msgCenter.on(s.msgs.MSG_ACTIVE_GUN_CRG,this.onMsgActiveGunCrg,this),n.msgCenter.on(s.msgs.MSG_WEAPON_FORGE,this.onMsgWeaponForge,this),n.msgCenter.on(s.msgs.MSG_CRYSTAL_RESOLVE,this.onMsgCrystalResolve,this)}return e.prototype.release=function(){n.msgCenter.off(s.msgs.MSG_WEAPON_UPGRADE,this.onMsgWeaponUpgrade,this),n.msgCenter.off(s.msgs.MSG_MULTIPLE_CHANGED,this.onMsgMultipleChanged,this),n.msgCenter.off(s.msgs.MSG_WEAPON_CHANGED,this.onMsgWeaponChanged,this),n.msgCenter.off(s.msgs.MSG_ACTIVE_GUN_CRG,this.onMsgActiveGunCrg,this),n.msgCenter.off(s.msgs.MSG_WEAPON_FORGE,this.onMsgWeaponForge,this),n.msgCenter.off(s.msgs.MSG_CRYSTAL_RESOLVE,this.onMsgCrystalResolve,this)},e.prototype.onMsgWeaponUpgrade=function(e){if(cc.log("****************************** onMsgWeaponUpgrade",e),!(e.reason&&e.reason>0)){var t=e.gLv,i=e.seatId||o.model.table.seatId,l=o.model.table.getPlayerInfo(i);l.maxWeapon.change(t);var d=e.consume.dmd,_=e.gain.chip;if(h.buffer.subDiamond(l.userId,d),n.evtCenter.emit(r.evts.EVT_WEAPON_UPGRADE,l.userId,i,_),30==l.maxWeapon.multiple&&l.userId==o.ME.userId&&n.evtCenter.emit(r.evts.EVT_GUIDE_THIRTY_WEAPON),i==o.model.table.seatId){var f={cmd:s.msgs.CMD_TABLE_CALL,params:{action:"gchg",userId:o.ME.userId,clientId:c.AccountInfo.clientId,gameId:28,roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId,gLv:t}};a.tcp.send(f)}}},e.prototype.onMsgMultipleChanged=function(e){if(cc.log("****************************** onMsgMultipeChanged",e),!(e.reason&&e.reason>0)){var t=e.seatId||o.model.table.seatId,i=o.model.table.getPlayerInfo(t);i.curWeapon.change(e.gLv),n.evtCenter.emit(r.evts.EVT_MULTIPLE_CHANGED,t,i.curWeapon.multiple,!1),1==i.cannonId&&i.maxWeapon.multiple>=30&&(i.cannonId=2,n.evtCenter.emit(r.evts.EVT_WEAPON_CHANGED,t,i.cannonId))}},e.prototype.onMsgWeaponChanged=function(e){if(cc.log("****************************** onMsgWeaponChange",e),e.reason&&e.reason>0)n.evtCenter.emit(r.evts.EVT_POPUP_VIP_WINDOW,"");else{var t=o.model.table.getPlayerInfo(e.seatId);t&&(t.cannonId=e.crgId,n.evtCenter.emit(r.evts.EVT_WEAPON_CHANGED,e.seatId,e.crgId))}},e.prototype.onMsgActiveGunCrg=function(e){cc.log("****************************** onMsgActionGuCrg",e),n.evtCenter.emit(r.evts.EVT_REMIND_CHG_WP)},e.prototype.onMsgWeaponForge=function(e){switch(cc.log("****************************** onMsgWeaponForge",e),e.reason){case 0:var t={cmd:"game",params:{gameId:28,userId:o.ME.userId,clientId:c.AccountInfo.clientId,action:"data"}};a.tcp.send(t);break;case 2:n.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u6c34\u6676\u4e0d\u8db3\uff01/n\u4f7f\u75281000\u4ee5\u4e0a\u70ae\u500d\u51fb\u6740boss\u548c\u9ec4\u91d1\u9c7c\u53ef\u83b7\u5f97\u6c34\u6676\u54e6\uff01");break;case 3:n.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u539f\u6676\u77f3\u4e0d\u8db3\uff01/n\u539f\u6676\u77f3\u53ef\u901a\u8fc7\u5206\u89e3\u6c34\u6676\u548c\u6d3b\u52a8\u83b7\u5f97\uff01");break;case 4:n.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u94bb\u77f3\u4e0d\u8db3\uff01")}n.evtCenter.emit(r.evts.EVT_WEAPON_FORGE_RESULT,e.reason,e.spar);var i={cmd:s.msgs.CMD_USER_INFO,params:{gameId:9999,userId:o.ME.userId,clientId:c.AccountInfo.clientId}};a.tcp.send(i)},e.prototype.onMsgCrystalResolve=function(e){switch(cc.log("****************************** onMsgCrystalResolve",e),e.reason){case 0:n.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u606d\u559c\u4f60\uff0c\u6210\u529f\u5206\u89e3\u83b7\u5f97"+e.spar+"\u9897\u539f\u6676\u77f3");var t={cmd:s.msgs.CMD_ITEM,params:{action:"list",gameId:28,userId:o.ME.userId,clientId:c.AccountInfo.clientId}};a.tcp.send(t);break;case 1:n.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u6c34\u6676\u4e0d\u591f")}},e}();i.Weapon=l,cc._RF.pop()},{"../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_tcp":"fish_tcp","../scene/fish_scene":"fish_scene","../scene/fish_scene_login":"fish_scene_login","./fish_model":"fish_model"}],fish_model:[function(e,t,i){"use strict";cc._RF.push(t,"125d6+KZN9Oy7v4l7E6sO5n","fish_model"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_model_me"),s=e("./fish_model_lobby"),o=e("./fish_model_common"),c=e("./fish_model_arena"),a=e("./fish_model_activity"),r=e("./fish_model_dailysign"),h=e("./fish_model_dailytask"),l=e("./fish_model_led"),d=e("./fish_model_lottery"),_=e("./fish_model_mini"),f=e("./fish_model_red_envelope"),p=e("./fish_model_shop"),u=e("./fish_model_subsidy"),m=e("./fish_model_table"),g=e("./fish_model_weapon"),v=e("./fish_model_guide"),b=e("./fish_model_drop"),y=e("./fish_model_game_notice"),E=e("./fish_model_roommatch"),C=e("./fish_model_friends"),T=e("./fish_model_bankrupt_package");i.ME=null,function(e){e.activity=null,e.common=null,e.dailysign=null,e.dailytask=null,e.led=null,e.lobby=null,e.lottery=null,e.mini=null,e.redEnvelope=null,e.shop=null,e.subsidy=null,e.table=null,e.weapon=null,e.guide=null,e.drop=null,e.notice=null,e.room_match=null,e.arena=null,e.friends=null,e.bankrupt_package=null,e.bindUserFlag=!0,e.init=function(){this.activity=new a.Activity,this.common=new o.Common,this.dailysign=new r.DailySign,this.dailytask=new h.DailyTask,this.led=new l.Led,this.lobby=new s.Lobby,this.lottery=new d.Lottery,this.mini=new _.Mini,this.redEnvelope=new f.RedEnvelope,this.shop=new p.Shop,this.subsidy=new u.Subsidy,this.table=new m.Table,this.weapon=new g.Weapon,this.guide=new v.Guide,this.drop=new b.Drop,this.notice=new y.Game_Notice,this.room_match=new E.RoomMatch,this.arena=new c.Arena,this.friends=new C.Friends,this.bankrupt_package=new T.BankruptPackage,i.ME=new n.Me},e.release=function(){this.activity.release(),this.activity=null,this.common.release(),this.common=null,this.dailysign.release(),this.dailysign=null,this.dailytask.release(),this.dailytask=null,this.led.release(),this.led=null,this.lobby.release(),this.lobby=null,this.lottery.release(),this.lottery=null,this.mini.release(),this.mini=null,this.redEnvelope.release(),this.redEnvelope=null,this.shop.release(),this.shop=null,this.subsidy.release(),this.subsidy=null,this.table.release(),this.table=null,this.weapon.release(),this.weapon=null,this.guide.release(),this.guide=null,this.drop.release(),this.drop=null,this.notice.release(),this.notice=null,this.room_match.release(),this.room_match=null,this.arena.release(),this.arena=null,i.ME.release(),i.ME=null}}(i.model||(i.model={})),cc._RF.pop()},{"./fish_model_activity":"fish_model_activity","./fish_model_arena":"fish_model_arena","./fish_model_bankrupt_package":"fish_model_bankrupt_package","./fish_model_common":"fish_model_common","./fish_model_dailysign":"fish_model_dailysign","./fish_model_dailytask":"fish_model_dailytask","./fish_model_drop":"fish_model_drop","./fish_model_friends":"fish_model_friends","./fish_model_game_notice":"fish_model_game_notice","./fish_model_guide":"fish_model_guide","./fish_model_led":"fish_model_led","./fish_model_lobby":"fish_model_lobby","./fish_model_lottery":"fish_model_lottery","./fish_model_me":"fish_model_me","./fish_model_mini":"fish_model_mini","./fish_model_red_envelope":"fish_model_red_envelope","./fish_model_roommatch":"fish_model_roommatch","./fish_model_shop":"fish_model_shop","./fish_model_subsidy":"fish_model_subsidy","./fish_model_table":"fish_model_table","./fish_model_weapon":"fish_model_weapon"}],fish_more_game:[function(e,t,i){"use strict";cc._RF.push(t,"27245NpXPhLwYPDsVIuZX/P","fish_more_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../buffer/fish_buffer"),a=e("../../fish"),r=e("./fish_update_circle"),h=e("../../define/fish_msg_types"),l=e("../../model/fish_model"),d=e("../../scene/fish_scene_login"),_=e("../../logic/fish_tcp"),f=e("../../scene/loading/fish_scene_loading_lobby_to_fruit"),p=e("../../scene/loading/fish_scene_loading_lobby_to_clown"),u=e("../../scene/loading/fish_scene_loading_lobby_to_h3card"),m=e("../../scene/loading/fish_scene_loading_lobby_to_shz"),g=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.btnFruit=null,t.btnClown=null,t.btnShz=null,t.btnH3Card=null,t.fruitCircleBg=null,t.clownCircleBg=null,t.shzCircleBg=null,t.h3CardCircleBg=null,t.enableTouch=!0,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/lobby_more_game")),this.node.addChild(this.csbNode),this.btnFruit=cc.find("anchor/btnFruit",this.csbNode),this.btnClown=cc.find("anchor/btnClown",this.csbNode),this.btnShz=cc.find("anchor/btnShz",this.csbNode),this.btnH3Card=cc.find("anchor/btnH3Card",this.csbNode),this.fruitCircleBg=cc.find("anchor/fruitCircleBg",this.csbNode),this.clownCircleBg=cc.find("anchor/clownCircleBg",this.csbNode),this.shzCircleBg=cc.find("anchor/shzCircleBg",this.csbNode),this.h3CardCircleBg=cc.find("anchor/h3CardCircleBg",this.csbNode),this._show(),s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnCloseMoreGame(null)},t.prototype.onBtnFruit=function(e){c.buffer.lobbyGold.gold<0?s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u9700\u898150000\u91d1\u5e01\u624d\u80fd\u8fdb\u5165\u5927\u4e30\u6536\n",1):this.updateFruit()},t.prototype.onBtnClown=function(e){c.buffer.lobbyGold.gold<0?s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u9700\u898150000\u91d1\u5e01\u624d\u80fd\u8fdb\u5165\u6b22\u4e50\u5c0f\u4e11\n",1):this.updateClown()},t.prototype.onBtnH3Card=function(e){c.buffer.lobbyGold.gold<0?s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u9700\u898150000\u91d1\u5e01\u624d\u80fd\u8fdb\u5165\u7ea2\u9ed1\u5927\u6218\n",1):this.updateH3Card()},t.prototype.onBtnShz=function(e){c.buffer.lobbyGold.gold<0?s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u9700\u898150000\u91d1\u5e01\u624d\u80fd\u8fdb\u5165\u6c34\u6d52\u4f20\n",1):this.updateShz()},t.prototype.onBtnCloseMoreGame=function(e){this.enableTouch&&this._hide()},t.prototype.updateFruit=function(){if(this.btnFruit.getComponent(cc.Button).enabled=!1,this.enableTouch=!1,a.fish.fruit_module_loaded)this.updateFruitCallBack(!0);else{var e=(new cc.Node).addComponent(r.UpdateCircle);this.node.addChild(e.node,0,"901")}},t.prototype.updateClown=function(){if(this.btnClown.getComponent(cc.Button).enabled=!1,this.enabled=!1,a.fish.clown_module_loaded)this.updateClownCallBack(!0);else{var e=(new cc.Node).addComponent(r.UpdateCircle);this.node.addChild(e.node,0,"902")}},t.prototype.updateH3Card=function(){if(this.btnH3Card.getComponent(cc.Button).enabled=!1,this.enabled=!1,a.fish.h3card_module_loaded)this.updateH3CardCallBack(!0);else{var e=(new cc.Node).addComponent(r.UpdateCircle);this.node.addChild(e.node,0,"903")}},t.prototype.updateShz=function(){if(this.btnShz.getComponent(cc.Button).enabled=!1,this.enabled=!1,a.fish.shz_module_loaded)this.updateShzCallBack(!0);else{var e=(new cc.Node).addComponent(r.UpdateCircle);this.node.addChild(e.node,0,"909")}},t.prototype.updateFruitCallBack=function(e){var t=this.node.getChildByName("901");this.node.removeChild(t),this.enableTouch=!0,e?(this._gameLeave(),this._gameEnter(31),s.evtCenter.emit(o.evts.EVT_POPUP_LOADING,f.SceneLobbyToFruit),this._hide()):(this.btnClown.getComponent(cc.Button).enabled=!0,s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u66f4\u65b0\u5931\u8d25,\u8bf7\u91cd\u8bd5",2,this.updateFruit,this))},t.prototype.updateClownCallBack=function(e){var t=this.node.getChildByName("902");this.node.removeChild(t),this.enableTouch=!0,e?(this._gameLeave(),this._gameEnter(27),s.evtCenter.emit(o.evts.EVT_POPUP_LOADING,p.SceneLobbyToClown),this._hide()):(this.btnClown.getComponent(cc.Button).enabled=!0,s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u66f4\u65b0\u5931\u8d25,\u8bf7\u91cd\u8bd5",2,this.updateClown,this))},t.prototype.updateH3CardCallBack=function(e){var t=this.node.getChildByName("903");this.node.removeChild(t),this.enableTouch=!0,e?(this._gameLeave(),this._gameEnter(38),s.evtCenter.emit(o.evts.EVT_POPUP_LOADING,u.SceneLobbyToH3Card),this._hide()):(this.btnClown.getComponent(cc.Button).enabled=!0,s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u66f4\u65b0\u5931\u8d25,\u8bf7\u91cd\u8bd5",2,this.updateH3Card,this))},t.prototype.updateShzCallBack=function(e){var t=this.node.getChildByName("909");this.node.removeChild(t),this.enableTouch=!0,e?(this._gameLeave(),this._gameEnter(1001),s.evtCenter.emit(o.evts.EVT_POPUP_LOADING,m.SceneLobbyToShz),this._hide()):(this.btnClown.getComponent(cc.Button).enabled=!0,s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u66f4\u65b0\u5931\u8d25,\u8bf7\u91cd\u8bd5",2,this.updateShz,this))},t.prototype._show=function(){this.csbNode.stopAllActions(),this.csbNode.getComponent(cc.Animation).play("show")},t.prototype._hide=function(){this.csbNode.stopAllActions();var e=this.csbNode.getComponent(cc.Animation);e.play("hide"),e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),this.node.removeFromParent()}.bind(this),this)},t.prototype._gameLeave=function(){var e={cmd:h.msgs.CMD_GAME,params:{action:"leave",gameId:28,userId:l.ME.userId,clientId:d.AccountInfo.clientId}};_.tcp.send(e)},t.prototype._gameEnter=function(e){var t={cmd:h.msgs.CMD_GAME,params:{action:"enter",gameId:e,userId:l.ME.userId,clientId:d.AccountInfo.clientId}};_.tcp.send(t)},t}(cc.Component);i.MoreGame=g,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","../../scene/loading/fish_scene_loading_lobby_to_clown":"fish_scene_loading_lobby_to_clown","../../scene/loading/fish_scene_loading_lobby_to_fruit":"fish_scene_loading_lobby_to_fruit","../../scene/loading/fish_scene_loading_lobby_to_h3card":"fish_scene_loading_lobby_to_h3card","../../scene/loading/fish_scene_loading_lobby_to_shz":"fish_scene_loading_lobby_to_shz","./fish_update_circle":"fish_update_circle"}],fish_msg_types:[function(e,t,i){"use strict";cc._RF.push(t,"07b5bsW/EdELIOyv2DtTrOE","fish_msg_types"),Object.defineProperty(i,"__esModule",{value:!0}),i.msgs={CMD_HEART_BEAT:"heart_beat",MSG_HEART_BEAT:"heart_beat",CMD_BIND_USER:"bind_user",CMD_GAME:"game",CMD_ROOM:"room",MSG_GAME:"game",CMD_USER_INFO:"user_info",MSG_UPDATE_NOTIFY:"update_notify",MSG_USER_INFO:"user_info",MSG_SET_USER_INFO:"user",MSG_GAME_DATA:"game_data",MSG_ROOM_ONLINE_INFO:"room_online_info",MSG_TODO_TASKS:"todo_tasks",MSG_CHANGE:"chg",MSG_LEVEL_UP:"lvup",MSG_QUICK_START:"quick_start",MSG_TABLE_INFO:"table_info",MSG_PLAYER_ENTER:"sit",MSG_PLAYER_LEAVE:"leave",MSG_ADD_FISH_GROUP:"add_group",CMD_TABLE_CALL:"table_call",CMD_TABLE_CALL_2:"table_call2",CMD_TABLE:"table",CMD_FIRE_VERIFY:"fire_verify",MSG_FIRE_RESPONSE:"fire_response",MSG_FIRE_BROADCAST:"fire_broadcast",CMD_CATCH_VERIFY:"catch_verify",MSG_CATCH_SUCCESS:"catch_success",MSG_CATCH_FAILED:"catch_failed",MSG_SKILL_SUMMON:"magicLamp",MSG_SKILL_NBOMB_BGN:"nbomb_use",MSG_SKILL_NBOMB_FIRE:"nbomb_shot",MSG_SKILL_AUTO_BGN:"auto",MSG_SKILL_AUTO_END:"auto_release",MSG_SKILL_FRZ_BGN:"skill_freeze",MSG_SKILL_FRZ_END:"freeze_release",MSG_SKILL_LOCK_BGN:"focus_use",MSG_SKILL_LOCK_FISH:"focus_fish",MSG_SKILL_LOCK_END:"focus_release",MSG_SKILL_FURY_BGN:"storm_use",MSG_SKILL_FURY_FISH:"storm_fish",MSG_SKILL_FURY_END:"storm_release",MSG_SKILL_LASER_BGN:"laser_use",MSG_SKILL_LASER_FIRE:"laser_shot",MSG_SKILL_LASER_HIT:"laser_penetrate",MSG_SKILL_LASER_END:"laser_release",MSG_WEAPON_UPGRADE:"gup",MSG_MULTIPLE_CHANGED:"gchg",MSG_WEAPON_CHANGED:"chgGunCrg",MSG_ACTIVE_GUN_CRG:"activeGunCrg",MSG_ICE_DRAGON:"iceDrg",MSG_TREASURE_TASK:"cmptt_task",MSG_BANKRUPTCY:"bkrpt",CMD_SUBSIDY_RECEIVE:"fish_benefits",MSG_FISH_BENEFITS:"fish_benefits",MSG_LOTTERY_TASK:"lottery_task",MSG_MINI_GAME:"mini_game",MSG_MINIGAME_DRAW:"miniGame_draw",MSG_MG_CONTINUE:"miniGame_continue",MSG_MG_SPIN:"miniGame_spin",CMD_ITEM:"item",MSG_ITEM:"item",CMD_MESSAGE:"message",MSG_MAIL_MESSAGE:"message",CMD_INVITE_FRIENDS:"friends",MSG_INVITE_FRIENDS:"friends",CMD_INVITE_FRIENDS_IN_TABLE:"table_call2",MSG_ROOM_LIST:"room_list",MSG_MATCH_LIST:"match_list",MSG_MATCH_INFO:"match_info",MSG_MATCH_ENTER:"match_enter",MSG_MATCH_FAMOUS:"match_famous",MSG_MATCH_INFO_YSTD:"match_info_ystd",MSG_MATCH_REWARD_LIST:"match_reward_list",MSG_MATCH_REWARD:"match_reward",MSG_MATCH_END_TIP:"match_end_notify",MSG_MATCH_RESULT:"match_result",MSG_TLMT_TASK:"tlmt_task",CMD_SHOP_INFO:"store_config_fish",MSG_SHOP_INFO:"store_config_fish",CMD_STORE_FISH:"store_fish",MSG_STORE_FISH:"store_fish",CMD_ITEM_FISH:"item_fish",MSG_ITEM_FISH:"item_fish",MSG_PROD_DELIVERY:"prod_delivery",MSG_FISH_RANKING:"fish_ranking",CMD_FISH_ACTIVITY:"activity_fish",MSG_FISH_ACTIVITY:"activity_fish",CMD_FISH_DAILY_TASK:"daily_quest",MSG_FISH_DAILY_TASK:"daily_quest",CMD_FISH_DAILY_SIGN:"month_checkin_fish",MSG_FISH_DAILY_SIGN:"month_checkin_fish",CMD_TABLE_CHAT:"table_chat",MSG_TABLE_CHAT:"table_chat",CMD_TABLE_SMILE:"table_smile",MSG_TABLE_SMILE:"table_smile",MSG_LED:"led",CMD_RED_ENVELOPE:"fish_evlp",MSG_RED_ENVELOPE:"fish_evlp",MSG_SKILL_RETURN:"skill_return",MSG_VIP_ADDCHIP:"vip_addChipTo",CMD_UPDATE_MODULE_TIP:"module_tip",MSG_UPDATE_MODULE_TIP:"module_tip",CMD_ROOM_MATCH:"cmTbMatch",MSG_ROOM_MATCH:"cmTbMatch",CMD_FRIENDS:"friends",MSG_FRIENDS:"friends",MSG_VERIFY_USER_ID:"verifyUserId",CMD_DOUBLE_DAN:"double_dan",MSG_WEAPON_FORGE:"wpForge",MSG_CRYSTAL_RESOLVE:"crystalResolve",CMD_BANKRUPT_PACKAGE:"bkrptSet",MSG_BANKRUPT_PACKAGE:"bkrptSet",MSG_SPECIAL_FISH:"specialFish"},cc._RF.pop()},{}],fish_my_match_property:[function(e,t,i){"use strict";cc._RF.push(t,"cf4a9VGu7dGVpE11PAAZG4T","fish_my_match_property"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../fish"),o=e("../../model/fish_model"),c=e("../../buffer/fish_buffer"),a=e("../../scene/fish_scene"),r=e("../../define/fish_event_types"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.playerInfo=e,this.fntGold=null,this.fntDiamond=null,this.ptGold=null,this.ptDiamond=null,this.ptTips=null,this.fntTips=null},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/player_property_match_me")),this.node.addChild(this.csbRoot),this.fntGold=cc.find("fntGold",this.csbRoot),this.fntDiamond=cc.find("fntDiamond",this.csbRoot),this.ptGold=cc.find("ptGold",this.csbRoot),this.ptDiamond=cc.find("ptDiamond",this.csbRoot),this.ptTips=cc.find("ptTips",this.csbRoot),this.fntTips=s.fish.createWithBMFont("fnt01",""),this.fntTips.setPosition(this.ptTips.getPosition()),this.node.addChild(this.fntTips),this.fntTips.setScale(.4),this.fntTips.opacity=0,this.playerInfo.userId==o.ME.userId?(c.buffer.gameGold=c.buffer.bind(c.buffer.GameGold,this.playerInfo.userId,this.fntGold),c.buffer.gameGold.onEnter(),this.fntGold.addChild(c.buffer.gameGold),c.buffer.gameDiamond=c.buffer.bind(c.buffer.GameDiamond,o.ME.userId,this.fntDiamond),c.buffer.gameDiamond.onEnter(),this.fntDiamond.addChild(c.buffer.gameDiamond)):(c.buffer.otherGold[this.playerInfo.userId]=c.buffer.bind(c.buffer.OtherGold,this.playerInfo.userId,this.fntGold),c.buffer.otherGold[this.playerInfo.userId].onEnter(),this.fntGold.addChild(c.buffer.otherGold[this.playerInfo.userId]),c.buffer.otherDiamond[this.playerInfo.userId]=c.buffer.bind(c.buffer.OtherDiamond,this.playerInfo.userId,this.fntDiamond),c.buffer.otherDiamond[this.playerInfo.userId].onEnter(),this.fntDiamond.addChild(c.buffer.otherDiamond[this.playerInfo.userId])),a.evtCenter.on(r.evts.EVT_UI_ADD_GOLD,this.onEventAddGold,this),a.evtCenter.on(r.evts.EVT_UI_TIPS_GOLD,this.onEventTipsGold,this),a.evtCenter.on(r.evts.EVT_UI_TIPS_DIAMOND,this.onEventTipsDiamond,this)},t.prototype._bounceNode=function(e){e.stopAllActions(),e.runAction(cc.sequence(cc.scaleTo(1/30,1.2),cc.scaleTo(1/30,1)))},t.prototype._tips=function(e){this.fntTips.stopAllActions(),this.fntTips.getComponent(cc.Label).string="+"+e,this.fntTips.opacity=0,this.fntTips.runAction(cc.sequence(cc.fadeIn(4/30),cc.delayTime(1),cc.fadeOut(4/30)))},t.prototype.onEventAddGold=function(e,t){e==this.playerInfo.userId&&this._bounceNode(this.fntGold)},t.prototype.onEventTipsGold=function(e,t){e==this.playerInfo.userId&&(this._tips(t),this._goldFlash())},t.prototype.onEventTipsDiamond=function(e,t){e==this.playerInfo.userId&&this._diamondFlash()},t.prototype._goldFlash=function(){var e=a.utils.genAnimate("game_effect","gold_flash","fish_goldflash_",1/30),t=a.utils.createSprite("fish_goldflash_01","game_effect"),i=t.addComponent(cc.Animation);i.addClip(e),t.setPosition(this.ptGold.getPosition()),this.node.addChild(t),t.runAction(cc.sequence(cc.callFunc(function(){i.play("gold_flash")}.bind(this)),cc.fadeOut(.1),cc.removeSelf()));var n=a.utils.createSprite("fish_gold_flash_icon","common");n.setPosition(this.ptGold.getPosition()),this.node.addChild(n),n.runAction(cc.sequence(cc.spawn(cc.scaleTo(10/30,1.5).easing(cc.easeOut(3)),cc.fadeOut(10/30)),cc.removeSelf()))},t.prototype._diamondFlash=function(){var e=a.utils.genAnimate("game_effect","gold_flash","fish_goldflash_",1/30),t=a.utils.createSprite("fish_goldflash_01","game_effect"),i=t.addComponent(cc.Animation);i.addClip(e),t.setPosition(this.ptDiamond.getPosition()),t.color=cc.color(0,0,128),this.node.addChild(t),t.runAction(cc.sequence(cc.callFunc(function(){i.play("gold_flash")}.bind(this)),cc.fadeOut(.1),cc.removeSelf()));var n=a.utils.createSprite("fish_diamond_flash_icon","common");n.setPosition(this.ptDiamond.getPosition()),this.node.addChild(n),n.runAction(cc.sequence(cc.spawn(cc.scaleTo(10/30,1.5).easing(cc.easeOut(3)),cc.fadeOut(10/30)),cc.removeSelf()))},t.prototype.onDestroy=function(){a.evtCenter.off(r.evts.EVT_UI_ADD_GOLD,this.onEventAddGold,this),a.evtCenter.off(r.evts.EVT_UI_TIPS_GOLD,this.onEventTipsGold,this),a.evtCenter.off(r.evts.EVT_UI_TIPS_DIAMOND,this.onEventTipsDiamond,this)},t}(cc.Component);i.MyMatchProperty=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_my_position:[function(e,t,i){"use strict";cc._RF.push(t,"1a7a6fVdfpMpJdyhlclHP6b","fish_my_position"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../model/fish_model"),c=e("../../define/fish_event_types"),a=e("../../fish"),r=function(e){function t(){var t=e.call(this)||this;return t.touchPanel=null,t.timeout=124/60,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/my_position_tip")),a.fish.adapterScreen(t.csbRoot),t.touchPanel=cc.find("touchPanel",t.csbRoot),t.touchPanel.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbRoot);var e=s.utils.getRelativeSeat(o.model.table.seatId);this.csbRoot.stopAllActions();var t=this.csbRoot.getComponent(cc.Animation);1==e||3==e?(t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),t.play("left_float").wrapMode=cc.WrapMode.Loop}.bind(this),this),t.play("left")):(t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),t.play("right_float").wrapMode=cc.WrapMode.Loop}.bind(this),this),t.play("right")),o.model.guide.newbieInGameFinished?this.touchPanel.active=!1:this.touchPanel.active=!0,this.scheduleOnce(this.removeTip,this.timeout),s.evtCenter.on(c.evts.EVT_RMATCH_START,this.removeTip,this)},t.prototype.onDestroy=function(){o.model.guide.newbieInGameFinished||s.evtCenter.emit(c.evts.EVT_POPUP_NEWBIE_GUIDE),s.evtCenter.off(c.evts.EVT_RMATCH_START,this.removeTip,this)},t.prototype.onBtnTouchPanel=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.node.removeFromParent(!0),this.node.destroy()},t.prototype.removeTip=function(){s.utils.getRelativeSeat(o.model.table.seatId);s.evtCenter.emit(c.evts.EVT_REMOVE_MY_POS_TIP),this.node.removeFromParent(!0),this.node.destroy()},t}(cc.Component);i.MyPosition=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_nbomb_view:[function(e,t,i){"use strict";cc._RF.push(t,"9f53ahLSoNMj7yoLObjNGO0","fish_nbomb_view"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../logic/fish_tcp"),c=e("../../model/fish_model"),a=e("../../define/fish_consts"),r=e("../../fish"),h=e("../../define/fish_msg_types"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.listener=null,this.isFired=!1;var t=cc.visibleRect;this.node.setContentSize(t.width,t.height),this.node.setAnchorPoint(cc.v2(0,0))},t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),n.evtCenter.on(s.evts.EVT_NBOMB_FIRE,this.onEventNbombFire,this)},t.prototype.onTouchBegan=function(e){if(cc.log("****************************************** NbombView.onTouchBegan"),!this.isFired){this.isFired=!0;var t=e.getLocation(),i=cc.visibleRect,s=t.clampf(cc.v2(500,500),cc.v2(i.width-180,i.height-180)),l=r.fish.gameView.getFishesInRange(s,500);t=n.utils.convertPt(t);var d={cmd:h.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:c.ME.userId,action:"skill",skillId:a.Skill.NBOMB,subAction:"shot",loc:[t.x,t.y],catched:l,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId}};o.tcp.send(d)}return!0},t.prototype.onEventNbombFire=function(e,t,i,n){this.node.removeFromParent(),this.destroy()},t}(cc.Component);i.NbombView=l,cc._RF.pop()},{"../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_net_connection:[function(e,t,i){"use strict";cc._RF.push(t,"94153b83uVBxbqRzQrZb2pm","fish_net_connection"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../../xmen_interface"),c=e("../../logic/fish_tcp"),a=e("../../model/fish_model"),r=e("../../define/fish_msg_types"),h=e("../../scene/fish_scene_login"),l=e("../../scene/loading/fish_scene_loading_login_to_lobby"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.beKickout=null,this.reconnectCount=3,this.reconnectDelay=[1,.5,.2],n.evtCenter.on(s.evts.EVT_RECV_USER_INFO,this.onEventRecvUserInfo,this),o.xmen.EventDispatcher.on(o.xmen.EventType.MSG_KICKOUT,this.onEventRecvKickOut,this)},t.prototype.onEventRecvUserInfo=function(){n.evtCenter.on(o.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),n.evtCenter.on(o.xmen.EventType.TCP_CLOSE,this.onEventSocketError,this),n.evtCenter.on(o.xmen.EventType.TCP_OPENED,this.onEventSocketConnected,this)},t.prototype.onEventRecvKickOut=function(e){e&&4==e.code&&(this.beKickout=e.info||"\u60a8\u7684\u8d26\u53f7\u767b\u5f55\u5f02\u5e38")},t.prototype.onEventSocketError=function(){if(this.beKickout)return n.evtCenter.emit(s.evts.EVT_MSG_BOX,this.beKickout,this.relogin,this),void(this.beKickout=null);if(this.reconnectCount>0){var e=this.reconnectDelay[this.reconnectCount-1];return n.evtCenter.emit(s.evts.EVT_NET_SHOW_WAITING,8,!0),cc.log("reconnect"+this.reconnectCount),this.scheduleOnce(this.reconnect,e),void this.reconnectCount--}n.evtCenter.emit(s.evts.EVT_MSG_BOX,"\u60a8\u7684\u7f51\u7edc\u597d\u50cf\u51fa\u9519\u4e86\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",this.relogin,this)},t.prototype.onEventSocketConnected=function(){if(n.evtCenter.off(o.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),n.evtCenter.off(o.xmen.EventType.TCP_CLOSE,this.onEventSocketError,this),n.evtCenter.off(o.xmen.EventType.TCP_OPENED,this.onEventSocketConnected,this),n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING),this.reconnectCount>0&&a.model.table.roomId>0&&0==c.tcp.getHideTimeInv()){var e={cmd:r.msgs.CMD_BIND_USER,params:{gameId:9999,clientId:h.AccountInfo.clientId,userId:a.ME.userId,authorCode:h.AccountInfo.authorCode}};c.tcp.send(e)}else n.evtCenter.emit(s.evts.EVT_POPUP_LOADING,l.SceneLoginToLobby);this.reconnectCount=3,this.beKickout=null},t.prototype.reconnect=function(){c.tcp.connect()},t.prototype.relogin=function(){cc.audioEngine.stopMusic(),cc.audioEngine.stopAllEffects(),cc.sys.localStorage.setItem("show_sdk_login","true"),cc.director.loadScene("update")},t}(cc.Component);i.NetConnection=d,cc._RF.pop()},{"../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","../../scene/loading/fish_scene_loading_login_to_lobby":"fish_scene_loading_login_to_lobby"}],fish_net_heart_beat:[function(e,t,i){"use strict";cc._RF.push(t,"53c2c5VBTlHtI0HZqpGq2tT","fish_net_heart_beat"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../../xmen_interface"),c=e("../../model/fish_model"),a=e("../../logic/fish_tcp"),r=e("../../scene/fish_scene_login"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){n.evtCenter.on(s.evts.EVT_RECV_USER_INFO,this.onEventRecvUserInfo,this)},t.prototype.onEventRecvUserInfo=function(){n.evtCenter.on(o.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),n.evtCenter.on(o.xmen.EventType.TCP_CLOSE,this.onEventSocketError,this),this.unschedule(this.sendHeartBeat),this.schedule(this.sendHeartBeat,5)},t.prototype.onEventSocketError=function(){n.evtCenter.on(o.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),n.evtCenter.on(o.xmen.EventType.TCP_CLOSE,this.onEventSocketError,this),this.unschedule(this.sendHeartBeat)},t.prototype.sendHeartBeat=function(){var e={cmd:"heart_beat",params:{userId:c.ME.userId,gameId:9999,clientId:r.AccountInfo.clientId}};a.tcp.send(e)},t}(cc.Component);i.NetHeartBeat=h,cc._RF.pop()},{"../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_net_request_queue:[function(e,t,i){"use strict";cc._RF.push(t,"4350fXBI/xL37kDHpeGCUh7","fish_net_request_queue"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../../xmen_interface"),c=e("../../logic/fish_tcp"),a=e("../../define/fish_msg_types"),r=function(e){function t(){var t=e.call(this)||this;return t.TIME_OUT_1=500,t.TIME_OUT_2=2e3,t.TIME_OUT_3=1e4,t.msgMap={},t._initMsgMap(),t.waitingMsg=null,t.waitingQueue=[],t.delayQueue=[],t.timeoutQueue=[],n.evtCenter.on(s.evts.EVT_RECV_USER_INFO,t.onEventRecvUserInfo,t),t}return __extends(t,e),t.prototype.onEventRecvUserInfo=function(){n.evtCenter.on(o.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),n.evtCenter.on(o.xmen.EventType.TCP_CLOSE,this.onEventSocketError,this),n.evtCenter.on(s.evts.EVT_NET_REQUEST,this.onNetRequest,this),n.evtCenter.on(s.evts.EVT_NET_RESPONSE,this.onNetResponse,this),this.schedule(this.Update.bind(this),1),c.tcp.setNetTimeout(!1),c.tcp.setNetWeak(!1)},t.prototype.onEventSocketError=function(){n.evtCenter.off(o.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),n.evtCenter.off(o.xmen.EventType.TCP_CLOSE,this.onEventSocketError,this),n.evtCenter.off(s.evts.EVT_NET_REQUEST,this.onNetRequest,this),n.evtCenter.off(s.evts.EVT_NET_RESPONSE,this.onNetResponse,this),this.unschedule(this.Update.bind(this)),this.waitingMsg=null,this.waitingQueue=[],this.delayQueue=[],this.timeoutQueue=[],c.tcp.setNetTimeout(!0),c.tcp.setNetWeak(!0)},t.prototype.Update=function(){if(0!=this.waitingQueue.length||0!=this.delayQueue.length||0!=this.timeoutQueue.length){var e=Date.now();for(this.waitingMsg&&this.waitingMsg.tick<e-this.TIME_OUT_2&&(this.waitingMsg=null);this.timeoutQueue.length>0;){if(!(this.timeoutQueue[0].tick<e-this.TIME_OUT_3))break;this.timeoutQueue.shift()}this._checkMove(this.delayQueue,this.timeoutQueue,e-this.TIME_OUT_2)>0&&this.timeoutQueue.length>=5&&(n.evtCenter.emit(s.evts.EVT_NET_READY_QUIT),c.tcp.setNetTimeout(!0)),this._checkMove(this.waitingQueue,this.delayQueue,e-this.TIME_OUT_1)>0&&this.delayQueue.length>=5&&n.evtCenter.emit(s.evts.EVT_NET_POP_TIPS,"\u60a8\u7684\u7f51\u7edc\u4e0d\u7a33\u5b9a",5),c.tcp.setNetWeak(this.delayQueue.length+this.timeoutQueue.length>7)}},t.prototype.onNetRequest=function(e,t){var i=e+(t?"."+t:""),o=this.msgMap[i];o&&(o.wait?this.waitingMsg?cc.log("still waiting msg: "+this.waitingMsg.cmd):(this.waitingMsg={cmd:o.cmd,action:o.action||"",tick:Date.now()},n.evtCenter.emit(s.evts.EVT_NET_SHOW_WAITING)):this.waitingQueue.push({cmd:o.cmd,action:o.action||"",tick:Date.now()}))},t.prototype.onNetResponse=function(e,t){if(n.evtCenter.emit(s.evts.EVT_NET_CANCEL_QUIT),c.tcp.setNetTimeout(!1),this.waitingMsg&&this.waitingMsg.cmd==e&&this.waitingMsg.action==t)return n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING),n.evtCenter.emit(s.evts.EVT_NET_SET_DELAY,Date.now()-this.waitingMsg.tick),void(this.waitingMsg=null);var i=this._handleResponse(e,t,this.waitingQueue),o=this._handleResponse(e,t,this.delayQueue),a=this._handleResponse(e,t,this.timeoutQueue)||o||i;a>0&&n.evtCenter.emit(s.evts.EVT_NET_SET_DELAY,a)},t.prototype._initMsgMap=function(){this.msgMap[a.msgs.CMD_HEART_BEAT]={cmd:a.msgs.MSG_HEART_BEAT,wait:!1},this.msgMap[a.msgs.CMD_BIND_USER]={cmd:a.msgs.MSG_USER_INFO,wait:!0},this.msgMap[a.msgs.CMD_ITEM+".list"]={cmd:a.msgs.MSG_ITEM,action:"list",wait:!1},this.msgMap[a.msgs.CMD_GAME+".enter"]={cmd:a.msgs.MSG_GAME_DATA,wait:!1},this.msgMap[a.msgs.CMD_GAME+".room_list"]={cmd:a.msgs.MSG_ROOM_LIST,wait:!1},this.msgMap[a.msgs.CMD_GAME+".fish_ranking"]={cmd:a.msgs.MSG_FISH_RANKING,wait:!0},this.msgMap[a.msgs.CMD_SHOP_INFO+".update"]={cmd:a.msgs.MSG_SHOP_INFO,action:"update",wait:!0},this.msgMap[a.msgs.CMD_FISH_ACTIVITY+".update"]={cmd:a.msgs.MSG_FISH_ACTIVITY,action:"update",wait:!0},this.msgMap[a.msgs.CMD_FISH_DAILY_TASK+".update"]={cmd:a.msgs.MSG_FISH_DAILY_TASK,action:"update",wait:!0},this.msgMap[a.msgs.CMD_TABLE_CALL+".gup"]={cmd:a.msgs.MSG_WEAPON_UPGRADE,wait:!0},this.msgMap[a.msgs.CMD_TABLE_CALL+".gchg"]={cmd:a.msgs.MSG_MULTIPLE_CHANGED,wait:!0},this.msgMap[a.msgs.CMD_FIRE_VERIFY]={cmd:a.msgs.MSG_FIRE_RESPONSE,wait:!1}},t.prototype._handleResponse=function(e,t,i){for(var n=0;n<i.length;n++){var s=i[n];if(s.cmd==e&&s.action==t)return i.splice(n,1),Date.now()-s.tick}return 0},t.prototype._checkMove=function(e,t,i){for(var n=0;e.length>0;){var s=e[0];if(!(s.tick<i))break;e.shift(),t.push(s),++n}return n},t}(cc.Component);i.NetRequestQueue=r,cc._RF.pop()},{"../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../scene/fish_scene":"fish_scene"}],fish_net_state:[function(e,t,i){"use strict";cc._RF.push(t,"09866FFFGZM/aGmECZ/9ESW","fish_net_state"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../../xmen_interface"),c=e("../../logic/fish_tcp"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){n.evtCenter.on(s.evts.EVT_RECV_USER_INFO,this.onEventRecvUserInfo,this)},t.prototype.onEventRecvUserInfo=function(){n.evtCenter.on(o.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),n.evtCenter.on(o.xmen.EventType.TCP_CLOSE,this.onEventSocketError,this),o.xmen.EventDispatcher.on(o.xmen.EventType.NETWORK_STATE_CHANGE,this.onEventNetStateChange,this)},t.prototype.onEventSocketError=function(){n.evtCenter.off(o.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),n.evtCenter.off(o.xmen.EventType.TCP_CLOSE,this.onEventSocketError,this),o.xmen.EventDispatcher.off(o.xmen.EventType.NETWORK_STATE_CHANGE,this.onEventNetStateChange,this)},t.prototype.onEventNetStateChange=function(e){e.isconnect?(c.tcp.setNetState(!0),n.evtCenter.emit(s.evts.EVT_NET_CANCEL_QUIT),n.evtCenter.emit(s.evts.EVT_NET_POP_TIPS,(e.iswifi?"WIFI":"\u7f51\u7edc")+"\u5df2\u8fde\u63a5",2)):(c.tcp.setNetState(!1),n.evtCenter.emit(s.evts.EVT_NET_POP_TIPS,"\u60a8\u7684\u7f51\u7edc\u4e0d\u7a33\u5b9a",5),n.evtCenter.emit(s.evts.EVT_NET_READY_QUIT))},t}(cc.Component);i.NetState=a,cc._RF.pop()},{"../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../logic/fish_tcp":"fish_tcp","../../scene/fish_scene":"fish_scene"}],fish_net_ui:[function(e,t,i){"use strict";cc._RF.push(t,"06220EW3TBE2ZbGcHKavD9e","fish_net_ui"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../../xmen_interface"),c=e("../../logic/fish_tcp"),a=e("../../model/fish_model"),r=e("../../define/fish_msg_types"),h=e("../../scene/loading/fish_scene_loading_game_to_lobby"),l=e("../../../assets_manager"),d=e("../../fish"),_=function(e){function t(){var t=e.call(this)||this;return t.tips=null,t.tipsTxt=null,t.loadingCircle=null,t.countDown=null,t.countDownFnt=null,t.countDownNumber=8,t.labelDelay=null,t.reconnecting=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(l.AssetsManager.getRes("prefabs/net_ui")),d.fish.adapterScreen(this.csbRoot),this.csbRoot.active=!1,this.node.addChild(this.csbRoot),this.tips=cc.find("tips",this.csbRoot),this.tipsTxt=cc.find("tips/tipsTxt",this.csbRoot).getComponent(cc.Label),this.loadingCircle=cc.find("loadingCircle",this.csbRoot),this.countDown=cc.find("countDown",this.csbRoot),this.countDownFnt=cc.find("countDown/countDownFnt",this.csbRoot).getComponent(cc.Label),this.labelDelay=cc.find("labelDelay",this.csbRoot).getComponent(cc.Label),n.evtCenter.on(s.evts.EVT_RECV_USER_INFO,this.onEventRecvUserInfo,this)},t.prototype.onEventRecvUserInfo=function(){n.evtCenter.on(o.xmen.EventType.TCP_SHUTDOWN,this.onEventSocketError,this),n.evtCenter.on(s.evts.EVT_NET_POP_TIPS,this.onEventNetTips,this),n.evtCenter.on(s.evts.EVT_NET_SHOW_WAITING,this.onEventShowWaiting,this),n.evtCenter.on(s.evts.EVT_NET_HIDE_WAITING,this.onEventHideWaiting,this),n.evtCenter.on(s.evts.EVT_NET_READY_QUIT,this.onEventReadyQuit,this),n.evtCenter.on(s.evts.EVT_NET_CANCEL_QUIT,this.onEventCancelQuit,this),this.csbRoot.active=!0},t.prototype.onEventSocketError=function(){n.evtCenter.off(o.xmen.EventType.TCP_SHUTDOWN,this.onEventSocketError,this),n.evtCenter.off(s.evts.EVT_NET_POP_TIPS,this.onEventNetTips,this),n.evtCenter.off(s.evts.EVT_NET_SHOW_WAITING,this.onEventShowWaiting,this),n.evtCenter.off(s.evts.EVT_NET_HIDE_WAITING,this.onEventHideWaiting,this),n.evtCenter.off(s.evts.EVT_NET_READY_QUIT,this.onEventReadyQuit,this),n.evtCenter.off(s.evts.EVT_NET_CANCEL_QUIT,this.onEventCancelQuit,this),this.csbRoot.active=!1},t.prototype.onEventNetTips=function(e,t){this.tips.active=!0,this.tipsTxt.string=e,this.unschedule(this._hideTips),this.scheduleOnce(this._hideTips,t||5)},t.prototype.onEventShowWaiting=function(e,t){this.loadingCircle.active=!0,this.csbRoot.getComponent(cc.Animation).play("loading").wrapMode=cc.WrapMode.Loop,c.tcp.setNetWaiting(!0),this.reconnecting=t||!1,this.unschedule(this.onEventHideWaiting),this.scheduleOnce(this.onEventHideWaiting,e||2)},t.prototype.onEventHideWaiting=function(){this.reconnecting=!1,this.loadingCircle.active=!1,this.node.stopAllActions(),c.tcp.setNetWaiting(!1)},t.prototype.onEventReadyQuit=function(){0==a.model.table.roomId||this.countDown.active||(this.countDownNumber=8,this.countDown.active=!0,this.countDownFnt.string=this.countDownNumber.toString(),this.schedule(this._countDown,1,7),this.scheduleOnce(this._backToLobby,8))},t.prototype.onEventCancelQuit=function(){this.countDown.active=!1,this.unschedule(this._countDown),this.unschedule(this._backToLobby)},t.prototype.onEventNewDelay=function(e){this.labelDelay.string="DELAY: "+e+" server: "+o.xmen.SystemInfo.getConfig().srv_url},t.prototype.onTouchBegan=function(){return c.tcp.isConnected()||this.reconnecting||n.evtCenter.emit(s.evts.EVT_MSG_BOX,"\u7f51\u7edc\u94fe\u63a5\u5df2\u65ad\u5f00, \u662f\u5426\u91cd\u65b0\u8fde\u63a5",2,this._relogin,this),this.reconnecting},t.prototype._hideTips=function(){this.tips.active=!1},t.prototype._countDown=function(){--this.countDownNumber,this.countDownFnt.string=this.countDownNumber.toString()},t.prototype._backToLobby=function(){this.countDown.active=!1;var e={cmd:r.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:a.ME.userId,action:"leave",roomId:a.model.table.roomId,tableId:a.model.table.tableId,seatId:a.model.table.seatId}};c.tcp.send(e),n.evtCenter.emit(s.evts.EVT_POPUP_LOADING,h.SceneGameToLobby)},t.prototype._relogin=function(){cc.director.loadScene("update")},t}(cc.Component);i.NetUI=_,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/loading/fish_scene_loading_game_to_lobby":"fish_scene_loading_game_to_lobby"}],fish_new_step_1:[function(e,t,i){"use strict";cc._RF.push(t,"01e47qzHrJMIagL1q3Eh5fI","fish_new_step_1"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../logic/fish_tcp"),c=e("../../scene/fish_scene_login"),a=e("../../define/fish_msg_types"),r=e("../../scene/fish_scene"),h=e("../../define/fish_event_types"),l=e("../../fish"),d=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.canTouchBox=!1,t.canTouchStart=!1,t.btnStart=null,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/new_hand_1")),l.fish.adapterScreen(t.csbRoot),cc.find("Panel_1",t.csbRoot).on(cc.Node.EventType.TOUCH_END,t.onBtnPanel,t),t.btnStart=cc.find("archor/reward_node/btnStart",t.csbRoot),t.btnStart.on(cc.Node.EventType.TOUCH_END,t.onBtnStart,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbRoot),this.csbRoot.stopAllActions();var e=this.csbRoot.getComponent(cc.Animation);e.play("show_box"),e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),this.canTouchBox=!0,this.schedule(this.onClickedBox,1,10,10)}.bind(this),this),r.evtCenter.on(h.evts.EVT_RECEIVE_NEW_GIFTS,this.onEventReceiveGift,this)},t.prototype.onDestroy=function(){r.evtCenter.on(h.evts.EVT_RECEIVE_NEW_GIFTS,this.onEventReceiveGift,this)},t.prototype.onScheduleBtnStart=function(){this.onBtnStart(null)},t.prototype.onEventReceiveGift=function(){this.csbRoot.stopAllActions();var e=this.csbRoot.getComponent(cc.Animation);e.play("gift_move"),e.on(cc.Animation.EventType.FINISHED,function(){this.quickStart()}.bind(this),this)},t.prototype.onBtnStart=function(e){this.btnStart.getComponent(cc.Button).enabled=!1,this.unschedule(this.onScheduleBtnStart),this.csbRoot.getComponent(cc.Animation).unscheduleAllCallbacks(),s.model.guide.requestNewGift(),s.model.dailysign.requestGetReward(!0)},t.prototype.onBtnPanel=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.canTouchBox&&(this.canTouchBox=!1,this.onClickedBox())},t.prototype.onClickedBox=function(){this.unschedule(this.onClickedBox),this.schedule(this.onScheduleBtnStart,1,10,20),this.csbRoot.stopAllActions();var e=this.csbRoot.getComponent(cc.Animation);e.play("show_gift"),e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("gift_effect").wrapMode=cc.WrapMode.Loop}.bind(this),this)},t.prototype.quickStart=function(){var e={cmd:a.msgs.CMD_GAME,params:{action:"quick_start",gameId:28,userId:s.ME.userId,clientId:c.AccountInfo.clientId}};o.tcp.send(e),this.scheduleOnce(this.onTimeOut,5)},t.prototype.onTimeOut=function(){this.quickStart()},t}(cc.Component);i.NewStep1=d,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_newbie_arrow:[function(e,t,i){"use strict";cc._RF.push(t,"807bfAfittBBZ88yyLMrTc0","fish_newbie_arrow"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/newbie_arrow")),t.addChild(t.csbRoot),t.csbRoot.getComponent(cc.Animation).play("stamp").wrapMode=cc.WrapMode.Loop,t}return __extends(t,e),t}(cc.Node);i.NewbieArrow=s,cc._RF.pop()},{"../../../assets_manager":"assets_manager"}],fish_newbie_battery:[function(e,t,i){"use strict";cc._RF.push(t,"2bc37JnNERD6KKMriVALWy0","fish_newbie_battery"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../../assets_manager"),o=function(e){function t(t){var i=e.call(this)||this;return i.playerInfo=t,i.relativeSeat=n.utils.getRelativeSeat(t.seatId),i.seatPos=n.utils.getSeatPosition(i.relativeSeat),i.firePos=n.utils.getFirePosition(i.relativeSeat),i.csbRoot=null,i.pivotRoot=null,i.pivotWeapon=null,i.spLock=null,i.ftnMultiple=null,i.nodeCannon=null,i.nodeLaser=null,i.hasfireFence=!1,i.hasFrozen=!1,i}return __extends(t,e),t.prototype.onEnter=function(){this.setPosition(this.seatPos),this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/battery")),this.addChild(this.csbRoot),this.pivotRoot=cc.find("pivotRoot",this.csbRoot),this.pivotWeapon=cc.find("pivotRoot/groupGun/pivotWeapon",this.csbRoot),this.spLock=cc.find("pivotRoot/spLock",this.csbRoot),this.ftnMultiple=cc.find("pivotRoot/ftnMultiple",this.csbRoot),this.ftnMultiple.getComponent(cc.Label).string=this.playerInfo.curWeapon.multiple.toString(),1==this.playerInfo.cannonId&&this.playerInfo.curWeapon.multiple>=30&&(this.playerInfo.cannonId=2),this.nodeCannon=cc.instantiate(s.AssetsManager.getRes("prefabs/cannon_"+this.playerInfo.cannonId)),this.pivotWeapon.addChild(this.nodeCannon),this._idle(),this.relativeSeat>=3&&(this.pivotRoot.rotation=180)},t.prototype.onEventRotateBattery=function(e,t){e==this.playerInfo.userId&&this._rotate(t)},t.prototype.onEventFireBattery=function(e){e==this.playerInfo.userId&&this._fire()},t.prototype.onEventSetLock=function(e,t){e==this.playerInfo.seatId&&(t?this._addLockEffect():this._removeLockEffect())},t.prototype.stop=function(){this._idle()},t.prototype.onEventBatteryFrozen=function(e){e==this.playerInfo.seatId&&(this.hasFrozen||(this.hasFrozen=!0,this.hasfireFence=!1,this._batteryUnfrozen()))},t.prototype.onEventBatteryUnfrozen=function(e){e==this.playerInfo.seatId&&this.hasFrozen&&(this.hasFrozen=!1,this.hasfireFence=!1,this._batteryUnfrozen())},t.prototype._rotate=function(e){var t=cc.v2(e.x-this.firePos.x,e.y-this.firePos.y),i=cc.v2(this.firePos.x-this.seatPos.x,this.firePos.y-this.seatPos.y),s=n.math.getAngle(t,i);s=cc.misc.clampf(s,-98,98),this.pivotWeapon.setRotation(s)},t.prototype._idle=function(){this.nodeCannon&&this.playerInfo.cannonId>1&&this.nodeCannon.stopAllActions()},t.prototype._fire=function(){this.nodeCannon&&(this.nodeCannon.stopAllActions(),this.nodeCannon.getComponent(cc.Animation).play("fire").wrapMode=cc.WrapMode.Loop)},t.prototype._addLockEffect=function(){if(!this.lockEffect){this.lockEffect=new cc.Node,this.lockEffect.position.y=this.relativeSeat>2?-26:26;var e=n.utils.createSprite("fish_eff_lock_01","skill_lock");e.runAction(cc.repeatForever(cc.rotateBy(1,108)));var t=n.utils.createSprite("fish_eff_lock_02","skill_lock");t.runAction(cc.repeatForever(cc.rotateBy(1,-108))),this.lockEffect.addChild(e),this.lockEffect.addChild(t),this.addChild(this.lockEffect,0)}},t.prototype._removeLockEffect=function(){this.lockEffect&&(this.removeChild(this.lockEffect),this.lockEffect=null)},t.prototype._refreshCannon=function(){this.nodeLaser&&(this.nodeLaser.removeFromParent(),this.nodeLaser=null),this.nodeCannon&&(this.nodeCannon.removeFromParent(),this.nodeCannon=null),this.nodeCannon=cc.instantiate(s.AssetsManager.getRes("prefabs/cannon_"+this.playerInfo.cannonId)),this.pivotWeapon.addChild(this.nodeCannon),this._idle()},t.prototype._showFireFence=function(){var e=this.csbRoot.getComponent(cc.Animation);e.play("showFireFence"),e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("repeatFire").wrapMode=cc.WrapMode.Loop}.bind(this),this),n.audio.playFlame()},t.prototype._hideFireFence=function(){this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("hideFireFence"),n.audio.stopFlame()},t.prototype._batteryFrozen=function(){this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("batteryFrozen"),cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/freeze"),!1)},t.prototype._batteryUnfrozen=function(){this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("batteryUnfrozen")},t}(cc.Node);i.NewbieBattery=o,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../scene/fish_scene":"fish_scene"}],fish_newbie_bullet:[function(e,t,i){"use strict";cc._RF.push(t,"330c1BUM+pDE7E5Z1ztH3JX","fish_newbie_bullet"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../model/fish_model"),o=e("../../fish"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t){this.seatId=e,this.bulletNode=t,this.spBullet=null,this.BATTERY_RADIUS=100},t.prototype.onLoad=function(){var e,t=n.utils.getRelativeSeat(s.model.table.seatId),i=n.utils.getSeatPosition(t),o=n.utils.getFirePosition(t);this.spBullet=n.utils.createSprite("fish_bullet_1","fire_net"),this.spBullet.setAnchorPoint(.5,.95),this.node.addChild(this.spBullet),e=1==t||3==t?cc.v2(o.x+60,o.y+100):cc.v2(o.x-60,o.y+100),this.spBullet.setPosition(e),this.touchPos=cc.v2(568,420);var c=cc.v2(this.touchPos.x-o.x,this.touchPos.y-o.y),a=cc.v2(o.x-i.x,o.y-i.y),r=n.math.getAngle(c,a);r=cc.misc.clampf(r,-98,98),this.spBullet.rotation=r,this.spBullet.runAction(cc.sequence(cc.moveTo(.2,this.touchPos),cc.callFunc(this.castNet,this),cc.removeSelf()))},t.prototype.onDestroy=function(){},t.prototype.castBubble=function(){for(var e=0;e<8;e++){var t=n.utils.createSprite("fish_net_bulle","fire_net");this.node.addChild(t);var i=cc.v2(this.touchPos.x+5*o.fish.randomMinus1To1(),this.touchPos.y+5*o.fish.randomMinus1To1());t.setPosition(i),t.setScale(15*Math.random()+.5),t.active=!1;var s=cc.color(100,240,100);t.color=s;var c=(15+15*Math.random())/30,a=(45*e+10*Math.random())*(Math.PI/180),r=60+20*Math.random(),h=r*Math.cos(a)+this.touchPos.x,l=r*Math.sin(a)+this.touchPos.y;t.runAction(cc.sequence(cc.delayTime(1/30),cc.show(),cc.spawn(cc.scaleTo(c,.2),cc.moveTo(c,h,l)),cc.removeSelf()))}},t.prototype.castNet=function(){this.castBubble();var e=n.utils.createSprite("fish_net_1","fire_net");this.node.addChild(e),e.setPosition(this.touchPos.x+5*o.fish.randomMinus1To1(),this.touchPos.y+5*o.fish.randomMinus1To1()),e.setScale(.2),e.rotation=15,e.runAction(cc.sequence(cc.scaleTo(2/30,1.2),cc.scaleTo(2/30,1),cc.scaleTo(2/30,1.1),cc.scaleTo(2/30,1),cc.fadeOut(10/30),cc.removeSelf()))},t}(cc.Component);i.NewbieBullet=c,cc._RF.pop()},{"../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_newbie_guide_game:[function(e,t,i){"use strict";cc._RF.push(t,"6da772r8fZMubt9ymLwCTCr","fish_newbie_guide_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("./fish_newbie_step1"),r=e("./fish_newbie_step2"),h=e("./fish_newbie_step3"),l=e("./fish_newbie_step4"),d=e("./fish_newbie_step5"),_=e("../../fish"),f=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.labTxt=null,t.touchPanel=null,t.labString="",t.warnString="",t.startLen=4,t.stepSize=4,t.step1=null,t.step2=null,t.step3=null,t.step4=null,t.step5=null,t.guideHand=null,t.guidePanel=null,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/newbie_guide_game")),_.fish.adapterScreen(t.csbRoot),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbRoot),this.touchPanel=cc.find("touchPanel",this.csbRoot),this.guideHand=cc.find("guideHand",this.csbRoot),this.guidePanel=cc.find("guidePanel",this.csbRoot),this.labTxt=cc.find("guidePanel/labTxt",this.csbRoot),this.touchPanel.active=!1,this.guidePanel.active=!1,this.guideHand.active=!1,this.labString="\u54c7\uff01\u597d\u8fd0\u6c14\uff0c\u60a8\u83b7\u5f97\u4e86\u53ef\u4ee5\u5151\u6362\u8bdd\u8d39\u7684\u52cb\u7ae0\uff0c\u5f00\u59cb\u60a8\u7684\u6355\u9c7c\u751f\u6daf\u5427\uff01",0==s.ME.showMember&&(this.labString="\u60a8\u5df2\u7ecf\u5b8c\u6210\u65b0\u624b\u6559\u5b66\uff0c\u5f00\u59cb\u60a8\u7684\u6355\u9c7c\u751f\u6daf\u5427\uff01"),this.labTxt.getComponent(cc.Label).string=this.labString,this.showStep1(),o.evtCenter.on(c.evts.EVT_SHOW_NEWBIE_STEP,this.showStep,this),o.evtCenter.on(c.evts.EVT_NEWBIE_GUIDE_SUCCESS,this.onEventNewbieGuideEnd,this)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_SHOW_NEWBIE_STEP,this.showStep,this),o.evtCenter.off(c.evts.EVT_NEWBIE_GUIDE_SUCCESS,this.onEventNewbieGuideEnd,this)},t.prototype.showStep=function(e){switch(e){case 1:this.showStep1();break;case 2:this.showStep2();break;case 3:this.showStep3();break;case 4:this.showStep4();break;case 5:this.showStep5()}},t.prototype.onEventNewbieGuideEnd=function(){this.touchPanel.active=!0,this.guidePanel.active=!0,this.scheduleOnce(this.delayRemove,4)},t.prototype.delayRemove=function(){s.model.guide.requestNewbieTaskInfo(),this.node.removeFromParent(),this.destroy()},t.prototype.showStep1=function(){null==this.step1&&(this.step1=(new cc.Node).addComponent(a.NewbieStep1),this.node.addChild(this.step1.node,0,"1001"))},t.prototype.showStep2=function(){this.node.removeChild(this.step1.node),this.step1=null,null==this.step2&&(this.step2=(new cc.Node).addComponent(r.NewbieStep2),this.node.addChild(this.step2.node,0,"1002"))},t.prototype.showStep3=function(){this.node.removeChild(this.step2.node),this.step2=null,null==this.step3&&(this.step3=(new cc.Node).addComponent(h.NewbieStep3),this.node.addChild(this.step3.node,0,"1003"))},t.prototype.showStep4=function(){this.node.removeChild(this.step3.node),this.step3=null,null==this.step4&&(this.step4=(new cc.Node).addComponent(l.NewbieStep4),this.node.addChild(this.step4.node,0,"1004"))},t.prototype.showStep5=function(){this.node.removeChild(this.step4.node),this.step4=null,null==this.step5&&(this.step5=(new cc.Node).addComponent(d.NewbieStep5),this.node.addChild(this.step5.node,0,"1005"))},t}(cc.Component);i.NewbieGuideGame=f,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_newbie_step1":"fish_newbie_step1","./fish_newbie_step2":"fish_newbie_step2","./fish_newbie_step3":"fish_newbie_step3","./fish_newbie_step4":"fish_newbie_step4","./fish_newbie_step5":"fish_newbie_step5"}],fish_newbie_step1:[function(e,t,i){"use strict";cc._RF.push(t,"5719356qBBPOIHQDPjo3fdk","fish_newbie_step1"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("./fish_newbie_arrow"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../model/fish_model"),r=e("../../buffer/fish_buffer"),h=e("../../fish"),l=function(e){function t(){var t=e.call(this)||this;t.csbRoot=null,t.labTxt=null,t.labTxt=null,t.touchPanel=null,t.hand=null,t.labString="",t.warnString="",t.startLen=4,t.stepSize=4,t._response=!1,t._catchSuccess=!1,t.guideHand=null,t.guidePanel=null,t.clipNode=null,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/newbie_guide_step1")),h.fish.adapterScreen(t.csbRoot),t.guideHand=cc.find("guideHand",t.csbRoot),t.guidePanel=cc.find("guidePanel",t.csbRoot),t.touchPanel=cc.find("touchPanel",t.csbRoot),t.labTxt=cc.find("guidePanel/labTxt",t.csbRoot);var i=cc.find("panelFreeae",t.csbRoot),s=cc.find("panelLock",t.csbRoot),o=cc.find("panelShop",t.csbRoot),c=cc.find("panelGunUp",t.csbRoot),a=cc.find("panelLottery",t.csbRoot),r=cc.find("panelLeft",t.csbRoot),l=cc.find("panelMenu",t.csbRoot);return i.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),s.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),o.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),c.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),a.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),r.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),l.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbRoot),this.labString="\u6211\u662f\u7f8e\u4eba\u9c7c\u5c0f\u6c50\uff0c\u6b22\u8fce\u6765\u5230\u6355\u9c7c\u7684\u4e16\u754c\uff0c\u9996\u5148\u70b9\u51fb\u5c4f\u5e55\uff0c\u5411\u9c7c\u513f\u5f00\u70ae\u5427\uff01",cc.log("aaaaaa"+this.labString.length),cc.log("aaaaaa"+this.labString.length/this.stepSize),this.warnString="\u8bf7\u60a8\u6309\u7167\u6211\u7684\u6307\u5f15\u64cd\u4f5c\uff0c\u4e0d\u8981\u7740\u6025\uff0c\u5b8c\u6210\u5f15\u5bfc\u5f88\u5feb\u5c31\u53ef\u4ee5\u6e38\u620f\u4e86\uff01",this.schedule(this.onLabelAction,.05,50,0),this.scheduleOnce(this.delayForTouch,2);var e=new s.NewbieArrow;this.guideHand.addChild(e,10),o.evtCenter.on(c.evts.EVT_FIRE_RESPONSE,this.onEventFireResponse,this),o.evtCenter.on(c.evts.EVT_CATCH_SUCCESS,this.onEventCatchSuccess,this),o.evtCenter.on(c.evts.EVT_NEWBIE_DIAMOND_REWARD,this.onEventNewbieDiamond,this)},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks(),o.evtCenter.off(c.evts.EVT_FIRE_RESPONSE,this.onEventFireResponse,this),o.evtCenter.off(c.evts.EVT_CATCH_SUCCESS,this.onEventCatchSuccess,this),o.evtCenter.off(c.evts.EVT_NEWBIE_DIAMOND_REWARD,this.onEventNewbieDiamond,this)},t.prototype.showClipLayer=function(){},t.prototype.onLabelAction=function(){var e=this.labString.substr(0,this.startLen);this.labTxt.getComponent(cc.Label).string=e,this.startLen=this.startLen+this.stepSize,this.startLen>200&&this.unschedule(this.onLabelAction)},t.prototype.onEventFireResponse=function(e){0==e&&(this.guideHand.active=!1,this.guidePanel.active=!1)},t.prototype.onEventCatchSuccess=function(e,t,i,n){e==a.model.table.seatId&&(this._catchSuccess||(this._catchSuccess=!0,a.model.guide.requestNewbieReward(1)))},t.prototype.onEventNewbieDiamond=function(){var e=o.utils.getRelativeSeat(a.model.table.seatId),t=o.utils.getSeatPosition(e);o.effect.diamondFly(this.node,cc.v2(cc.winSize.width/2,cc.winSize.height/2),t,a.ME.userId,2),r.buffer.pushDiamond(a.ME.userId,2,3),this.scheduleOnce(this.delayForNextStep,3)},t.prototype.onBtnTouchPanel=function(e){this.labTxt.color=cc.color(255,255,0),this.labTxt.getComponent(cc.Label).string=this.warnString,this.guidePanel.active=!0,this.unschedule(this.showTextTip),this.scheduleOnce(this.showTextTip,2)},t.prototype.showTextTip=function(){this.labTxt.getComponent(cc.Label).string=this.labString,this.labTxt.color=cc.color(255,255,255)},t.prototype.delayForTouch=function(){this.touchPanel.active=!1},t.prototype.delayForNextStep=function(){o.evtCenter.emit(c.evts.EVT_SHOW_NEWBIE_STEP,2,a.model.table.seatId)},t}(cc.Component);i.NewbieStep1=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_newbie_arrow":"fish_newbie_arrow"}],fish_newbie_step2:[function(e,t,i){"use strict";cc._RF.push(t,"28ed8zQYwBKEq2SfVK2Y2UZ","fish_newbie_step2"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("./fish_newbie_arrow"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../define/fish_msg_types"),r=e("../../model/fish_model"),h=e("../../scene/fish_scene_login"),l=e("../../logic/fish_tcp"),d=e("../../fish"),_=function(e){function t(){var t=e.call(this)||this;t.csbRoot=null,t.labTxt=null,t.touchPanel=null,t.panelGunUp=null,t.touchMask=null,t.hand=null,t.labString="",t.warnString="",t.startLen=4,t.stepSize=4,t._response=!1,t._catchSuccess=!1,t.guideHand=null,t.guidePanel=null,t.clipNode=null,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/newbie_guide_step2")),d.fish.adapterScreen(t.csbRoot),t.labTxt=cc.find("guidePanel/labTxt",t.csbRoot),t.touchPanel=cc.find("touchPanel",t.csbRoot),t.panelGunUp=cc.find("panelGunUp",t.csbRoot),t.touchMask=cc.find("touchMask",t.csbRoot),t.guideHand=cc.find("guideHand",t.csbRoot),t.guidePanel=cc.find("guidePanel",t.csbRoot);var i=cc.find("panelFreeae",t.csbRoot),s=cc.find("panelLock",t.csbRoot),o=cc.find("panelShop",t.csbRoot),c=cc.find("panelLeft",t.csbRoot),a=cc.find("panelMenu",t.csbRoot),r=cc.find("panelLottery",t.csbRoot);return i.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),s.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),o.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),c.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),a.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),r.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),t.touchPanel.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),t.panelGunUp.on(cc.Node.EventType.TOUCH_END,t.onBtnGunUp,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbRoot),this.labString="\u6355\u83b7\u9c7c\u4f1a\u968f\u673a\u6389\u843d\u94bb\u77f3\u5956\u52b1\uff0c\u5feb\u4f7f\u7528\u94bb\u77f3\u5347\u7ea7\u4f60\u7684\u70ae\u53f0\u5427\uff01",this.warnString="\u8bf7\u60a8\u6309\u7167\u6211\u7684\u6307\u5f15\u64cd\u4f5c\uff0c\u4e0d\u8981\u7740\u6025\uff0c\u5b8c\u6210\u5f15\u5bfc\u5f88\u5feb\u5c31\u53ef\u4ee5\u6e38\u620f\u4e86\uff01",this.schedule(this.onLabelAction,.05,50,0),this.scheduleOnce(this.delayForTouch,1);var e=new s.NewbieArrow;this.guideHand.addChild(e),o.evtCenter.on(c.evts.EVT_NEWBIE_GUNUP,this.onEventNewbieGunUp,this),o.evtCenter.emit(c.evts.EVT_STOP_FIRE)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_NEWBIE_GUNUP,this.onEventNewbieGunUp,this)},t.prototype.showClipLayer=function(){},t.prototype.onLabelAction=function(){var e=this.labString.substr(0,this.startLen);this.labTxt.getComponent(cc.Label).string=e,this.startLen=this.startLen+this.stepSize,this.startLen>200&&this.unschedule(this.onLabelAction)},t.prototype.onBtnTouchPanel=function(e){this.labTxt.color=cc.color(255,255,0),this.labTxt.getComponent(cc.Label).string=this.warnString,this.guidePanel.active=!0,this.unschedule(this.showTextTip),this.scheduleOnce(this.showTextTip,2)},t.prototype.showTextTip=function(){this.labTxt.getComponent(cc.Label).string=this.labString,this.labTxt.color=cc.color(255,255,255)},t.prototype.delayForTouch=function(){this.panelGunUp.active=!0,this.touchMask.active=!1},t.prototype.onBtnGunUp=function(e){this.guideHand.active=!1,this.guidePanel.active=!1;var t={cmd:a.msgs.CMD_TABLE_CALL,params:{action:"gup",userId:r.ME.userId,clientId:h.AccountInfo.clientId,gameId:28,roomId:r.model.table.roomId,tableId:r.model.table.tableId,seatId:r.model.table.seatId}};l.tcp.send(t)},t.prototype.onEventNewbieGunUp=function(){this.labString="\u606d\u559c\u4f60\uff0c\u6210\u529f\u5347\u7ea7\u4e86\u4f60\u7684\u70ae\u53f0\uff01\u73b0\u5728\u4f60\u6355\u9c7c\u83b7\u5f97\u7684\u91d1\u5e01\u66f4\u591a\u4e86\uff01",this.schedule(this.onLabelAction,.05,this.labString.length/this.stepSize,0),this.guidePanel.active=!0,o.evtCenter.emit(c.evts.EVT_SHOW_NEWBIE_STEP,3,r.model.table.seatId),o.evtCenter.emit(c.evts.EVT_NEWBIE_HIDE_BATTERY,r.model.table.seatId)},t}(cc.Component);i.NewbieStep2=_,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","./fish_newbie_arrow":"fish_newbie_arrow"}],fish_newbie_step3:[function(e,t,i){"use strict";cc._RF.push(t,"8999ejrkZ1Gp5jrPheEKCb2","fish_newbie_step3"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_newbie_bullet"),s=e("../../model/fish_model"),o=e("../../../assets_manager"),c=e("../../scene/fish_scene"),a=e("../../define/fish_event_types"),r=e("./fish_newbie_arrow"),h=e("./fish_newbie_battery"),l=e("../../fish"),d=function(e){function t(){var t=e.call(this)||this;t.csbRoot=null,t.labTxt=null,t.touchPanel=null,t.panelGunUp=null,t.touchMask=null,t.hand=null,t.labString="",t.warnString="",t.startLen=4,t.stepSize=4,t.guideHand=null,t.guidePanel=null,t.panelLock=null,t.fishNode=null,t.fishSprite=null,t.fishLock=null,t.battery=null,t.csbRoot=cc.instantiate(o.AssetsManager.getRes("prefabs/newbie_guide_step3")),l.fish.adapterScreen(t.csbRoot),t.labTxt=cc.find("guidePanel/labTxt",t.csbRoot),t.touchPanel=cc.find("touchPanel",t.csbRoot),t.panelGunUp=cc.find("panelGunUp",t.csbRoot),t.touchMask=cc.find("touchMask",t.csbRoot),t.guideHand=cc.find("guideHand",t.csbRoot),t.guidePanel=cc.find("guidePanel",t.csbRoot),t.panelLock=cc.find("panelLock",t.csbRoot),t.fishNode=cc.find("fishNode",t.csbRoot),t.fishNode.addComponent(cc.Animation);var i=cc.find("panelFreeae",t.csbRoot),n=cc.find("panelShop",t.csbRoot),s=cc.find("panelLottery",t.csbRoot),c=cc.find("panelLeft",t.csbRoot),a=cc.find("panelMenu",t.csbRoot);return i.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),n.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),s.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),c.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),a.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),t.panelLock.on(cc.Node.EventType.TOUCH_END,t.onBtnLock,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbRoot),this.guidePanel.active=!1,this.initFish(),this.addBattery(),this.labString="\u524d\u65b9\u53d1\u73b0\u9ec4\u91d1\u9c7c\uff0c\u5feb\u4f7f\u7528\u9501\u5b9a\u6280\u80fd\u5411\u5b83\u5f00\u706b\uff01",this.warnString="\u8bf7\u60a8\u6309\u7167\u6211\u7684\u6307\u5f15\u64cd\u4f5c\uff0c\u4e0d\u8981\u7740\u6025\uff0c\u5b8c\u6210\u5f15\u5bfc\u5f88\u5feb\u5c31\u53ef\u4ee5\u6e38\u620f\u4e86\uff01",this.schedule(this.onLabelAction,.05,50,0),this.guidePanel.active=!0,c.evtCenter.on(a.evts.EVT_NEWBIE_GOLD_FISH,this.onEventNewBieFishDie,this)},t.prototype.onDestroy=function(){c.evtCenter.off(a.evts.EVT_NEWBIE_GOLD_FISH,this.onEventNewBieFishDie,this)},t.prototype.showClipLayer=function(){},t.prototype.onLabelAction=function(){this.labTxt.color=cc.color(255,255,255);var e=this.labString.substr(0,this.startLen);this.labTxt.getComponent(cc.Label).string=e,this.startLen=this.startLen+this.stepSize,this.startLen>200&&this.unschedule(this.onLabelAction)},t.prototype.initFish=function(){this.scheduleOnce(this.delayForTouch,3),this.scheduleOnce(this.delayShowHand,2),this.fishSprite=c.utils.createSprite("fish_1209_01","img/fish/fish_1209",!0),this.fishSprite.addComponent(cc.Animation),this.fishNode.addChild(this.fishSprite),this.fishSprite.setScale(.2);var e=c.utils.getFishNormalAnimation(1209),t=this.fishSprite.getComponent(cc.Animation);t.addClip(e),t.play(e.name).wrapMode=cc.WrapMode.Loop,this.fishSprite.runAction(cc.sequence(cc.scaleTo(3,1),cc.callFunc(this.fishSwim,this)))},t.prototype.fishSwim=function(){},t.prototype.onBtnTouchPanel=function(e){this.labTxt.color=cc.color(255,255,0),this.labTxt.getComponent(cc.Label).string=this.warnString,this.guidePanel.active=!0,this.unschedule(this.showTextTip),this.scheduleOnce(this.showTextTip,2)},t.prototype.showTextTip=function(){this.labTxt.getComponent(cc.Label).string=this.labString,this.labTxt.color=cc.color(255,255,255)},t.prototype.delayForTouch=function(){this.touchPanel.active=!0,this.touchMask.active=!1},t.prototype.delayShowHand=function(){this.guideHand.active=!0;var e=new r.NewbieArrow;this.guideHand.addChild(e)},t.prototype.onBtnLock=function(e){cc.audioEngine.playEffect(o.AssetsManager.getRes("sound/button"),!1),this.panelLock.color=cc.color(5,5,5),this.guidePanel.active=!1;var t=this.fishNode.getPosition();this.guideHand.stopAllActions(),this.guideHand.runAction(cc.moveTo(.5,t)),null==this.fishLock&&(this.fishLock=c.utils.createSprite("fish_eff_lock_crosshairs","skill_lock"),this.fishLock.setPosition(this.fishSprite.getPosition()),this.fishSprite.addChild(this.fishLock,20,"100"),this.fishLock.setScale(10),this.fishLock.runAction(cc.spawn(cc.scaleTo(.4,1).easing(cc.easeIn(2)),cc.repeat(cc.rotateBy(3,180),100)))),this.scheduleOnce(this.reShowGuidePanel,1)},t.prototype.onTouchEnded=function(e){var t=this.fishSprite.convertToNodeSpaceAR(e.getLocation());this.fishSprite.getBoundingBox().contains(t)?(this.guidePanel.active=!1,this.guideHand.active=!1,this.batteryFire(),this.fishSprite.runAction(cc.repeat(cc.sequence(cc.tintTo(.2,255,0,0),cc.tintTo(.2,255,255,255)),15)),this.scheduleOnce(this.delayRequestReward,.6)):this.onBtnTouchPanel(null)},t.prototype.onEventNewBieFishDie=function(){c.evtCenter.emit(a.evts.EVT_NEWBIE_SHOW_BATTERY,s.model.table.seatId),this.battery.stopAllActions(),this.battery.removeFromParent(!0),this.battery=null,cc.audioEngine.playEffect(o.AssetsManager.getRes("sound/1209_die"),!1),this.fishSprite.runAction(cc.sequence(cc.delayTime(.5),cc.spawn(cc.rotateBy(.5,-270),cc.scaleTo(.5,.5),cc.fadeOut(.5))));var e=c.utils.getRelativeSeat(s.model.table.seatId),t=c.utils.getSwingPosition(e);c.effect.goldWheel(this.node,t,Math.floor(500));var i=c.utils.getSeatPosition(e);c.effect.goldFly(this.node,3,165,cc.v2(.5*cc.winSize.width,.5*cc.winSize.height+100),i,s.ME.userId,500),c.effect.shakeScene1(0),this.schedule(this.delayShowNextStep,2)},t.prototype.reShowGuidePanel=function(){this.labString="\u6f02\u4eae\uff01\u73b0\u5728\u70b9\u51fb\u9ec4\u91d1\u9c7c\uff0c\u5bf9\u5b83\u5f00\u706b\uff01",this.schedule(this.onLabelAction,.05,50,0),this.guidePanel.active=!0,this.touchPanel.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this)},t.prototype.delayRequestReward=function(){s.model.guide.requestNewbieReward(3)},t.prototype.delayShowNextStep=function(){c.evtCenter.emit(a.evts.EVT_SHOW_NEWBIE_STEP,4,s.model.table.seatId)},t.prototype.addBattery=function(){this.battery=new h.NewbieBattery(s.ME.playerInfo),this.battery.onEnter(),this.node.addChild(this.battery)},t.prototype.batteryFire=function(){this.schedule(this.addBullet,.25,25,0),this.battery.onEventFireBattery(s.ME.userId),this.battery.onEventSetLock(s.ME.userId,!0),this.battery.onEventRotateBattery(s.ME.userId,cc.v2(568,420))},t.prototype.addBullet=function(){var e=(new cc.Node).addComponent(n.NewbieBullet);e.ctor(s.model.table.seatId),this.node.addChild(e.node),cc.audioEngine.playEffect(o.AssetsManager.getRes("sound/fire_laser_1"),!1)},t}(cc.Component);i.NewbieStep3=d,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_newbie_arrow":"fish_newbie_arrow","./fish_newbie_battery":"fish_newbie_battery","./fish_newbie_bullet":"fish_newbie_bullet"}],fish_newbie_step4:[function(e,t,i){"use strict";cc._RF.push(t,"cab35yt7HtK36A+P3gE4Dsz","fish_newbie_step4"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("./fish_newbie_arrow"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../model/fish_model"),r=e("../../fish"),h=function(e){function t(){var t=e.call(this)||this;t.csbRoot=null,t.labTxt=null,t.touchPanel=null,t.panelGunUp=null,t.panelLottery=null,t.hand=null,t.labString="",t.warnString="",t.startLen=4,t.stepSize=4,t.guideHand=null,t.guidePanel=null,t.panelLock=null,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/newbie_guide_step4")),r.fish.adapterScreen(t.csbRoot),t.labTxt=cc.find("guidePanel/labTxt",t.csbRoot),t.touchPanel=cc.find("touchPanel",t.csbRoot),t.panelGunUp=cc.find("panelGunUp",t.csbRoot),t.panelLottery=cc.find("panel_Lottery/panelLottery",t.csbRoot),t.guideHand=cc.find("guideHand",t.csbRoot),t.guidePanel=cc.find("guidePanel",t.csbRoot),t.panelLock=cc.find("panelLock",t.csbRoot);var i=cc.find("panelFreeae",t.csbRoot),s=cc.find("panelShop",t.csbRoot),o=cc.find("panelLeft",t.csbRoot),c=cc.find("panelMenu",t.csbRoot);return i.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),s.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),o.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),c.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),t.touchPanel.on(cc.Node.EventType.TOUCH_END,t.onBtnTouchPanel,t),t.panelLottery.on(cc.Node.EventType.TOUCH_END,t.onBtnLottery,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbRoot),this.csbRoot.getComponent(cc.Animation).play("show"),this.scheduleOnce(this.initNewBieStatus,.5),this.labString="\u6355\u83b7\u9ec4\u91d1\u9c7c\u5c31\u53ef\u4ee5\u62bd\u5956\u4e86\u54e6\uff0c\u5feb\u8bd5\u8bd5\u4f60\u7684\u8fd0\u6c14\u5427\uff01",this.warnString="\u8bf7\u60a8\u6309\u7167\u6211\u7684\u6307\u5f15\u64cd\u4f5c\uff0c\u4e0d\u8981\u7740\u6025\uff0c\u5b8c\u6210\u5f15\u5bfc\u5f88\u5feb\u5c31\u53ef\u4ee5\u6e38\u620f\u4e86\uff01"},t.prototype.initNewBieStatus=function(){this.guidePanel.active=!0,this.schedule(this.onLabelAction,.05,50,0),this.delayShowHand()},t.prototype.onDestroy=function(){},t.prototype.showClipLayer=function(){},t.prototype.onLabelAction=function(){var e=this.labString.substr(0,this.startLen);this.labTxt.getComponent(cc.Label).string=e,this.startLen=this.startLen+this.stepSize,this.startLen>200&&this.unschedule(this.onLabelAction)},t.prototype.onBtnTouchPanel=function(e){this.labTxt.color=cc.color(255,255,0),this.labTxt.getComponent(cc.Label).string=this.warnString,this.guidePanel.active=!0,this.unschedule(this.showTextTip),this.scheduleOnce(this.showTextTip,2)},t.prototype.showTextTip=function(){this.labTxt.getComponent(cc.Label).string=this.labString,this.labTxt.color=cc.color(255,255,255)},t.prototype.delayForTouch=function(){this.panelLottery.active=!0,this.guideHand.active=!0;var e=new s.NewbieArrow;this.guideHand.addChild(e)},t.prototype.delayShowHand=function(){this.guideHand.active=!0;var e=new s.NewbieArrow;this.guideHand.addChild(e)},t.prototype.onBtnLottery=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.guideHand.active=!1,this.guidePanel.active=!1,o.evtCenter.emit(c.evts.EVT_SHOW_NEWBIE_STEP,5,a.model.table.seatId)},t}(cc.Component);i.NewbieStep4=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_newbie_arrow":"fish_newbie_arrow"}],fish_newbie_step5:[function(e,t,i){"use strict";cc._RF.push(t,"c43ad+rqpJIO7A1ObqZbnWK","fish_newbie_step5"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("./fish_newbie_arrow"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../model/fish_model"),r=e("../lottery/fish_lottery_card"),h=e("../../buffer/fish_buffer"),l=e("../../fish"),d=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.touchMask=null,t.curNeedFishNum=5,t.groupFishNotEnough=null,t.groupContinue=null,t.groupHigher=null,t.groupProgress=null,t.fntJackpot=null,t.fntPoolNum=null,t.label_curLotteryName=null,t.btnLottery=null,t.SpBtnLottery=null,t.btnShowFish=null,t.label_showfish=null,t.endNode=null,t.btnClose=null,t.groupCardBtn=null,t.btnLottery_1=null,t.fntCountDown=null,t._countTime=null,t.potLoadingBar=null,t.fishLoadingBar=null,t.fntFishNum=null,t.guideHand=null,t.hand=null,t.labString="",t.warnString="",t.startLen=4,t.stepSize=4,t.tag=0,t.level=0,t.grade=0,t.btnArr=[],t.btnTip=[],t.arrTip=[],t.labelBtn=[],t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/newbie_guide_step5")),l.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.touchMask=cc.find("touchMask",this.csbRoot),this.groupFishNotEnough=cc.find("anchor/panel_rightdown/groupFishNotEnough",this.csbRoot),this.groupContinue=cc.find("anchor/panel_rightdown/groupFishNotEnough",this.csbRoot),this.groupHigher=cc.find("anchor/panel_rightdown/groupHigher",this.csbRoot),this.groupProgress=cc.find("anchor/panel_rightdown/groupProgress",this.csbRoot),this.fntJackpot=cc.find("anchor/panel_leftdown/fntJackpot",this.csbRoot),this.fntPoolNum=cc.find("anchor/panel_rightdown/groupProgress/fntPoolNum",this.csbRoot),this.label_curLotteryName=cc.find("anchor/panel_rightdown/groupProgress/label_curLotteryName",this.csbRoot),this.btnLottery=cc.find("anchor/panel_rightdown/btnLottery",this.csbRoot),this.SpBtnLottery=cc.find("anchor/panel_rightdown/btnLottery/SpBtnLottery",this.csbRoot),this.btnShowFish=cc.find("anchor/panel_rightdown/btnShowFish",this.csbRoot),this.label_showfish=cc.find("anchor/panel_rightdown/label_showfish",this.csbRoot),this.endNode=cc.find("anchor/endNode",this.csbRoot),this.btnClose=cc.find("anchor/panel_bg/btnClose",this.csbRoot),this.groupCardBtn=cc.find("anchor/groupCardBtn",this.csbRoot),this.btnLottery_1=cc.find("anchor/panel_middle/groupBtn/nodeNormal/btnLottery_1",this.csbRoot),this.fntCountDown=cc.find("anchor/title_node/fntCountDown",this.csbRoot),this.potLoadingBar=cc.find("anchor/panel_rightdown/groupProgress/potLoadingBar",this.csbRoot),this.fishLoadingBar=cc.find("anchor/panel_rightdown/groupFishNotEnough/fishLoadingBar",this.csbRoot),this.fntFishNum=cc.find("anchor/panel_rightdown/groupFishNotEnough/fntFishNum",this.csbRoot),this.guideHand=cc.find("anchor/guideHand",this.csbRoot),this.btnClose.on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this),this.btnLottery.on(cc.Node.EventType.TOUCH_END,this.onBtnLottery,this),cc.find("anchor/endNode/endingBtn",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onClickEndingBtn,this),this.labString="\u524d\u65b9\u53d1\u73b0\u9ec4\u91d1\u9c7c\uff01\u5feb\u4f7f\u7528\u9501\u5b9a\u6280\u80fd\u5411\u5b83\u5f00\u706b\uff01",this.warnString="\u8bf7\u60a8\u6309\u7167\u6211\u7684\u6307\u5f15\u64cd\u4f5c\uff01\u4e0d\u8981\u7740\u6025\uff0c\u5b8c\u6210\u5f15\u5bfc\u5f88\u5feb\u5c31\u53ef\u4ee5\u6e38\u620f\u4e86\uff01",this.scheduleOnce(this.delayForGuide,1),this.fntCountDown.active=!1,this.endNode.active=!1,this.guideHand.active=!0;var e=new s.NewbieArrow;this.guideHand.addChild(e);var t=cc.find("anchor/panel_middle/groupBtn/nodeNormal/btnTip_1",this.csbRoot);this.btnTip.push(t);var i=cc.find("anchor/panel_middle/groupBtn/node_arrow/arrow_1",this.csbRoot);this.arrTip.push(i);var a=cc.find("anchor/panel_middle/groupBtn/nodeNormal/label_btn_1",this.csbRoot);this.labelBtn.push(a);var r=cc.find("anchor/panel_middle/groupBtn/nodeNormal/btnLottery_1",this.csbRoot);r.getComponent(cc.Button).enabled=!1,this.btnArr.push(r),t.active=!0,t.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(10/30,25),cc.fadeTo(10/30,255))));var h=this.csbRoot.getComponent(cc.Animation);h.play("animate_card6"),h.on(cc.Animation.EventType.FINISHED,function(){h.targetOff(this),this.touchMask.active=!1}.bind(this),this),this.showCradPanelInit(1),o.evtCenter.on(c.evts.EVT_NEWBIE_LOTTERY_SUCCESS,this.onEventLotteryResult,this),o.evtCenter.on(c.evts.EVT_LOTTERY_SHOWCARD,this.onEventLotteryShowCard,this)},t.prototype.delayForGuide=function(){this.btnLottery.getComponent(cc.Button).enabled=!0},t.prototype.showCradPanelInit=function(e){var t=n.AssetsManager.getRes("img/atlas/lottery"),i=n.AssetsManager.getRes("img/atlas/common"),s=a.model.lottery.lotteryInfo.getCurGradeInfo(e);this.fntJackpot.getComponent(cc.Label).string=500..toString();for(var o=1;o<=6;o++){var c=s["prize"+o],r=this.getPrizeNameById(c),h=cc.find("anchor/panel_middle/card_"+o+"/prizeName_"+o,this.csbRoot),l=cc.find("anchor/panel_middle/card_"+o+"/prizeNum_"+o,this.csbRoot),d=cc.find("anchor/panel_middle/prizeNode_"+o+"/prizeIcon_"+o,this.csbRoot),_=cc.find("anchor/panel_middle/prizeNode_"+o+"/prizeFrame_"+o,this.csbRoot),f="prize"+o+"_number",p="prize"+o+"_icon";l.getComponent(cc.Label).string=s[f],d.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame(s[p].split(".")[0]),h.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(r.split(".")[0]),c>="3101"&&c<="3110"?(d.setScale(.8),_.active=!0):(d.setScale(1),_.active=!1)}this.btnArr[0].getComponent(cc.Button).normalSprite=this.btnArr[0].getComponent(cc.Button).pressedSprite,this.arrTip[0].active=!0,this.labelBtn[0].getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_choujiang_name_1")},t.prototype.onBtnLottery=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.guideHand.active=!1,a.model.guide.requestNewbieReward(4)},t.prototype.onEventLotteryResult=function(e,t,i){if(0==e&&i==a.ME.userId){this._refreshBtn(!1),this.csbRoot.stopAllActions();var s=this.csbRoot.getComponent(cc.Animation);s.play("lottery"),s.on(cc.Animation.EventType.FINISHED,function(){s.targetOff(this),this.showCountDown(),this.addLotteryCard()}.bind(this),this),this.level=t.level;var o=t.prize;this.grade=0;for(var c=1;c<=6;c++)if(o=="prize"+c){this.grade=c;break}cc.log("this.level:"+this.level),cc.log("this.grade:"+this.grade),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/shuffle"),!1)}},t.prototype.onClickCardBtn=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.unscheduleAllCallbacks();var t=e.currentTarget.name;this.tag=parseInt(t.split("_")[1]);var i=this.groupCardBtn.getChildByName(this.tag.toString()).getComponent(r.LotteryCard);null!=i&&(e.currentTarget.active=!1,e.currentTarget.getComponent(cc.Button).enabled=!1,this.fntCountDown.active=!1,i.cardRunAction(1),i.cardResetData(this.tag,this.level,this.grade))},t.prototype.onEventLotteryShowCard=function(e){for(var t=n.AssetsManager.getRes("img/atlas/lottery"),i=n.AssetsManager.getRes("img/atlas/common"),s=this.level+1,o=a.model.lottery.lotteryInfo.getCurGradeInfo(s),c="0",h="prize"+this.grade+"_icon",l=1;l<=6;l++){var d=this.groupCardBtn.getChildByName(l.toString()).getComponent(r.LotteryCard),_=this.groupCardBtn.getChildByName("cardBtn_"+l);if(_.active=!1,_.getComponent(cc.Button).enabled=!1,l!=e){var f=cc.find("reward_6/rewardIcon",d.csbNode),p=cc.find("reward_6/rewardNum",d.csbNode),u=cc.find("reward_6/reward_name",d.csbNode),m=cc.find("reward_6/rewardFrame",d.csbNode);l==this.grade?(h="prize"+e+"_icon",c=o["prize"+e],f.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame(o[h].split(".")[0]),p.getComponent(cc.Label).string=o["prize"+e+"_number"],u.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(this.getPrizeNameById(c)),c>="3101"&&c<="3110"?(f.setScale(.6),m.setScale(.6),m.active=!0):(f.setScale(.7),m.active=!1)):(h="prize"+l+"_icon",c=o["prize"+l],f.getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame(o[h].split(".")[0]),p.getComponent(cc.Label).string=o["prize"+l+"_number"],u.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(this.getPrizeNameById(c)),c>="3101"&&c<="3110"?(f.setScale(.6),m.setScale(.6),m.active=!0):(f.setScale(.7),m.active=!1))}}this.scheduleOnce(this.otherCardFlip,3)},t.prototype.otherCardFlip=function(){for(var e=1;e<=6;e++){var t=this.groupCardBtn.getChildByName(e.toString()).getComponent(r.LotteryCard),i=this.groupCardBtn.getChildByName("cardBtn_"+e);i.active=!1,i.getComponent(cc.Button).enabled=!1,e!=this.tag&&t.cardRunAction(2)}this.countDown(),this.endNode.active=!0},t.prototype.showCountDown=function(){this._countTime=10,this.fntCountDown.active=!0,this.fntCountDown.getComponent(cc.Label).string=this._countTime,this.schedule(this._updateLabel,1)},t.prototype._updateLabel=function(){if(this._countTime>1)this._countTime--,this.fntCountDown.getComponent(cc.Label).string=this._countTime;else{this.fntCountDown.active=!1,this.unscheduleAllCallbacks();var e=Math.floor(6*Math.random()+1);this.tag=e;var t=this.groupCardBtn.getChildByName(e.toString()).getComponent(r.LotteryCard),i=this.groupCardBtn.getChildByName("cardBtn_"+e);null!=t&&(i.active=!1,i.getComponent(cc.Button).enabled=!1,this.fntCountDown.active=!1,t.cardRunAction(1),t.cardResetData(e,this.level,this.grade))}},t.prototype.countDown=function(){this._countTime=10,this.fntCountDown.active=!0,this.fntCountDown.getComponent(cc.Label).string=this._countTime,this.schedule(this._update,1)},t.prototype._update=function(){this._countTime>1?(this._countTime--,this.fntCountDown.getComponent(cc.Label).string=this._countTime):(this.fntCountDown.active=!1,this.unscheduleAllCallbacks(),this.scheduleOnce(this._showCardEffect))},t.prototype.onClickEndingBtn=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.fntCountDown.active=!1,this.unscheduleAllCallbacks(),this.scheduleOnce(this._showCardEffect)},t.prototype.getPrizeNameById=function(e){switch(e){case"101":return"fish_choujiang_gold";case"102":return"fish_choujiang_zuanshi";case"103":return"fish_choujiang_duihuanquan";case"104":return"fish_choujiang_yuquan";case"3104":return"fish_choujiang_kuangbao";case"3106":return"fish_choujiang_jiguang1";case"3107":return"fish_choujiang_jiguang2";case"3108":return"fish_choujiang_jiguang3";case"3109":return"fish_choujiang_jiguang4";case"3110":return"fish_choujiang_paodan"}},t.prototype._refreshBtn=function(e){for(var t=0;t<this.btnArr.length;t++)this.btnArr[t].getComponent(cc.Button).enabled=e;this.btnLottery.getComponent(cc.Button).enabled=e,this.btnShowFish.getComponent(cc.Button).enabled=e,this.btnClose.getComponent(cc.Button).enabled=e},t.prototype._showCardEffect=function(){this.csbRoot.active=!1;var e=this.level+1,t=a.model.lottery.lotteryInfo.getCurGradeInfo(e),i=new cc.Node;this.node.addChild(i),i.setPosition(cc.v2(.5*cc.winSize.width,.5*cc.winSize.height));var s="prize"+this.grade+"_icon",r=t["prize"+this.grade],l=o.utils.createSprite("fish_choujiang_kuang","game_common");l.setScale(.76,.83);var d=o.utils.createSprite(t[s].split(".")[0],"common"),_=t["prize"+this.grade+"_number"],f=(new cc.Node).addComponent(cc.Label);f.font=n.AssetsManager.getRes("img/font/fnt06"),f.string=_;var p=o.utils.createSprite(this.getPrizeNameById(r),"lottery"),u=o.utils.createSprite("icon_head_frame","scale9_8888");i.addChild(u),i.addChild(l),i.addChild(d),i.addChild(f.node),i.addChild(p),f.node.y=-77,p.setPosition(cc.v2(0,82)),r>="3101"&&r<="3110"?(d.setScale(.7),u.setScale(.7),u.active=!0):(d.setScale(.8),u.active=!1),101==r?h.buffer.pushGold(a.ME.userId,parseInt(_),1):102==r?h.buffer.pushDiamond(a.ME.userId,parseInt(_),1):h.buffer.pushItem(a.ME.userId,r,_,1);var m=o.utils.getSeatPosition(o.utils.getRelativeSeat(a.model.table.seatId));i.runAction(cc.sequence(cc.delayTime(1.2),cc.callFunc(function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/fly_item"),!1)}.bind(this)),cc.spawn(cc.scaleTo(11/30,.8),cc.moveBy(11/30,cc.v2(-40,80))),cc.spawn(cc.scaleTo(10/30,.5).easing(cc.easeIn(1)),cc.rotateBy(10/30,90).easing(cc.easeIn(1)),cc.moveTo(10/30,m).easing(cc.easeIn(1))),cc.callFunc(function(){o.evtCenter.emit(c.evts.EVT_NEWBIE_GUIDE_SUCCESS)}),cc.removeSelf()))},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),o.evtCenter.emit(c.evts.EVT_REMOVE_LOTTERY)},t.prototype.onDestroy=function(){this.btnArr=[],this.btnTip=[],this.arrTip=[],this.labelBtn=[],o.evtCenter.off(c.evts.EVT_NEWBIE_LOTTERY_SUCCESS,this.onEventLotteryResult,this),o.evtCenter.off(c.evts.EVT_LOTTERY_SHOWCARD,this.onEventLotteryShowCard,this)},t.prototype.addLotteryCard=function(){for(var e=1;e<=6;e++){var t=cc.find("anchor/groupCardBtn/cardBtn_"+e,this.csbRoot);t.on(cc.Node.EventType.TOUCH_END,this.onClickCardBtn,this);var i=(new cc.Node).addComponent(r.LotteryCard);this.groupCardBtn.addChild(i.node,0,e.toString()),i.node.setPosition(t.getPosition())}},t}(cc.Component);i.NewbieStep5=d,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../lottery/fish_lottery_card":"fish_lottery_card","./fish_newbie_arrow":"fish_newbie_arrow"}],fish_newbie_task_game:[function(e,t,i){"use strict";cc._RF.push(t,"17a4bua9slHtJSZrcRJIijP","fish_newbie_task_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../fish"),r=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.archor=null,t.lab_task_des=null,t.fntProgress=null,t.fnrReward=null,t.sp_reward=null,t.complete=null,t.taskProgress1=0,t.taskProgress2=0,t.taskProgress3=0,t.taskProgress4=0,t.taskProgress5=0,t.nodeArrow1=null,t.nodeArrow2=null,t.guidePanel=null,t.labTxt=null,t.stepSize=4,t.startLen=4,t.taskInfo=null,t.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/newbie_task")),a.fish.adapterScreen(t.csbRoot),t.archor=cc.find("archor",t.csbRoot),t.lab_task_des=cc.find("archor/main_node/lab_task_des",t.csbRoot),t.fntProgress=cc.find("archor/main_node/fntProgress",t.csbRoot),t.fnrReward=cc.find("archor/main_node/fnrReward",t.csbRoot),t.sp_reward=cc.find("archor/main_node/sp_reward",t.csbRoot),t.complete=cc.find("archor/main_node/complete",t.csbRoot),t.nodeArrow1=cc.find("nodeArrow1",t.csbRoot),t.nodeArrow2=cc.find("nodeArrow2",t.csbRoot),t.guidePanel=cc.find("guidePanel",t.csbRoot),t.labTxt=cc.find("guidePanel/labTxt",t.csbRoot),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbRoot),s.model.guide.missionId>=6401&&s.model.guide.missionId<=6405&&(6401==s.model.guide.missionId?this.taskProgress1=s.model.guide.progress:6402==s.model.guide.missionId?this.taskProgress2=s.ME.playerInfo.maxWeapon.multiple:6403==s.model.guide.missionId?this.taskProgress3=s.model.guide.progress:6404==s.model.guide.missionId?this.taskProgress4=s.model.guide.progress:6405==s.model.guide.missionId&&(this.taskProgress5=s.model.guide.progress),s.model.guide.isMissionFinish&&!s.model.guide.isrewarded?s.model.guide.requestNewbieTaskReward(s.model.guide.missionId):this.delayInitTaskPanel(!1),o.evtCenter.on(c.evts.EVT_CATCH_SUCCESS,this.onEventCatchSuccess,this),o.evtCenter.on(c.evts.EVT_WEAPON_UPGRADE,this.onEventGunUpSuccess,this),o.evtCenter.on(c.evts.EVT_SET_LOCK_STAT,this.onEventUseLockSuccess,this),o.evtCenter.on(c.evts.EVT_SET_FROZEN,this.onEventUseFreezeSuccess,this),o.evtCenter.on(c.evts.EVT_SHOW_NEWBIE_TASK_PANEL,this.showGuidePanel,this))},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_CATCH_SUCCESS,this.onEventCatchSuccess,this),o.evtCenter.off(c.evts.EVT_WEAPON_UPGRADE,this.onEventGunUpSuccess,this),o.evtCenter.off(c.evts.EVT_SET_LOCK_STAT,this.onEventUseLockSuccess,this),o.evtCenter.off(c.evts.EVT_SET_FROZEN,this.onEventUseFreezeSuccess,this),o.evtCenter.off(c.evts.EVT_SHOW_NEWBIE_TASK_PANEL,this.showGuidePanel,this)},t.prototype.delayInitTaskPanel=function(e){e?(this.unschedule(this.initTaskPanel),this.scheduleOnce(this.initTaskPanel,3)):this.initTaskPanelBanner()},t.prototype.showGuidePanel=function(){this.guidePanel.active=!0,this.labString="\u4f60\u771f\u68d2\uff01\u4ece\u6b64\u4f60\u5c31\u662f\u6355\u9c7c\u8fbe\u4eba\u4e86\uff01\u4ee5\u540e\u6bcf\u5929\u90fd\u8981\u6765\u9886\u5404\u79cd\u5956\u52b1\u54e6~",this.schedule(this.onLabelAction,.05,50,0),this.scheduleOnce(this.delayRemovePanel,4)},t.prototype.onLabelAction=function(){var e=this.labString.substr(0,this.startLen);this.labTxt.getComponent(cc.Label).string=e,this.startLen=this.startLen+this.stepSize,this.startLen>200&&this.unschedule(this.onLabelAction)},t.prototype.delayRemovePanel=function(){this.node.removeFromParent(!0),this.destroy()},t.prototype.removeSelfPanel=function(){this.node.removeFromParent(!0),this.destroy()},t.prototype.initTaskPanel=function(){var e=n.AssetsManager.getRes("img/atlas/new_hand"),t=n.AssetsManager.getRes("img/atlas/common");this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("show"),this.taskInfo=o.configTable.newbie_task[s.model.guide.missionId],this.sp_reward.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(this.taskInfo.reward_icon.split(".")[0]),this.fnrReward.getComponent(cc.Label).string="x"+this.taskInfo.reward_number,this.lab_task_des.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_newbie_"+s.model.guide.missionId),6402!=s.model.guide.missionId?this.fntProgress.getComponent(cc.Label).string=s.model.guide.progress+"/"+this.taskInfo.number:this.fntProgress.getComponent(cc.Label).string=s.ME.playerInfo.maxWeapon.multiple+"/"+this.taskInfo.number,6403==s.model.guide.missionId?this.showArrowAction("nodeArrow2"):6404==s.model.guide.missionId&&this.showArrowAction("nodeArrow1")},t.prototype.initTaskPanelBanner=function(){var e=n.AssetsManager.getRes("img/atlas/new_hand"),t=n.AssetsManager.getRes("img/atlas/common"),i=this.csbRoot.getComponent(cc.Animation);i.play("banner"),i.on(cc.Animation.EventType.FINISHED,function(){i.targetOff(this),i.play("show")}.bind(this),this),this.taskInfo=o.configTable.newbie_task[s.model.guide.missionId],this.sp_reward.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(this.taskInfo.reward_icon.split(".")[0]),this.fnrReward.getComponent(cc.Label).string="x"+this.taskInfo.reward_number,this.lab_task_des.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_newbie_"+s.model.guide.missionId),6402!=s.model.guide.missionId?this.fntProgress.getComponent(cc.Label).string=s.model.guide.progress+"/"+this.taskInfo.number:this.fntProgress.getComponent(cc.Label).string=s.ME.playerInfo.maxWeapon.multiple+"/"+this.taskInfo.number,6403==s.model.guide.missionId?this.showArrowAction("nodeArrow2"):6404==s.model.guide.missionId&&this.showArrowAction("nodeArrow1")},t.prototype.onEventCatchSuccess=function(e,t,i,n){if(e==s.model.table.seatId)if(6401==s.model.guide.missionId)this.taskProgress1++,this.taskProgress1<5?this.fntProgress.getComponent(cc.Label).string=this.taskProgress1+"/"+this.taskInfo.number:5==this.taskProgress1&&(this.showComplete(),this.fntProgress.getComponent(cc.Label).string=this.taskProgress1+"/"+this.taskInfo.number);else if(6405==s.model.guide.missionId){var o=s.model.table.getFishInfoByFishId(i);if(!o)return;3!=o.fishType&&5!=o.fishType||(this.taskProgress5++,this.fntProgress.getComponent(cc.Label).string=this.taskProgress5+"/"+this.taskInfo.number,2==this.taskProgress5&&(this.showComplete(),this.fntProgress.getComponent(cc.Label).string=this.taskProgress5+"/"+this.taskInfo.number))}},t.prototype.showArrowAction=function(e){this.nodeArrow1.opacity=0,this.nodeArrow2.opacity=0;var t=this[e].getPosition(),i=cc.v2(t.x,t.y+15),n=cc.v2(t.x,t.y-15);this[e].runAction(cc.sequence(cc.delayTime(1),cc.fadeIn(4/30),cc.repeat(cc.sequence(cc.moveTo(.4,i),cc.moveTo(.2,n)),30),cc.fadeOut(10/30)))},t.prototype.onEventGunUpSuccess=function(e,t,i){if(t==s.model.table.seatId){var n=s.model.table.getPlayerInfo(t);n.maxWeapon.multiple<8?this.fntProgress.getComponent(cc.Label).string=n.maxWeapon.multiple+"/"+this.taskInfo.number:8==n.maxWeapon.multiple&&(this.showComplete(),this.fntProgress.getComponent(cc.Label).string=n.maxWeapon.multiple+"/"+this.taskInfo.number)}},t.prototype.onEventUseLockSuccess=function(e,t){t&&e==s.model.table.seatId&&6403==s.model.guide.missionId&&(this.fntProgress.getComponent(cc.Label).string="1/1",this.showComplete(),this.nodeArrow2.stopAllActions(),this.nodeArrow2.opacity=0)},t.prototype.onEventUseFreezeSuccess=function(e,t,i){t==s.model.table.seatId&&6404==s.model.guide.missionId&&(this.fntProgress.getComponent(cc.Label).string="1/1",this.showComplete(),this.nodeArrow1.stopAllActions(),this.nodeArrow1.opacity=0)},t.prototype.hideTaskPanel=function(e){var t=this.csbRoot.getComponent(cc.Animation);t.play("hide"),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.complete.opacity=0,s.model.guide.requestNewbieTaskReward(s.model.guide.missionId)}.bind(this),this)},t.prototype.showComplete=function(){this.complete.setScale(2),this.complete.runAction(cc.sequence(cc.spawn(cc.fadeIn(.5),cc.scaleTo(.5,.8)),cc.scaleTo(.2,1.2),cc.scaleTo(.1,1),cc.callFunc(this.hideTaskPanel,this)))},t}(cc.Component);i.NewbieTaskGame=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_noble_gift_everyday:[function(e,t,i){"use strict";cc._RF.push(t,"6329aQUG89Bt6onw1K1wM9z","fish_noble_gift_everyday"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_msg_types"),c=e("../../model/fish_model"),a=e("../../scene/fish_scene_login"),r=e("../../logic/fish_tcp"),h=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.nobleOverPlusTxt=null,t.nodePos1=null,t.nodePos2=null,t.nodePos3=null,t.Node_1=null,t.nodePossp=null,t.nodePos1sp=null,t.nodePos2sp=null,t.nodePos3sp=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/reward_noble_everyday")),this.node.addChild(this.csbRoot),this.nobleOverPlusTxt=cc.find("anthor/Node_1/nobleOverPlusTxt",this.csbRoot),this.nodePos1=cc.find("anthor/nodePos1",this.csbRoot),this.nodePos2=cc.find("anthor/nodePos2",this.csbRoot),this.nodePos3=cc.find("anthor/nodePos3",this.csbRoot),this.Node_1=cc.find("anthor/Node_1",this.csbRoot),this.nodePossp=cc.find("anthor/Node_2/nodePossp",this.csbRoot),this.nodePos1sp=cc.find("anthor/Node_2/nodePos1sp",this.csbRoot),this.nodePos2sp=cc.find("anthor/Node_2/nodePos2sp",this.csbRoot),this.nodePos3sp=cc.find("anthor/Node_2/nodePos3sp",this.csbRoot),this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("show"),this._onShowInfoByGdata(),s.msgCenter.on(o.msgs.CMD_FISH_DAILY_SIGN,this.onNobleReward,this)},t.prototype.onDestroy=function(){s.msgCenter.off(o.msgs.CMD_FISH_DAILY_SIGN,this.onNobleReward,this)},t.prototype.onBtnNobleReward=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t={cmd:"month_checkin_fish",params:{action:"getNobleReward",gameId:9999,userId:c.ME.userId,clientId:a.AccountInfo.clientId}};r.tcp.send(t)},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this._closeNobleEverydayAnimotion()},t.prototype.onNobleReward=function(e){"getNobleReward"===e.action&&0==e.code&&this.getRewards()},t.prototype._onShowInfoByGdata=function(){var e=n.AssetsManager.getRes("img/altas/common");c.ME.isMember&&(this.nobleOverPlusTxt.getComponent(cc.Label).string="\u8d35\u65cf\u8eab\u4efd\u5269\u4f59"+c.ME.remainDays+"\u5929"),c.ME.vipLevel>=5?this.nodePossp.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_game_ui_fury2"):this.nodePossp.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_game_ui_fury1")},t.prototype._closeNobleEverydayAnimotion=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var e=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),e.play("hide"),e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),this.node.removeFromParent(!0),this.destroy()}.bind(this),this)},t.prototype.getRewards=function(){this.scheduleOnce(this.removePanel,1),this.Node_1.active=!1;for(var e=this.nodePos1.getPosition(),t=this.nodePos2.getPosition(),i=this.nodePos3.getPosition(),n=0;n<4;n++)0==n?this.nodePos1sp.runAction(cc.sequence(cc.spawn(cc.moveTo(1,e),cc.scaleTo(.7,.5)),cc.callFunc(function(e){}),cc.removeSelf())):1==n?this.nodePos2sp.runAction(cc.sequence(cc.spawn(cc.moveTo(1,t),cc.scaleTo(.7,.5)),cc.callFunc(function(e){}),cc.removeSelf())):(this.nodePossp.runAction(cc.sequence(cc.spawn(cc.moveTo(1,i),cc.scaleTo(.7,.5)),cc.removeSelf())),this.nodePos3sp.runAction(cc.sequence(cc.spawn(cc.moveTo(1,i),cc.scaleTo(.7,.5)),cc.removeSelf())))},t.prototype.removePanel=function(){this.node.removeFromParent(!0),this.destroy()},t}(cc.Component);i.NobleRewardEveryDay=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_noble_gift:[function(e,t,i){"use strict";cc._RF.push(t,"af10e02Z7RD9ZLPm/gJE0pk","fish_noble_gift"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../define/fish_msg_types"),a=e("../../model/fish_model"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=e("../../fish"),d=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.splibaoGun=null,t.splibaoChip=null,t.splibaoFnt=null,t.spBtnShop=null,t.splibaoDay=null,t.libaoDayFnt=null,t.splibaoBuyTxt=null,t.splibaoRed=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/noble_gift")),l.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.splibaoGun=cc.find("archor/splibaoGun",this.csbRoot),this.splibaoChip=cc.find("archor/splibaoChip",this.csbRoot),this.splibaoFnt=cc.find("archor/splibaoFnt",this.csbRoot),this.spBtnShop=cc.find("archor/spBtnShop",this.csbRoot),this.splibaoDay=cc.find("archor/splibaoDay",this.csbRoot),this.splibaoBuyTxt=cc.find("archor/splibaoBuyTxt",this.csbRoot),this.splibaoRed=cc.find("archor/splibaoRed",this.csbRoot),this.libaoDayFnt=cc.find("archor/libaoDayFnt",this.csbRoot),a.ME.isMember&&(this.libaoDayFnt.getComponent(cc.Label).string=a.ME.remainDays.toString()),this.spBtnShop.on(cc.Node.EventType.TOUCH_END,this.onBtnBuy,this),cc.find("archor/ButtonCloseVip",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.btnCloseGift,this);var e=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),e.play("show"),this._onShowInfoByGdata(),s.evtCenter.on(o.evts.EVT_RELOAD_NOBLE_GIFT,this._onShowInfoByGdata,this),this.scheduleOnce(this.pushBackKey,.1)},t.prototype.pushBackKey=function(){s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.btnCloseGift(null)},t.prototype.onDestroy=function(){s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBtnBuy=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var e={cmd:c.msgs.CMD_STORE_FISH,params:{action:"order_transaction",gameId:9999,userId:a.ME.userId,clientId:r.AccountInfo.clientId,prodId:"TY28_MEMBER",count:1,isRecharge:0}};h.tcp.send(e)},t.prototype.btnCloseGift=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.evtCenter.off(o.evts.EVT_RELOAD_NOBLE_GIFT,this._onShowInfoByGdata,this);var t=this.csbRoot.getComponent(cc.Animation);this.node.stopAllActions(),t.play("hide"),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(!0),this.destroy()}.bind(this),this)},t.prototype._onShowInfoByGdata=function(){var e=n.AssetsManager.getRes("img/atlas/noble");a.ME.isMember&&(this.splibaoGun.active=!1,this.splibaoChip.active=!1,this.splibaoFnt.active=!1,this.splibaoBuyTxt.active=!1,this.splibaoRed.active=!1,this.splibaoDay.active=!0,this.libaoDayFnt.active=!0,this.spBtnShop.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_guizulibao_16"))},t}(cc.Component);i.NobleGift=d,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_other_diamond:[function(e,t,i){"use strict";cc._RF.push(t,"7085aimKS5Lb5ViaJfRs8mj","fish_other_diamond"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_queue_sync"),s=e("../model/fish_model"),o=e("../scene/fish_scene"),c=e("../define/fish_event_types"),a=e("./fish_buffer"),r=function(e){function t(t,i){var o=e.call(this)||this;o.diamondQueue=new n.QueueSync(o),o.addChild(o.diamondQueue);var c=s.model.table.getPlayerInfo(t);return o.diamond=c.diamond,o.userId=t,o.fntDiamond=i,o}return __extends(t,e),t.prototype.onEnter=function(){this.diamondQueue.onEnter(),this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString(),o.evtCenter.on(c.evts.EVT_SUB_DIAMOND,this.onEventSubDiamond,this),o.evtCenter.on(c.evts.EVT_PUSH_DIAMOND,this.onEventPushArr,this),o.evtCenter.on(c.evts.EVT_ADD_DIAMOND_ATONCE,this.onEventAddDiamondMoment,this)},t.prototype.onExit=function(){this.diamondQueue.onExit(),a.buffer.otherDiamond[this.userId]=null,o.evtCenter.off(c.evts.EVT_PUSH_DIAMOND,this.onEventPushArr,this),o.evtCenter.off(c.evts.EVT_SUB_DIAMOND,this.onEventSubDiamond,this),o.evtCenter.off(c.evts.EVT_ADD_DIAMOND_ATONCE,this.onEventAddDiamondMoment,this)},t.prototype.setFntString=function(e){this.diamond+=parseInt(e),this.fntDiamond&&(this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString()),o.evtCenter.emit(c.evts.EVT_DIAMOND_INFO_CHG,this.userId)},t.prototype.onEventPushArr=function(e,t,i){e==this.userId&&this.diamondQueue.onPushData(t,i)},t.prototype.onEventSubDiamond=function(e,t){e==this.userId&&(this.diamond-=parseInt(t),this.fntDiamond&&(this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString()),o.evtCenter.emit(c.evts.EVT_DIAMOND_INFO_CHG,e))},t.prototype.onEventAddDiamondMoment=function(e,t){e==this.userId&&(this.diamond+=parseInt(t),this.fntDiamond&&(this.fntDiamond.getComponent(cc.Label).string=this.diamond.toString()),o.evtCenter.emit(c.evts.EVT_DIAMOND_INFO_CHG,this.userId,this.diamond))},t}(cc.Node);i._OtherDiamond=r,cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_other_gold:[function(e,t,i){"use strict";cc._RF.push(t,"a1b83jI6bpC9oTfIxjBhM21","fish_other_gold"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../model/fish_model"),s=e("./fish_queue_sync"),o=e("../scene/fish_scene"),c=e("../define/fish_event_types"),a=e("./fish_buffer"),r=function(e){function t(t,i){var o=e.call(this)||this;o.goldQueue=new s.QueueSync(o),o.addChild(o.goldQueue);var c=n.model.table.getPlayerInfo(t);return o.gold=c.gold,o.userId=t,o.fntGold=i,o}return __extends(t,e),t.prototype.onEnter=function(){this.goldQueue.onEnter(),this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold),o.evtCenter.on(c.evts.EVT_PUSH_ACT_GOLD,this.onEventPushArr,this),o.evtCenter.on(c.evts.EVT_SUB_GOLD,this.onEventSubGold,this),o.evtCenter.on(c.evts.EVT_ADD_GOLD_ATONCE,this.onEventAddGoldMoment,this)},t.prototype.onExit=function(){this.goldQueue.onExit(),a.buffer.otherGold[this.userId]=null,o.evtCenter.off(c.evts.EVT_PUSH_ACT_GOLD,this.onEventPushArr,this),o.evtCenter.off(c.evts.EVT_SUB_GOLD,this.onEventSubGold,this),o.evtCenter.off(c.evts.EVT_ADD_GOLD_ATONCE,this.onEventAddGoldMoment,this)},t.prototype.setFntString=function(e){var t=n.model.table.getPlayerInfo(this.userId);if(t){var i=this.goldQueue.getFlyNum();this.gold+i!=t.gold?(cc.log("AAAAAAAA"),this.gold=t.gold-i):cc.log("==================================="),this.gold+=parseInt(e),this.fntGold&&(this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold)),o.evtCenter.emit(c.evts.EVT_GOLD_INFO_CHG,this.userId,this.gold)}},t.prototype.onEventPushArr=function(e,t,i){e==this.userId&&this.goldQueue.onPushData(t,i)},t.prototype.onEventSubGold=function(e,t){this.userId==e&&(this.gold-=parseInt(t),this.fntGold&&(this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold)),o.evtCenter.emit(c.evts.EVT_GOLD_INFO_CHG,this.userId,this.gold))},t.prototype.onEventAddGoldMoment=function(e,t){e==this.userId&&(this.gold+=parseInt(t),this.fntGold&&(this.fntGold.getComponent(cc.Label).string=o.utils.formatNumber(this.gold)),o.evtCenter.emit(c.evts.EVT_GOLD_INFO_CHG,this.userId,this.gold))},t}(cc.Node);i._OtherGold=r,cc._RF.pop()},{"../define/fish_event_types":"fish_event_types","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene","./fish_buffer":"fish_buffer","./fish_queue_sync":"fish_queue_sync"}],fish_piton_manager:[function(e,t,i){"use strict";cc._RF.push(t,"32ba8Kd/oNKX4MCGKjc0kyX","fish_piton_manager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_piton"),s=function(e){function t(){var t=e.call(this)||this;return t.pitons={},t}return __extends(t,e),t.prototype.castIcePiton=function(e,t){this.pitons[e]=new n.Piton(e,t)},t.prototype.pitonDie=function(e){var t=this.pitons[e];t&&(t.die(),delete this.pitonDie[e])},t}(cc.Component);i.PitonManager=s,cc._RF.pop()},{"./fish_piton":"fish_piton"}],fish_piton:[function(e,t,i){"use strict";cc._RF.push(t,"336ce2jfAdIgrA/Q6gz/NFg","fish_piton"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=function(){function e(e,t){this.pitonId=e,this.pitonNode=t,this.spPiton=n.utils.createSprite("fish_ice_piton_01","game_effect"),this.spPiton.setAnchorPoint(.5,.5),this.pitonNode.addChild(this.spPiton)}return e.prototype.die=function(){var e=n.utils.genAnimate("game_effect","ice_piton_crash","fish_ice_piton_",2/30),t=this.spPiton.addComponent(cc.Animation);t.addClip(e),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.spPiton.removeFromParent()}.bind(this),this),t.play("ice_piton_crash")},e}();i.Piton=s,cc._RF.pop()},{"../../scene/fish_scene":"fish_scene"}],fish_player_info:[function(e,t,i){"use strict";cc._RF.push(t,"c2580DNzExC3YJnjaSe4+8t","fish_player_info"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_weapon_info"),s=e("../model/fish_model"),o=function(){return function(e){this.userId=e.uid,this.name=e.nm,this.gold=e.chip,this.diamond=e.dmd,this.seatId=e.sid,this.level=e.uLv,this.charm=e.charm,this.purl=e.purl,this.sex=e.sex,this.vipLv=e.vipLv,this.isRobot=e.isRobot,e.hasOwnProperty.leftBullet&&(this.leftBullet=e.leftBullet),e.hasOwnProperty.score&&(this.score=e.score),e.hasOwnProperty.dailyTask&&(this.dailyTask=e.dailyTask),this.cannonId=e.crgId,this.curWeapon=new n.WeaponInfo(e.gLvNow),this.maxWeapon=new n.WeaponInfo(e.gLv),this.fireLockFishId=0,this.fireIsFury=0,this.fireLaserId=0,this.userId==s.ME.userId&&(s.ME.gold=this.gold,s.ME.diamond=this.diamond,Object.defineProperty(this,"gold",{get:function(){return s.ME.gold},set:function(e){s.ME.gold=e}}),Object.defineProperty(this,"diamond",{get:function(){return s.ME.diamond},set:function(e){s.ME.diamond=e}}))}}();i.PlayerInfo=o,cc._RF.pop()},{"../model/fish_model":"fish_model","./fish_weapon_info":"fish_weapon_info"}],fish_player_property:[function(e,t,i){"use strict";cc._RF.push(t,"dbd12G2uUVDV5RIZC8+QqA+","fish_player_property"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../buffer/fish_buffer"),c=e("../../scene/fish_scene"),a=e("../../define/fish_event_types"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.playerInfo=e,this.fntGold=null,this.fntDiamond=null,this.ptGold=null,this.ptDiamond=null,this.ptTips=null,this.fntTips=null},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/player_property")),this.node.addChild(this.csbRoot),this.fntGold=cc.find("fntGold",this.csbRoot),this.fntDiamond=cc.find("fntDiamond",this.csbRoot),this.ptGold=cc.find("ptGold",this.csbRoot),this.ptDiamond=cc.find("ptDiamond",this.csbRoot),this.ptTips=cc.find("ptTips",this.csbRoot),this.fntTips=(new cc.Node).addComponent(cc.Label).node,this.fntTips.getComponent(cc.Label).font=n.AssetsManager.getRes("img/font/fnt01"),this.fntTips.setPosition(this.ptTips.getPosition()),this.node.addChild(this.fntTips),this.fntTips.setScale(.4),this.fntTips.opacity=0,this.playerInfo.userId==s.ME.userId?(o.buffer.gameGold=o.buffer.bind(o.buffer.GameGold,this.playerInfo.userId,this.fntGold),o.buffer.gameGold.onEnter(),this.fntGold.addChild(o.buffer.gameGold),o.buffer.gameDiamond=o.buffer.bind(o.buffer.GameDiamond,s.ME.userId,this.fntDiamond),o.buffer.gameDiamond.onEnter(),this.fntDiamond.addChild(o.buffer.gameDiamond)):(o.buffer.otherGold[this.playerInfo.userId]=o.buffer.bind(o.buffer.OtherGold,this.playerInfo.userId,this.fntGold),o.buffer.otherGold[this.playerInfo.userId].onEnter(),this.fntGold.addChild(o.buffer.otherGold[this.playerInfo.userId]),o.buffer.otherDiamond[this.playerInfo.userId]=o.buffer.bind(o.buffer.OtherDiamond,this.playerInfo.userId,this.fntDiamond),o.buffer.otherDiamond[this.playerInfo.userId].onEnter(),this.fntDiamond.addChild(o.buffer.otherDiamond[this.playerInfo.userId])),c.evtCenter.on(a.evts.EVT_UI_ADD_GOLD,this.onEventAddGold,this),c.evtCenter.on(a.evts.EVT_UI_TIPS_GOLD,this.onEventTipsGold,this),c.evtCenter.on(a.evts.EVT_UI_TIPS_DIAMOND,this.onEventTipsDiamond,this)},t.prototype._bounceNode=function(e){e.stopAllActions(),e.runAction(cc.sequence(cc.scaleTo(1/30,1.2),cc.scaleTo(1/30,1)))},t.prototype._tip=function(e){this.fntTips.stopAllActions(),this.fntTips.getComponent(cc.Label).string="+"+e,this.fntTips.opacity=0,this.fntTips.runAction(cc.sequence(cc.fadeIn(4/30),cc.delayTime(1),cc.fadeOut(4/30)))},t.prototype.onEventAddGold=function(e,t){e==this.playerInfo.userId&&this._bounceNode(this.fntGold)},t.prototype.onEventTipsGold=function(e,t){e==this.playerInfo.userId&&(this._tip(t),this._goldFlash())},t.prototype.onEventTipsDiamond=function(e,t){e==this.playerInfo.userId&&this._diamondFlash()},t.prototype._goldFlash=function(){var e=c.utils.genAnimate("game_effect","gold_flash","fish_goldflash_",.1),t=c.utils.createSprite("fish_goldflash_01","game_effect");t.setPosition(this.ptGold.getPosition()),this.node.addChild(t);var i=t.addComponent(cc.Animation);i.addClip(e),t.runAction(cc.sequence(cc.callFunc(function(){i.play(e.name)}.bind(this)),cc.fadeOut(.1),cc.removeSelf()));var n=c.utils.createSprite("fish_gold_flash_icon","common");n.setPosition(this.ptGold.getPosition()),this.node.addChild(n),n.runAction(cc.sequence(cc.spawn(cc.scaleTo(10/30,1.5).easing(cc.easeOut(3)),cc.fadeOut(10/30)),cc.removeSelf()))},t.prototype._diamondFlash=function(){var e=c.utils.genAnimate("game_effect","gold_flash","fish_goldflash_",1/30),t=c.utils.createSprite("fish_goldflash_01","game_effect");t.setPosition(this.ptDiamond.getPosition()),t.color=cc.color(0,0,128),this.node.addChild(t);var i=t.addComponent(cc.Animation);i.addClip(e),t.runAction(cc.sequence(cc.callFunc(function(){i.play(e.name)}.bind(this)),cc.fadeOut(.1),cc.removeSelf()));var n=c.utils.createSprite("fish_diamond_flash_icon","common");n.setPosition(this.ptDiamond.getPosition()),this.node.addChild(n),n.runAction(cc.sequence(cc.spawn(cc.scaleTo(10/30,1.5).easing(cc.easeOut(3)),cc.fadeOut(10/30)),cc.removeSelf()))},t.prototype.onDestroy=function(){this.playerInfo.userId==s.ME.userId?(o.buffer.gameGold.onExit(),o.buffer.gameDiamond.onExit()):(o.buffer.otherGold[this.playerInfo.userId].onExit(),o.buffer.otherDiamond[this.playerInfo.userId].onExit()),c.evtCenter.off(a.evts.EVT_UI_ADD_GOLD,this.onEventAddGold,this),c.evtCenter.off(a.evts.EVT_UI_TIPS_GOLD,this.onEventTipsGold,this),c.evtCenter.off(a.evts.EVT_UI_TIPS_DIAMOND,this.onEventTipsDiamond,this)},t}(cc.Component);i.PlayerProperty=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_prop_give_cell:[function(e,t,i){"use strict";cc._RF.push(t,"e24ef+jZ5tKGZEDh4oOGzfL","fish_prop_give_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../../assets_manager"),o=function(e){function t(t,i){var n=e.call(this)||this;return n.HeadImage=null,n.friendName=null,n.friendId=null,n.index=i,n.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/prop_give_cell")),n.HeadImage=cc.find("HeadImage",n.csbRoot),n.friendName=cc.find("friendName",n.csbRoot),n.friendId=cc.find("friendId",n.csbRoot),n.addChild(n.csbRoot),n._setSource(t,i),n}return __extends(t,e),t.prototype._setSource=function(e,t){if(e.userId){var i="(ID:"+e.userId.toString()+")";this.friendId.getComponent(cc.Label).string=i}e.name&&(this.friendName.getComponent(cc.Label).string=e.name),n.avatarDownLoader.showHeadImage(e.purl,this.HeadImage)},t}(cc.Node);i.PropGiveCell=o,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../scene/fish_scene":"fish_scene"}],fish_prop_give_window:[function(e,t,i){"use strict";cc._RF.push(t,"63a792HIIRM7ZRhcffMjyDZ","fish_prop_give_window"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../define/fish_msg_types"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene_login"),c=e("../../logic/fish_tcp"),a=e("../../scene/fish_scene"),r=e("../../define/fish_event_types"),h=e("../../../assets_manager"),l=e("./fish_prop_give_cell"),d=e("../../fish"),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t){this._goods=e,this._itemInfo=t,this.csbRoot=null,this.goodsSp=null,this.iconRage=null,this.productPrice=null,this.tableViewLayer=null,this.friendsName=null,this.listBg=null,this.mix=0,this.max=0,this.changeNum=0,this.showFlag=!0,this.friendsName=null,this._editBox=null,this.noFriends=null,this.cellSize=null,this.tableView=null,this.tableViewLayer=null,this.cellCount=s.model.friends.friendsData.getFriendsCount()},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(h.AssetsManager.getRes("prefabs/prop_give")),d.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.goodsSp=cc.find("propNode/goodsSpBg/goodsSp",this.csbRoot),this.iconRage=cc.find("propNode/goodsSpBg/iconRage",this.csbRoot),this.productPrice=cc.find("propNode/itemShop/productPrice",this.csbRoot),this.tableViewLayer=cc.find("friendsNode/tableViewLayer",this.csbRoot),this.friendsName=cc.find("propNode/btnCheckFriends/friendsName",this.csbRoot),this.listBg=cc.find("friendsNode/listBg",this.csbRoot),this.noFriends=cc.find("friendsNode/noFriends",this.csbRoot),cc.find("friendsNode/btnAddFriend",this.csbRoot).on("click",this.onBtnAddFriend,this),cc.find("friendsNode/btnCloseBag",this.csbRoot).on("click",this.onBtnCloseProp,this),cc.find("propNode/itemShop/btnAdd",this.csbRoot).on("click",this.onBtnAdd,this),cc.find("propNode/itemShop/btnMinus",this.csbRoot).on("click",this.onBtnMinus,this),cc.find("propNode/btnCheckFriends",this.csbRoot).on("click",this.onBtnCheckFriends,this),cc.find("propNode/anchor/groupOK/btnOK",this.csbRoot).on("click",this.onBtnOK,this),cc.find("propNode/anchor/groupCancel/btnCancel",this.csbRoot).on("click",this.onBtnCancel,this),this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("show1"),this.setItemCount(),this.setPropGiveSource(),0==this.cellCount&&(this.noFriends.active=!0),a.evtCenter.emit(r.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this),a.evtCenter.on(r.evts.EVT_VERIFY_CALL_BACK,this.onEventVerifyCallBack,this),a.evtCenter.on(r.evts.EVT_PRESENT_CALL_BACK,this.onEventPresentCallBack,this),a.msgCenter.on(n.msgs.MSG_GAME,this.onVerifyUserIdCallBack,this)},t.prototype.onEventVerifyCallBack=function(e){this.friendsName.getComponent(cc.Label).string=e.verifyUserName+"(ID:"+e.verifyUserId+")"},t.prototype.onEventPresentCallBack=function(e){this.friendsName.getComponent(cc.Label).string="\u70b9\u51fb\u9009\u62e9\u8d60\u9001\u5bf9\u8c61",this.refresh()},t.prototype.setItemCount=function(){var e=a.configTable.item;this.mix=e[this._goods].trade_limit,this.max=this._itemInfo[this._goods].count,this.changeNum=this.max,3602==this._goods&&(this.changeNum=2e6)},t.prototype.setPropGiveSource=function(){var e=h.AssetsManager.getRes("img/atlas/common"),t=a.configTable.item;3104==this._goods?(this.iconRage.active=!0,s.ME.vipLevel>4?this.iconRage.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("icon_rage_2"):this.iconRage.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("icon_rage_1")):this.iconRage.active=!1,this.goodsSp.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame(t[this._goods].big_icon.split(".")[0]);var i=this._itemInfo[this._goods].count;3602==this._goods?this.productPrice.getComponent(cc.Label).string=this.changeNum+"":this.productPrice.getComponent(cc.Label).string=i},t.prototype.onBackKey=function(){this.onBtnCancel(null)},t.prototype.onDestroy=function(){this._editBox=null,a.evtCenter.emit(r.evts.EVT_POP_BACK_KEY,this.onBackKey,this),a.msgCenter.off(n.msgs.MSG_VERIFY_USER_ID,this.onVerifyUserIdCallBack,this),a.evtCenter.off(r.evts.EVT_VERIFY_CALL_BACK,this.onEventVerifyCallBack,this),a.evtCenter.off(r.evts.EVT_PRESENT_CALL_BACK,this.onEventPresentCallBack,this)},t.prototype.onBtnOK=function(e){if("\u70b9\u51fb\u9009\u62e9\u8d60\u9001\u5bf9\u8c61"==this.friendsName.getComponent(cc.Label).string)this.showFlag?this.showFriendsList():a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u8bf7\u9009\u62e9\u8981\u8d60\u9001\u7684\u597d\u53cb~");else{var t=this.friendsName.getComponent(cc.Label).string.split("(ID:"),i={cmd:n.msgs.CMD_GAME,params:{userId:parseInt(s.ME.userId),gameId:9999,action:"present",toUserId:parseInt(t[1]),itemId:1e4+parseInt(this._goods),itemCount:parseInt(this.productPrice.getComponent(cc.Label).string)}};c.tcp.send(i)}},t.prototype.onBtnCancel=function(e){this.node.removeFromParent(!0),this.destroy()},t.prototype.showFriendsList=function(){this.showFlag&&(this.showFlag=!1,this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("show2"),this.initTableView(),this.initEditBox())},t.prototype.onBtnCheckFriends=function(e){this.showFriendsList()},t.prototype.onBtnAdd=function(e){this.addStringCallBack()},t.prototype.onBtnMinus=function(e){this.minusStringCallBack()},t.prototype.onBtnAddFriend=function(e){if(this._editBox.string.length>0){if(s.ME.userId==parseInt(this._editBox.string))return void a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u4e0d\u80fd\u7ed9\u81ea\u5df1\u8d60\u9001\u7269\u54c1\u54e6~");var t={cmd:n.msgs.CMD_GAME,params:{userId:s.ME.userId,gameId:9999,action:"verifyUserId",verifyUserId:parseInt(this._editBox.string)}};c.tcp.send(t)}else a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u8bf7\u8f93\u5165\u4e00\u4e2a\u597d\u53cbID")},t.prototype.addStringCallBack=function(){3602==this._goods?(this.changeNum+=1e5,this.changeNum>s.ME.gold?(this.changeNum=s.ME.gold,a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u643a\u5e26\u91d1\u5e01\u4e0d\u8db3\uff0c\u9700\u8981\u7ee7\u7eed\u589e\u52a0\u91d1\u5e01\u8bf7\u5145\u503c~")):this.changeNum>1e8&&(this.changeNum=1e8,a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u5230\u8fbe\u4e0a\u9650\uff0c\u8bf7\u5206\u6b21\u8d60\u9001~"))):(++this.changeNum,this.changeNum>this.max&&(this.changeNum=this.mix)),this.productPrice.getComponent(cc.Label).string=this.changeNum+""},t.prototype.minusStringCallBack=function(){3602==this._goods?(this.changeNum-=1e5,this.changeNum<2e6&&(this.changeNum=2e6)):(--this.changeNum,this.changeNum<this.mix&&(this.changeNum=this.max)),this.productPrice.getComponent(cc.Label).string=this.changeNum+""},t.prototype.initTableView=function(){this.tableView||(this.cellSize=cc.size(368,60),this.tableView=cc.find("friendsNode/tableViewLayer/tableView",this.csbRoot).getComponent(cc.ScrollView),this.tableViewReloadData())},t.prototype.tableViewReloadData=function(){this.tableView.content.removeAllChildren();for(var e=0;e<this.cellCount;e++){this.dataSource=s.model.friends.friendsData.getFriendInfo(e);var t=new l.PropGiveCell(this.dataSource,e);t.setContentSize(this.cellSize),t.setAnchorPoint(0,0),t.on(cc.Node.EventType.TOUCH_END,this.tableCellTouched,this),this.tableView.content.addChild(t)}},t.prototype.tableCellTouched=function(e){var t=e.currentTarget.index;this.friendsName.getComponent(cc.Label).string=s.model.friends.friendsData.getFriendInfo(t).name+"(ID:"+s.model.friends.friendsData.getFriendInfo(t).userId+")"},t.prototype.initEditBox=function(){this._editBox=cc.find("friendsNode/listBg/_editBox",this.csbRoot).getComponent(cc.EditBox)},t.prototype.onVerifyUserIdCallBack=function(e){"verifyUserId"==e.action?0==e.reason?a.evtCenter.emit(r.evts.EVT_VERIFY_CALL_BACK,e):(a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u627e\u4e0d\u5230\u60a8\u586b\u5199\u7684\u73a9\u5bb6ID \u8bf7\u786e\u8ba4\u586b\u5199\u7684\u6e38\u620fID\u662f\u5426\u6b63\u786e"),this._editBox.string=""):"present"==e.action&&(0==e.reason?(a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u8d60\u9001\u6210\u529f,\u9053\u5177\u5df2\u53d1\u9001\u5230\u597d\u53cb\u90ae\u7bb1\u4e2d \u90ae\u4ef6\u6709\u6548\u671f7\u5929 \u8bf7\u63d0\u9192\u597d\u53cb\u53ca\u65f6\u9886\u53d6"),a.evtCenter.emit(r.evts.EVT_PRESENT_CALL_BACK,e)):a.evtCenter.emit(r.evts.EVT_MSG_BOX,"\u9053\u5177\u8d60\u9001\u5931\u8d25~"))},t.prototype.onBtnCloseProp=function(e){this.node.removeFromParent(!0),this.destroy()},t.prototype.refresh=function(){var e={cmd:n.msgs.CMD_ITEM,params:{action:"list",gameId:28,userId:s.ME.userId,clientId:o.AccountInfo.clientId}};c.tcp.send(e),a.evtCenter.emit(r.evts.EVT_RELOAD_BAG_INFO),this.onBtnCancel(null)},t}(cc.Component);i.PropGive=_,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","./fish_prop_give_cell":"fish_prop_give_cell"}],fish_queue_sync:[function(e,t,i){"use strict";cc._RF.push(t,"fe978efmttBH5UjDQifkZWl","fish_queue_sync"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(t){var i=e.call(this)||this;return i.sync_arr=[],i.target=t,i.absoluteTime=0,i.scheduler=cc.director.getScheduler(),i}return __extends(t,e),t.prototype.onEnter=function(){this.scheduler.scheduleUpdate(this,0,!1)},t.prototype.onExit=function(){this.target=null,this.sync_arr=[],this.scheduler.unscheduleUpdate(this)},t.prototype.getArrLength=function(){if(this.sync_arr)return this.sync_arr.length},t.prototype.getFlyNum=function(){if(this.sync_arr){for(var e=0,t=0;t<this.sync_arr.length;t++)e+=this.sync_arr[t].num;return e}},t.prototype.onPushData=function(e,t){var i={num:e,time:t};this.sync_arr.push(i)},t.prototype._onPopData=function(){this.sync_arr.pop()},t.prototype._removeDataByIndex=function(e){this.sync_arr.splice(e,1)},t.prototype.update=function(e){if(!(this.sync_arr.length<=0)){this.absoluteTime=Date.now();for(var t=0;t<this.sync_arr.length;t++)if(this.sync_arr[t].time<=this.absoluteTime){this.target.setFntString(this.sync_arr[t].num),this._removeDataByIndex(t);break}}},t}(cc.Node);i.QueueSync=n,cc._RF.pop()},{}],fish_red_envelope_activity:[function(e,t,i){"use strict";cc._RF.push(t,"7facejx5BpA6pkCDU/DKFMT","fish_red_envelope_activity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.activityRedTxt=null,t.nodeInfo=null,t.btnDetails=null,t.Panel_1=null,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/red_envelope_activity")),t.nodeInfo=cc.find("archor/nodeInfo",t.csbNode),t.btnDetails=cc.find("archor/btnDetails",t.csbNode),t.activityRedTxt=cc.find("archor/activityRedTxt",t.csbNode),t.Panel_1=cc.find("archor/nodeInfo/Panel_1",t.csbNode),t.btnDetails.on(cc.Node.EventType.TOUCH_END,t.onBtnDetails,t),cc.find("archor/nodeInfo/Button_1",t.csbNode).on(cc.Node.EventType.TOUCH_END,t.onBtnCloseActivity,t),cc.find("archor/btnGoShopping",t.csbNode).on(cc.Node.EventType.TOUCH_END,t.onBtnGoShopping,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode)},t.prototype.onDestroy=function(){},t.prototype.onBtnGoShopping=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),o.evtCenter.emit(c.evts.EVT_CLOSE_ACTIVITY),o.evtCenter.emit(c.evts.EVT_POPUP_SHOP_WINDOW,s.model.shop.SHOP_GOLD)},t.prototype.onBtnDetails=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.nodeInfo.active=!0,this.btnDetails.getComponent(cc.Button).enabled=!1},t.prototype.onBtnCloseActivity=function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.nodeInfo.active=!1,this.btnDetails.getComponent(cc.Button).enabled=!0},t.prototype._getResultItemsFromat=function(){for(var e=s.ME.bagInfo.tabs[0].items,t=0;t<e.length;t++){var i=null;if((i=e[t].kindId>1e4?e[t].kindId-1e4:e[t].kindId)>3300)return s.model.lobby.checkBagSkill=i,!0}return!1},t}(cc.Component);i.AtvRedEnvelope=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_red_envelope:[function(e,t,i){"use strict";cc._RF.push(t,"59f5d4DislO4qjpD4SFSpZ5","fish_red_envelope"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../scene/fish_scene_login"),r=e("../../define/fish_msg_types"),h=e("../../logic/fish_tcp"),l=e("../../buffer/fish_buffer"),d=e("../../fish"),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i,n){this.countdown=3,this.evlpId=t,this._isSys=i||0,this._charm=n||0,this.status=this.STAT_COUNTDOWN,this.textCountDown=null,this.textChip=null,this.textFailed=null,this.btnGrab=null,this.fish_hongbao_sp=null,this.fish_hongbao_fnt=5,this.Panel_mask=null,this.anchor=null,this.leftTimesText=null,this.textSuccess=null,this.clickPanelMask=!1,this.redFlag=!0,this.bigRedSp=null,this.bigRedTxt=null,this.txtSuccessBg=null,this.reloadUserGold=null},t.prototype.onLoad=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/red_envelope")),d.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),this.textCountDown=cc.find("anchor/fish_hongbao_sp/textCountDown",this.csbNode),this.textChip=cc.find("anchor/textChip",this.csbNode),this.textFailed=cc.find("anchor/textFailed",this.csbNode),this.btnGrab=cc.find("anchor/btnGrab",this.csbNode),this.fish_hongbao_sp=cc.find("anchor/fish_hongbao_sp",this.csbNode),this.Panel_mask=cc.find("Panel_mask",this.csbNode),this.anchor=cc.find("anchor",this.csbNode),this.leftTimesText=cc.find("anchor/leftTimesText",this.csbNode),this.textSuccess=cc.find("anchor/textSuccess",this.csbNode),this.bigRedSp=cc.find("anchor/bigRedSp",this.csbNode),this.bigRedTxt=cc.find("anchor/bigRedTxt",this.csbNode),this.txtSuccessBg=cc.find("anchor/txtSuccessBg",this.csbNode),this.btnGrab.on(cc.Node.EventType.TOUCH_END,this.onBtnGrab,this),this.Panel_mask.on(cc.Node.EventType.TOUCH_END,this.onBtnClickRedBg,this),this.fish_hongbao_sp.active=!0,this.csbNode.getComponent(cc.Animation).play("countdown").wrapMode=cc.WrapMode.Loop,0==s.model.table.roomId&&this.showCharmAnimation();var e=this.countdown/3;this.csbNode.runAction(cc.sequence(cc.callFunc(this.onCountDown,this,3),cc.delayTime(e),cc.callFunc(this.onCountDown,this,2),cc.delayTime(e),cc.callFunc(this.onCountDown,this,1),cc.delayTime(e),cc.callFunc(this.onCountDown,this,0),cc.delayTime(e),cc.callFunc(this.onCountOver,this),cc.delayTime(2),cc.callFunc(this.deleteRedEnvelope,this))),o.evtCenter.on(c.evts.EVT_RED_ENVELOPE_RESULT,this.onEventRedEnvelopeResult,this),0==s.model.table.roomId?this.csbNode.setScale(1):(this.Panel_mask.active=!1,1==this._isSys?this.csbNode.setScale(1):(this.csbNode.setScale(.4),this.csbNode.setPosition(cc.v2(cc.winSize.width/3.3,cc.winSize.height/0)),this.anchor.setPosition(cc.v2(this.anchor.getPosition().x,this.anchor.getPosition().y-150)))),0==this._isSys&&(this.bigRedSp.active=!1,this.bigRedTxt.active=!1),o.evtCenter.on(c.evts.EVT_EXIT_GAME_SCENE,this.onEventClose,this)},t.prototype.onEventClose=function(){s.model.redEnvelope.showFlag=!0,this.node.removeFromParent(!0)},t.prototype.deleteRedEnvelope=function(){0==this._isSys?this.redFlag&&this.onEventClose():this.node.runAction(cc.sequence(cc.delayTime(55),cc.callFunc(this.deleteLongTimes,this)))},t.prototype.deleteLongTimes=function(){this.redFlag&&this.onEventClose()},t.prototype.onCountDown=function(e,t){this.textCountDown.getComponent(cc.Label).string=t},t.prototype.onCountOver=function(){this.fish_hongbao_sp.active=!1,this.status=this.STAT_GO_GRAB},t.prototype.onBtnGrab=function(e){if(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.status==this.STAT_GO_GRAB){this.redFlag=!1;var t={params:{userId:s.ME.userId,clientId:a.AccountInfo.clientId,evlpId:this.evlpId}};0==s.model.table.roomId?(t.cmd=r.msgs.CMD_RED_ENVELOPE,t.params.gameId=28,t.params.action="grab"):(t.cmd=r.msgs.CMD_TABLE_CALL,t.params.gameId=28,t.params.action="grabEvlp",t.params.roomId=s.model.table.roomId,t.params.tableId=s.model.table.tableId,t.params.seatId=s.model.table.seatId),h.tcp.send(t),this.status=this.STAT_GRABING}else if(this.status==this.STAT_COUNTDOWN)o.evtCenter.emit(c.evts.EVT_RED_ENVELOPE_OTHER,"\u5012\u8ba1\u65f6\u7ed3\u675f\u5f00\u62a2\u7ea2\u5305\uff0c\u4e0b\u624b\u8981\u5feb\u54df\uff01");else if(this.status==this.STAT_FINISH){this.redFlag=!1,this.csbNode.getComponent(cc.Animation).play("hide")}},t.prototype.onEventRedEnvelopeResult=function(e){if(e.userId==s.ME.userId){var t=this.csbNode.getComponent(cc.Animation);if(t.on(cc.Animation.EventType.FINISHED,function(){"hide"==t.currentClip.name?(t.targetOff(this),this.onCloseAll()):"failed"==t.currentClip.name||"success"==t.currentClip.name?t.play("hide"):"burst"==t.currentClip.name&&(t.play("success"),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/big_win_gold"),!1),this.scheduleOnce(function(){this.reloadUserGold=e,this.clickPanelMask=!0}.bind(this),2),this.showRedEnvelopeLed(e))}.bind(this),this),t.play("hide"),0!=e.code){if(3==e.code){this.showNoEnvlopeMessageBox();var i={cmd:r.msgs.CMD_TABLE_CALL,params:{action:"noEvlp",gameId:28,userId:s.ME.userId,clientId:a.AccountInfo.clientId,roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId}};return h.tcp.send(i),void this.onEventClose()}return 6==e.code?(this.onEventClose(),void o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u89e3\u950150\u500d\u6b66\u5668\u540e\u624d\u80fd\u53c2\u4e0e\u4e07\u5143\u5927\u7ea2\u5305\u6d3b\u52a8\u54e6~\u52a0\u6cb9\u5347\u7ea7\u6b66\u5668\u5427\uff01")):(0==this._isSys?o.evtCenter.emit(c.evts.EVT_RED_ENVELOPE_OTHER,"\u5927\u5bb6\u592a\u70ed\u60c5,\u60a8\u624b\u6162\u4e86\u6ca1\u6709\u62a2\u5230\u7ea2\u5305, \u4e0b\u6b21\u52a0\u6cb9\u54e6!"):o.evtCenter.emit(c.evts.EVT_RED_ENVELOPE_OTHER,"\u5f88\u53ef\u60dc\uff0c\u60a8\u4e0e\u4e07\u5143\u5927\u7ea2\u5305\u64e6\u8eab\u800c\u8fc7\uff0c \u4e0b\u6b21\u8981\u52a0\u6cb9\u54e6\uff01"),void this.onEventClose())}0!=s.model.table.roomId&&0==this._isSys&&this.anchor.setPosition(cc.v2(this.anchor.getPosition().x,this.anchor.getPosition().y+150)),this.textChip.active=!0,e.gain.chip?this.textChip.getComponent(cc.Label).string=e.gain.chip:e.gain.diamond&&(this.textChip.getComponent(cc.Label).string=e.gain.diamond),0!=s.model.table.roomId&&this.Panel_mask?this.Panel_mask.active=!1:this.Panel_mask&&(this.Panel_mask.active=!0),this.csbNode.setScale(1),this.csbNode.setPosition(cc.v2(0,0)),this.csbNode.stopAllActions(),t.play("burst"),this.status=this.STAT_FINISH}else e.gain.chip?l.buffer.pushGold(e.userId,e.gain.chip,1):e.gain.diamond&&l.buffer.pushDiamond(e.userId,e.gain.diamond,1)},t.prototype.onBtnClickRedBg=function(e){if(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.clickPanelMask){this.btnGrab.getComponent(cc.Button).enabled=!1,this.clickPanelMask=!1;var t=this.csbNode.getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),s.model.redEnvelope.showFlag=!0,this.onCloseAll()}.bind(this),this),t.play("hide"),this.status=this.STAT_FINISH,this.Panel_mask.active=!1}},t.prototype.onCloseAll=function(){this.reloadUserGold&&(this.reloadUserGold.gain.chip?l.buffer.pushGold(s.ME.userId,this.reloadUserGold.gain.chip,2):this.reloadUserGold.gain.diamond&&l.buffer.pushDiamond(s.ME.userId,this.reloadUserGold.gain.diamond,2)),s.model.redEnvelope.showFlag=!0,this.node.removeFromParent(!0)},t.prototype.showRedEnvelopeLed=function(e){var t="",i=0,n="",c=null;for(var a in e.gain)"chip"==a?(t="\u91d1\u5e01",n="fish_goldfly_02",c=a):(t="\u94bb\u77f3",n="fish_diamond_flash_01",c=a),i=void 0==e.gain[a]?0:e.gain[a];var r=(new cc.Node).addComponent(cc.Label);if(r.fontFamily="Bold",r.fontSize=27,r.node.color=cc.color(239,203,30),0==s.model.table.roomId?(this.textSuccess.active=!0,this.txtSuccessBg.active=!0,this.textSuccess.getComponent(cc.Label).string="\u5730\u4e3b\u5bb6\u4e5f\u6ca1\u4f59\u7cae\u554a\uff0c\u81ea\u5df1\u7684\u7ea2\u5305\u81ea\u5df1\u62a2\uff0c\u83b7\u5f97 "+t+" ",r.node.setPosition(cc.v2(this.textSuccess.getPosition().x+this.textSuccess.getContentSize().width/2+30,this.textSuccess.getPosition().y)),this.anchor.addChild(r.node)):0==this._isSys?(this.leftTimesText.active=!0,e.leftTimes>=0?(this.leftTimesText.getComponent(cc.Label).string="\u4eca\u65e5\u5269\u4f59\u9886\u53d6\u6b21\u6570: "+e.leftTimes,this.textSuccess.active=!0,this.txtSuccessBg.active=!0,this.textSuccess.getComponent(cc.Label).string="\u606d\u559c\u4f60\u62a2\u5230\u4e86"+e.userName+"\u53d1\u51fa\u7684\u7ea2\u5305,\u83b7\u5f97"+t+" ",r.node.setPosition(cc.v2(this.textSuccess.getPosition().x+this.textSuccess.getContentSize().width/2+30,this.textSuccess.getPosition().y)),this.anchor.addChild(r.node)):this.leftTimesText.getComponent(cc.Label).string="\u5bf9\u4e0d\u8d77,\u60a8\u7684\u6bcf\u65e5\u9886\u53d6\u7ea2\u5305\u6b21\u6570\u4e3a0, \u8d35\u65cf\u793c\u5305\u53ef\u83b7\u5f97\u989d\u59165\u6b21\u9886\u53d6\u6b21\u6570"):(this.textSuccess.active=!0,this.txtSuccessBg.active=!0,this.textSuccess.getComponent(cc.Label).string="\u606d\u559c\u60a8\u62a2\u5230\u4e07\u5143\u5927\u7ea2\u5305\uff0c\u83b7\u5f97\u4e86"+t+" ",r.node.setPosition(cc.v2(this.textSuccess.getPosition().x+this.textSuccess.getContentSize().width/2+30,this.textSuccess.getPosition().y)),this.anchor.addChild(r.node)),"chip"==c)o.effect.redEnvelopeSpinGoldFly(this.anchor,cc.v2(0,60),n,c,i);else{var h=cc.v2(0,0);h=0==s.model.table.roomId?cc.v2(cc.winSize.width/1.7,cc.winSize.height/1.1):o.utils.getSeatPosition(o.utils.getRelativeSeat(s.model.table.seatId)),o.effect.diamondFly(this.node,cc.v2(cc.winSize.width/2,cc.winSize.height/2),h,s.ME.userId,i)}},t.prototype.showCharmAnimation=function(){var e=cc.instantiate(n.AssetsManager.getRes("prefabs/interactive_expression_rose"));e.setPosition(cc.v2(this.anchor.getPosition().x,this.anchor.getPosition().y-180)),this.node.addChild(e),e.getComponent(cc.Animation).play("animation0");var t=(new cc.Node).addComponent(cc.Label);t.fontFamily="Arial-BoldMT",t.fontSize=23,t.string="\u9b45\u529b\u503c : +"+this._charm,t.node.setPosition(cc.v2(this.anchor.getPosition().x,this.anchor.getPosition().y-240)),this.node.addChild(t.node),t.node.runAction(cc.hide()),t.node.runAction(cc.sequence(cc.delayTime(20/30),cc.show(),cc.delayTime(20/30),cc.fadeOut(.5),cc.removeSelf())),e.runAction(cc.sequence(cc.delayTime(3),cc.removeSelf()))},t.prototype.showNoEnvlopeMessageBox=function(){s.ME.isMember?o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u60a8\u4eca\u65e5\u62a2\u7ea2\u5305\u7684\u6b21\u6570\u5df2\u6ee1\uff01\u4e0d\u8fc7\u522b\u62c5\u5fc3\uff0c\u6bcf\u5929\u7684\u4e07\u5143\u5927\u7ea2\u5305\u6d3b\u52a8\u60a8\u8fd8\u662f\u53ef\u4ee5\u53c2\u52a0\u7684\u54e6\uff01"):o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u60a8\u4eca\u65e5\u62a2\u7ea2\u5305\u7684\u6b21\u6570\u5df2\u6ee1\uff0c\u8d2d\u4e70\u8d35\u65cf\u6708\u5361\u53ef\u4ee5\u589e\u52a0\u6bcf\u65e5\u62a2\u7ea2\u5305\u6b21\u6570\uff0c\u662f\u5426\u7acb\u5373\u8d2d\u4e70\uff1f",2,this.showShopView,this)},t.prototype.showShopView=function(){o.evtCenter.emit(c.evts.EVT_POPUP_NOBLE_GIFT)},t}(cc.Component);i.RedEnvelope=_,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_room_info:[function(e,t,i){"use strict";cc._RF.push(t,"3058ec29WZA05QNJUwsyH2l","fish_room_info"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(e){this.sceneName=e.sceneName,this.roomId=e.rid,this.onlineCount=e.ol,this.minMultiple=e.gMinLv}}();i.RoomInfo=n,cc._RF.pop()},{}],fish_roommatch_activity:[function(e,t,i){"use strict";cc._RF.push(t,"121a06x5mVESpctLm0av/qW","fish_roommatch_activity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.nodeInfo=null,t.btnDetails=null,t.match_tips=null,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/roommatch_activity")),t.nodeInfo=cc.find("archor/nodeInfo",t.csbNode),t.btnDetails=cc.find("archor/btnDetails",t.csbNode),t.match_tips=cc.find("archor/match_tips",t.csbNode),t.btnDetails.on(cc.Node.EventType.TOUCH_END,t.onBtnDetails,t),cc.find("archor/nodeInfo/btnClose",t.csbNode).on(cc.Node.EventType.TOUCH_END,t.onBtnCloseActivity,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode);var e=n.AssetsManager.getRes("img/atlas/room_match"),t=Date.UTC(2016,10,28),i=Date.now();this.match_tips.getComponent(cc.Sprite).spriteFrame=t>i?e.getSpriteFrame("fish_kaiqiriqi"):e.getSpriteFrame("fish_banquan")},t.prototype.onDestroy=function(){},t.prototype.onBtnDetails=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.nodeInfo.active=!0,this.btnDetails.getComponent(cc.Button).enabled=!1},t.prototype.onBtnCloseActivity=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.nodeInfo.active=!1,this.btnDetails.getComponent(cc.Button).enabled=!0},t}(cc.Component);i.AtvRoomMatch=s,cc._RF.pop()},{"../../../assets_manager":"assets_manager"}],fish_roommatch_banner:[function(e,t,i){"use strict";cc._RF.push(t,"df39338eZJNv5g4kmfVsz7g","fish_roommatch_banner"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.isShow=!1,t.node1=null,t.skine=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.isShow=!0,this.node1=new cc.Node,this.node.addChild(this.node1),this.node1.setPosition(cc.v2(cc.winSize.width+200,435)),n.evtCenter.on(s.evts.EVT_RMATCH_BANNER,this.showBannerAction,this),n.evtCenter.on(s.evts.EVT_EXIT_GAME_SCENE,this.showBannerEnd,this)},t.prototype.onDestroy=function(){n.evtCenter.off(s.evts.EVT_RMATCH_BANNER,this.showBannerAction,this),n.evtCenter.off(s.evts.EVT_EXIT_GAME_SCENE,this.showBannerEnd,this)},t.prototype.showBannerEnd=function(){this.node.removeFromParent(!0),this.destroy()},t.prototype.showBannerAction=function(e){var t=["start_1","start_2","start_3"];this.node.stopAllActions();var i=.68*cc.winSize.height;this.node.setPosition(cc.v2(cc.winSize.width+50,i));var n=this;this.node.runAction(cc.sequence(cc.callFunc(function(){n.skine.addAnimation(15*e,t[e],!0)}),cc.spawn(cc.moveTo(3,cc.v2(750,i)),cc.fadeIn(3)),cc.moveTo(3,cc.v2(350,i)),cc.delayTime(4),cc.moveTo(3,cc.v2(-50,i)),cc.spawn(cc.moveTo(3,cc.v2(-450,i)),cc.fadeOut(3)),cc.callFunc(function(){n.skine.setToSetupPose(),n.skine.clearTracks()})))},t}(cc.Component);i.RmatchBanner=o,cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene"}],fish_roommatch_cell:[function(e,t,i){"use strict";cc._RF.push(t,"debc5M49w1ORbyJQJRBOy/b","fish_roommatch_cell"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.cellWidth=396,t.cellHeight=29,t.board=null,t.reward=null,t.score=null,t.name=null,t.rank=null,t.ranking_Num=null,t.reward1Num=6,t.reward2Num=10,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/room_match_rankcell")),t.addChild(t.csbNode),t.csbNode.setPosition(cc.v2(t.cellWidth/2,t.cellHeight/2)),t}return __extends(t,e),t.prototype.setData=function(e,t){var i=s.model.room_match.rankListEnd[e],n=s.model.room_match.rmatchLevel;if(i[0]<=3){var c=i[0]+3;this.ranking_Num.setSpriteFrame("fish_paihangbang_"+c+".png"),this.rank.setVisible(!1),this.ranking_Num.setVisible(!0)}else this.ranking_Num.setVisible(!1),this.rank.setVisible(!0),this.rank.setString(i[0]);if(1==s.model.room_match.rmatchLevel)if(i[0]>this.reward1Num)this.reward.setString("\u65e0\u5956\u52b1");else{var a=(h=o.configTable.room_match_reward[n])["rank"+i[0]+"reward_number"],r=h["rank"+i[0]+"reward_description"];1==a?this.reward.setString(o.configTable.languageKey[r].string_zhcn):this.reward.setString(o.configTable.languageKey[r].string_zhcn+"*"+a)}else if(2==s.model.room_match.rmatchLevel)if(i[0]>this.reward2Num)this.reward.setString("\u65e0\u5956\u52b1");else{var h;a=(h=o.configTable.room_match_reward[n])["rank"+i[0]+"reward_number"],r=h["rank"+i[0]+"reward_description"];1==a?this.reward.setString(o.configTable.languageKey[r].string_zhcn):this.reward.setString(o.configTable.languageKey[r].string_zhcn+"*"+a)}},t}(cc.Node);i.RmatchEndCell=c,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_roommatch_end:[function(e,t,i){"use strict";cc._RF.push(t,"78cf2u6RehLbLUwaabA5vdS","fish_roommatch_end"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../define/fish_msg_types"),r=e("../../logic/fish_tcp"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i,n){this.csbNode=null,this.fntScore=null,this.fntRank_all=null,this.all_reward=null,this.fntRank_dest=null,this.desk_reward=null,this.next_time=null,this.next_bg=null,this.no_reward_desk=null,this.no_reward_all=null,this.match_type=null,this.label_receive=null,this.ranking_Num=null,this.my_rank=null,this.my_name=null,this.my_score=null,this.my_reward=null,this.rank=e,this.score=t,this.tableRank=i,this.table_node=null,this.tableView=null,this.reward1Num=6,this.reward2Num=10,this.cellSize=cc.size(396,30),this.next_time=n},t.prototype.onLoad=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/room_match_end")),this.node.addChild(this.csbNode,2),this.csbNode.getComponent(cc.Animation).play("show"),s.audio.playBg("sound/room_match_end"),this.my_name.setString(c.ME.name),this.my_rank.setString(this.rank),this.my_score.setString(this.score);var e=c.model.room_match.rmatchLevel,t=s.configTable.room_match_reward[e],i=t["rank"+this.rank+"reward_number"],a=t["rank"+this.rank+"reward_description"];this.fntScore.setString(this.score),this.fntRank_all.setString("\u7b2c"+this.rank+"\u540d"),this.fntRank_dest.setString("\u7b2c"+this.tableRank+"\u540d"),1==c.model.room_match.rmatchLevel?this.rank>this.reward1Num?(this.my_reward.setString("\u65e0\u5956\u52b1"),this.label_receive.setSpriteFrame("fish_tishi_queding.png"),this.label_receive.setScale(1.2),this.all_reward.setVisible(!1),this.no_reward_all.setVisible(!0)):(this.label_receive.setSpriteFrame("fish_guizulibao_20.png"),this.label_receive.setScale(1),this.all_reward.setVisible(!0),this.no_reward_all.setVisible(!1),1==i?(this.my_reward.setString(s.configTable.languageKey[a].string_zhcn),this.all_reward.setString(s.configTable.languageKey[a].string_zhcn)):(this.my_reward.setString(s.configTable.languageKey[a].string_zhcn+"*"+i),this.all_reward.setString(s.configTable.languageKey[a].string_zhcn+"*"+i))):2==c.model.room_match.rmatchLevel&&(this.rank>this.reward2Num?(this.my_reward.setString("\u65e0\u5956\u52b1"),this.label_receive.setSpriteFrame("fish_tishi_queding.png"),this.label_receive.setScale(1.2),this.all_reward.setVisible(!1),this.no_reward_all.setVisible(!0)):(this.label_receive.setSpriteFrame("fish_guizulibao_20.png"),this.label_receive.setScale(1),this.all_reward.setVisible(!0),this.no_reward_all.setVisible(!1),1==i?(this.my_reward.setString(s.configTable.languageKey[a].string_zhcn),this.all_reward.setString(s.configTable.languageKey[a].string_zhcn)):(this.my_reward.setString(s.configTable.languageKey[a].string_zhcn+"*"+i),this.all_reward.setString(s.configTable.languageKey[a].string_zhcn+"*"+i)))),1==this.tableRank?(i=t["tableno"+this.tableRank+"_number"],a=t["tableno"+this.tableRank+"_description"],this.desk_reward.setVisible(!0),this.no_reward_desk.setVisible(!1),this.desk_reward.setString(s.configTable.languageKey[a].string_zhcn+"*"+i)):(this.desk_reward.setVisible(!1),this.no_reward_desk.setVisible(!0)),1==c.model.room_match.rmatchLevel?this.match_type.setSpriteFrame("fish_2yuan.png"):this.match_type.setSpriteFrame("fish_10yuan.png"),""==this.nextTime?(this.next_bg.setVisible(!1),this.next_time.setVisible(!1)):(this.next_bg.setVisible(!0),this.next_time.setVisible(!0),this.next_time.setString(this.nextTime)),this.rank<=3?(this.ranking_Num.setVisible(!0),this.my_rank.setVisible(!1),this.ranking_Num.setSpriteFrame("fish_paihangbang_"+(this.rank+3)+".png")):(this.ranking_Num.setVisible(!1),this.my_rank.setVisible(!0)),1===this.rank&&c.model.room_match.rankListEnd.splice(0,1),s.evtCenter.on(o.evts.EVT_RMATCH_NEXT,this.onEventNextMatch,this)},t.prototype.onEventNextMatch=function(){this.node.removeFromParent(!0),this.destroy()},t.prototype.onDestroy=function(){s.evtCenter.off(o.evts.EVT_RMATCH_NEXT,this.onEventNextMatch,this)},t.prototype.onBtnClose=function(e){var t=this.csbNode.getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.onBtnReceive(null)}.bind(this),this),t.play("hide")},t.prototype.onBtnReceive=function(e){if(""!=c.model.room_match.rmatchId){this.node.removeFromParent(!0),s.audio.playBg("sound/bg_game");var t={cmd:a.msgs.CMD_TABLE_CALL_2,params:{gameId:28,userId:c.ME.userId,action:"cmTbMatchGetReward",matchId:c.model.room_match.rmatchId,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.ME.playerInfo.seatId}};r.tcp.send(t)}},t}(cc.Component);i.RmatchEnd=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_roommatch_guide:[function(e,t,i){"use strict";cc._RF.push(t,"1d328JjPkBGiodKkhuHYTq5","fish_roommatch_guide"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t){this.csbNode=null,this.isShow=!1,this.iType=e,this.itime=t,this.text_welcome=null,this.text_2=null,this.label_2=null,this.text_reward=null,this.text_4=null,this.node_wait=null,this.node_start=null},t.prototype.onLoad=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/room_match_enter")),this.text_welcome=cc.find("Node_6/text_welcome",this.csbNode),this.text_reward=cc.find("Node_6/text_reward",this.csbNode),this.text_2=cc.find("Node_6/node_wait/text_2",this.csbNode),this.label_2=cc.find("Node_6/node_wait/node_start/label_2",this.csbNode),this.text_4=cc.find("Node_6/node_wait/text_4",this.csbNode),this.node.addChild(this.csbNode),this.isShow=!0,s.model.table.roomId>=28003e4?this.text_welcome.getComponent(cc.Label).string="\u6b22\u8fce\u6765\u5230\u201c\u51b0\u5bd2\u7981\u57df\u201d":s.model.table.roomId>=28002e4&&(this.text_welcome.getComponent(cc.Label).string="\u6b22\u8fce\u6765\u5230\u201c\u53f2\u524d\u6df1\u6e0a\u201d"),1==s.model.room_match.rmatchLevel?(this.text_reward.getComponent(cc.Label).string='\u5feb\u6765\u8d62\u53d6 "2\u5143\u8bdd\u8d39\u76f4\u5145\u5361"\u5427',this.label_2.getComponent(cc.Label).string="2\u5143\u8bdd\u8d39\u4e89\u593a\u8d5b"):(this.text_reward.getComponent(cc.Label).string='\u5feb\u6765\u8d62\u53d6 "10\u5143\u8bdd\u8d39\u76f4\u5145\u5361"\u5427',this.label_2.getComponent(cc.Label).string="10\u5143\u8bdd\u8d39\u4e89\u593a\u8d5b"),0==this.iType?(this.text_4.getComponent(cc.Label).string=this.getFormatTimeFromSeconds(this.itime),this.node_wait.active=!0,this.node_start.active=!1,1==s.model.room_match.rmatchLevel?(this.text_reward.getComponent(cc.Label).string='\u5feb\u6765\u8d62\u53d6 "2\u5143\u8bdd\u8d39\u76f4\u5145\u5361"\u5427',this.text_2.getComponent(cc.Label).string="2\u5143\u8bdd\u8d39\u4e89\u593a\u8d5b"):(this.text_reward.getComponent(cc.Label).string='\u5feb\u6765\u8d62\u53d6 "10\u5143\u8bdd\u8d39\u76f4\u5145\u5361"\u5427',this.text_2.getComponent(cc.Label).string="10\u5143\u8bdd\u8d39\u4e89\u593a\u8d5b")):1==this.iType&&(this.node_wait.active=!1,this.node_start.active=!0,1==s.model.room_match.rmatchLevel?(this.text_reward.getComponent(cc.Label).string='\u5feb\u6765\u8d62\u53d6 "2\u5143\u8bdd\u8d39\u76f4\u5145\u5361"\u5427',this.label_2.getComponent(cc.Label).string="2\u5143\u8bdd\u8d39\u4e89\u593a\u8d5b"):(this.text_reward.getComponent(cc.Label).string='\u5feb\u6765\u8d62\u53d6 "10\u5143\u8bdd\u8d39\u76f4\u5145\u5361"\u5427',this.label_2.getComponent(cc.Label).string="10\u5143\u8bdd\u8d39\u4e89\u593a\u8d5b")),this.scheduleOnce(this._show,1),1==s.model.table.seatId||3==s.model.table.seatId?this.csbNode.setPosition(cc.v2(cc.winSize.width/4,cc.winSize.height/2-40)):this.csbNode.setPosition(cc.v2(3*cc.winSize.width/4,cc.winSize.height/2-40)),o.evtCenter.on(c.evts.EVT_HIDE_RMATCH_GUIDE,this.onEventHideGuide,this),o.evtCenter.on(c.evts.EVT_FIRE_RESPONSE,this.onEventFireResponse,this)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_HIDE_RMATCH_GUIDE,this.onEventHideGuide,this),o.evtCenter.off(c.evts.EVT_FIRE_RESPONSE,this.onEventFireResponse,this)},t.prototype.onEventHideGuide=function(){this.node.removeFromParent(!0),this.destroy()},t.prototype.getFormatTimeFromSeconds=function(e,t){var i,n,s=(e=e%60)/3600;return 0==s?(n=t?"00:":"",i=e/60):(n=(s<10?"0"+s:s)+":",i=e/60%60),n+(i<10?"0"+i:i)+"\u5206"+(e<10?"0"+e:e)+"\u79d2"},t.prototype.onEventFireResponse=function(e){0==e&&this.isShow&&(this.isShow=!1,this.scheduleOnce(this._hide,5))},t.prototype._show=function(){this.csbNode.getComponent(cc.Animation).play("show")},t.prototype._hide=function(){var e=this.csbNode.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),this.node.removeFromParent(!0),this.destroy()}.bind(this),this),e.play("hide")},t}(cc.Component);i.RmatchGuide=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_roommatch_panel:[function(e,t,i){"use strict";cc._RF.push(t,"88069Dt/4pMmJk8tQcWuT2K","fish_roommatch_panel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("./fish_roommatch_rank"),r=e("../../define/fish_msg_types"),h=e("../../logic/fish_tcp"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t){this.csbNode=null,this._seconds=t||200,this.fntCount=null,this.iType=e,this.leftTime=t,this.fish_1=null,this.fish_2=null,this.fish_3=null,this.score_1=null,this.score_2=null,this.score_3=null,this.rankArr=[],this.rank_node1=null,this.rank_node2=null,this.rank_node3=null,this.rank_node4=null,this.scoreSeat1=null,this.scoreSeat2=null,this.scoreSeat3=null,this.scoreSeat4=null,this.fntScore1=null,this.fntScore2=null,this.fntScore3=null,this.fntScore4=null,this.fishId=[],this.fishScore=[],this.rank_data={},this.lastRank=-1,this.lastLoc=-1},t.prototype.onLoad=function(){if(this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/room_match_ongoing")),this.node.addChild(this.csbNode),this.fish_1=cc.find("archor/fish_group/fish_1",this.csbNode),this.fish_2=cc.find("archor/fish_group/fish_2",this.csbNode),this.fish_3=cc.find("archor/fish_group/fish_3",this.csbNode),this.score_1=cc.find("archor/fish_group/score_1",this.csbNode),this.score_2=cc.find("archor/fish_group/score_2",this.csbNode),this.score_3=cc.find("archor/fish_group/score_3",this.csbNode),this.rank_node1=cc.find("panelRanking/rank_node1",this.csbNode),this.rank_node2=cc.find("panelRanking/rank_node2",this.csbNode),this.rank_node3=cc.find("panelRanking/rank_node3",this.csbNode),this.rank_node4=cc.find("panelRanking/rank_node4",this.csbNode),this.scoreSeat1=cc.find("panelSeat/scoreSeat1",this.csbNode),this.scoreSeat2=cc.find("panelSeat/scoreSeat2",this.csbNode),this.scoreSeat3=cc.find("panelSeat/scoreSeat3",this.csbNode),this.scoreSeat4=cc.find("panelSeat/scoreSeat4",this.csbNode),this.fntScore1=cc.find("panelSeat/scoreSeat1/fntScore1",this.csbNode),this.fntScore2=cc.find("panelSeat/scoreSeat2/fntScore2",this.csbNode),this.fntScore3=cc.find("panelSeat/scoreSeat3/fntScore3",this.csbNode),this.fntScore4=cc.find("panelSeat/scoreSeat4/fntScore4",this.csbNode),this.fntCount=cc.find("archor/panel/fntCount",this.csbNode),this.fntCount.getComponent(cc.Label).string=this.getFormatTimeFromSeconds(this._seconds,!1),this.schedule(this._countDownMttMatch,1),this.initFish(),this.initRankPanel(),1==this.iType){for(var e in s.model.room_match.tableRkList){var t=s.model.room_match.tableRkList[e];this["fntScore"+e].getComponent(cc.Label).string=t,this["scoreSeat"+e].active=!0}this["fntScore"+o.utils.getRelativeSeat(s.ME.playerInfo.seatId)].setString(0)}else if(0==this.iType)for(var i=1;i<=4;i++){if(s.model.table.getPlayerInfo(i)){var a=o.utils.getRelativeSeat(i);this["scoreSeat"+a].active=!0,this["fntScore"+a].getComponent(cc.Label).string="0"}}this.csbNode.getComponent(cc.Animation).play("show"),o.audio.playBg("sound/boss_coming_bg"),o.evtCenter.on(c.evts.EVT_RMATCH_UPDATE_SCORE,this.onEventUpdateScore,this),o.evtCenter.on(c.evts.EVT_RMATCH_UPDATE_RANK,this.onEventUpdateRank,this),o.evtCenter.on(c.evts.EVT_SHOW_SUPER,this.onEventShowSuper,this),o.evtCenter.on(c.evts.EVT_HIDE_SUPER,this.onEventHideSuper,this),o.evtCenter.on(c.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this),o.evtCenter.on(c.evts.EVT_RMATCH_BANNER,this.onEventCountEnd,this)},t.prototype.onDestroy=function(){this.fishId=[],this.fishScore=[],this.rankArr=[],this.rank_data={},o.evtCenter.off(c.evts.EVT_RMATCH_UPDATE_SCORE,this.onEventUpdateScore,this),o.evtCenter.off(c.evts.EVT_RMATCH_UPDATE_RANK,this.onEventUpdateRank,this),o.evtCenter.off(c.evts.EVT_SHOW_SUPER,this.onEventShowSuper,this),o.evtCenter.off(c.evts.EVT_HIDE_SUPER,this.onEventHideSuper,this),o.evtCenter.off(c.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this),o.evtCenter.off(c.evts.EVT_RMATCH_BANNER,this.onEventCountEnd,this),o.evtCenter.emit(c.evts.EVT_RMATCH_HIDE_RANK,this)},t.prototype.onEventCountEnd=function(e){2==e&&(this._seconds=60)},t.prototype.onEventPlayerEnter=function(e){1==s.model.room_match.rmatchState&&this["scoreSeat"+o.utils.getRelativeSeat(e.seatId)].setVisible(!0)},t.prototype.onEventPlayerLeave=function(e,t){this["scoreSeat"+o.utils.getRelativeSeat(t)].setVisible(!1)},t.prototype._countDownMttMatch=function(){this._seconds--,this.fntCount.getComponent(cc.Label).string=this.getFormatTimeFromSeconds(this._seconds,!1),this._seconds>30?this.fntCount.getComponent(cc.Label).font=n.AssetsManager.getRes("img/font/fnt14"):this._seconds>1?(this.fntCount.getComponent(cc.Label).font=n.AssetsManager.getRes("img/font/fnt15"),this.fntCount.runAction(cc.repeat(cc.sequence(cc.scaleTo(.06,1.1),cc.scaleTo(.06,.9)),1)),9==this._seconds&&this._countDown()):this.unschedule(this._countDownMttMatch)},t.prototype.getFormatTimeFromSeconds=function(e,t){var i,n,s=(e=e%60)/3600;return 0==s?(n=t?"00:":"",i=e/60):(n=(s<10?"0"+s:s)+":",i=e/60%60),n+(i<10?"0"+i:i)+":"+(e<10?"0"+e:e)},t.prototype._countDown=function(){var e=this.csbNode.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),this.node.removeFromParent(!0),this.destroy()}.bind(this),this),e.play("count_down")},t.prototype.onEventShowSuper=function(){null!=this["scoreSeat"+s.model.table.seatId]&&(this["scoreSeat"+o.utils.getRelativeSeat(s.ME.playerInfo.seatId)].active=!1)},t.prototype.onEventHideSuper=function(){null!=this["scoreSeat"+s.model.table.seatId]&&(this["scoreSeat"+o.utils.getRelativeSeat(s.ME.playerInfo.seatId)].active=!0)},t.prototype.initRankPanel=function(){this.rankArr=[];for(var e=1;e<=4;e++){var t=(new cc.Node).addComponent(a.RmatchRank);t.ctor(e),t&&this["rank_node"+e]&&(this["rank_node"+e].addChild(t),this["rank_node"+e].active=!1,this.rankArr.push(t))}},t.prototype.initFish=function(){var e=n.AssetsManager.getRes("img/atlas/treasure"),t=o.configTable.room_match[s.model.room_match.rmatchCfgId];this.fish_1.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_xuanshang_fish_"+t.target1),this.fish_2.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_xuanshang_fish_"+t.target2),this.fish_3.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_xuanshang_fish_"+t.target3),this.fishId=[],this.fishId.push(t.target1),this.fishId.push(t.target2),this.fishId.push(t.target3);for(var i=1;i<=3;i++){var c=this["fish_"+i].getContentSize();this["fish_"+i].setScale(40/c.width),this["fish_"+i].setScale(40/c.height)}this.fishScore=[],this.fishScore.push(t.target1_score),this.fishScore.push(t.target2_score),this.fishScore.push(t.target3_score),this.score_1.getComponent(cc.Label).string=t.target1_score+"\u5206",this.score_2.getComponent(cc.Label).string=t.target2_score+"\u5206",this.score_3.getComponent(cc.Label).string=t.target3_score+"\u5206"},t.prototype.onEventUpdateScore=function(e,t,i){var n=s.model.table.getPlayerInfo(e);if(n&&n.seatId){var c=o.utils.getRelativeSeat(n.seatId);this["fntScore"+c].getComponent(cc.Label).string=i,this["scoreSeat"+c].active=!0}},t.prototype.onEventUpdateRank=function(e,t,i){if(-1==this.lastRank&&-1==this.lastLoc){this.rank_data={};for(var n=0;n<e.length;n++)this.rankArr[n]&&this["rank_node"+(n+1)]&&(this.rank_data[e[n][0]]={rank:e[n][1],score:e[n][2]},this["rank_node"+(n+1)].active=!0);e.length>0&&o.evtCenter.emit(c.evts.EVT_RMATCH_SHOW_RANK,this)}else for(n=0;n<e.length;n++)this.rank_data[e[n][0]]&&(this.rank_data[e[n][0]]={rank:e[n][1],score:e[n][2]});if(this.checkRankData()){for(n=0;n<e.length;n++)if(this.rankArr[n]&&this["rank_node"+(n+1)]){var a=e[n][0];this.rankArr[a-1].setRank(e[n][1]),this.rankArr[a-1].setScore(e[n][2]),this["rank_node"+a].active=!0,this.rank_data[e[n][0]]&&(this.rank_data[e[n][0]]={rank:e[n][1],score:e[n][2]})}this.updateMyRankInfo(t,i)}else{var l={cmd:r.msgs.CMD_TABLE,params:{gameId:28,userId:s.ME.userId,action:"cmTbFull",matchId:s.model.room_match.rmatchId,roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.ME.playerInfo.seatId}};h.tcp.send(l)}},t.prototype.checkRankData=function(){if(this.rank_data.length<=3){for(var e=0;e<this.rank_data.length-1;e++)if(this.rank_data[e][2]<this.rank_data[e+1][2])return!1;if(this.rank_data.length!=this.rank_data[this.rank_data.length-1])return!1;for(e=0;e<this.rank_data.length;e++)if(this.rank_data[e][1]!=e+1)return!1}return!0},t.prototype.updateMyRankInfo=function(e,t){this.rank_data[e]&&this.rank_data[e].rank<this.lastRank?(this.lastRank=this.rank_data[e].rank,this.rankArr[e-1]&&this.rankArr[e-1].runRankAction("up")):this.rank_data[e]&&this.rank_data[e].rank>this.lastRank&&(this.lastRank=this.rank_data[e].rank,this.rankArr[e-1]&&this.rankArr[e-1].runRankAction("down")),e!=this.lastLoc&&(this.rankArr[e-1]&&(this.rankArr[e-1].setPictureMySelf(),this.rankArr[e-1].runParticleAction()),-1!=this.lastLoc&&(this.rankArr[this.lastLoc-1].setPictuteNormal(),this.rankArr[this.lastLoc-1].stopParticleAction()),this.lastLoc=e);for(var i=0;i<t;i++)this["rank_node"+(i+1)]&&(this["rank_node"+(i+1)].active=!0),4-i>t&&this["rank_node"+(4-i)]&&(this["rank_node"+(4-i)].active=!1)},t}(cc.Component);i.RmatchPanel=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_roommatch_rank":"fish_roommatch_rank"}],fish_roommatch_rank:[function(e,t,i){"use strict";cc._RF.push(t,"bb05ed1hxdPyaT7C8c5Rjes","fish_roommatch_rank"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbNode=null,this.particleNode=null,this.tag=e,this.score_bg=null,this.fnt_rank=null,this.fish_crown=null,this.fntScore=null},t.prototype.onLoad=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/room_match_ranking")),this.node.addChild(this.csbNode),this.posArr=[cc.v2(66,0),cc.v2(63,-8),cc.v2(58,-12),cc.v2(50,-16),cc.v2(-50,-16),cc.v2(-58,-12),cc.v2(-63,-8),cc.v2(-66,0),cc.v2(-63,8),cc.v2(-58,12),cc.v2(-50,17),cc.v2(50,17),cc.v2(58,12),cc.v2(63,8),cc.v2(66,0)],1!=this.tag&&(this.fish_crown.active=!1)},t.prototype.setScore=function(e){this.fntScore&&(this.fntScore.getComponent(cc.Label).string=e)},t.prototype.setRank=function(e){e>0&&e<=9?this.fnt_rank.setScale(.26):e<=99?this.fnt_rank.setScale(.23):this.fnt_rank.setScale(.2),this.fnt_rank.getComponent(cc.Label).string=e},t.prototype.runParticleAction=function(){this.particleNode&&(this.particleNode.active=!0,this.particleNode.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.08,this.posArr[1]),cc.moveTo(.08,this.posArr[2]),cc.moveTo(.08,this.posArr[3]),cc.moveTo(.8,this.posArr[4]),cc.moveTo(.08,this.posArr[5]),cc.moveTo(.08,this.posArr[6]),cc.moveTo(.08,this.posArr[7]),cc.moveTo(.08,this.posArr[8]),cc.moveTo(.08,this.posArr[9]),cc.moveTo(.08,this.posArr[10]),cc.moveTo(.8,this.posArr[11]),cc.moveTo(.08,this.posArr[12]),cc.moveTo(.08,this.posArr[13]),cc.moveTo(.08,this.posArr[14])))))},t.prototype.stopParticleAction=function(){this.particleNode&&(this.particleNode.stopAllActions(),this.particleNode.active=!1)},t.prototype.setPictuteNormal=function(){},t.prototype.setPictureMySelf=function(){},t}(cc.Component);i.RmatchRank=s,cc._RF.pop()},{"../../../assets_manager":"assets_manager"}],fish_roommatch_ready:[function(e,t,i){"use strict";cc._RF.push(t,"838ebdXRYpHs5GjC66bOYUl","fish_roommatch_ready"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbNode=null,this.text_reward=null,this.fntCount=null,this.arrow=null,this._seconds=e,this.showCount=!1},t.prototype.onLoad=function(){this.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/room_match_wait")),this.node.addChild(this.csbNode),this.fntCount.getComponent(cc.Label).string=this.getFormatTimeFromSeconds(this._seconds,!1),this.schedule(this._countDownMttMatch,1),this.arrow.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.6,cc.v2(0,10)),cc.moveBy(.6,cc.v2(0,-10))))),1==c.model.room_match.rmatchLevel?this.text_reward.getComponent(cc.Label).string="2\u5143\u8bdd\u8d39\u76f4\u5145\u5361":this.text_reward.getComponent(cc.Label).string="10\u5143\u8bdd\u8d39\u76f4\u5145\u5361",this.csbNode.getComponent(cc.Animation).play("show")},t.prototype.onDestroy=function(){},t.prototype.getFormatTimeFromSeconds=function(e,t){var i,n,s=(e=e%60)/3600;return 0==s?(n=t?"00:":"",i=e/60):(n=(s<10?"0"+s:s)+":",i=e/60%60),n+(i<10?"0"+i:i)+":"+(e<10?"0"+e:e)},t.prototype._countDownMttMatch=function(){this._seconds--,this.fntCount.getComponent(cc.Label).string=this.getFormatTimeFromSeconds(this._seconds,!1),this._seconds>30||(3==this._seconds?(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/count_down"),!1),this.showCount=!0,this._showCouont(),s.evtCenter.emit(o.evts.EVT_RMATCH_BANNER,1)):0==this._seconds&&(this.unschedule(this._countDownMttMatch),this.showCount||(this.showCount=!0,this._hide())))},t.prototype._showCouont=function(){var e=this.csbNode.getComponent(cc.Animation);e.play("hide"),e.on(cc.Animation.EventType.FINISHED,function(){"hide"==e.currentClip.name?e.play("countdown"):(e.targetOff(this),this.removeFromParent(!0))}.bind(this),this)},t.prototype._hide=function(){var e=this.csbNode.getComponent(cc.Animation);e.play("hide"),e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),this.removeFromParent(!0)}.bind(this),this)},t.prototype.onBtnActivity=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),c.model.dailytask.isLobby=!1,c.model.activity.requestActivityData(2,!0)},t}(cc.Component);i.RmatchReady=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_scene_game:[function(e,t,i){"use strict";cc._RF.push(t,"4d7adRWNn5D1qnGLfWPxqal","fish_scene_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../model/fish_model"),s=e("../../assets_manager"),o=e("../view/fish_view"),c=e("../logic/fish_tcp"),a=e("../define/fish_msg_types"),r=e("./fish_scene_login"),h=e("./fish_scene"),l=e("../define/fish_event_types"),d=e("../view/lobby/fish_lobby_personal_bag"),_=e("../utils/fish_effect_pool"),f=e("../fish"),p=e("../view/fish_book/fish_book"),u=e("../view/invite_friends/fish_invite_friends"),m=e("../view/invite_friends/fish_invite_friends_diamond_message"),g=e("../view/mini/fish_mermaid_game"),v=e("../view/mini/fish_chest_game"),b=function(e){function t(){var t=e.call(this)||this;return t.GameView=o.view.GameView(),t.GameEffer=o.view.GameEffect(),t.FireView1=o.view.FireView(1),t.FireView2=o.view.FireView(2),t.FireView3=o.view.FireView(3),t.FireView4=o.view.FireView(4),t.LaserView=o.view.LaserView(),t.NbombView=o.view.NbombView(),t.LotteryPanel=o.view.LotterPannel(),t.WeaponPanel=o.view.WeaponPanel(),t.MiniCard=o.view.MiniCard(),t.Battery1=o.view.Battery(1),t.Battery2=o.view.Battery(2),t.Battery3=o.view.Battery(3),t.Battery4=o.view.Battery(4),t.ChangeMultiple=o.view.ChangeMultiple(),t.GameUI=o.view.GameUI(),t.PlayerProperty1=o.view.PlayerProperty(1),t.PlayerProperty2=o.view.PlayerProperty(2),t.PlayerProperty3=o.view.PlayerProperty(3),t.PlayerProperty4=o.view.PlayerProperty(4),t.RmatchGuide=o.view.RmatchGuide(),t.RmatchPanel=o.view.RmatchPanel(),t.RmatchReady=o.view.RmatchReady(),t.RmatchBanner=o.view.RmatchBanner(),t.Chat=o.view.Chat(),t.NewbieTaskGame=o.view.NewbieTaskGame(),t.MyPosition=o.view.MyPosition(),t.TreasureTask=o.view.TreasureTask(),t.SuperWeapon=o.view.SuperWeapon(),t.RmatchEnd=o.view.RmatchEnd(),t.SpecialFishComing=o.view.SpecialFishComing(),t.SubsidyGame=o.view.SubsidyGame(),t.MiniPlaying=o.view.MiniPlaying(),t.Bankrupt=o.view.Bankrupt(),t.Bankrupt.ctor(),t.DropSharkTropedo=o.view.DropSharkTorpedo(),t.MainActivity=o.view.MainActivity(),t.BeatSharkTip=o.view.BeatSharkTip(),t.ActGetTorpedo=o.view.ActGetTorpedo(),t.LotteryWindow=o.view.LotteryWindow(),t.WeaponWindow=o.view.WeaponWindow(),t.ShopWindow=o.view.ShopWindow(),t.VipWindow=o.view.VipWindow(),t.Setting=o.view.Setting(),t.BrptPackageNode=o.view.BrptPackageNode(!1),t.RewardPanel=o.view.RewardPanel(),t.MermaidGame=o.view.MermaidGame(),t.ChestGame=o.view.ChestGame(),t.MiniTip=o.view.MiniTip(),t.NobleGift=o.view.NobleGift(),t.NobleRewardEveryDay=o.view.NobleRewardEveryDay(),t.GameFirstCharge=o.view.GameFirstCharge(),t.FishBookWindow=o.view.FishBookWindow(),t.MessageLabel=o.view.MessageLabel(),t.MessageItemBuy=o.view.MessageItemBuy(),t.GameAutoQuit=o.view.GameAutoQuit(),t.NewbieGuideGame=o.view.NewbieGuideGame(),t.LevelUp=o.view.LevelUp(),t}return __extends(t,e),t.prototype.onLoad=function(){cc.log("fish.scene.game.onenter");var e="";e=n.model.table.roomId>=28003e4?"img/nopack/scene03":n.model.table.roomId>=28002e4?"img/nopack/scene02":"img/nopack/scene01",this.getComponentInChildren(cc.Sprite).spriteFrame=s.AssetsManager.getRes(e),this.node.addChild(this.GameView),this.node.addChild(this.GameEffer),this.node.addChild(this.FireView1),this.node.addChild(this.FireView2),this.node.addChild(this.FireView3),this.node.addChild(this.FireView4),this.node.addChild(this.LaserView),this.node.addChild(this.NbombView),this.node.addChild(this.LotteryPanel),this.node.addChild(this.WeaponPanel),this.node.addChild(this.MiniCard),this.node.addChild(this.Battery1),this.node.addChild(this.Battery2),this.node.addChild(this.Battery3),this.node.addChild(this.Battery4),this.node.addChild(this.ChangeMultiple),this.node.addChild(this.GameUI),this.node.addChild(this.PlayerProperty1),this.node.addChild(this.PlayerProperty2),this.node.addChild(this.PlayerProperty3),this.node.addChild(this.PlayerProperty4),this.node.addChild(this.RmatchGuide),this.node.addChild(this.RmatchPanel),this.node.addChild(this.RmatchReady),this.node.addChild(this.RmatchBanner),this.node.addChild(this.Chat),this.node.addChild(this.NewbieTaskGame),this.node.addChild(this.MyPosition),this.node.addChild(this.TreasureTask),this.node.addChild(this.SuperWeapon),this.node.addChild(this.RmatchEnd),this.node.addChild(this.SpecialFishComing),this.node.addChild(this.SubsidyGame),this.node.addChild(this.MiniPlaying),this.node.addChild(this.Bankrupt),this.node.addChild(this.DropSharkTropedo),this.node.addChild(this.MainActivity),this.node.addChild(this.BeatSharkTip),this.node.addChild(this.ActGetTorpedo),this.node.addChild(this.LotteryWindow),this.node.addChild(this.WeaponWindow),this.node.addChild(this.ShopWindow),this.node.addChild(this.VipWindow),this.node.addChild(this.Setting),this.node.addChild(this.BrptPackageNode),this.node.addChild(this.RewardPanel),this.node.addChild(this.MermaidGame),this.node.addChild(this.ChestGame),this.node.addChild(this.MiniTip),this.node.addChild(this.NobleGift),this.node.addChild(this.NobleRewardEveryDay),this.node.addChild(this.GameFirstCharge),this.node.addChild(this.FishBookWindow),this.node.addChild(this.MessageLabel),this.node.addChild(this.MessageItemBuy),this.node.addChild(this.GameAutoQuit),this.node.addChild(this.NewbieGuideGame),this.node.addChild(this.LevelUp),h.evtCenter.on(l.evts.EVT_POPUP_PERSONAL_BAG,function(){this.node.addChild((new cc.Node).addComponent(d.LobbyBag).node,o.View.POPUP)}.bind(this),this),h.evtCenter.on(l.evts.EVT_POPUP_MERMAID_FORCE,function(e,t,i){var n;(n=(new cc.Node).addComponent(g.MermaidGame)).ctor(e,t,i),this.node.addChild(n.node,o.View.POPUP)}.bind(this),this),h.evtCenter.on(l.evts.EVT_POPUP_CHEST_FORCE,function(e,t,i,n){var s;(s=(new cc.Node).addComponent(v.ChestGame)).ctor(e,t,i,n),this.node.addChild(s.node,o.View.POPUP)}.bind(this),this),h.evtCenter.on(l.evts.EVT_FISH_BOOK_SHOW,function(){this.node.addChild((new cc.Node).addComponent(p.FishBook).node,o.View.TIPS)}.bind(this),this),h.evtCenter.on(l.evts.EVT_POPUP_INVITE_FRIENDS,function(){this.node.addChild((new cc.Node).addComponent(u.InviteFriends).node,o.View.POPUP)}.bind(this),this),h.evtCenter.on(l.evts.EVT_POPUP_INVITEFRIENDS_DIAMOND,function(e){var t;(t=(new cc.Node).addComponent(m.InviteFriendsDiamondMessage)).ctor(e),this.node.addChild(t.node,o.View.POPUP)}.bind(this),this),h.evtCenter.emit(l.evts.EVT_ENTER_GAME_SCENE),h.audio.playBg("sound/bg_game"),f.fish.effectPool=new _.EffectPool,cc.game.on(cc.game.EVENT_SHOW,this.onEventGameOnShow,this),cc.game.on(cc.game.EVENT_HIDE,this.onEventGameOnHide,this)},t.prototype.onDestroy=function(){this.GameEffer.stopAllActions(),h.evtCenter.emit(l.evts.EVT_EXIT_GAME_SCENE),f.fish.effectPool.release(),f.fish.effectPool=null},t.prototype.onEventGameOnShow=function(){if(cc.log("++++++++++++++++++++++++++   EVT_GAME_ON_SHOW"),c.tcp.getHideTimeInv()<3e4||n.model.room_match.isJoinedRmatch)c.tcp.setHideTime(0);else{var e={cmd:a.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:n.ME.userId,clientId:r.AccountInfo.clientId,action:"leave",roomId:n.model.table.roomId,seatId:n.model.table.seatId}};c.tcp.send(e)}},t.prototype.onEventGameOnHide=function(){c.tcp.setHideTime(),h.evtCenter.emit(l.evts.EVT_STOP_FIRE),cc.log("------------------------   EVT_GAME_ON_HIDE")},t}(cc.Component);i.SceneGame=b,cc._RF.pop()},{"../../assets_manager":"assets_manager","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../fish":"fish","../logic/fish_tcp":"fish_tcp","../model/fish_model":"fish_model","../utils/fish_effect_pool":"fish_effect_pool","../view/fish_book/fish_book":"fish_book","../view/fish_view":"fish_view","../view/invite_friends/fish_invite_friends":"fish_invite_friends","../view/invite_friends/fish_invite_friends_diamond_message":"fish_invite_friends_diamond_message","../view/lobby/fish_lobby_personal_bag":"fish_lobby_personal_bag","../view/mini/fish_chest_game":"fish_chest_game","../view/mini/fish_mermaid_game":"fish_mermaid_game","./fish_scene":"fish_scene","./fish_scene_login":"fish_scene_login"}],fish_scene_loading_base:[function(e,t,i){"use strict";cc._RF.push(t,"f3d0aoywrlJ4ZFtGmzQ52d5","fish_scene_loading_base"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_scene_loading"),s=e("../fish_scene"),o=e("../../define/fish_event_types"),c=e("../../../assets_manager"),a=function(e){function t(t,i){var s=e.call(this)||this;return s.loading=null,s.targetScene=null,s.res=null,s.targetScene=t,s.res=i,s.resMgr=new c._AssetsManager,s.loading=(new cc.Node).addComponent(n.SceneLoading),s}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.loading.node),this.scheduleOnce(this._loadRes,.2)},t.prototype.onDestroy=function(){cc.sys.garbageCollect()},t.prototype._loadRes=function(){var e={trigger:this._onLoadResProgress.bind(this),cb:this._onLoadResFinish.bind(this)};this.resMgr.loadRes(this.res,e)},t.prototype._onLoadResProgress=function(e,t){this.loading.refresh(t/e)},t.prototype._onLoadResFinish=function(e,t){this.resMgr.clearCallBack(),this.loading.refresh(1),s.evtCenter.emit(o.evts.EVT_SWITCH_SCENE,this.targetScene),this.node.removeFromParent(),this.destroy()},t}(cc.Component);i.SceneLoadingBase=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../fish_scene":"fish_scene","./fish_scene_loading":"fish_scene_loading"}],fish_scene_loading_game_to_lobby:[function(e,t,i){"use strict";cc._RF.push(t,"ed96fWSVfhLcqhGjFSRCEg3","fish_scene_loading_game_to_lobby"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_scene_loading_base"),s=e("../fish_scene_lobby"),o=function(e){function t(){return e.call(this,s.SceneLobby,[])||this}return __extends(t,e),t}(n.SceneLoadingBase);i.SceneGameToLobby=o,cc._RF.pop()},{"../fish_scene_lobby":"fish_scene_lobby","./fish_scene_loading_base":"fish_scene_loading_base"}],fish_scene_loading_lobby_to_clown:[function(e,t,i){"use strict";cc._RF.push(t,"2857c9D+1lG643KzL19/4mC","fish_scene_loading_lobby_to_clown"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this,t,[])||this}return __extends(t,e),t}(e("./fish_scene_loading_base").SceneLoadingBase);i.SceneLobbyToClown=n,cc._RF.pop()},{"./fish_scene_loading_base":"fish_scene_loading_base"}],fish_scene_loading_lobby_to_fruit:[function(e,t,i){"use strict";cc._RF.push(t,"61fd7sPRFJBGqoQx+iIj5y0","fish_scene_loading_lobby_to_fruit"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this,t,[])||this}return __extends(t,e),t}(e("./fish_scene_loading_base").SceneLoadingBase);i.SceneLobbyToFruit=n,cc._RF.pop()},{"./fish_scene_loading_base":"fish_scene_loading_base"}],fish_scene_loading_lobby_to_game:[function(e,t,i){"use strict";cc._RF.push(t,"ef18euy73JO6JbSzyf2tKcB","fish_scene_loading_lobby_to_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_scene_loading_base"),s=e("../fish_scene_game"),o=e("../../../xmen_interface"),c=e("../../model/fish_model"),a=cc._decorator,r=a.ccclass,h=(a.property,function(e){function t(){return e.call(this,s.SceneGame,[{url:"sound/drop_diamond",type:cc.AudioClip},{url:"sound/drop_gold",type:cc.AudioClip},{url:"sound/drop_crystal",type:cc.AudioClip},{url:"sound/fly_item",type:cc.AudioClip},{url:"sound/flip_coin_mermaid",type:cc.AudioClip},{url:"sound/flip_coin",type:cc.AudioClip},{url:"sound/bg_mini_mermaid",type:cc.AudioClip},{url:"sound/bg_mini_pirate",type:cc.AudioClip},{url:"sound/big_win",type:cc.AudioClip},{url:"sound/big_win_gold",type:cc.AudioClip},{url:"sound/shuffle",type:cc.AudioClip},{url:"sound/roulette",type:cc.AudioClip},{url:"sound/scroll_close",type:cc.AudioClip},{url:"sound/scroll_open",type:cc.AudioClip},{url:"sound/roulette_win",type:cc.AudioClip},{url:"sound/treasure_full",type:cc.AudioClip},{url:"sound/treasure_none",type:cc.AudioClip},{url:"sound/treasure_drop",type:cc.AudioClip},{url:"sound/mini_game_coin",type:cc.AudioClip},{url:"sound/mini_card_drop",type:cc.AudioClip},{url:"sound/mini_card_fly",type:cc.AudioClip},{url:"sound/multiple_change",type:cc.AudioClip},{url:"sound/freeze",type:cc.AudioClip},{url:"sound/fire_fury",type:cc.AudioClip},{url:"sound/fire_laser_1",type:cc.AudioClip},{url:"sound/1101_die_20",type:cc.AudioClip},{url:"sound/1103_die_20",type:cc.AudioClip},{url:"sound/1104_die_20",type:cc.AudioClip},{url:"sound/1116_die",type:cc.AudioClip},{url:"sound/1118_die",type:cc.AudioClip},{url:"sound/1119_die",type:cc.AudioClip},{url:"sound/1120_die",type:cc.AudioClip},{url:"sound/1203_die",type:cc.AudioClip},{url:"sound/1204_die",type:cc.AudioClip},{url:"sound/1206_die",type:cc.AudioClip},{url:"sound/1208_die",type:cc.AudioClip},{url:"sound/1209_die",type:cc.AudioClip},{url:"sound/1210_die",type:cc.AudioClip},{url:"sound/boss_die",type:cc.AudioClip},{url:"sound/gold_wheel",type:cc.AudioClip},{url:"sound/gold_explode_3",type:cc.AudioClip},{url:"sound/gold_explode",type:cc.AudioClip},{url:"sound/weapon_up",type:cc.AudioClip},{url:"sound/summon",type:cc.AudioClip},{url:"sound/n_bomb",type:cc.AudioClip},{url:"sound/ice_crash",type:cc.AudioClip},{url:"sound/bomb_fish_explode",type:cc.AudioClip},{url:"sound/fish_talk_lantern",type:cc.AudioClip},{url:"sound/fish_talk_mermaid",type:cc.AudioClip},{url:"sound/level_up",type:cc.AudioClip},{url:"sound/boss_coming",type:cc.AudioClip},{url:"sound/forge_success",type:cc.AudioClip},{url:"particle/wpup_star",type:cc.Prefab},{url:"particle/catch_star",type:cc.Prefab},{url:"particle/fish_boss_catch",type:cc.Prefab},{url:"particle/fish_catch_smoke",type:cc.Prefab},{url:"particle/fish_star",type:cc.Prefab},{url:"prefabs/gold_wheel",type:cc.Prefab},{url:"prefabs/gold_coin_stack",type:cc.Prefab},{url:"prefabs/summon",type:cc.Prefab},{url:"prefabs/big_win_1",type:cc.Prefab},{url:"prefabs/big_win_2",type:cc.Prefab},{url:"prefabs/explode_1",type:cc.Prefab},{url:"prefabs/explode_2",type:cc.Prefab},{url:"prefabs/freeze",type:cc.Prefab},{url:"prefabs/game_wave",type:cc.Prefab},{url:"prefabs/level_up",type:cc.Prefab},{url:"prefabs/boss_coming",type:cc.Prefab},{url:"prefabs/bomb_fish_die",type:cc.Prefab},{url:"prefabs/electric_fish_die",type:cc.Prefab},{url:"prefabs/nbomb",type:cc.Prefab},{url:"prefabs/scene_bg",type:cc.Prefab},{url:"prefabs/game_ui",type:cc.Prefab},{url:"prefabs/change_gun",type:cc.Prefab},{url:"prefabs/chat",type:cc.Prefab},{url:"prefabs/chat_cell",type:cc.Prefab},{url:"prefabs/game_personal_info",type:cc.Prefab},{url:"prefabs/rewards_panel_game",type:cc.Prefab},{url:"prefabs/game_fish_book",type:cc.Prefab},{url:"prefabs/super_weapon",type:cc.Prefab},{url:"prefabs/minigame_card",type:cc.Prefab},{url:"prefabs/card_drop",type:cc.Prefab},{url:"prefabs/lottery_window",type:cc.Prefab},{url:"prefabs/treasure",type:cc.Prefab},{url:"prefabs/card_coming",type:cc.Prefab},{url:"prefabs/lottery_card",type:cc.Prefab},{url:"prefabs/lottery_panel",type:cc.Prefab},{url:"prefabs/weapon_panel",type:cc.Prefab},{url:"prefabs/battery",type:cc.Prefab},{url:"prefabs/change_multiple",type:cc.Prefab},{url:"prefabs/player_property",type:cc.Prefab},{url:"prefabs/my_position_tip",type:cc.Prefab},{url:"prefabs/room_match_locking",type:cc.Prefab},{url:"prefabs/subsidy_game",type:cc.Prefab},{url:"prefabs/mermaid_game",type:cc.Prefab},{url:"prefabs/mermaid_coin",type:cc.Prefab},{url:"prefabs/indiana_game",type:cc.Prefab},{url:"prefabs/chest_box",type:cc.Prefab},{url:"prefabs/laser_5106",type:cc.Prefab},{url:"prefabs/laser_5107",type:cc.Prefab},{url:"prefabs/laser_5108",type:cc.Prefab},{url:"prefabs/laser_5109",type:cc.Prefab},{url:"prefabs/interactive_expression_bomb",type:cc.Prefab},{url:"prefabs/interactive_expression_egg",type:cc.Prefab},{url:"prefabs/interactive_expression_ring",type:cc.Prefab},{url:"prefabs/interactive_expression_rose",type:cc.Prefab},{url:"prefabs/newbie_task",type:cc.Prefab},{url:"prefabs/newbie_arrow",type:cc.Prefab},{url:"prefabs/newbie_guide_game",type:cc.Prefab},{url:"prefabs/newbie_guide_step1",type:cc.Prefab},{url:"prefabs/newbie_guide_step2",type:cc.Prefab},{url:"prefabs/newbie_guide_step3",type:cc.Prefab},{url:"prefabs/newbie_guide_step4",type:cc.Prefab},{url:"prefabs/newbie_guide_step5",type:cc.Prefab},{url:"img/nopack/scene01",type:cc.SpriteFrame},{url:"img/nopack/scene02",type:cc.SpriteFrame},{url:"img/nopack/scene03",type:cc.SpriteFrame},{url:"img/nopack/laser_effect",type:cc.SpriteFrame},{url:"img/atlas/mini_game",type:cc.SpriteAtlas},{url:"img/atlas/game_common",type:cc.SpriteAtlas},{url:"img/atlas/vip_weapon",type:cc.SpriteAtlas},{url:"img/atlas/fire_net",type:cc.SpriteAtlas},{url:"img/atlas/boss_coming",type:cc.SpriteAtlas},{url:"img/atlas/game_effect",type:cc.SpriteAtlas},{url:"img/atlas/skill_fury",type:cc.SpriteAtlas},{url:"img/atlas/skill_laser",type:cc.SpriteAtlas},{url:"img/atlas/skill_lock",type:cc.SpriteAtlas},{url:"img/atlas/battery",type:cc.SpriteAtlas},{url:"img/atlas/lottery",type:cc.SpriteAtlas},{url:"img/atlas/chat",type:cc.SpriteAtlas},{url:"img/atlas/treasure",type:cc.SpriteAtlas},{url:"img/font/fnt01",type:cc.BitmapFont},{url:"img/font/fnt02",type:cc.BitmapFont},{url:"img/font/fnt03",type:cc.BitmapFont},{url:"img/font/fnt04",type:cc.BitmapFont},{url:"img/font/fnt05",type:cc.BitmapFont},{url:"img/font/fnt06",type:cc.BitmapFont},{url:"img/font/fnt07",type:cc.BitmapFont},{url:"img/font/fnt08",type:cc.BitmapFont},{url:"img/font/fnt09",type:cc.BitmapFont},{url:"img/font/fnt10",type:cc.BitmapFont},{url:"img/font/fnt11",type:cc.BitmapFont},{url:"img/font/fnt12",type:cc.BitmapFont},{url:"img/font/fnt13",type:cc.BitmapFont},{url:"img/font/fnt14",type:cc.BitmapFont},{url:"img/font/fnt15",type:cc.BitmapFont},{url:"img/font/fnt16",type:cc.BitmapFont},{url:"img/font/fnt17",type:cc.BitmapFont},{url:"img/font/fnt18",type:cc.BitmapFont},{url:"img/font/fnt19",type:cc.BitmapFont},{url:"img/font/fnt20",type:cc.BitmapFont},{url:"img/font/fnt21",type:cc.BitmapFont},{url:"img/font/fnt22",type:cc.BitmapFont},{url:"img/font/fnt23",type:cc.BitmapFont},{url:"img/font/fnt24",type:cc.BitmapFont},{url:"img/font/fnt25",type:cc.BitmapFont},{url:"img/font/fnt26",type:cc.BitmapFont},{url:"img/font/fnt27",type:cc.BitmapFont},{url:"img/font/fnt28",type:cc.BitmapFont},{url:"img/font/fnt29",type:cc.BitmapFont},{url:"img/font/fnt30",type:cc.BitmapFont},{url:"img/font/fnt31",type:cc.BitmapFont},{url:"img/font/fnt32",type:cc.BitmapFont},{url:"img/font/fnt33",type:cc.BitmapFont},{url:"img/fish/fish_1101",type:cc.SpriteAtlas},{url:"img/fish/fish_1102",type:cc.SpriteAtlas},{url:"img/fish/fish_1103",type:cc.SpriteAtlas},{url:"img/fish/fish_1104",type:cc.SpriteAtlas},{url:"img/fish/fish_1105",type:cc.SpriteAtlas},{url:"img/fish/fish_1106",type:cc.SpriteAtlas},{url:"img/fish/fish_1107",type:cc.SpriteAtlas},{url:"img/fish/fish_1108",type:cc.SpriteAtlas},{url:"img/fish/fish_1109",type:cc.SpriteAtlas},{url:"img/fish/fish_1110",type:cc.SpriteAtlas},{url:"img/fish/fish_1111",type:cc.SpriteAtlas},{url:"img/fish/fish_1112",type:cc.SpriteAtlas},{url:"img/fish/fish_1113",type:cc.SpriteAtlas},{url:"img/fish/fish_1114",type:cc.SpriteAtlas},{url:"img/fish/fish_1115",type:cc.SpriteAtlas},{url:"img/fish/fish_1116",type:cc.SpriteAtlas},{url:"img/fish/fish_1117",type:cc.SpriteAtlas},{url:"img/fish/fish_1118",type:cc.SpriteAtlas},{url:"img/fish/fish_1119",type:cc.SpriteAtlas},{url:"img/fish/fish_1120",type:cc.SpriteAtlas},{url:"img/fish/fish_1121",type:cc.SpriteAtlas},{url:"img/fish/fish_1203",type:cc.SpriteAtlas},{url:"img/fish/fish_1203",type:cc.SpriteAtlas},{url:"img/fish/fish_1204",type:cc.SpriteAtlas},{url:"img/fish/fish_1206",type:cc.SpriteAtlas},{url:"img/fish/fish_1208",type:cc.SpriteAtlas},{url:"img/fish/fish_1209",type:cc.SpriteAtlas},{url:"img/fish/fish_1210",type:cc.SpriteAtlas},{url:"img/fish/fish_1302",type:cc.SpriteAtlas},{url:"img/fish/fish_1303",type:cc.SpriteAtlas},{url:"img/fish/fish_1304",type:cc.SpriteAtlas},{url:"img/fish/fish_1305",type:cc.SpriteAtlas},{url:"img/fish/fish_1402",type:cc.SpriteAtlas},{url:"img/fish/fish_1403",type:cc.SpriteAtlas},{url:"img/fish/fish_1404",type:cc.SpriteAtlas},{url:"img/fish/fish_1405",type:cc.SpriteAtlas},{url:"img/fish/fish_1406",type:cc.SpriteAtlas},{url:"img/fish/fish_1601",type:cc.SpriteAtlas},{url:"img/fish/fish_1602",type:cc.SpriteAtlas}])||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),o.xmen.SDKInterfaceManager.clickStat("click_table_start",c.ME.userId.toString())},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),o.xmen.SDKInterfaceManager.clickStat("click_table_start",c.ME.userId.toString())},t=__decorate([r],t)}(n.SceneLoadingBase));i.SceneLobbyToGame=h,cc._RF.pop()},{"../../../xmen_interface":"xmen_interface","../../model/fish_model":"fish_model","../fish_scene_game":"fish_scene_game","./fish_scene_loading_base":"fish_scene_loading_base"}],fish_scene_loading_lobby_to_h3card:[function(e,t,i){"use strict";cc._RF.push(t,"9707ff5NHNG3rs7GMBf2kuq","fish_scene_loading_lobby_to_h3card"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this,t,[])||this}return __extends(t,e),t}(e("./fish_scene_loading_base").SceneLoadingBase);i.SceneLobbyToH3Card=n,cc._RF.pop()},{"./fish_scene_loading_base":"fish_scene_loading_base"}],fish_scene_loading_lobby_to_match:[function(e,t,i){"use strict";cc._RF.push(t,"9f56eOIq51NG7bFvqESbwbA","fish_scene_loading_lobby_to_match"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_scene_loading_base"),s=e("../fish_scene_match"),o=e("../../../xmen_interface"),c=e("../../model/fish_model"),a=function(e){function t(){return e.call(this,s.SceneMatch,[{url:"img/nopack/scene01",type:cc.SpriteFrame},{url:"img/nopack/scene02",type:cc.SpriteFrame},{url:"img/nopack/scene03",type:cc.SpriteFrame},{url:"img/fish/fish_1101",type:cc.SpriteAtlas},{url:"img/fish/fish_1102",type:cc.SpriteAtlas},{url:"img/fish/fish_1103",type:cc.SpriteAtlas},{url:"img/fish/fish_1104",type:cc.SpriteAtlas},{url:"img/fish/fish_1105",type:cc.SpriteAtlas},{url:"img/fish/fish_1106",type:cc.SpriteAtlas},{url:"img/fish/fish_1107",type:cc.SpriteAtlas},{url:"img/fish/fish_1108",type:cc.SpriteAtlas},{url:"img/fish/fish_1109",type:cc.SpriteAtlas},{url:"img/fish/fish_1110",type:cc.SpriteAtlas},{url:"img/fish/fish_1111",type:cc.SpriteAtlas},{url:"img/fish/fish_1112",type:cc.SpriteAtlas},{url:"img/fish/fish_1113",type:cc.SpriteAtlas},{url:"img/fish/fish_1114",type:cc.SpriteAtlas},{url:"img/fish/fish_1115",type:cc.SpriteAtlas},{url:"img/fish/fish_1116",type:cc.SpriteAtlas},{url:"img/fish/fish_1117",type:cc.SpriteAtlas},{url:"img/fish/fish_1118",type:cc.SpriteAtlas},{url:"img/fish/fish_1119",type:cc.SpriteAtlas},{url:"img/fish/fish_1120",type:cc.SpriteAtlas},{url:"img/fish/fish_1121",type:cc.SpriteAtlas},{url:"img/fish/fish_1203",type:cc.SpriteAtlas},{url:"img/fish/fish_1203",type:cc.SpriteAtlas},{url:"img/fish/fish_1204",type:cc.SpriteAtlas},{url:"img/fish/fish_1206",type:cc.SpriteAtlas},{url:"img/fish/fish_1208",type:cc.SpriteAtlas},{url:"img/fish/fish_1209",type:cc.SpriteAtlas},{url:"img/fish/fish_1210",type:cc.SpriteAtlas}])||this}return __extends(t,e),t.prototype.onLoad=function(){o.xmen.SDKInterfaceManager.clickStat("click_table_start",c.ME.userId.toString())},t.prototype.onDestroy=function(){o.xmen.SDKInterfaceManager.clickStat("click_table_end",c.ME.userId.toString())},t}(n.SceneLoadingBase);i.SceneLobbyToMatch=a,cc._RF.pop()},{"../../../xmen_interface":"xmen_interface","../../model/fish_model":"fish_model","../fish_scene_match":"fish_scene_match","./fish_scene_loading_base":"fish_scene_loading_base"}],fish_scene_loading_lobby_to_shz:[function(e,t,i){"use strict";cc._RF.push(t,"224f1QSfo9F7Z1AzYNol7Dm","fish_scene_loading_lobby_to_shz"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this,t,[])||this}return __extends(t,e),t}(e("./fish_scene_loading_base").SceneLoadingBase);i.SceneLobbyToShz=n,cc._RF.pop()},{"./fish_scene_loading_base":"fish_scene_loading_base"}],fish_scene_loading_login_to_lobby:[function(e,t,i){"use strict";cc._RF.push(t,"0295d1HwKVAJ4qoxHvfz3Lz","fish_scene_loading_login_to_lobby"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./fish_scene_loading_base"),s=e("../fish_scene"),o=e("../../define/fish_event_types"),c=e("../../../xmen_interface"),a=e("../../define/fish_msg_types"),r=e("../fish_scene_login"),h=e("../../model/fish_model"),l=e("../../logic/fish_tcp"),d=e("../fish_scene_lobby"),_=function(e){function t(){var t=e.call(this,d.SceneLobby,[{url:"prefabs/lobby_rooms",type:cc.Prefab},{url:"prefabs/lobby_ui",type:cc.Prefab},{url:"prefabs/lobby_top",type:cc.Prefab},{url:"prefabs/lobby_room_unlock",type:cc.Prefab},{url:"prefabs/lobby_room_count_down",type:cc.Prefab},{url:"prefabs/lobby_recommend_animation",type:cc.Prefab},{url:"prefabs/set_up",type:cc.Prefab},{url:"prefabs/new_hand_1",type:cc.Prefab},{url:"prefabs/lobby_personal_info",type:cc.Prefab},{url:"prefabs/lobby_more_game",type:cc.Prefab},{url:"prefabs/noble_gift",type:cc.Prefab},{url:"prefabs/vip",type:cc.Prefab},{url:"prefabs/shop",type:cc.Prefab},{url:"prefabs/lobby_mail_message",type:cc.Prefab},{url:"prefabs/lobby_mail_message_cell",type:cc.Prefab},{url:"prefabs/sign",type:cc.Prefab},{url:"prefabs/dailysign_tip",type:cc.Prefab},{url:"prefabs/reward_noble_everyday",type:cc.Prefab},{url:"prefabs/rewards_panel",type:cc.Prefab},{url:"prefabs/reward_Item",type:cc.Prefab},{url:"prefabs/first_benefits_charge",type:cc.Prefab},{url:"prefabs/lobby_change_user_head_image",type:cc.Prefab},{url:"prefabs/invite_friends",type:cc.Prefab},{url:"prefabs/invite_friends_message",type:cc.Prefab},{url:"prefabs/fish_friends",type:cc.Prefab},{url:"prefabs/fish_adding_friends",type:cc.Prefab},{url:"prefabs/fish_friends_cell",type:cc.Prefab},{url:"prefabs/prop_give",type:cc.Prefab},{url:"prefabs/prop_give_cell",type:cc.Prefab},{url:"prefabs/buy_item_tip",type:cc.Prefab},{url:"prefabs/fish_avtivity_tordepo",type:cc.Prefab},{url:"prefabs/bag_item_buy_message",type:cc.Prefab},{url:"prefabs/weapon_forge_panel",type:cc.Prefab},{url:"prefabs/weapon_forge_window",type:cc.Prefab},{url:"prefabs/quick_start",type:cc.Prefab},{url:"prefabs/bonus_exchange",type:cc.Prefab},{url:"prefabs/sign_date",type:cc.Prefab},{url:"prefabs/sign_reward",type:cc.Prefab},{url:"prefabs/sign_big_reward",type:cc.Prefab},{url:"prefabs/sign_card_text",type:cc.Prefab},{url:"prefabs/interactive_expression_rose",type:cc.Prefab},{url:"prefabs/activity",type:cc.Prefab},{url:"prefabs/activity_cell",type:cc.Prefab},{url:"prefabs/level_gifts",type:cc.Prefab},{url:"prefabs/level_gifts_cell",type:cc.Prefab},{url:"prefabs/lobby_ranking",type:cc.Prefab},{url:"prefabs/lobby_ranking_cell",type:cc.Prefab},{url:"prefabs/lobby_personal_bag",type:cc.Prefab},{url:"prefabs/lobby_personal_bag_cell",type:cc.Prefab},{url:"prefabs/lobby_exchange_shop",type:cc.Prefab},{url:"prefabs/lobby_exchange_shop_cell",type:cc.Prefab},{url:"prefabs/daily_task",type:cc.Prefab},{url:"prefabs/dailytask_cell",type:cc.Prefab},{url:"prefabs/dailytask_box",type:cc.Prefab},{url:"prefabs/shop_cell_gold",type:cc.Prefab},{url:"prefabs/shop_cell_diamond",type:cc.Prefab},{url:"prefabs/lobby_arena",type:cc.Prefab},{url:"prefabs/lobby_arena_rule",type:cc.Prefab},{url:"prefabs/lobby_arena_ranking",type:cc.Prefab},{url:"prefabs/lobby_arena_manito",type:cc.Prefab},{url:"prefabs/lobby_arena_yest",type:cc.Prefab},{url:"prefabs/lobby_arena_reward",type:cc.Prefab},{url:"prefabs/beat_shark_tip",type:cc.Prefab},{url:"prefabs/bag_money_change",type:cc.Prefab},{url:"prefabs/system_notice",type:cc.Prefab},{url:"prefabs/lobby_personal_info_message_box",type:cc.Prefab},{url:"prefabs/subsidy_lobby",type:cc.Prefab},{url:"prefabs/shop_effect",type:cc.Prefab},{url:"prefabs/bankrupt_package_root",type:cc.Prefab},{url:"prefabs/invite_friends_activity",type:cc.Prefab},{url:"prefabs/yellow_button",type:cc.Prefab},{url:"prefabs/roommatch_activity",type:cc.Prefab},{url:"prefabs/first_charge_activity",type:cc.Prefab},{url:"prefabs/red_envelope_activity",type:cc.Prefab},{url:"prefabs/red_envelope",type:cc.Prefab},{url:"prefabs/shop_double_activity",type:cc.Prefab},{url:"prefabs/artifact_activity",type:cc.Prefab},{url:"prefabs/channel_reward_activity",type:cc.Prefab},{url:"prefabs/charge_crystal_activity",type:cc.Prefab},{url:"prefabs/activity_shark_main",type:cc.Prefab},{url:"prefabs/fish_activity_real_name",type:cc.Prefab},{url:"prefabs/cannon_1",type:cc.Prefab},{url:"prefabs/cannon_2",type:cc.Prefab},{url:"prefabs/cannon_11",type:cc.Prefab},{url:"prefabs/cannon_12",type:cc.Prefab},{url:"prefabs/cannon_13",type:cc.Prefab},{url:"prefabs/cannon_14",type:cc.Prefab},{url:"prefabs/cannon_15",type:cc.Prefab},{url:"prefabs/cannon_16",type:cc.Prefab},{url:"prefabs/cannon_17",type:cc.Prefab},{url:"prefabs/cannon_18",type:cc.Prefab},{url:"prefabs/cannon_19",type:cc.Prefab},{url:"spine/dwc_bg",type:sp.SkeletonData},{url:"spine/dwc_jdms",type:sp.SkeletonData},{url:"spine/dwc_jjc",type:sp.SkeletonData},{url:"spine/dwc_lthx",type:sp.SkeletonData},{url:"spine/dwc_xyx",type:sp.SkeletonData},{url:"spine/dwc_yxsc",type:sp.SkeletonData},{url:"spine/dwc_jbgm",type:sp.SkeletonData},{url:"spine/dwc_bhjy",type:sp.SkeletonData},{url:"spine/dwc_qhtx",type:sp.SkeletonData},{url:"spine/dwc_sqsy",type:sp.SkeletonData},{url:"spine/quick_start",type:sp.SkeletonData},{url:"img/atlas/new_hand",type:cc.SpriteAtlas},{url:"img/atlas/user_info",type:cc.SpriteAtlas},{url:"img/atlas/head",type:cc.SpriteAtlas},{url:"img/atlas/common",type:cc.SpriteAtlas},{url:"img/atlas/scale9_8888",type:cc.SpriteAtlas},{url:"img/atlas/rank",type:cc.SpriteAtlas},{url:"img/atlas/vip",type:cc.SpriteAtlas},{url:"img/atlas/noble",type:cc.SpriteAtlas},{url:"img/atlas/activity",type:cc.SpriteAtlas},{url:"img/atlas/room_match",type:cc.SpriteAtlas},{url:"img/atlas/sign",type:cc.SpriteAtlas},{url:"img/atlas/invite_friends",type:cc.SpriteAtlas},{url:"img/atlas/friends",type:cc.SpriteAtlas},{url:"img/atlas/lobby_view_common",type:cc.SpriteAtlas},{url:"sound/reward_gain",type:cc.AudioClip},{url:"sound/lanternfish_room",type:cc.AudioClip},{url:"sound/numbfish_room",type:cc.AudioClip},{url:"sound/iceDragon_room",type:cc.AudioClip},{url:"sound/cheer",type:cc.AudioClip},{url:"sound/popup",type:cc.AudioClip},{url:"sound/room_match_end",type:cc.AudioClip},{url:"sound/bg_game",type:cc.AudioClip},{url:"sound/boss_coming_bg",type:cc.AudioClip},{url:"sound/count_down",type:cc.AudioClip}])||this;return t.resLoaded=!1,t.gotUserInfo=!1,t.gotGameData=!1,t.gotRoomList=!1,t.gotMatchList=!1,t.resLoaded=!1,t.gotUserInfo=!1,t.gotGameData=!1,t.gotRoomList=!1,t.gotMatchList=!1,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),h.model.guide.isBenin2Lobby=!0,s.evtCenter.on(o.evts.EVT_RECV_USER_INFO,this.onEventRecvUserInfo,this),s.evtCenter.on(o.evts.EVT_RECV_GAME_DATA,this.onEventRecvGameData,this),s.evtCenter.on(o.evts.EVT_RECV_ROOM_LIST,this.onEventRecvRoomList,this),s.evtCenter.on(o.evts.EVT_RECV_MATCH_LIST,this.onEventRecvMatchLish,this),s.evtCenter.on(c.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),s.evtCenter.on(c.xmen.EventType.TCP_CLOSE,this.onEventSocketError,this),this._bindUser()},t.prototype.onEventRecvUserInfo=function(e){this.gotUserInfo=!0,this._requestLobbyData()},t.prototype.onEventRecvGameData=function(){this.gotGameData=!0,this._checkFinish()},t.prototype.onEventRecvRoomList=function(){this.gotRoomList=!0,this._checkFinish()},t.prototype.onEventRecvMatchLish=function(){this.gotMatchList=!0,this._checkFinish()},t.prototype.onEventSocketError=function(){s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u7f51\u7edc\u94fe\u63a5\u5df2\u65ad\u5f00, \u8bf7\u91cd\u65b0\u767b\u5f55",this._relogin,this)},t.prototype._relogin=function(){this.destroy(),cc.director.loadScene("update")},t.prototype._onLoadResFinish=function(e,t){this.loading.refresh(1),this.resLoaded=!0,this._checkFinish()},t.prototype._bindUser=function(){var e={cmd:a.msgs.CMD_BIND_USER,params:{gameId:9999,clientId:r.AccountInfo.clientId,userId:h.ME.userId,authorCode:r.AccountInfo.authorCode}};l.tcp.send(e),c.xmen.SDKInterfaceManager.clickStat("click_bindUser_start","")},t.prototype._requestLobbyData=function(){cc.log("_requestLobbyData"),h.model.bindUserFlag&&(h.model.bindUserFlag=!1),c.xmen.SDKInterfaceManager.clickStat("click_lobby_start","");var e={cmd:a.msgs.CMD_GAME,params:{action:"match_list",userId:h.ME.userId,gameId:28,clientId:r.AccountInfo.clientId}};l.tcp.send(e)},t.prototype._checkFinish=function(){if(cc.log("checkFinish",this.resLoaded,this.gotGameData,this.gotRoomList,this.gotMatchList),this.resLoaded&&this.gotGameData&&this.gotRoomList&&this.gotMatchList){var e=h.ME.userId;c.xmen.SDKInterfaceManager.clickStat("click_lobby_end",e.toString()),c.xmen.SDKInterfaceManager.clickStat("click_games_end",e.toString()),s.evtCenter.emit(o.evts.EVT_SWITCH_SCENE,d.SceneLobby),this.node.removeFromParent(!0),this.destroy()}},t}(n.SceneLoadingBase);i.SceneLoginToLobby=_,cc._RF.pop()},{"../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../fish_scene":"fish_scene","../fish_scene_lobby":"fish_scene_lobby","../fish_scene_login":"fish_scene_login","./fish_scene_loading_base":"fish_scene_loading_base"}],fish_scene_loading:[function(e,t,i){"use strict";cc._RF.push(t,"8109abytlVMCKdv8Ch1CDXR","fish_scene_loading"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_scene"),s=e("../../../assets_manager"),o=e("../../fish"),c=function(e){function t(){var t=e.call(this)||this;return t.realProgress=.05,t.fakeProgress=.09,t.progress=null,t.tips=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=cc.instantiate(s.AssetsManager.getRes("prefabs/loading"));o.fish.adapterScreen(e),this.node.addChild(e),this.progress=e.getChildByName("progress").getComponent(cc.Label),this.tips=e.getChildByName("tips").getComponent(cc.Label),e.getComponent(cc.Animation).play("animation").wrapMode=cc.WrapMode.Loop,this.realProgress=.05,this.progress.string="5%",this.schedule(this._fakeRefresh,1.8+Math.random(),2,0);var t=n.configTable.languageKey.string_loading.string_zhcn.split("|");this.tips.string=t[Math.floor(Math.random()*t.length)]},t.prototype.onDestroy=function(){},t.prototype.refresh=function(e){e<this.fakeProgress&&(e=this.fakeProgress),this.realProgress=Math.max(e,this.fakeProgress),this.progress.string=Math.ceil(100*this.realProgress)+"%"},t.prototype._fakeRefresh=function(){this.fakeProgress=Math.min(this.fakeProgress+.3,1),this.fakeProgress=Math.max(this.fakeProgress,this.realProgress),this.refresh(this.fakeProgress)},t}(cc.Component);i.SceneLoading=c,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../fish":"fish","../fish_scene":"fish_scene"}],fish_scene_lobby:[function(e,t,i){"use strict";cc._RF.push(t,"9e618pbHltMhKCAJ8VNJrHc","fish_scene_lobby"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../model/fish_model"),s=e("../define/fish_msg_types"),o=e("./fish_scene_login"),c=e("../logic/fish_tcp"),a=e("../view/lobby/fish_lobby_rooms"),r=e("../view/lobby/fish_lobby_ui"),h=e("../view/lobby/fish_lobby_top"),l=e("../view/fish_view"),d=e("../../xmen_interface"),_=e("./fish_scene"),f=e("../define/fish_event_types"),p=e("../view/lobby/fish_lobby_personal_info"),u=e("../view/lobby/fish_lobby_personal_bag"),m=e("../view/noble/fish_noble_gift"),g=e("../view/vip/fish_vip_window"),v=e("../view/shop/fish_shop_view"),b=e("../view/lobby/fish_lobby_exchange_shop"),y=e("../view/activity/fish_activity"),E=e("../view/lobby/fish_lobby_ranking"),C=e("../view/first_charge/fish_first_charge"),T=e("../view/lobby/fish_lobby_change_head"),S=e("../view/arena/fish_lobby_arena"),I=e("../view/daily_task/fish_sign_view"),R=e("../view/new_hand/fish_new_step_1"),w=e("../view/lobby/fish_lobby_mail_message"),A=e("../view/invite_friends/fish_invite_friends"),M=e("../view/invite_friends/fish_invite_friends_diamond_message"),N=e("../view/daily_task/fish_sign_tip"),P=e("../view/arena/fish_lobby_arena_rule"),F=e("../view/arena/fish_lobby_arena_ranking"),B=e("../view/arena/fish_lobby_arena_manito"),L=e("../view/arena/fish_lobby_arena_yest"),k=e("../view/arena/fish_lobby_arena_reward"),D=e("../view/more_game/fish_more_game"),O=e("../view/noble/fish_noble_gift_everyday"),V=e("../view/reward/fish_lobby_reward_panel"),x=e("../view/lobby/fish_lobby_next_level_reward"),G=e("../view/friends/fish_friends"),U=e("../view/prop_give/fish_prop_give_window"),H=e("../view/message/fish_message_item_buy"),W=e("../view/activity/fish_act_get_torpedo"),K=e("../view/activity/fish_activity_beat_shark_tip"),z=e("../view/arena/fish_lobby_arena_bag_exchage_money"),Y=e("../view/auto_update_store/fish_auto_update_store"),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){cc.log("fish.scene.lobby.onenter"),this.onRequestUserInfo(),_.evtCenter.on(f.evts.EVT_POPUP_PERSONAL_BAG,function(e){var t;(t=(new cc.Node).addComponent(u.LobbyBag)).ctor(e),this.node.addChild(t.node,l.View.UI+1)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_HEAD_PERSONAL,function(){this.node.addChild((new cc.Node).addComponent(p.LobbyPersonalInfo).node,l.View.UI+1)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_ARENA_WINDOW,function(e){var t;(t=(new cc.Node).addComponent(S.LobbyArena)).ctor(e),this.node.addChild(t.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_ARENA_RULE,function(){this.node.addChild((new cc.Node).addComponent(P.LobbyArenaRule),l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_ARENA_RANKING,function(){this.node.addChild((new cc.Node).addComponent(F.LobbyArenaRanking),l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_ARENA_MANITO,function(e){var t;(t=(new cc.Node).addComponent(B.LobbyArenaManito)).ctor(e),this.node.addChild(t.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_RECV_MATCH_INFO_YSTD,function(e){var t;(t=(new cc.Node).addComponent(L.LobbyArenaYest)).ctor(e),this.noble.addChild(t.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_ARENA_REWARD,function(e){var t;(t=(new cc.Node).addComponent(k.LobbyArenaReward)).ctor(e),this.noble.addChild(t.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_MORE_GAME,function(){this.noble.addChild((new cc.Node).addComponent(D.MoreGame).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_NOBLE_GIFT,function(){this.node.addChild((new cc.Node).addComponent(m.NobleGift).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_VIP_WINDOW,function(e){var t;(t=(new cc.Node).addComponent(g.VipWindow)).ctor(e),this.node.addChild(t.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_SHOP_WINDOW,function(e){var t;(t=(new cc.Node).addComponent(v.ShopView)).ctor(e),this.node.addChild(t.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_RANKING,function(){this.node.addChild((new cc.Node).addComponent(E.LobbyRanking).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_MAIL_MESSAGE,function(e){var t;(t=(new cc.Node).addComponent(w.LobbyMailMessage)).ctor(e),this.node.addChild(t.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_EXCHANGE_SHOP,function(){this.node.addChild((new cc.Node).addComponent(b.LobbyExchangeShop).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_DAILY_SIGN,function(){this.node.addChild((new cc.Node).addComponent(I.DailySign).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_SIGN_TIP,function(){this.node.addChild((new cc.Node).addComponent(N.SignTip).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_NOBLE_GIFT_EVERYDAY,function(){this.node.addChild((new cc.Node).addComponent(O.NobleRewardEveryDay).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POP_REWARD_PANEL,function(e,t){var i;(i=(new cc.Node).addComponent(V.RewardLobby)).ctor(e,t),this.node.addChild(i.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POP_ACTIVITY,function(e){var t;(t=(new cc.Node).addComponent(y.Activity)).ctor(e),this.node.addChild(t.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POP_FIRST_CHARGE,function(){var e;(e=(new cc.Node).addComponent(C.FirstCharge)).ctor(),this.node.addChild(e.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POP_NEXT_LEVEL_REWARD,function(){this.node.addChild((new cc.Node).addComponent(x.LobbyNextLevelReward).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_CHANGE_HEAD,function(){this.node.addChild((new cc.Node).addComponent(T.LobbyChangeHead).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_INVITE_FRIENDS,function(){this.node.addChild((new cc.Node).addComponent(A.InviteFriends).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_INVITEFRIENDS_DIAMOND,function(e){var t;(t=(new cc.Node).addComponent(M.InviteFriendsDiamondMessage)).ctor(e),this.node.addChild(t.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POP_FRIENDS,function(){this.node.addChild((new cc.Node).addComponent(G.FriendsUI).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POPUP_PROP_GIVE,function(e,t){var i;(i=(new cc.Node).addComponent(U.PropGive)).ctor(e,t),this.node.addChild(i.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_MSG_BUY_ITEM,function(e){var t;(t=(new cc.Node).addComponent(H.MessageItemBuy)).ctor(e.itemNum,e.btn,e.callback,e.target,e.position,e.fishKingFlag),this.node.addChild(t.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_POP_ACT_TORPEDO,function(){this.node.addChild((new cc.Node).addComponent(W.AtvGetTorpedo).node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_MSG_BEAT_BEAST_TIP,function(){var e;e=(new cc.Node).addComponent(K.BeatSharkTip),this.node.addChild(e.node,l.View.POPUP)}.bind(this),this),_.evtCenter.on(f.evts.EVT_BAG_MONEY_EXCHANGE,function(){var e;e=(new cc.Node).addComponent(z.BagMoneyExchange),this.node.addChild(e.node,l.View.POPUP)}.bind(this),this),d.xmen.EventDispatcher.on(d.xmen.EventType.MSG_USER_CLICK_EXIT_IN_SDK,this.onExitGame,this),this.addComponent(a.LobbyRooms),this.node.addChild((new cc.Node).addComponent(r.LobbyUI).node,l.View.UI),this.node.addChild((new cc.Node).addComponent(h.LobbyTop).node,l.View.UI+2),this.node.addChild((new cc.Node).addComponent(Y.AutoUpdateStore).node),this.node.addChild(l.view.WeaponForge(),l.View.UI),0==n.model.guide.guideStep&&this.node.addChild((new cc.Node).addComponent(R.NewStep1).node,l.View.POPUP+20),cc.audioEngine.stopAllEffects(),_.audio.playBg("sound/bg_lobby"),_.evtCenter.emit(f.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this),n.model.friends.readFriendsList()},t.prototype.onRequestUserInfo=function(){if(!n.model.guide.isBenin2Lobby){var e={cmd:s.msgs.CMD_USER_INFO,params:{gameId:9999,userId:n.ME.userId,clientId:o.AccountInfo.clientId}};c.tcp.send(e)}},t.prototype.onDestroy=function(){d.xmen.EventDispatcher.off(d.xmen.EventType.MSG_USER_CLICK_EXIT_IN_SDK,this.onExitGame,this),_.evtCenter.emit(f.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){d.xmen.SDKInterfaceManager.showExitUI()},t.prototype.onExitGame=function(){cc.director.end()},t}(cc.Component);i.SceneLobby=q,cc._RF.pop()},{"../../xmen_interface":"xmen_interface","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../logic/fish_tcp":"fish_tcp","../model/fish_model":"fish_model","../view/activity/fish_act_get_torpedo":"fish_act_get_torpedo","../view/activity/fish_activity":"fish_activity","../view/activity/fish_activity_beat_shark_tip":"fish_activity_beat_shark_tip","../view/arena/fish_lobby_arena":"fish_lobby_arena","../view/arena/fish_lobby_arena_bag_exchage_money":"fish_lobby_arena_bag_exchage_money","../view/arena/fish_lobby_arena_manito":"fish_lobby_arena_manito","../view/arena/fish_lobby_arena_ranking":"fish_lobby_arena_ranking","../view/arena/fish_lobby_arena_reward":"fish_lobby_arena_reward","../view/arena/fish_lobby_arena_rule":"fish_lobby_arena_rule","../view/arena/fish_lobby_arena_yest":"fish_lobby_arena_yest","../view/auto_update_store/fish_auto_update_store":"fish_auto_update_store","../view/daily_task/fish_sign_tip":"fish_sign_tip","../view/daily_task/fish_sign_view":"fish_sign_view","../view/first_charge/fish_first_charge":"fish_first_charge","../view/fish_view":"fish_view","../view/friends/fish_friends":"fish_friends","../view/invite_friends/fish_invite_friends":"fish_invite_friends","../view/invite_friends/fish_invite_friends_diamond_message":"fish_invite_friends_diamond_message","../view/lobby/fish_lobby_change_head":"fish_lobby_change_head","../view/lobby/fish_lobby_exchange_shop":"fish_lobby_exchange_shop","../view/lobby/fish_lobby_mail_message":"fish_lobby_mail_message","../view/lobby/fish_lobby_next_level_reward":"fish_lobby_next_level_reward","../view/lobby/fish_lobby_personal_bag":"fish_lobby_personal_bag","../view/lobby/fish_lobby_personal_info":"fish_lobby_personal_info","../view/lobby/fish_lobby_ranking":"fish_lobby_ranking","../view/lobby/fish_lobby_rooms":"fish_lobby_rooms","../view/lobby/fish_lobby_top":"fish_lobby_top","../view/lobby/fish_lobby_ui":"fish_lobby_ui","../view/message/fish_message_item_buy":"fish_message_item_buy","../view/more_game/fish_more_game":"fish_more_game","../view/new_hand/fish_new_step_1":"fish_new_step_1","../view/noble/fish_noble_gift":"fish_noble_gift","../view/noble/fish_noble_gift_everyday":"fish_noble_gift_everyday","../view/prop_give/fish_prop_give_window":"fish_prop_give_window","../view/reward/fish_lobby_reward_panel":"fish_lobby_reward_panel","../view/shop/fish_shop_view":"fish_shop_view","../view/vip/fish_vip_window":"fish_vip_window","./fish_scene":"fish_scene","./fish_scene_login":"fish_scene_login"}],fish_scene_login:[function(e,t,i){"use strict";cc._RF.push(t,"f27ee98P5BF/4Dl8y4O4WmB","fish_scene_login"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../config_json"),s=e("../../xmen_interface"),o=e("./fish_scene"),c=e("../logic/fish_tcp"),a=e("../model/fish_model"),r=e("../define/fish_event_types"),h=e("./loading/fish_scene_loading_login_to_lobby"),l=e("../../assets_manager"),d=cc._decorator.ccclass;i.AccountInfo={clientId:"Android_3.86_tyGuest,uc.uc.0-hall28.uc.bydzz",authorCode:""},i.LoginErrorCode={SDKLoginResultCodeError:-5,GetServerInfoUnknownError:-6,GetServerInfoTimeout:-7,GetServerInfoResponseStatusError:-8,GetServerInfoCodeError:-9},i.LoginTypeCode={LoginStatus:1,RegisterStatus:2,ChangeStatus:3};var _=function(e){function t(){var t=this;cc.log("fish.scene.login.onenter"),t=e.call(this)||this;var s=n.config.server_json;return t._srv_url=s.srv_url+"door/getconnwithpass?",t._srv_request_url=s.srv_url+"door/getauthcode?",t._srv_register_url=s.srv_url+"door/registeruser?",t._srv_changepass_url=s.srv_url+"door/changepass?",t.http=null,t.loginTypeArray=null,t.loginConfigJson=null,t.loginTypeName=[],t.isGameLogining=!1,t.isRequestAuthCode=!1,t.isRegisterUser=!1,t.isChangePass=!1,t.loginTypeStatus=i.LoginTypeCode.LoginStatus,t}return __extends(t,e),t.prototype.onLoad=function(){s.xmen.EventDispatcher.on(s.xmen.EventType.MSG_LOGIN_FAILED,this.onSDKLoginError,this),s.xmen.EventDispatcher.on(s.xmen.EventType.MSG_LOGIN_CANCEL,this.onSDKLoginCancel,this),s.xmen.EventDispatcher.on(s.xmen.EventType.MSG_LOGIN_SUCCESS,this.onSDKLoginResponse,this),s.xmen.EventDispatcher.on(s.xmen.EventType.MSG_LIGHT_LOGIN,this.onLightLoginCallBack,this),s.xmen.EventDispatcher.on(s.xmen.EventType.MSG_GET_GAME_LOGIN_TYPE_SUCCESS,this.onGetLoginTypeSuccess,this),s.xmen.EventDispatcher.on(s.xmen.EventType.MSG_GET_GAME_LOGIN_TYPE_FAILED,this.onGetLoginTypeFailed,this),s.xmen.EventDispatcher.on(s.xmen.EventType.MSG_AUTHCODE,this.requestAuthCode,this),s.xmen.EventDispatcher.on(s.xmen.EventType.MSG_GENERNAL_USER,this.registerUser,this),s.xmen.EventDispatcher.on(s.xmen.EventType.MSG_CHANGE_PASSWORD,this.changePass,this)},t.prototype.onDestroy=function(){s.xmen.EventDispatcher.off(s.xmen.EventType.MSG_LOGIN_FAILED,this.onSDKLoginError,this),s.xmen.EventDispatcher.off(s.xmen.EventType.MSG_LOGIN_CANCEL,this.onSDKLoginCancel,this),s.xmen.EventDispatcher.off(s.xmen.EventType.MSG_LOGIN_SUCCESS,this.onSDKLoginResponse,this),s.xmen.EventDispatcher.off(s.xmen.EventType.MSG_LIGHT_LOGIN,this.onLightLoginCallBack,this),s.xmen.EventDispatcher.off(s.xmen.EventType.MSG_GET_GAME_LOGIN_TYPE_SUCCESS,this.onGetLoginTypeSuccess,this),s.xmen.EventDispatcher.off(s.xmen.EventType.MSG_GET_GAME_LOGIN_TYPE_FAILED,this.onGetLoginTypeFailed,this),s.xmen.EventDispatcher.off(s.xmen.EventType.MSG_AUTHCODE,this.requestAuthCode,this),s.xmen.EventDispatcher.off(s.xmen.EventType.MSG_GENERNAL_USER,this.registerUser,this),s.xmen.EventDispatcher.off(s.xmen.EventType.MSG_CHANGE_PASSWORD,this.changePass,this)},t.prototype.start=function(){this.loginScene=this.getComponent(f)},t.prototype.reset=function(){this.http&&(this.http.onreadystatechange=null),this.http=null,cc.sys.garbageCollect()},t.prototype.login=function(){this.loginScene.tip(""),s.xmen.SDKInterfaceManager.clickStat("click_sdk_start",""),s.xmen.SDKInterfaceManager.initSdk(""),this.loginScene.showLoginPhone()},t.prototype.registerUser=function(e){if(!this.isRegisterUser){this.isRegisterUser=!0;var t=this._genRegisterUrl(i.AccountInfo.clientId,e.mobile,e.password,e.userId);cc.log("get server info: "+this._srv_register_url+t),a.ME.userId=e.userId,this.http=cc.loader.getXMLHttpRequest(),this.http.timeout=5e3,this.http.onerror=this.onRegisterUserError.bind(this),this.http.ontimeout=this.onRegisterUserTimeout.bind(this),this.http.onreadystatechange=this.onRegisterUserResponse.bind(this),this.http.open("GET",this._srv_register_url+t,!0),this.http.send()}},t.prototype.requestAuthCode=function(e){if(!this.isRequestAuthCode){this.isRequestAuthCode=!0;var t=this._genAuthCodeUrl(i.AccountInfo.clientId,e.mobile,e.userId);cc.log("get server info: "+this._srv_request_url+t),a.ME.userId=e.userId,this.http=cc.loader.getXMLHttpRequest(),this.http.timeout=5e3,this.http.onerror=this.onGetServerAuthCodeError.bind(this),this.http.ontimeout=this.onGetServerAuthCodeTimeout.bind(this),this.http.onreadystatechange=this.onGetServerAuthResponse.bind(this),this.http.open("GET",this._srv_request_url+t,!0),this.http.send()}},t.prototype.changePass=function(e){if(!this.isChangePass){this.isChangePass=!0;var t=this._genChangePassUrl(i.AccountInfo.clientId,e.password,e.userId);cc.log("get server info: "+this._srv_changepass_url+t),a.ME.userId=e.userId,this.http=cc.loader.getXMLHttpRequest(),this.http.timeout=5e3,this.http.onerror=this.onChangePassError.bind(this),this.http.ontimeout=this.onChangePassTimeout.bind(this),this.http.onreadystatechange=this.onChangePassResponse.bind(this),this.http.open("GET",this._srv_changepass_url+t,!0),this.http.send()}},t.prototype.onLightLoginCallBack=function(){s.xmen.SDKInterfaceManager.getGameLoginType?s.xmen.SDKInterfaceManager.getGameLoginType():this.onGetLoginTypeFailed()},t.prototype.onGetLoginTypeSuccess=function(e){this.loginConfigJson=e.config,this.onSDKLightCallBack(e.config)},t.prototype.onGetLoginTypeFailed=function(){var e,t=l.AssetsManager.getRes("config/login");e=t&&t[i.AccountInfo.clientId]?t[i.AccountInfo.clientId]:{showWeChat:!0,weChatParam:"weixin",showQuickStart:!1,quickStartParam:"tyGuest",showChannel:!1,channelParam:"weixin",showLocalAccount:!1},this.onSDKLightCallBack(e)},t.prototype.onSDKLightCallBack=function(e){if(cc.log("LoginInfo: "+JSON.stringify(e)),this.loginScene.loadingCircle.active=!1,this.loginTypeName.length>0){var t=this.loginTypeName;t.length>2?(this.loginScene.btnText1.string=s.xmen.SDKInterfaceManager.getTypeName(t[0]),this.loginScene.btnText2.string=s.xmen.SDKInterfaceManager.getTypeName(t[1]),this.loginScene.btnText3.string=s.xmen.SDKInterfaceManager.getTypeName(t[2])):t.length>1?(this.loginScene.btnLogin3.node.active=!1,this.loginScene.btnText1.string=s.xmen.SDKInterfaceManager.getTypeName(t[0]),this.loginScene.btnText2.string=s.xmen.SDKInterfaceManager.getTypeName(t[1])):t.length>0&&(this.loginScene.btnLogin3.node.active=!1,this.loginScene.btnLogin2.node.active=!1,this.loginScene.btnText1.string=s.xmen.SDKInterfaceManager.getTypeName(t[0])),this.loginScene.loginBtnThird.active=!0}else{s.xmen.SDKInterfaceManager.hasLocalAccount();var i=s.xmen.Util.isWXAppInstalled();e.showWeChat&&e.showQuickStart&&e.showChannel?e.channelParam:e.showWeChat&&e.showQuickStart&&!e.showChannel?this.loginScene.btnLoginAccount.node.active=!1:e.showWeChat&&!e.showQuickStart&&e.showChannel?this.loginScene.btnQuickStart.node.active=!1:!e.showWeChat&&e.showQuickStart&&e.showChannel?this.loginScene.btnWeiChat.node.active=!1:e.showWeChat||e.showQuickStart||!e.showChannel?(!e.showWeChat||e.showQuickStart||e.showChannel)&&(e.showWeChat||!e.showQuickStart||e.showChannel||(this.loginScene.btnLoginAccount.node.active=!1)):this.loginScene.btnQuickStart.node.active=!1,i||(this.loginScene.btnWeiChat.node.active=!1),e.showLocalAccount?this.loginScene.btnLoginAccount.node.active=!0:this.loginScene.btnLookAccount.node.active=!1,this.loginScene.loginBtnNode.active=!0}},t.prototype.loginByType=function(e){s.xmen.SDKInterfaceManager.login()},t.prototype.loginByTypeThird=function(e){s.xmen.SDKInterfaceManager.loginByType(this.loginTypeName[e])},t.prototype.onSDKLoginError=function(e){this.loginScene.onLoginFailed(i.LoginErrorCode.SDKLoginResultCodeError,"\u9519\u8bef\u7801: "+e.code)},t.prototype.onSDKLoginCancel=function(){s.xmen.SDKInterfaceManager.logoutAccount()},t.prototype.onSDKLoginResponse=function(e){if(cc.log(this.isGameLogining),this.loginScene.loginBtnNode.active=!1,this.loginScene.loginBtnThird.active=!1,this.loginScene.bottomNode.active=!1,this.loginScene.txt.node.active=!0,this.loginScene.ISBN.active=!1,!this.isGameLogining){this.isGameLogining=!0,cc.log("sdk response: "+JSON.stringify(e)),a.ME.userId=e.userId,i.AccountInfo.authorCode=e.authorCode;var t=this._genUrlParams(i.AccountInfo.clientId,e.token,e.userId,e.password);cc.log("get server info: "+this._srv_url+t),this.loginScene.tip("\u6b63\u5728\u83b7\u53d6\u4fe1\u606f"),this.http=cc.loader.getXMLHttpRequest(),this.http.timeout=5e3,this.http.onerror=this.onGetServerInfoError.bind(this),this.http.ontimeout=this.onGetServerInfoTimeout.bind(this),this.http.onreadystatechange=this.onGetServerInfoResponse.bind(this),this.http.open("GET",this._srv_url+t,!0),this.http.send(),s.xmen.SDKInterfaceManager.clickStat("click_sdk_end",e.userId),s.xmen.SDKInterfaceManager.clickStat("click_gameHttp_start",e.userId)}},t.prototype.onGetServerInfoError=function(){this.isGameLogining=!1,this.loginScene.onLoginFailed(i.LoginErrorCode.GetServerInfoUnknownError)},t.prototype.onGetServerInfoTimeout=function(){this.isGameLogining=!1,this.loginScene.onLoginFailed(i.LoginErrorCode.GetServerInfoTimeout)},t.prototype.onGetServerInfoResponse=function(){if(this.isGameLogining=!1,4==this.http.readyState){if(this.http.status>=200&&this.http.status<=226){s.xmen.SDKInterfaceManager.clickStat("click_gameHttp_end",""),cc.log("get server info response: "+this.http.responseText);var e=JSON.parse(this.http.responseText);3==e.code?this.loginScene.showMessageBox("\u5bc6\u7801\u9519\u8bef\u8bf7\u91cd\u65b0\u8f93\u5165!"):1==e.code?this.loginScene.showMessageBox("\u624b\u673a\u53f7\u7801\u5c1a\u672a\u6ce8\u518c!"):0!=e.code&&2!=e.code||this.loginScene.onGetServerInfoSuccess(this.http.responseText)}else this.loginScene.onLoginFailed(i.LoginErrorCode.GetServerInfoResponseStatusError,this.http.status);this.http.onreadystatechange=null,this.http=null,cc.sys.garbageCollect()}},t.prototype.onGetServerAuthCodeError=function(){this.isRequestAuthCode=!1},t.prototype.onGetServerAuthCodeTimeout=function(){this.isRequestAuthCode=!1},t.prototype.onGetServerAuthResponse=function(){if(this.isRequestAuthCode=!1,4==this.http.readyState){if(this.http.status>=200&&this.http.status<=226){cc.log("get server info response: "+this.http.responseText);var e=JSON.parse(this.http.responseText);0==e.code?i.AccountInfo.authorCode=e.authCode:2==e.code?this.loginScene.showMessageBox("\u624b\u673a\u53f7\u7801\u5c1a\u672a\u6ce8\u518c!"):this.loginScene.showMessageBox("\u83b7\u53d6\u4fe1\u606f\u53d1\u751f\u9519\u8bef: "+e.code)}else this.loginScene.showMessageBox("\u83b7\u53d6\u4fe1\u606f\u53d1\u751f\u9519\u8bef: "+this.http.status);this.http.onreadystatechange=null,this.http=null,cc.sys.garbageCollect()}},t.prototype.onRegisterUserTimeout=function(){this.isRegisterUser=!1},t.prototype.onRegisterUserError=function(){this.isRegisterUser=!1},t.prototype.onRegisterUserResponse=function(){if(this.isRegisterUser=!1,4==this.http.readyState){if(this.http.status>=200&&this.http.status<=226){cc.log("get server info response: "+this.http.responseText);var e=JSON.parse(this.http.responseText);0!=e.code?this.loginScene.showMessageBox("\u624b\u673a\u53f7\u7801\u5df2\u6ce8\u518c!"):0==e.code&&this.loginScene.showMessageBox("\u6ce8\u518c\u6210\u529f!")}else this.loginScene.showMessageBox("\u83b7\u53d6\u4fe1\u606f\u53d1\u751f\u9519\u8bef: "+this.http.status);this.http.onreadystatechange=null,this.http=null,cc.sys.garbageCollect()}},t.prototype.onChangePassTimeout=function(){this.isChangePass=!1},t.prototype.onChangePassError=function(){this.isChangePass=!1},t.prototype.onChangePassResponse=function(){if(this.isChangePass=!1,4==this.http.readyState){if(this.http.status>=200&&this.http.status<=226){cc.log("get server info response: "+this.http.responseText);var e=JSON.parse(this.http.responseText);0!=e.code?this.loginScene.showMessageBox("\u624b\u673a\u53f7\u7801\u5c1a\u672a\u6ce8\u518c!"):1==e.code&&this.loginScene.showMessageBox("\u627e\u56de\u5bc6\u7801\u6210\u529f!")}else this.loginScene.showMessageBox("\u83b7\u53d6\u4fe1\u606f\u53d1\u751f\u9519\u8bef: "+this.http.status);this.http.onreadystatechange=null,this.http=null,cc.sys.garbageCollect()}},t.prototype._genUrlParams=function(e,t,i,n){var o="clientId="+e+"&token="+t+"&userId="+i,c=s.xmen.SDKInterfaceManager.nicaiEncode(o),a=s.xmen.EncodeDecode.signatureStr(c,"md5"),r="clientId="+e.replace(/,/g,"%2C")+"&token="+t+"&userId="+i+"&code="+a+"&is_h5=1";return n&&(r+="&password="+n),r},t.prototype._genAuthCodeUrl=function(e,t,n){var s="clientId="+e.replace(/,/g,"%2C")+"&userId="+n+"&phone="+t;return this.loginTypeStatus==i.LoginTypeCode.ChangeStatus&&(s+="&isChange=1"),s},t.prototype._genRegisterUrl=function(e,t,i,n){return"clientId="+e.replace(/,/g,"%2C")+"&userId="+n+"&phone="+t+"&password="+i},t.prototype._genChangePassUrl=function(e,t,i){return"clientId="+e.replace(/,/g,"%2C")+"&userId="+i+"&password="+t},t}(cc.Component);i.SceneLoginUI=_;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txt=null,t.text=null,t.ISBN=null,t.loadingCircle=null,t.btnQuickStart=null,t.btnLookAccount=null,t.btnLoginAccount=null,t.btnWeiChat=null,t.loginBtnNode=null,t.loginBtnPhone=null,t.txtPhone=null,t.txtPassword=null,t.confirmPass=null,t.authCode=null,t.btns=null,t.btnsRegs=null,t.btnsChange=null,t.btnLogin=null,t.loginBtnThird=null,t.btnLogin1=null,t.btnLogin2=null,t.btnLogin3=null,t.btnText1=null,t.btnText2=null,t.btnText3=null,t.requestTime=0,t.bottomNode=null,t.btnUserProtocol=null,t.versionNum=null,t.userCheckBox=null,t.versionNode=null,t.action=null,t.loginUI=null,t.msgBox=null,t.msgBoxTxt=null,t._LoginCheckBox=!0,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.loadingCircle=this.node.getChildByName("loadingCircle"),this.loginBtnNode=this.node.getChildByName("loginBtnNode"),this.btnQuickStart=this.loginBtnNode.getChildByName("btnQuickStart").getComponent(cc.Button),this.btnLookAccount=this.loginBtnNode.getChildByName("btnLookAccount").getComponent(cc.Button),this.btnLoginAccount=this.loginBtnNode.getChildByName("btnLoginAccount").getComponent(cc.Button),this.btnWeiChat=this.loginBtnNode.getChildByName("btnWeiChat").getComponent(cc.Button),this.loginBtnThird=this.node.getChildByName("loginBtnThird"),this.btnLogin1=this.loginBtnThird.getChildByName("btnLogin1").getComponent(cc.Button),this.btnLogin2=this.loginBtnThird.getChildByName("btnLogin2").getComponent(cc.Button),this.btnLogin3=this.loginBtnThird.getChildByName("btnLogin3").getComponent(cc.Button),this.btnText1=this.btnLogin1.node.getChildByName("btnText1").getComponent(cc.Label),this.btnText2=this.btnLogin2.node.getChildByName("btnText2").getComponent(cc.Label),this.btnText3=this.btnLogin3.node.getChildByName("btnText3").getComponent(cc.Label),this.loginBtnPhone=this.node.getChildByName("loginBtnPhone"),this.txtPhone=this.loginBtnPhone.getChildByName("txtPhone"),this.txtPassword=this.loginBtnPhone.getChildByName("txtPassword"),this.confirmPass=this.loginBtnPhone.getChildByName("confirmPass"),this.authCode=this.loginBtnPhone.getChildByName("authCode"),this.authCode.getChildByName("btnSend").on("click",this.onEventRequestAuthCode,this),this.btns=this.loginBtnPhone.getChildByName("btns");var t=this.btns.getChildByName("btnFindPass"),i=this.btns.getChildByName("btnRegister");t.on("click",this.showFindPass,this),i.on("click",this.showRegister,this),this.btnLogin=this.loginBtnPhone.getChildByName("btnLogin"),this.btnLogin.on("click",this.onBtnLogin,this),this.btnsRegs=this.loginBtnPhone.getChildByName("btnsRegs");var n=this.btnsRegs.getChildByName("btnRegister"),c=this.btnsRegs.getChildByName("btnBack");n.on("click",this.onBtnConfirmRegister,this),c.on("click",this.showLoginPhone,this),this.btnsChange=this.loginBtnPhone.getChildByName("btnsChange");var a=this.btnsChange.getChildByName("btnChangePass"),r=this.btnsChange.getChildByName("btnBack");a.on("click",this.onBtnFindPass,this),r.on("click",this.showLoginPhone,this),this.btnLogin1.node.on(cc.Node.EventType.TOUCH_END,this.onBtnLogin1,this),this.btnLogin2.node.on(cc.Node.EventType.TOUCH_END,this.onBtnLogin2,this),this.btnLogin3.node.on(cc.Node.EventType.TOUCH_END,this.onBtnLogin3,this),this.btnQuickStart.node.on(cc.Node.EventType.TOUCH_END,this.onBtnQuickStart,this),this.btnLookAccount.node.on(cc.Node.EventType.TOUCH_END,this.onBtnLookAccount,this),this.btnLoginAccount.node.on(cc.Node.EventType.TOUCH_END,this.onBtnLoginAccount,this),this.btnWeiChat.node.on(cc.Node.EventType.TOUCH_END,this.onBtnWeiChat,this),this.bottomNode=this.node.getChildByName("bottomNode"),this.btnUserProtocol=this.bottomNode.getChildByName("btnUserProtocol").getComponent(cc.Button),this.userCheckBox=this.bottomNode.getChildByName("userCheckBox"),this.versionNode=this.node.getChildByName("versionNode"),this.versionNum=this.versionNode.getChildByName("versionNum").getComponent(cc.Label);var h=s.xmen.SystemInfo.getConfig().externalVersion;this.versionNum.string=h,this.btnUserProtocol.node.on(cc.Node.EventType.TOUCH_END,this.onBtnUserProtocol,this),this.userCheckBox.on(cc.Node.EventType.TOUCH_END,this.onBtnLoginCheckBox,this),this.loginBtnNode.active=!1,this.bottomNode.active=!1,this.txt=this.node.getChildByName("text").getComponent(cc.Label),this.ISBN=this.node.getChildByName("ISBN"),this.txt.node.active=!0,this.ISBN.active=!1,this.msgBox=this.node.getChildByName("msgBox"),this.msgBoxTxt=this.msgBox.getChildByName("txt").getComponent(cc.Label),this.msgBox.getChildByName("btnOK").on(cc.Node.EventType.TOUCH_END,this.onBtnRetry,this),this.loginUI=this.getComponent(_),this.action=this.getComponent(cc.Animation),this.action.play("loading").wrapMode=cc.WrapMode.Loop,cc.audioEngine.stopAllEffects(),o.audio.playBg("sound/bg_lobby")},t.prototype.start=function(){e.prototype.start.call(this),this.loginUI.login()},t.prototype.onBtnUserProtocol=function(){var e=cc.instantiate(l.AssetsManager.getRes("prefabs/login_protocol"));e.addComponent(p),this.node.addChild(e)},t.prototype.onBtnLoginCheckBox=function(){this._LoginCheckBox?this._LoginCheckBox=!1:this._LoginCheckBox=!0},t.prototype.onBtnQuickStart=function(){cc.log("login.js.onBtnQuickStart"),cc.log("QuickStart"),this._LoginCheckBox?this.loginUI.loginByType("weChatParam"):this.showMessageBox("\u8bf7\u5148\u9605\u8bfb\u5e76\u540c\u610f\u300a\u7528\u6237\u534f\u8bae\u300b")},t.prototype.onBtnLookAccount=function(){this._LoginCheckBox?s.xmen.SDKInterfaceManager.showLocalAccount():this.showMessageBox("\u8bf7\u5148\u9605\u8bfb\u5e76\u540c\u610f\u300a\u7528\u6237\u534f\u8bae\u300b")},t.prototype.onBtnLoginAccount=function(){cc.log("login.js onBtnLoginAccount"),this._LoginCheckBox?this.loginUI.loginByType("channelParam"):this.showMessageBox("\u8bf7\u5148\u9605\u8bfb\u5e76\u540c\u610f\u300a\u7528\u6237\u534f\u8bae\u300b")},t.prototype.onBtnWeiChat=function(){cc.log("login.js onBtnWeiChat"),this._LoginCheckBox?cc.log("login.js onBtnWeiChat"):this.showMessageBox("\u8bf7\u5148\u9605\u8bfb\u5e76\u540c\u610f\u300a\u7528\u6237\u534f\u8bae\u300b")},t.prototype.onBtnLogin1=function(){cc.log("login.js onBtnLogin1"),this._LoginCheckBox?this.loginUI.loginByTypeThird(0):this.showMessageBox("\u8bf7\u5148\u9605\u8bfb\u5e76\u540c\u610f\u300a\u7528\u6237\u534f\u8bae\u300b")},t.prototype.onBtnLogin2=function(){cc.log("login.js onBtnLogin2"),this._LoginCheckBox?this.loginUI.loginByTypeThird(1):this.showMessageBox("\u8bf7\u5148\u9605\u8bfb\u5e76\u540c\u610f\u300a\u7528\u6237\u534f\u8bae\u300b")},t.prototype.onBtnLogin3=function(){cc.log("login.js onBtnLogin3"),this._LoginCheckBox?this.loginUI.loginByTypeThird(2):this.showMessageBox("\u8bf7\u5148\u9605\u8bfb\u5e76\u540c\u610f\u300a\u7528\u6237\u534f\u8bae\u300b")},t.prototype.onBtnLogin=function(){var e=cc.find("txtPhone/_editBox",this.loginBtnPhone).getComponent(cc.EditBox),t=cc.find("txtPassword/_editBox",this.loginBtnPhone).getComponent(cc.EditBox);/^1[3456789]\d{9}$/.test(e.string)?/^[\w_]{6,12}$/.test(t.string)?this._LoginCheckBox&&s.xmen.SDKInterfaceManager.loginWithPass(e.string,t.string):this.showMessageBox("\u5bc6\u7801\u683c\u5f0f\u6709\u8bef, \u8bf7\u91cd\u586b!"):this.showMessageBox("\u624b\u673a\u53f7\u7801\u6709\u8bef, \u8bf7\u91cd\u586b!")},t.prototype.showFindPass=function(){cc.find("txtPassword/_editBox",this.loginBtnPhone).getComponent(cc.EditBox).string="",this.txtPhone.active=!0,this.txtPassword.active=!0,this.confirmPass.active=!1,this.authCode.active=!0,this.btns.active=!1,this.btnsRegs.active=!1,this.btnsChange.active=!0,this.btnLogin.active=!1,this.loginScene.loginTypeStatus=i.LoginTypeCode.ChangeStatus},t.prototype.onBtnFindPass=function(){var e=cc.find("txtPhone/_editBox",this.loginBtnPhone).getComponent(cc.EditBox),t=cc.find("txtPassword/_editBox",this.loginBtnPhone).getComponent(cc.EditBox),n=cc.find("authCode/confirmPass/_editBox",this.loginBtnPhone).getComponent(cc.EditBox);/^1[3456789]\d{9}$/.test(e.string)?/^[\w_]{6,12}$/.test(t.string)?""!=n.string?n.string==i.AccountInfo.authorCode?s.xmen.SDKInterfaceManager.changePassword(e.string,t.string):this.showMessageBox("\u9a8c\u8bc1\u7801\u9519\u8bef!"):this.showMessageBox("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801!"):this.showMessageBox("\u5bc6\u7801\u683c\u5f0f\u6709\u8bef, \u8bf7\u91cd\u586b!"):this.showMessageBox("\u624b\u673a\u53f7\u7801\u6709\u8bef, \u8bf7\u91cd\u586b!")},t.prototype.showRegister=function(){cc.find("txtPassword/_editBox",this.loginBtnPhone).getComponent(cc.EditBox).string="",this.txtPhone.active=!0,this.txtPassword.active=!0,this.confirmPass.active=!0,this.authCode.active=!1,this.btns.active=!1,this.btnsRegs.active=!0,this.btnsChange.active=!1,this.btnLogin.active=!1,this.loginScene.loginTypeStatus=i.LoginTypeCode.RegisterStatus},t.prototype.onBtnConfirmRegister=function(){var e=cc.find("txtPhone/_editBox",this.loginBtnPhone).getComponent(cc.EditBox),t=cc.find("txtPassword/_editBox",this.loginBtnPhone).getComponent(cc.EditBox),n=cc.find("confirmPass/_editBox",this.loginBtnPhone).getComponent(cc.EditBox),o=cc.find("authCode/confirmPass/_editBox",this.loginBtnPhone).getComponent(cc.EditBox);if(/^1[3456789]\d{9}$/.test(e.string))if(/^[\w_]{6,12}$/.test(t.string)&&/^[\w_]{6,12}$/.test(n.string))if(t.string==n.string){if(this.authCode.active){if(""==o.string)return void this.showMessageBox("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801!");if(o.string!=i.AccountInfo.authorCode)return void this.showMessageBox("\u9a8c\u8bc1\u7801\u9519\u8bef!")}s.xmen.SDKInterfaceManager.generUserId(e.string,t.string)}else this.showMessageBox("\u5bc6\u7801\u4e0d\u4e00\u81f4, \u8bf7\u91cd\u65b0\u8f93\u5165!");else this.showMessageBox("\u5bc6\u7801\u683c\u5f0f\u6709\u8bef, \u8bf7\u91cd\u586b!");else this.showMessageBox("\u624b\u673a\u53f7\u7801\u6709\u8bef, \u8bf7\u91cd\u586b!")},t.prototype.showLoginPhone=function(){cc.find("txtPassword/_editBox",this.loginBtnPhone).getComponent(cc.EditBox).string="",this.txtPhone.active=!0,this.txtPassword.active=!0,this.confirmPass.active=!1,this.authCode.active=!1,this.btns.active=!0,this.btnsRegs.active=!1,this.btnsChange.active=!1,this.btnLogin.active=!0,this.loginScene.loginTypeStatus=i.LoginTypeCode.LoginStatus},t.prototype.onEventRequestAuthCode=function(){var e=cc.find("txtPhone/_editBox",this.loginBtnPhone).getComponent(cc.EditBox);if(/^1[3456789]\d{9}$/.test(e.string)){if(0==this.requestTime){this.requestTime=60;var t=cc.find("btnSend",this.authCode).getComponent(cc.Button);t.interactable=!1;var i=cc.find("btnSend/label",this.authCode).getComponent(cc.Label);i.string="\u83b7\u53d6\u9a8c\u8bc1\u7801("+this.requestTime+"s)",i.schedule(function(){this.requestTime--,0==this.requestTime?(t.interactable=!0,i.unscheduleAllCallbacks(),i.string="\u91cd\u65b0\u83b7\u53d6\u9a8c\u8bc1\u7801"):i.string="\u83b7\u53d6\u9a8c\u8bc1\u7801("+this.requestTime+"s)"}.bind(this),1),s.xmen.SDKInterfaceManager.requestAuthCode(e.string)}}else this.showMessageBox("\u624b\u673a\u53f7\u7801\u6709\u8bef, \u8bf7\u91cd\u586b!")},t.prototype.tip=function(e){this.txt.string=e},t.prototype.showMessageBox=function(e){this.txt.string="\u767b\u5f55\u5931\u8d25",this.msgBox.active=!0,this.msgBoxTxt.string=e},t.prototype.hideMessageBox=function(){this.msgBox.active=!1},t.prototype.onBtnRetry=function(){this.hideMessageBox(),this._LoginCheckBox&&this.loginUI.login()},t.prototype.onLoginFailed=function(e,t){switch(void 0===t&&(t=""),e){case i.LoginErrorCode.SDKLoginResultCodeError:cc.log("sdk login result code error"),this.showMessageBox("\u767b\u5f55\u5931\u8d25, \u8bf7\u91cd\u8bd5\n"+t);break;case i.LoginErrorCode.GetServerInfoUnknownError:cc.log("get server info unkown error"),this.showMessageBox("\u83b7\u53d6\u4fe1\u606f\u9519\u8bef, \u8bf7\u91cd\u8bd5");break;case i.LoginErrorCode.GetServerInfoTimeout:cc.log("get server info timeout"),this.showMessageBox("\u83b7\u53d6\u4fe1\u606f\u8d85\u65f6, \u8bf7\u91cd\u8bd5");break;case i.LoginErrorCode.GetServerInfoResponseStatusError:cc.log("get server info response status error"),this.showMessageBox("\u83b7\u53d6\u4fe1\u606f\u72b6\u6001\u9519\u8bef, \u8bf7\u91cd\u8bd5\n"+t);break;case i.LoginErrorCode.GetServerInfoCodeError:cc.log("get server info code error"),this.showMessageBox("\u83b7\u53d6\u4fe1\u606f\u9519\u8bef, \u8bf7\u91cd\u8bd5")}},t.prototype.onGetServerInfoSuccess=function(e){var t=JSON.parse(e);t&&0==t.code?(c.TCPConfig.tcpServerIp=t.ip,c.TCPConfig.portNumber=t.port,o.evtCenter.on(s.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),o.evtCenter.on(s.xmen.EventType.TCP_CLOSE,this.onEventSocketCloss,this),o.evtCenter.on(s.xmen.EventType.TCP_OPENED,this.onEventSocketConnected,this),this.tip("\u6b63\u5728\u8fde\u63a5"),c.tcp.connect(),s.xmen.SDKInterfaceManager.clickStat("click_tcp_start","")):this.onLoginFailed(i.LoginErrorCode.GetServerInfoCodeError)},t.prototype.onEventSocketError=function(){o.evtCenter.off(s.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),o.evtCenter.off(s.xmen.EventType.TCP_CLOSE,this.onEventSocketCloss,this),o.evtCenter.off(s.xmen.EventType.TCP_OPENED,this.onEventSocketConnected,this),this.showMessageBox("\u8fde\u63a5\u5931\u8d25, \u8bf7\u91cd\u8bd5")},t.prototype.onDestroy=function(){o.evtCenter.off(s.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),o.evtCenter.off(s.xmen.EventType.TCP_CLOSE,this.onEventSocketCloss,this),o.evtCenter.off(s.xmen.EventType.TCP_OPENED,this.onEventSocketConnected,this)},t.prototype.onEventSocketCloss=function(){o.evtCenter.off(s.xmen.EventType.TCP_ERROR,this.onEventSocketError,this),o.evtCenter.off(s.xmen.EventType.TCP_CLOSE,this.onEventSocketCloss,this),o.evtCenter.off(s.xmen.EventType.TCP_OPENED,this.onEventSocketConnected,this),this.showMessageBox("\u8fde\u63a5\u5173\u95ed, \u8bf7\u91cd\u8bd5")},t.prototype.onEventSocketConnected=function(){s.xmen.SDKInterfaceManager.clickStat("click_tcp_end",""),s.xmen.SDKInterfaceManager.clickStat("click_games_start",""),o.evtCenter.emit(r.evts.EVT_POPUP_LOADING,h.SceneLoginToLobby)},t=__decorate([d],t)}(_);i.SceneLogin=f;var p=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.onDestroy=function(){},t.prototype.btnCloseSystemNotice=function(){this.node.removeFromParent()},t}(cc.Component);cc._RF.pop()},{"../../assets_manager":"assets_manager","../../config_json":"config_json","../../xmen_interface":"xmen_interface","../define/fish_event_types":"fish_event_types","../logic/fish_tcp":"fish_tcp","../model/fish_model":"fish_model","./fish_scene":"fish_scene","./loading/fish_scene_loading_login_to_lobby":"fish_scene_loading_login_to_lobby"}],fish_scene_match:[function(e,t,i){"use strict";cc._RF.push(t,"65e81IgTcxF85lAcCULaAnv","fish_scene_match"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){cc.log("fish.scene.match.onenter")},t.prototype.onDestroy=function(){},t}(cc.Component);i.SceneMatch=n,cc._RF.pop()},{}],fish_scene:[function(e,t,i){"use strict";cc._RF.push(t,"ea977WnLslMPYEPTszkRIF/","fish_scene"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../logic/fish_message_center"),s=e("../logic/fish_event_center"),o=e("../view/fish_view"),c=e("../model/fish_model"),a=e("../utils/fish_config_table"),r=e("../utils/fish_utils"),h=e("../utils/fish_audio"),l=e("../utils/fish_config_track"),d=e("../utils/fish_effect"),_=e("../utils/fish_math"),f=e("../define/fish_event_types"),p=e("../../assets_manager"),u=e("../view/setting/fish_setting"),m=e("../view/lobby/fish_lobby_sys_notice"),g=e("../buffer/fish_buffer"),v=e("../fish"),b=e("../utils/fish_effect_pool"),y=cc._decorator.ccclass;i.utils=null,i.avatarDownLoader=null,i.audio=null,i.ccs=null,i.configTable=null,i.configTrack=null,i.effect=null,i.math=null,i.evtCenter=null,i.msgCenter=null;var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){cc.log("fish.scene.onenter"),i.utils=new r.Utils,i.avatarDownLoader=new r.AvatarDownloader,i.audio=new h.Audio,i.configTable=new a.ConfigTable,i.configTrack=new l.ConfigTrack,i.effect=new d.Effect,i.math=new _.fish_Math,i.evtCenter=new s.EventCenter,i.msgCenter=new n.MessageCenter,v.fish.effectUtil=new b.EffectUtil,c.model.init(),this.node.addChild(o.view.Scene()),this.node.addChild(o.view.AutoUpdate()),this.node.addChild(o.view.SwitchAccount()),this.node.addChild(o.view.BackKey()),this.node.addChild(o.view.Net()),this.node.addChild(o.view.RedEnvelope()),this.node.addChild(o.view.Led()),this.node.addChild(o.view.LedBubble()),this.node.addChild(o.view.Loading()),this.node.addChild(o.view.MessageTips()),this.node.addChild(o.view.MessageBox());var e=this.node.getPosition().mul(-1);i.evtCenter.on(f.evts.EVT_POPUP_SYSTEM_NOTICE,function(t){var i=cc.instantiate(p.AssetsManager.getRes("prefabs/system_notice"));v.fish.adapterScreen(i),i.setPosition(e),i.addComponent(m.LobbySystemNotice).ctor(t),this.node.addChild(i,o.View.POPUP)}.bind(this)),i.evtCenter.on(f.evts.EVT_POP_SETTING,function(){var t=(new cc.Node).addComponent(u.Setting);t.node.setPosition(e),this.node.addChild(t.node,o.View.TIPS)}.bind(this),this)},t.prototype.onDestroy=function(){i.utils=null,i.avatarDownLoader.release(),i.avatarDownLoader=null,i.audio=null,i.configTable=null,i.configTrack=null,i.effect=null,i.math=null,g.buffer.release(),c.model.release(),i.evtCenter=null,i.msgCenter=null,v.fish.effectUtil=null},t=__decorate([y],t)}(cc.Component);i.Scene=E,cc._RF.pop()},{"../../assets_manager":"assets_manager","../buffer/fish_buffer":"fish_buffer","../define/fish_event_types":"fish_event_types","../fish":"fish","../logic/fish_event_center":"fish_event_center","../logic/fish_message_center":"fish_message_center","../model/fish_model":"fish_model","../utils/fish_audio":"fish_audio","../utils/fish_config_table":"fish_config_table","../utils/fish_config_track":"fish_config_track","../utils/fish_effect":"fish_effect","../utils/fish_effect_pool":"fish_effect_pool","../utils/fish_math":"fish_math","../utils/fish_utils":"fish_utils","../view/fish_view":"fish_view","../view/lobby/fish_lobby_sys_notice":"fish_lobby_sys_notice","../view/setting/fish_setting":"fish_setting"}],fish_setting:[function(e,t,i){"use strict";cc._RF.push(t,"b8125tNo0NL7oodf35lHz43","fish_setting"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../define/fish_msg_types"),a=e("../../model/fish_model"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=e("../../fish"),d=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.slider_Music=null,t.slider_Sound=null,t.music_volume=cc.sys.localStorage.getItem("music_volume")||55,t.effect_volume=cc.sys.localStorage.getItem("effect_volume")||80,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/set_up")),l.fish.adapterScreen(t.csbNode),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode),this.slider_Music=cc.find("archor/slider_Music",this.csbNode),this.slider_Sound=cc.find("archor/slider_Sound",this.csbNode),this.slider_Music.getComponent(cc.Slider).progress=this.music_volume/100,this.slider_Sound.getComponent(cc.Slider).progress=this.effect_volume/100,this.slider_Music.getComponent(cc.ProgressBar).progress=this.music_volume/100,this.slider_Sound.getComponent(cc.ProgressBar).progress=this.effect_volume/100,this.slider_Music.on("slide",this.slideMusic,this),this.slider_Sound.on("slide",this.slideEffect,this),cc.find("archor/btnClose",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this),this.csbNode.getComponent(cc.Animation).play("show"),s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){cc.sys.localStorage.setItem("music_volume",this.music_volume),cc.sys.localStorage.setItem("effect_volume",this.effect_volume),s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.slideMusic=function(e){var t=100*e.progress;t<=10&&(t=10),t>=90&&(t=90),this.music_volume=t,e.progress=t/100,e.node.getComponent(cc.ProgressBar).progress=e.progress,s.audio.setMusicVolume((t-10)/80)},t.prototype.slideEffect=function(e){var t=100*e.progress;t<=10&&(t=10),t>=90&&(t=90),this.effect_volume=t,e.progress=t/100,e.node.getComponent(cc.ProgressBar).progress=e.progress,s.audio.setEffectVolume((t-10)/80)},t.prototype.onBackKey=function(){this.onBtnClose(null)},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.node.removeFromParent(),this.destroy()},t.prototype.onBtnQuit=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),cc.audioEngine.stopMusic(),cc.audioEngine.stopAllEffects(),this._gameLeave(),cc.sys.localStorage.setIem("show_sdk_login","true"),cc.director.loadScene("update")},t.prototype._gameLeave=function(){var e={cmd:c.msgs.CMD_GAME,params:{action:"leave",gameId:28,userId:a.ME.userId,clientId:r.AccountInfo.clientId}};h.tcp.send(e)},t}(cc.Component);i.Setting=d,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_shop_diamond:[function(e,t,i){"use strict";cc._RF.push(t,"f1878BaGKFNWaTax0wIuH8Y","fish_shop_diamond"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_msg_types"),a=e("../../scene/fish_scene_login"),r=e("../../logic/fish_tcp"),h=function(e){function t(t,i){var s=e.call(this)||this;return s._self=i,s.csbNode=null,s.archor=null,s.no_purchase=null,s.sign=null,s.already_purchase=null,s.goods_name=null,s.goods_price=null,s.Icon=null,s.node_dia=null,s.btnCell=null,s.goods=null,s.price=null,s.desc=null,s.price_bg=null,s.cellIndex=t,s.cellHeight=88,s.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/shop_cell_diamond")),s.addChild(s.csbNode),s.btnCell=cc.find("archor/left_node/btnCell",s.csbNode),s.btnCell.on(cc.Node.EventType.TOUCH_END,s.onBtnCell,s),s.archor=cc.find("archor",s.csbNode),s.no_purchase=cc.find("archor/left_node/node_dia/no_purchase",s.csbNode),s.sign=cc.find("archor/left_node/node_dia/no_purchase/sign",s.csbNode),s.already_purchase=cc.find("archor/left_node/node_dia/already_purchase",s.csbNode),s.Icon=cc.find("archor/left_node/node_dia/Icon",s.csbNode),s.price_bg=cc.find("archor/left_node/node_dia/price_bg",s.csbNode),s.node_dia=cc.find("archor/left_node/node_dia",s.csbNode),s.goods=cc.find("archor/left_node/node_dia/no_purchase/goods",s.csbNode).getComponent(cc.Label),s.price=cc.find("archor/left_node/node_dia/no_purchase/price",s.csbNode).getComponent(cc.Label),s.desc=cc.find("archor/left_node/node_dia/no_purchase/once_node/desc",s.csbNode).getComponent(cc.Label),s.goods_name=cc.find("archor/left_node/node_dia/already_purchase/goods_name",s.csbNode).getComponent(cc.Label),s.goods_price=cc.find("archor/left_node/node_dia/already_purchase/goods_price",s.csbNode).getComponent(cc.Label),s}return __extends(t,e),t.prototype.onBtnCell=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=e.currentTarget.name,i=s.model.shop.diamondData[t],o={cmd:c.msgs.CMD_STORE_FISH,params:{action:"order_transaction",gameId:9999,userId:s.ME.userId,clientId:a.AccountInfo.clientId,prodId:i.id,count:1,isRecharge:0}};r.tcp.send(o)},t.prototype.initCell=function(e){var t=s.model.shop.diamondData[e];if(t){this.btnCell.name=e.toString();var i=t.innerId,c=o.configTable.shop[i];if(10209==i)return this.goods.string="\u8d35\u65cf\u793c\u5305",this.price.string="\xa5"+c.prize,void(this.desc.string="600\u94bb\u77f3");var a=t.pt,r=t.prstTimes,h=t.buyTimes,l=parseInt(c.number),d=parseInt(c.prize),_=n.AssetsManager.getRes("img/atlas/common");this.Icon.getComponent(cc.Sprite).spriteFrame=_.getSpriteFrame(c.goods_icon.slice(0,-4)),a&&"day"==a&&r>h?(this.btnCell.getComponent(cc.Button).normalSprite=_.getSpriteFrame("fish_shop_double1"),this.btnCell.getComponent(cc.Button).pressedSprite=_.getSpriteFrame("fish_shop_double1"),this.price_bg.getComponent(cc.Sprite).spriteFrame=_.getSpriteFrame("fish_shop_double"),this.price_bg.setPosition(cc.v2(315,0)),this.goods.string=2*l+"\u94bb\u77f3",this.goods.node.color=cc.color(255,0,0),this.goods.node.position=cc.v2(175,12),this.price.string="\xa5"+c.prize,this.price.node.color=cc.color(255,255,255),this.price.node.position=cc.v2(317,16),this.desc.string="\u8d60"+l+"\u94bb\u77f3",this.desc.node.color=cc.color(164,0,0),this.desc.node.position=cc.v2(175,-20)):a&&"life"==a?(0==c.recommend?this.sign.active=!1:1==c.recommend?(this.sign.active=!0,this.sign.getComponent(cc.Sprite).spriteFrame=_.getSpriteFrame("fish_shangcheng_7")):(this.sign.active=!0,this.sign.getComponent(cc.Sprite).spriteFrame=_.getSpriteFrame("fish_shangcheng_22")),this.Icon.getComponent(cc.Sprite).spriteFrame=_.getSpriteFrame(c.goods_icon.slice(0,-4)),r<=h?i>=11201&&i<=11207&&c.small_gift>0?(this.no_purchase.active=!0,this.already_purchase.active=!1,this.goods.string=c.number+"\u94bb\u77f3",this.price.string="\xa5"+c.prize,this.desc.string="\u8d60"+c.small_gift+"\u94bb\u77f3"):(this.goods.string=l+"\u94bb\u77f3",this.price.string="\xa5"+c.prize,this.desc.string="1\u5143 = "+l/d+"\u94bb\u77f3",this.goods.node.color=cc.color(200,0,200),this.desc.node.color=cc.color(107,55,0)):(this.no_purchase.active=!0,this.already_purchase.active=!1,this.goods.string=c.number+"\u94bb\u77f3",this.price.string="\xa5"+c.prize,this.desc.string="\u8d60"+c.number+"\u94bb\u77f3(\u4ec5\u4e00\u6b21)")):(this.goods.string=l+"\u94bb\u77f3",this.price.string="\xa5"+c.prize,this.desc.string="1\u5143 = "+l/d+"\u94bb\u77f3",this.goods.node.color=cc.color(200,0,200),this.desc.node.color=cc.color(107,55,0))}},t}(cc.Node);i.ShopDiamond=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_shop_double_activity:[function(e,t,i){"use strict";cc._RF.push(t,"f9d07xi9bBHzoraO4Y9RR4f","fish_shop_double_activity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/shop_double_activity")),cc.find("archor/btnShop",t.csbNode).on(cc.Node.EventType.TOUCH_END,t.onBtnShop,t),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.addChild(this.csbNode)},t.prototype.onDestroy=function(){},t.prototype.onBtnShop=function(e){s.evtCenter.emit(o.evts.EVT_CLOSE_ACTIVITY),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),c.model.dailytask.isLobby=!0,s.evtCenter.emit(o.evts.EVT_POPUP_SHOP_WINDOW,c.model.shop.SHOP_GOLD)},t}(cc.Component);i.DoubleShopActivity=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_shop_gold:[function(e,t,i){"use strict";cc._RF.push(t,"011f8aNNj9FXLJLvCpUWDDi","fish_shop_gold"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../define/fish_msg_types"),c=e("../../scene/fish_scene_login"),a=e("../../logic/fish_tcp"),r=e("../../scene/fish_scene"),h=function(e){function t(t,i){var o=e.call(this)||this;o._self=i,o.csbNode=null,o.archor=null,o.Icon=null,o.already_purchase=null,o.goods_name=null,o.goods_price=null,o.no_purchase=null,o.once=null,o.sign=null,o.node_dia=null,o.vip_node=null,o.vip_des=null,o.once_node=null,o.btnCell=null,o.price_bg=null,o.goods=null,o.price=null,o.desc=null,o.cellIndex=t,o.cellHeight=88;var c=n.model.shop.goldData[o.cellIndex];if(!c)return o;var a=c.pt,r=c.prstTimes,h=c.buyTimes;return a&&"day"==a&&r>h?(o.csbNode=cc.instantiate(s.AssetsManager.getRes("prefabs/shop_effect")),o.addChild(o.csbNode),o.csbNode.getComponent(cc.Animation).play("show").wrapMode=cc.WrapMode.Loop):(o.csbNode=cc.instantiate(s.AssetsManager.getRes("prefabs/shop_cell_gold")),o.addChild(o.csbNode)),o.btnCell=cc.find("archor/left_node/btnCell",o.csbNode),o.btnCell.on(cc.Node.EventType.TOUCH_END,o.onBtnCell,o),o.archor=cc.find("archor",o.csbNode),o.node_dia=cc.find("archor/left_node/node_dia",o.csbNode),o.Icon=cc.find("archor/left_node/node_dia/Icon",o.csbNode),o.price_bg=cc.find("archor/left_node/node_dia/price_bg",o.csbNode),o.already_purchase=cc.find("archor/left_node/node_dia/already_purchase",o.csbNode),o.goods_name=cc.find("archor/left_node/node_dia/already_purchase/goods_name",o.csbNode).getComponent(cc.Label),o.goods_price=cc.find("archor/left_node/node_dia/already_purchase/goods_price",o.csbNode).getComponent(cc.Label),o.no_purchase=cc.find("archor/left_node/node_dia/no_purchase",o.csbNode),o.sign=cc.find("archor/left_node/node_dia/no_purchase/sign",o.csbNode),o.node_dia=cc.find("archor/left_node/node_dia",o.csbNode),o.vip_node=cc.find("archor/left_node/node_dia/no_purchase/vip_node",o.csbNode),o.vip_des=cc.find("archor/left_node/node_dia/no_purchase/vip_node/vip_des",o.csbNode),o.once_node=cc.find("archor/left_node/node_dia/no_purchase/once_node",o.csbNode),o.price_bg=cc.find("archor/left_node/node_dia/price_bg",o.csbNode),o.goods=cc.find("archor/left_node/node_dia/no_purchase/goods",o.csbNode).getComponent(cc.Label),o.price=cc.find("archor/left_node/node_dia/no_purchase/price",o.csbNode).getComponent(cc.Label),o.desc=cc.find("archor/left_node/node_dia/no_purchase/once_node/desc",o.csbNode).getComponent(cc.Label),o}return __extends(t,e),t.prototype.onBtnCell=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this.btnCell.setScale(1);var t=e.currentTarget.name,i=n.model.shop.goldData[t],r={cmd:o.msgs.CMD_STORE_FISH,params:{action:"order_transaction",gameId:9999,userId:n.ME.userId,clientId:c.AccountInfo.clientId,prodId:i.id,count:1,isRecharge:0}};a.tcp.send(r)},t.prototype.initCell=function(e){var t=n.model.shop.goldData[e];if(t){this.btnCell.name=e.toString();var i=t.innerId,o=t.pt,c=t.prstTimes,a=t.buyTimes,h=r.configTable.shop[i],l=parseInt(h.number),d=Number(h.prize),_=s.AssetsManager.getRes("img/atlas/common");this.Icon.getComponent(cc.Sprite).spriteFrame=_.getSpriteFrame(h.goods_icon.slice(0,-4)),o&&"day"==o&&c>a?(this.btnCell.getComponent(cc.Button).normalSprite=_.getSpriteFrame("fish_shop_double1"),this.btnCell.getComponent(cc.Button).pressedSprite=_.getSpriteFrame("fish_shop_double1"),this.price_bg.getComponent(cc.Sprite).spriteFrame=_.getSpriteFrame("fish_shop_double"),this.price_bg.setPosition(cc.v2(315,0)),this.goods.string=l+"\u91d1\u5e01",this.goods.node.color=cc.color(255,0,0),this.goods.node.position=cc.v2(175,12),this.price.string="\xa5"+h.prize,this.price.node.color=cc.color(255,255,255),this.price.node.position=cc.v2(317,16),this.desc.string="\u8d60"+l+"\u91d1\u5e01",this.desc.node.color=cc.color(164,0,0),this.desc.node.position=cc.v2(175,-20)):o&&"life"==o?(0==h.recommend?this.sign.active=!1:1==h.recommend?(this.sign.active=!0,this.sign.getComponent(cc.Sprite).spriteFrame=_.getSpriteFrame("fish_shangcheng_7")):(this.sign.active=!0,this.sign.getComponent(cc.Sprite).spriteFrame=_.getSpriteFrame("fish_shangcheng_22")),this.Icon.getComponent(cc.Sprite).spriteFrame=_.getSpriteFrame(h.goods_icon.slice(0,-4)),c<=a?i>=11101&&i<=11107&&h.small_gift>0?(this.no_purchase.active=!0,this.already_purchase.active=!1,this.vip_node.active=!1,this.once_node.active=!0,this.goods.string=h.number+"\u91d1\u5e01",this.price.string="\xa5"+h.prize,this.desc.string="\u8d60"+h.small_gift+"\u91d1\u5e01"):(this.goods.string=l+"\u91d1\u5e01",this.price.string="\xa5"+h.prize,this.desc.string="1\u5143 = "+l/d+"\u91d1\u5e01",this.goods.node.color=cc.color(200,0,200),this.desc.node.color=cc.color(107,55,0)):(this.no_purchase.active=!0,this.already_purchase.active=!1,this.vip_node.active=!1,this.once_node.active=!0,this.goods.string=h.number+"\u91d1\u5e01",this.price.string="\xa5"+h.prize,this.desc.string="\u8d60"+h.number+"\u91d1\u5e01(\u4ec5\u4e00\u6b21)")):(this.goods.string=l+"\u91d1\u5e01",this.price.string="\xa5"+h.prize,this.desc.string="1\u5143 = "+l/d+"\u91d1\u5e01",this.goods.node.color=cc.color(200,0,200),this.desc.node.color=cc.color(107,55,0))}},t}(cc.Node);i.ShopGold=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_shop_view:[function(e,t,i){"use strict";cc._RF.push(t,"df0e3CEOlJF0Z2rh/3Whbit","fish_shop_view"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("./fish_shop_gold"),r=e("./fish_shop_diamond"),h=e("../../fish"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.csbRoot=null,this.ScrollView=null,this.cell_width=376,this.cell_height=92,this.cell_num=7,this.offset=16,this.wSpace=392,this.hSpace=98,this.node_progress=null,this.curVip=null,this.nextVip=null,this.loadingBar=null,this.label_gress=null,this.btnGold=null,this.btnDiamond=null,this.arr_1=null,this.arr_2=null,this.node_full=null,this.node_tip=null,this.dikuang=null,this.vip_add=null,this.more_label=null,this.more_vip=null,this.type=e,this.PanelType=0,this._seconds=n.model.shop.updateSec,this.listener=null,this.touchY=null,this.touchFlag=!0},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/shop")),h.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.vip_add=cc.find("archor/groupTable/vip_add",this.csbRoot),this.arr_1=cc.find("archor/groupTable/node_arr/arr_1",this.csbRoot),this.arr_2=cc.find("archor/groupTable/node_arr/arr_2",this.csbRoot),this.node_tip=cc.find("archor/groupButtom/node_tip",this.csbRoot),this.node_full=cc.find("archor/node_full",this.csbRoot),this.curVip=cc.find("archor/groupButtom/node_progress/curVip",this.csbRoot),this.nextVip=cc.find("archor/groupButtom/node_progress/nextVip",this.csbRoot),this.loadingBar=cc.find("archor/groupButtom/node_progress/loadingBar",this.csbRoot),this.label_gress=cc.find("archor/groupButtom/node_progress/label_gress",this.csbRoot),this.more_label=cc.find("archor/groupButtom/node_tip/more_label",this.csbRoot),this.more_vip=cc.find("archor/groupButtom/node_tip/more_vip",this.csbRoot),this.dikuang=cc.find("archor/groupboard/dikuang",this.csbRoot),this.btnDiamond=cc.find("archor/groupTable/node_Tab/btnDiamond",this.csbRoot),this.btnGold=cc.find("archor/groupTable/node_Tab/btnGold",this.csbRoot),this.ScrollView=cc.find("archor/groupTable/node_table/ScrollView",this.csbRoot).getComponent(cc.ScrollView),this.btnDiamond.on(cc.Node.EventType.TOUCH_END,this.onBtnDiamond,this),this.btnGold.on(cc.Node.EventType.TOUCH_END,this.onBtnGold,this),cc.find("archor/groupButtom/node_privilege/btnPrivilege",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnPrivilege,this),cc.find("archor/groupboard/closeBtn",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this);var e=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),e.play("show"),n.model.shop.isNeedRequestShopData?(n.model.shop.requestShopInfo(this.type),n.model.shop.isNeedRequestShopData=!1):this.onEventUpdateShopWindow(),this.listener=null,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),o.evtCenter.on(c.evts.EVT_UPDATE_SHOP_WINDOW,this.onEventUpdateShopWindow,this),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_UPDATE_SHOP_WINDOW,this.onEventUpdateShopWindow,this),o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onEventUpdateShopWindow=function(){this.initTableData(this.type),this.initVipData()},t.prototype.initUpdateTime=function(){this.schedule(this.countDown,1)},t.prototype.countDown=function(){this._seconds--,0==this._seconds&&(n.model.shop.requestShopInfo(n.model.shop.SHOP_GOLD),this.unschedule(this.countDown))},t.prototype.initTableData=function(e){e===n.model.shop.SHOP_GOLD?(this.PanelType=0,n.model.shop.showType=n.model.shop.SHOP_GOLD,this.arr_1.active=!0,this.arr_2.active=!1,this.showGoldPanel()):(this.PanelType=1,n.model.shop.showType=n.model.shop.SHOP_DIAMOND,this.arr_1.active=!1,this.arr_2.active=!0,this.showDiamondPanel())},t.prototype.initVipData=function(){var e=n.ME.vipLevel+1;if(9==n.ME.vipLevel)this.node_progress.active=!1,this.node_full.active=!0,this.node_tip.active=!1;else{this.curVip.getComponent(cc.Label).string=n.ME.vipLevel.toString(),this.nextVip.getComponent(cc.Label).string=e.toString(),this.label_gress.getComponent(cc.Label).string=n.ME.vipExp/10+"/"+n.ME.vipExpNext/10,this.loadingBar.getComponent(cc.ProgressBar).progress=n.ME.vipExp/n.ME.vipExpNext;var t=(n.ME.vipExpNext-n.ME.vipExp)/10;t<1e3?this.more_label.setScale(1):t<1e4?this.more_label.setScale(.8):this.more_label.setScale(.6),this.more_label.getComponent(cc.Label).string=((n.ME.vipExpNext-n.ME.vipExp)/10).toString(),this.more_vip.getComponent(cc.Label).string=e.toString()}n.ME.vipLevel>=6?(this.vip_add.active=!0,this.vip_add.getComponent(cc.Label).string="VIP\u7279\u6743 \u91d1\u5e01+20%"):n.ME.vipLevel>=4?(this.vip_add.active=!0,this.vip_add.getComponent(cc.Label).string="VIP\u7279\u6743 \u91d1\u5e01+10%"):this.vip_add.active=!1},t.prototype.showGoldPanel=function(){this.type=n.model.shop.SHOP_GOLD;var e=this.ScrollView.content.getContentSize(),t=Math.ceil(this.cell_num/2);this.ScrollView.content.setContentSize(e.width,this.hSpace*t+20),this.ScrollView.content.setPosition(cc.v2(0,90-this.cell_num*this.hSpace*.13)),this.ScrollView.getComponent(cc.ScrollView).content.removeAllChildren();for(var i=0;i<this.cell_num;i++){var s=new a.ShopGold(i,this);this.ScrollView.content.addChild(s),s.initCell(i);var o=Math.floor(i/2),c=Math.floor(i%2);s.setPosition(cc.v2(this.offset+c*this.wSpace,t*this.hSpace-o*this.hSpace-43))}},t.prototype.showDiamondPanel=function(){this.type=n.model.shop.SHOP_DIAMOND;var e=Math.ceil(this.cell_num/2),t=this.ScrollView.content.getContentSize();this.ScrollView.content.setContentSize(t.width,this.hSpace*e+20),this.ScrollView.content.setPosition(cc.v2(0,90-this.cell_num*this.hSpace*.13)),this.ScrollView.getComponent(cc.ScrollView).content.removeAllChildren();for(var i=0;i<n.model.shop.diamondData.length;i++){var s=new r.ShopDiamond(i,this);this.ScrollView.content.addChild(s),s.initCell(i);var o=Math.floor(i/2),c=Math.floor(i%2);s.setPosition(cc.v2(this.offset+c*this.wSpace,e*this.hSpace-o*this.hSpace-43))}},t.prototype.onBackKey=function(){this.onBtnClose(null)},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this.node.removeFromParent(!0),n.model.guide.penny&&n.model.shop.showFirstCharge()},t.prototype.onBtnPrivilege=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),o.evtCenter.emit(c.evts.EVT_POPUP_VIP_WINDOW,""),this.node.removeFromParent(!0)},t.prototype.onBtnDiamond=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),1!==this.PanelType&&(this.btnDiamond.zIndex=0,this.btnGold.zIndex=0,this.initTableData(n.model.shop.SHOP_DIAMOND))},t.prototype.onBtnGold=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),0!==this.PanelType&&(this.btnDiamond.zIndex=0,this.btnGold.zIndex=0,this.initTableData(n.model.shop.SHOP_GOLD))},t.prototype.onTouchBegin=function(e){return cc.log("***************************** onTouchBegin"),this.touchFlag=!0,this.touchY=e.getLocation().y,!0},t.prototype.onTouchMoved=function(e){cc.log("***************************** onTouchMoved");var t=e.getLocation().y;Math.abs(t-this.touchY)/Math.abs(t)>.04&&(this.touchFlag=!1)},t}(cc.Component);i.ShopView=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_shop_diamond":"fish_shop_diamond","./fish_shop_gold":"fish_shop_gold"}],fish_sign_box:[function(e,t,i){"use strict";cc._RF.push(t,"109a60ifIlPMrjNvuhHrmHf","fish_sign_box"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=function(e){function t(t){var i=e.call(this)||this;return i.csbRoot=null,i._tag=t,i.signed=null,i.reward_des=null,i.reward_icon=null,i.onEnter(),i}return __extends(t,e),t.prototype.onEnter=function(){var e=s.AssetsManager.getRes("img/atlas/common");this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/sign_reward")),this.signed=cc.find("signed",this.csbRoot),this.reward_des=cc.find("reward_des",this.csbRoot),this.reward_icon=cc.find("reward_icon",this.csbRoot),this.addChild(this.csbRoot),cc.find("btnBox",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnBox,this);var t=7233+this._tag,i=o.configTable.gift[t];0==this._tag?(this.reward_des.getComponent(cc.Label).string=i.Gift1_Number+"\u6355\u9c7c\u52cb\u7ae0",this.reward_icon.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_103")):1==this._tag?(this.reward_des.getComponent(cc.Label).string=i.Gift1_Number+"\u91d1\u5e01",this.reward_icon.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("icon_10102")):(this.reward_des.getComponent(cc.Label).string=i.Gift1_Number+"\u91d1\u5e01",this.reward_icon.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("icon_10103"))},t.prototype.onExit=function(){},t.prototype.setBoxState=function(e,t){switch(t){case 0:break;case 1:this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("animation0").wrapMode=cc.WrapMode.Loop;break;case 2:this.csbRoot.getComponent(cc.Animation).stop("sign_reward"),this.signed.active=!0}},t.prototype.onBtnBox=function(e){var t=0;0==this._tag?t=2:1==this._tag?t=7:2==this._tag&&(t=15),n.model.dailysign.requestGetDaysReward(t)},t}(cc.Node);i.SignNormalReward=c;var a=function(e){function t(t){var i=e.call(this)||this;return i._tag=t,i.csbRoot=null,i.box=null,i.signed=null,i.reward_des=null,i.reward_1=null,i.reward_2=null,i.reward_3=null,i.onEnter(),i}return __extends(t,e),t.prototype.onEnter=function(){this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/sign_big_reward")),this.signed=cc.find("signed",this.csbRoot),this.reward_des=cc.find("reward_des",this.csbRoot),this.reward_1=cc.find("reward_1",this.csbRoot),this.reward_2=cc.find("reward_2",this.csbRoot),this.reward_3=cc.find("reward_3",this.csbRoot),this.addChild(this.csbRoot),this.csbRoot.getComponent(cc.Animation).stop("sign_reward"),3==this._tag?(this.reward_1.active=!1,this.reward_2.active=!1,this.reward_3.active=!0,this.reward_des.getComponent(cc.Label).string="30000\u91d1\u5e01"):4==this._tag&&(this.reward_1.active=!0,this.reward_2.active=!0,this.reward_3.active=!1,this.reward_des.getComponent(cc.Label).string="50\u52cb\u7ae0+\u6838\u5f39")},t.prototype.onExit=function(){},t.prototype.setBoxState=function(e,t){switch(t){case 0:break;case 1:this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("animation0");break;case 2:this.csbRoot.getComponent(cc.Animation).stop("sign_reward"),this.signed.active=!0}},t.prototype.onBtnBox=function(e){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1);var t=0;4==this._tag?t=30:3==this._tag&&(t=24),n.model.dailysign.requestGetDaysReward(t)},t}(cc.Node);i.SignBigReward=a,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_sign_date:[function(e,t,i){"use strict";cc._RF.push(t,"8ff0bNrgCdGManF0NiFsUqG","fish_sign_date"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=function(e){function t(t){var i=e.call(this)||this;return i.csbRoot=null,i.fntDate=null,i.date=t,i.mask=null,i.date_mark=null,i.onEnter(),i}return __extends(t,e),t.prototype.onEnter=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/sign_date")),this.addChild(this.csbRoot),this.fntDate=cc.find("fntDate",this.csbRoot),this.mask=cc.find("mask",this.csbRoot),this.date_mark=cc.find("date_mark",this.csbRoot),this.fntDate.getComponent(cc.Label).string=this.date.toString()},t.prototype.onExit=function(){},t}(cc.Node);i.SignDate=s,cc._RF.pop()},{"../../../assets_manager":"assets_manager"}],fish_sign_tip:[function(e,t,i){"use strict";cc._RF.push(t,"5d04bCBaeFCMJdN3qRgAffS","fish_sign_tip"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../model/fish_model"),c=e("../../../assets_manager"),a=e("../../fish"),r=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(c.AssetsManager.getRes("prefabs/dailysign_tip")),a.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),cc.find("anchor/groupOK/btnReceive",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnReceive,this),cc.find("anchor/groupCancel/btnDouble",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnDouble,this);var e=this.csbNode.getComponent(cc.Animation);e.play("show"),e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("loop").wrapMode=cc.WrapMode.Loop}.bind(this),this),n.evtCenter.on(s.evts.EVT_RELOAD_NOBLE_GIFT,this.onEventCloseSignTip,this)},t.prototype.onDestroy=function(){n.evtCenter.off(s.evts.EVT_RELOAD_NOBLE_GIFT,this.onEventCloseSignTip,this)},t.prototype.onBtnReceive=function(e){o.model.dailysign.requestGetReward(!1),this.onEventCloseSignTip()},t.prototype.onBtnDouble=function(e){n.evtCenter.emit(s.evts.EVT_POPUP_NOBLE_GIFT)},t.prototype.onEventCloseSignTip=function(){var e=this.csbNode.getComponent(cc.Animation);e.play("hide"),e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),this.node.removeFromParent(),this.destroy()}.bind(this),this)},t}(cc.Component);i.SignTip=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_sign_view:[function(e,t,i){"use strict";cc._RF.push(t,"e1268TFZXhB1YA5dKah9uy0","fish_sign_view"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../model/fish_model"),c=e("../../../assets_manager"),a=e("./fish_sign_box"),r=e("./fish_sign_date"),h=e("../../fish"),l=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.boxNode=[],t.dateNode=[],t.lastMonthDays=0,t.curMonthDays=0,t.today=0,t.archor=null,t.group_right=null,t.node_date=null,t.group_left=null,t.progressBar=null,t.fnt_singed=null,t.label_btn=null,t.btnSign=null,t.label_signed=null,t.btnClose=null,t.dikuang=null,t.sign_reward=null,t.renew_card=null,t.buy_card=null,t.card_des=null,t.btnCard=null,t.label_double=null,t.guideMask=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(c.AssetsManager.getRes("prefabs/sign")),this.node.addChild(this.csbRoot),h.fish.adapterScreen(this.csbRoot),this.archor=cc.find("archor",this.csbRoot),this.group_right=cc.find("archor/group_right",this.csbRoot),this.node_date=cc.find("archor/group_right/node_date",this.csbRoot),this.group_left=cc.find("archor/group_left",this.csbRoot),this.progressBar=cc.find("archor/group_left/progress_node/progressBar",this.csbRoot),this.fnt_singed=cc.find("archor/btnSign/label_signed/fnt_singed",this.csbRoot),this.label_btn=cc.find("archor/btnSign/label_btn",this.csbRoot),this.label_signed=cc.find("archor/btnSign/label_signed",this.csbRoot),this.btnClose=cc.find("archor/title_node/btnClose",this.csbRoot),this.dikuang=cc.find("archor/node_board/dikuang",this.csbRoot),this.sign_reward=cc.find("archor/sign_reward",this.csbRoot),this.renew_card=cc.find("archor/btnCard/renew_card",this.csbRoot),this.buy_card=cc.find("archor/btnCard/buy_card",this.csbRoot),this.card_des=cc.find("archor/btnCard/card_des",this.csbRoot),this.btnCard=cc.find("archor/btnCard",this.csbRoot),this.label_double=cc.find("archor/btnSign/label_double",this.csbRoot),this.btnSign=cc.find("archor/btnSign",this.csbRoot),this.btnClose.on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this),this.btnSign.on("click",this.onBtnSign,this),this.btnCard.on(cc.Node.EventType.TOUCH_END,this.onBtnCard,this),this.csbRoot.stopAllActions(),this.csbRoot.getComponent(cc.Animation).play("show"),this.btnClose.active=!1,this.initNobleInfo(),this.initDate(),this.initSignReward(),n.evtCenter.on(s.evts.EVT_MSG_DAILY_SIGN,this.onEventSignResult,this),n.evtCenter.on(s.evts.EVT_CLOSE_DAILY_SIGN,this.onEventCloseDailySign,this),n.evtCenter.on(s.evts.EVT_RELOAD_NOBLE_GIFT,this.initNobleInfo,this),n.evtCenter.emit(s.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){this.boxNode=[],this.dateNode=[],o.model.dailysign.sign_exist=!1,n.evtCenter.off(s.evts.EVT_MSG_DAILY_SIGN,this.onEventSignResult,this),n.evtCenter.off(s.evts.EVT_CLOSE_DAILY_SIGN,this.onEventCloseDailySign,this),n.evtCenter.off(s.evts.EVT_RELOAD_NOBLE_GIFT,this.initNobleInfo,this),n.evtCenter.emit(s.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.initNobleInfo=function(){if(0==o.model.guide.guideStep)this.sign_reward.active=!1,this.btnCard.active=!1,this.label_double.active=!1;else{var e=cc.instantiate(c.AssetsManager.getRes("prefabs/sign_card_text"));this.sign_reward.addChild(e),this.sign_reward.x=20,e.getComponent(cc.Animation).play("animation0"),this.sign_reward.active=!0,this.btnClose.active=!0,o.ME.isMember?(this.renew_card.active=!0,this.buy_card.active=!1,this.label_double.active=!0,this.card_des.getComponent(cc.Label).string="\u8d35\u65cf\u6708\u5361\u5269\u4f59"+o.ME.remainDays+"\u5929",this.card_des.active=!0):(this.renew_card.active=!1,this.buy_card.active=!0,this.label_double.active=!1,this.card_des.active=!1)}var t=this.csbRoot.getComponent(cc.Animation);!o.model.guide.isPlayerSigned&&o.ME.isMember?t.play("loop").wrapMode=cc.WrapMode.Loop:t.stop("loop"),0==o.ME.showMember&&(this.renew_card.active=!1,this.buy_card.active=!1,this.label_double.active=!1,this.card_des.active=!1,this.btnCard.active=!1)},t.prototype.initSignReward=function(){for(var e=0;e<5;e++){var t=cc.find("archor/group_left/node_reward/node_reward"+(e+1),this.csbRoot);if(this.boxNode.push(t),e<=2){var i=new a.SignNormalReward(e);t.addChild(i,0,"box")}else i=new a.SignBigReward(e),t.addChild(i,0,"box");i.setBoxState(t,o.model.dailysign.rewardStates[e])}},t.prototype.initDate=function(){var e,t,i=o.model.dailysign;e=i.year+"/"+i.month+"/"+i.day;var n=new Date(e);n.setDate(1),t=n.getDay(),this.today=parseInt(i.day),this.curMonthDays=this.getDays(i.month,i.year),this.progressBar.getComponent(cc.ProgressBar).progress=100*i.checkInDays.length/this.curMonthDays/100,this.fnt_singed.getComponent(cc.Label).string=i.checkInDays.length.toString();for(var s=c.AssetsManager.getRes("img/atlas/sign"),a=1;a<=t;a++){var h=cc.find("archor/group_right/node_date/date_"+a,this.csbRoot),l=new r.SignDate(this.lastMonthDays-t+a);h.addChild(l),l.fntDate.color=cc.color(190,190,190)}for(a=t;a<t+this.curMonthDays;a++){h=cc.find("archor/group_right/node_date/date_"+(a+1),this.csbRoot);this.dateNode.push(h);l=new r.SignDate(a+1-t);h.addChild(l,0,"signdate"),l.fntDate.color=cc.color(127,63,5),a<t+this.today-1&&(l.mask.active=!0,l.fntDate.color=cc.color(127,63,5),l.mask.getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("fish_qiandao_11")),a==t+this.today-1&&(l.mask.active=!0,l.fntDate.color=cc.color(1,133,135))}for(a=t+this.curMonthDays;a<42;a++){h=cc.find("archor/group_right/node_date/date_"+(a+1),this.csbRoot),l=new r.SignDate(a+1-t-this.curMonthDays);h.addChild(l),l.fntDate.color=cc.color(190,190,190)}for(a=0;a<i.checkInDays.length;a++){this.today==i.checkInDays[a]?(this.btnSign.getComponent(cc.Button).interactable=!1,this.btnSign.getComponent(cc.Button).normalSprite=s.getSpriteFrame("fish_qiandao_28"),this.label_btn.active=!1,this.label_signed.active=!0):(this.label_btn.active=!0,this.label_signed.active=!1);var d=i.checkInDays[a]-1;this.dateNode[d].getChildByName("signdate").date_mark.active=!0}},t.prototype.onEventSignResult=function(e,t){if(0==e){var i=c.AssetsManager.getRes("img/atlas/sign");if("checkin"==t)this.dateNode[this.today-1].getChildByName("signdate").date_mark.active=!0,this.btnSign.getComponent(cc.Button).interactable=!1,this.btnSign.getComponent(cc.Button).normalSprite=i.getSpriteFrame("fish_qiandao_28"),this.label_btn.active=!1,this.label_signed.active=!0,this.progressBar.getComponent(cc.ProgressBar).progress=100*o.model.dailysign.checkInDays.length/this.curMonthDays/100,this.fnt_singed.getComponent(cc.Label).string=o.model.dailysign.checkInDays.length.toString();this.btnClose.active=!0;for(var n=0;n<5;n++){var s=this.boxNode[n].getChildByName("box");s&&s.setBoxState(this.boxNode[n],o.model.dailysign.rewardStates[n])}}},t.prototype.getDays=function(e,t){var i=0,n=0==t%4&&(t%100!=0||t%400==0);switch(cc.log(e),e){case"01":case"03":case"05":case"07":case"10":case"12":i=31,this.lastMonthDays=30;break;case"08":i=31,this.lastMonthDays=31;break;case"04":case"06":case"09":case"11":i=30,this.lastMonthDays=31;break;case"02":i=n?29:28,this.lastMonthDays=31}return i},t.prototype.onBackKey=function(){0!=o.model.guide.guideStep&&this.onBtnClose(null)},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),o.model.guide.isFirstLogin=0,o.ME.isMember&&o.ME.isMemberReward&&!o.model.dailysign.isNewBieSign&&n.evtCenter.emit(s.evts.EVT_POPUP_NOBLE_GIFT_EVERYDAY),this.node.removeFromParent(),this.destroy()},t.prototype.onBtnCard=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),n.evtCenter.emit(s.evts.EVT_POPUP_NOBLE_GIFT)},t.prototype.onBtnSign=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),o.ME.isMember||0==o.model.guide.guideStep||0==o.ME.showMember?(o.model.dailysign.requestGetReward(!1),this.btnSign.getComponent(cc.Button).interactable=!1,this.csbRoot.getComponent(cc.Animation).stop("loop")):n.evtCenter.emit(s.evts.EVT_POPUP_SIGN_TIP)},t.prototype.onEventCloseDailySign=function(){this.node.removeFromParent(),this.destroy()},t}(cc.Component);i.DailySign=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","./fish_sign_box":"fish_sign_box","./fish_sign_date":"fish_sign_date"}],fish_subsidy_game:[function(e,t,i){"use strict";cc._RF.push(t,"f8cd1MbVNdKZIBWdQq7f173","fish_subsidy_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../model/fish_model"),c=e("../../define/fish_msg_types"),a=e("../../scene/fish_scene_login"),r=e("../../logic/fish_tcp"),h=e("../../define/fish_event_types"),l=function(e){function t(){var t=e.call(this)||this;return t.fntTime=null,t.countdown_tip=null,t.receive_tip=null,t.btnSubsidy=null,t.time_out=null,t.dikuang=null,t.fish_gold1_6=null,t.fish_gold1_6_0=null,t.scheduler=cc.director.getScheduler(),t.relativeSeat=s.utils.getRelativeSeat(o.model.table.seatId),t.seatPos=s.utils.getSeatPosition(t.relativeSeat),t.tipsPos=cc.v2(t.seatPos.x,180),t.csbNode=cc.instantiate(n.AssetsManager.getRes("prefabs/subsidy_game")),t.fntTime=cc.find("fntTime",t.csbNode),t.countdown_tip=cc.find("countdown_tip",t.csbNode),t.receive_tip=cc.find("receive_tip",t.csbNode),t.btnSubsidy=cc.find("btnSubsidy",t.csbNode),t.time_out=cc.find("time_out",t.csbNode),t.dikuang=cc.find("dikuang",t.csbNode),t.fish_gold1_6=cc.find("fish_gold1_6",t.csbNode),t.fish_gold1_6_0=cc.find("fish_gold1_6_0",t.csbNode),t.setPosition(t.tipsPos),t.addChild(t.csbNode),t._countTime=0,t}return __extends(t,e),t.prototype.onEnter=function(){o.model.subsidy.brptState==o.model.subsidy.RUPT_USEUP?this.showBrokeAndUseUp():o.model.subsidy.brptState==o.model.subsidy.RUPT_BENEFIT?this.showBenefits():o.model.subsidy.brptState==o.model.subsidy.RUPT_WAIT&&this.initData()},t.prototype.initData=function(){var e=Date.now()-o.model.subsidy.cdStartTime;this._countTime=o.model.subsidy.cdLeftTime-e/1e3,this._countTime<=0?this.showBenefits():this.showSubsidyView()},t.prototype.showBenefits=function(){this.btnSubsidy.getComponent(cc.Button).enabled=!0,this.fntTime.active=!1,this.countdown_tip.active=!1,this.time_out.active=!1,this.receive_tip.active=!1,this.fish_gold1_6.active=!1,this.fish_gold1_6_0.active=!1,this.dikuang.active=!1},t.prototype._updateLabel=function(){if(this._countTime>1)this._countTime--,this.setCountdownLabel();else{o.model.subsidy.brptState=o.model.subsidy.RUPT_BENEFIT,o.model.subsidy.isCanGetSubsidyNow=!0,this.scheduler.unschedule(this._updateLabel,this),this.btnSubsidy.getComponent(cc.Button).enabled=!0,this.fntTime.opacity=0,this.countdown_tip.active=!1,this.time_out.active=!1,this.receive_tip.active=!1,this.fish_gold1_6.active=!1,this.fish_gold1_6_0.active=!1,this.dikuang.active=!1,this.csbNode.getComponent(cc.Animation).play("twinkle_start").wrapMode=cc.WrapMode.Loop;var e=(new cc.Node).addComponent(sp.Skeleton);e.premultipliedAlpha=!1,e.skeletonData=n.AssetsManager.getRes("spine/dwc_mfjb"),e.setAnimation(0,"1",!0),e.node.setPosition(157,30),this.btnSubsidy.addChild(e.node)}},t.prototype.showSubsidyView=function(){this.btnSubsidy.getComponent(cc.Button).enabled=!1,this.setCountdownLabel(),this.scheduler.schedule(this._updateLabel,this,1)},t.prototype.requestSubsidy=function(){o.model.subsidy.isGetSubSidyInLobby;var e={cmd:c.msgs.CMD_TABLE_CALL,params:{action:"get_benefits",gameId:28,userId:o.ME.userId,roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId,clientId:a.AccountInfo.clientId}};r.tcp.send(e)},t.prototype.onBtnSubsidy=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),o.model.subsidy.brptState==o.model.subsidy.RUPT_USEUP?s.evtCenter.emit(h.evts.EVT_POPUP_SHOP_WINDOW,o.model.shop.SHOP_GOLD):this.requestSubsidy(),this.btnSubsidy.active=!1},t.prototype.setCountdownLabel=function(){var e=this._countTime%60,t=e<10?"0"+e:e,i=this._countTime/60,n=i<10?"0"+i:i;this.fntTime.getComponent(cc.Label).string=n+":"+t},t.prototype.showBrokeAndUseUp=function(){o.model.subsidy.cdLeftTime=-1,this.countdown_tip.active=!1,this.receive_tip.active=!1,this.fntTime.active=!1,this.time_out.active=!0},t}(cc.Node);i.SubsidyGame=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_subsidy_lobby:[function(e,t,i){"use strict";cc._RF.push(t,"eb6194E+1FABryPj3Qbsix2","fish_subsidy_lobby"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../define/fish_msg_types"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=function(e){function t(){var t=e.call(this)||this;t.csbRoot=null,t.btnReceive=null,t.fntTimeLabel=null,t.Node_3=null;var i=Date.now()-n.model.subsidy.cdStartTime;return t._countTime=n.model.subsidy.cdLeftTime-i/1e3,t}return __extends(t,e),t.prototype.onLoad=function(){if(this.csbRoot=cc.instantiate(s.AssetsManager.getRes("prefabs/subsidy_lobby")),this.Node_3=cc.find("Node_3",this.csbRoot),this.btnReceive=cc.find("btnReceive",this.csbRoot),this.node.setPosition(cc.v2(cc.winSize.width-300,cc.winSize.height-40)),this.node.addChild(this.csbRoot),this.Node_3.active=!1,this.fntTimeLabel=cc.find("Node_3/fntTimeLabel",this.csbRoot),this._countTime<=0){this.Node_3.active=!1,this.btnReceive.getComponent(cc.Button).enabled=!0,this.csbRoot.getComponent(cc.Animation).play("can_receive").wrapMode=cc.WrapMode.Loop}else{this.btnReceive.getComponent(cc.Button).enabled=!1,this.Node_3.active=!0;var e=this._countTime%60,t=e<10?"0"+e:e,i=this._countTime/60,n=i<10?"0"+i:i;this.fntTimeLabel.getComponent(cc.Label).string=n+":"+t,this.schedule(this.updateLabel,1)}o.evtCenter.on(c.evts.EVT_GOLD_INFO_CHG,this.onEventGoldChange,this)},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_GOLD_INFO_CHG,this.onEventGoldChange,this)},t.prototype.onEventHideSubsidy=function(e,t){},t.prototype.onEventGoldChange=function(e,t){e==n.ME.userId&&t>0&&(n.model.subsidy.isBankrupt=!1,this.node.removeFromParent(),this.destroy())},t.prototype.updateLabel=function(){if(this._countTime>1){this._countTime--;var e=this._countTime%60,t=e<10?"0"+e:e,i=this._countTime/60,s=i<10?"0"+i:i;this.fntTimeLabel.getComponent(cc.Label).string=s+":"+t}else{n.model.subsidy.brptState=n.model.subsidy.RUPT_BENEFIT,n.model.subsidy.isCanGetSubsidyNow=!0,this.unschedule(this.updateLabel),this.btnReceive.getComponent(cc.Button).enabled=!0,this.Node_3.active=!1,this.csbRoot.getComponent(cc.Animation).play("can_receive").wrapMode=cc.WrapMode.Loop}},t.prototype.onBtnReceive=function(){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),n.model.subsidy.isGetSubSidyInLobby=!0;var e={cmd:a.msgs.CMD_SUBSIDY_RECEIVE,params:{gameId:28,action:"get",userId:n.ME.userId,clientId:r.AccountInfo.clientId}};h.tcp.send(e)},t}(cc.Component);i.SubsidyLobby=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_super_weapon:[function(e,t,i){"use strict";cc._RF.push(t,"3b4aazjiqhMOoo8QZ0BqzkB","fish_super_weapon"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../buffer/fish_buffer"),o=e("../../model/fish_model"),c=e("../../scene/fish_scene"),a=e("../../define/fish_event_types"),r=e("../../define/fish_consts"),h=e("../../logic/fish_tcp"),l=e("../../define/fish_msg_types"),d=e("../../fish"),_=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.btnHide=null,t.btnLaser1=null,t.btnLaser2=null,t.btnLaser3=null,t.btnLaser4=null,t.btnNbomb=null,t.fntLaser1Count=null,t.fntLaser2Count=null,t.fntLaser3Count=null,t.fntLaser4Count=null,t.fntNbombCount=null,t.nbombPrice=null,t}return __extends(t,e),t.prototype.onLoad=function(){cc.log("****superweapon****"),this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/super_weapon")),d.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.btnHide=cc.find("btnHide",this.csbRoot),this.btnLaser1=cc.find("panelRoot/group/laser1/btnLaser1",this.csbRoot),this.btnLaser2=cc.find("panelRoot/group/laser2/btnLaser2",this.csbRoot),this.btnLaser3=cc.find("panelRoot/group/laser3/btnLaser3",this.csbRoot),this.btnLaser4=cc.find("panelRoot/group/laser4/btnLaser4",this.csbRoot),this.btnNbomb=cc.find("panelRoot/group/nbomb/btnNbomb",this.csbRoot),this.fntLaser1Count=cc.find("panelRoot/group/laser1/fntLaser1Count",this.csbRoot),this.fntLaser2Count=cc.find("panelRoot/group/laser2/fntLaser2Count",this.csbRoot),this.fntLaser3Count=cc.find("panelRoot/group/laser3/fntLaser3Count",this.csbRoot),this.fntLaser4Count=cc.find("panelRoot/group/laser4/fntLaser4Count",this.csbRoot),this.fntNbombCount=cc.find("panelRoot/group/nbomb/fntNbombCount",this.csbRoot),this.nbombPrice=cc.find("panelRoot/group/nbomb/nbombPrice",this.csbRoot),this.btnHide.on(cc.Node.EventType.TOUCH_END,this.onBtnHide,this),this.btnLaser1.on("click",this.onBtnLaser1,this),this.btnLaser2.on("click",this.onBtnLaser2,this),this.btnLaser3.on("click",this.onBtnLaser3,this),this.btnLaser4.on("click",this.onBtnLaser4,this),this.btnNbomb.on("click",this.onBtnNbomb,this),cc.find("panelRoot/btnShow",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnShow,this),s.buffer.laser1=s.buffer.bind(s.buffer.LASER1,o.ME.userId,this.fntLaser1Count),s.buffer.laser1.onEnter(),this.fntLaser1Count.addChild(s.buffer.laser1),s.buffer.laser2=s.buffer.bind(s.buffer.LASER2,o.ME.userId,this.fntLaser2Count),s.buffer.laser2.onEnter(),this.fntLaser2Count.addChild(s.buffer.laser2),s.buffer.laser3=s.buffer.bind(s.buffer.LASER3,o.ME.userId,this.fntLaser3Count),s.buffer.laser3.onEnter(),this.fntLaser3Count.addChild(s.buffer.laser3),s.buffer.laser4=s.buffer.bind(s.buffer.LASER4,o.ME.userId,this.fntLaser4Count),s.buffer.laser4.onEnter(),this.fntLaser4Count.addChild(s.buffer.laser4),s.buffer.nbomb=s.buffer.bind(s.buffer.Nbomb,o.ME.userId,this.fntNbombCount),s.buffer.nbomb.onEnter(),this.fntNbombCount.addChild(s.buffer.nbomb);var e=cc.visibleRect,t=1==o.model.table.seatId||3==o.model.table.seatId?.3*e.width:.7*e.width;cc.find("panelRoot",this.csbRoot).setPosition(t,0),o.ME.playerInfo.maxWeapon.multiple>=30&&this.onBtnShow(null),this._setBtnState(),c.evtCenter.on(a.evts.EVT_BAGGAGE_UPDATE,this.onEventBaggageUpdate,this),c.evtCenter.on(a.evts.EVT_LASER_BEGIN,this.onEventLaserBegin,this),c.evtCenter.on(a.evts.EVT_LASER_FIRE,this.onEventLaserFire,this),c.evtCenter.on(a.evts.EVT_LASER_END,this.onEventLaserEnd,this),c.evtCenter.on(a.evts.EVT_NBOMB_USE,this.onEventNbombUse,this),c.evtCenter.on(a.evts.EVT_RMATCH_START,this.onEventShowRmatchPanel,this),c.evtCenter.on(a.evts.EVT_RMATCH_END,this.onEventShowRmatchPanel,this)},t.prototype.onDestroy=function(){cc.log("****onDestroy superweapon*****"),c.evtCenter.off(a.evts.EVT_RMATCH_START,this.onEventShowRmatchPanel,this),c.evtCenter.off(a.evts.EVT_RMATCH_END,this.onEventShowRmatchPanel,this),c.evtCenter.off(a.evts.EVT_BAGGAGE_UPDATE,this.onEventBaggageUpdate,this),c.evtCenter.off(a.evts.EVT_LASER_BEGIN,this.onEventLaserBegin,this),c.evtCenter.off(a.evts.EVT_LASER_FIRE,this.onEventLaserFire,this),c.evtCenter.off(a.evts.EVT_LASER_END,this.onEventLaserEnd,this),c.evtCenter.off(a.evts.EVT_NBOMB_USE,this.onEventNbombUse,this)},t.prototype.onEventBaggageUpdate=function(){this._setBtnState()},t.prototype.onEventShowRmatchPanel=function(){this.onBtnHide(null)},t.prototype.onEventLaserBegin=function(e,t){var i=c.utils.getSeatPosition(c.utils.getRelativeSeat(e)),n=cc.v2(i.x,i.y+200);c.effect.publicTipsShow(this.csbRoot,"fish_text11",n),e==o.model.table.seatId&&(this.btnLaser1.getComponent(cc.Button).enabled=!1,this.btnLaser2.getComponent(cc.Button).enabled=!1,this.btnLaser3.getComponent(cc.Button).enabled=!1,this.btnLaser4.getComponent(cc.Button).enabled=!1,c.effect.radialProgress(this.btnLaser1,"fish_skill_mask",-1,5/8),c.effect.radialProgress(this.btnLaser2,"fish_skill_mask",-1,5/8),c.effect.radialProgress(this.btnLaser3,"fish_skill_mask",-1,5/8),c.effect.radialProgress(this.btnLaser4,"fish_skill_mask",-1,5/8))},t.prototype.onEventLaserFire=function(e,t){e==o.model.table.seatId&&(c.effect.radialProgress(this.btnLaser1,"fish_skill_mask",20,5/8),c.effect.radialProgress(this.btnLaser2,"fish_skill_mask",20,5/8),c.effect.radialProgress(this.btnLaser3,"fish_skill_mask",20,5/8),c.effect.radialProgress(this.btnLaser4,"fish_skill_mask",20,5/8)),c.audio.playLaser()},t.prototype.onEventLaserEnd=function(e,t){e==o.model.table.seatId&&(this.btnLaser1.getComponent(cc.Button).enabled=!0,this.btnLaser2.getComponent(cc.Button).enabled=!0,this.btnLaser3.getComponent(cc.Button).enabled=!0,this.btnLaser4.getComponent(cc.Button).enabled=!0,c.effect.radialProgressClear(this.btnLaser1),c.effect.radialProgressClear(this.btnLaser2),c.effect.radialProgressClear(this.btnLaser3),c.effect.radialProgressClear(this.btnLaser4)),c.audio.stopLaser()},t.prototype.onEventNbombUse=function(e){if(o.model.table.seatId==e){c.effect.radialProgress(this.btnNbomb,"fish_skill_mask",20,5/8),c.evtCenter.emit(a.evts.EVT_REMOVE_TIP_LICK_FISH,this),c.evtCenter.emit(a.evts.EVT_REMOVE_MSG_LABEL,this);var t=c.utils.getSeatPosition(c.utils.getRelativeSeat(e)),i=cc.v2(t.x,t.y+200);c.effect.publicTipsShow(this.csbRoot,"fish_text11",i)}},t.prototype.onBtnShow=function(e){(cc.log("*********************************************************************** onBtnShow"),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),o.model.guide.newbieInGameFinished)&&(c.evtCenter.emit(a.evts.EVT_SHOW_SUPER,this),this.csbRoot.getComponent(cc.Animation).play("showSuperWeapon"))},t.prototype.onBtnHide=function(e){cc.log("*********************************************************************** onBtnHide"),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),c.evtCenter.emit(a.evts.EVT_HIDE_SUPER,this),this.csbRoot.getComponent(cc.Animation).play("hideSuperWeapon")},t.prototype.onBtnLaser1=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=o.ME.baggage.getItem(r.Item.LASER1);if(0!=(t?t.count:0)){var i={cmd:l.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:o.ME.userId,action:"skill",skillId:r.Skill.LASER1,subAction:"use",roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId,useDmd:1}};h.tcp.send(i)}else c.evtCenter.emit(a.evts.EVT_MSG_BOX,c.configTable.languageKey.string_meiyoujiguang1.string_zhcn)},t.prototype.onBtnLaser2=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=o.ME.baggage.getItem(r.Item.LASER2);if(0!=(t?t.count:0)){var i={cmd:l.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:o.ME.userId,action:"skill",skillId:r.Skill.LASER2,subAction:"use",roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId,useDmd:1}};h.tcp.send(i)}else c.evtCenter.emit(a.evts.EVT_MSG_BOX,c.configTable.languageKey.string_meiyoujiguang2.string_zhcn)},t.prototype.onBtnLaser3=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=o.ME.baggage.getItem(r.Item.LASER3);if(0!=(t?t.count:0)){var i={cmd:l.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:o.ME.userId,action:"skill",skillId:r.Skill.LASER3,subAction:"use",roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId,useDmd:1}};h.tcp.send(i)}else c.evtCenter.emit(a.evts.EVT_MSG_BOX,c.configTable.languageKey.string_meiyoujiguang3.string_zhcn)},t.prototype.onBtnLaser4=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=o.ME.baggage.getItem(r.Item.LASER4);if(0!=(t?t.count:0)){var i={cmd:l.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:o.ME.userId,action:"skill",skillId:r.Skill.LASER4,subAction:"use",roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId,useDmd:1}};h.tcp.send(i)}else c.evtCenter.emit(a.evts.EVT_MSG_BOX,c.configTable.languageKey.string_meiyoujiguang4.string_zhcn)},t.prototype.onBtnNbomb=function(e){if(cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),this.onBtnHide(null),o.model.table.isLaser)c.evtCenter.emit(a.evts.EVT_MSG_TIPS,"\u53d1\u5c04\u6fc0\u5149\u65f6\u65e0\u6cd5\u4f7f\u7528\u6838\u5f39",2);else{var t=o.ME.baggage.getItem(r.Item.NBOMB);if(t&&t.count>0)this.sendNbombMsg();else if(!t||0==t.count){var i=c.configTable.skill[r.Skill.NBOMB];if(cc.log(o.ME.vipLevel<i.vip_lvl),o.ME.vipLevel<i.vip_lvl)return void c.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u6ca1\u6709\u514d\u8d39\u6280\u80fd\uff0c\u9700\u8981VIP2\u624d\u80fd\u8d2d\u4e70\uff01",this.showVipView,this);if(o.ME.diamond<i.cost)return void c.evtCenter.emit(a.evts.EVT_MSG_BOX,"\u5f88\u62b1\u6b49\uff0c\u60a8\u7684\u94bb\u77f3\u4e0d\u8db3"+i.cost+",\u672a\u80fd\u8d2d\u4e70\u6210\u529f,\u662f\u5426\u524d\u5f80\u5145\u503c?",2,this.goShopping,this);o.model.table.isShowBuyTip?c.evtCenter.emit(a.evts.EVT_MSG_BUY_ITEM,{itemNum:i.cost,btn:2,callback:this.sendNbombMsg,target:this,position:!1,fishKingFlag:!1}):this.sendNbombMsg()}}},t.prototype.goShopping=function(){c.evtCenter.emit(a.evts.EVT_POPUP_SHOP_WINDOW,o.model.shop.SHOP_DIAMOND)},t.prototype.sendNbombMsg=function(){var e=o.ME.baggage.getItem(r.Item.NBOMB),t={cmd:l.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:o.ME.userId,action:"skill",skillId:5110,subAction:"use",roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId,useDmd:e&&e.count>0?0:1}};h.tcp.send(t)},t.prototype._setBtnState=function(){var e=o.ME.baggage.getItem(r.Item.NBOMB);e&&0!=e.count?(this.fntNbombCount.active=!0,this.nbombPrice.active=!1):(this.fntNbombCount.active=!1,this.nbombPrice.active=!0)},t.prototype.showVipView=function(){c.evtCenter.emit(a.evts.EVT_POPUP_VIP_WINDOW,"")},t}(cc.Component);i.SuperWeapon=_,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_tcp:[function(e,t,i){"use strict";cc._RF.push(t,"9c3ccobXy9B7KS60NTyMY0U","fish_tcp"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=e("../../xmen_interface"),o=e("../define/fish_event_types"),c=e("base-64"),a=e("../define/fish_msg_types");i.TCPConfig={tcpServerIp:"0.0.0.0",portNumber:0};var r=function(){function e(){this._tcpClient=null,this._netStateOK=!0,this._netWaitRsp=!1,this._netTimeout=!1,this._netWeak=!1,this._hideTime=0,this._tcpClient=new s.xmen.WebSocketClient}return e.getInstance=function(){return this.instance},e.prototype.setNetState=function(e){this._netStateOK=e},e.prototype.setNetWaiting=function(e){this._netWaitRsp=e},e.prototype.setNetTimeout=function(e){this._netTimeout=e},e.prototype.setNetWeak=function(e){this._netWeak=e},e.prototype.isNetTimeout=function(){return this._netTimeout},e.prototype.isNetWeak=function(){return this._netWeak},e.prototype.isWritable=function(){return this._netStateOK&&!this._netWaitRsp&&this._tcpClient._wsObj.readyState==WebSocket.OPEN},e.prototype.isConnected=function(){return this._tcpClient._wsObj.readyState==WebSocket.OPEN},e.prototype.connect=function(){cc.log("socket connect: "+i.TCPConfig.tcpServerIp+":"+i.TCPConfig.portNumber),this._tcpClient.setAutoReconnectStatus(!1),this._tcpClient.setConnectTimeoutSeconds(5),this._tcpClient.connect(i.TCPConfig,"fish.tcpPublisher")},e.prototype.close=function(){this._tcpClient._wsObj.readyState==WebSocket.OPEN&&this._tcpClient.close()},e.prototype.send=function(e,t){void 0===t&&(t=null),this.isWritable()&&(n.evtCenter.emit(o.evts.EVT_NET_REQUEST,t||e.cmd,e.params&&e.params.action||""),"string"==typeof e?this._tcpClient.sendMsg(e):this._tcpClient.sendMsg(JSON.stringify(e)))},e.prototype.setHideTime=function(e){void 0===e&&(e=0),this._hideTime=e||(new Date).getTime()},e.prototype.getHideTime=function(){return this._hideTime},e.prototype.getHideTimeInv=function(){return 0==this._hideTime?0:(new Date).getTime()-this._hideTime},e.prototype.maskMessage=function(e){if(!e)return"";for(var t=[],i=0;i<4;i++)t[i]=e.charCodeAt(i);var n=[],s="";for(i=4;i<e.length;i++)n[i]=e.charCodeAt(i),n[i]^=t[i%4],s+=String.fromCharCode(n[i]);return s},e.prototype.translationMsg=function(e,t){cc.log(t);var i={};switch(parseInt(e)){case 2:return i={cmd:a.msgs.MSG_FIRE_RESPONSE,result:{bulletId:t.fFlg,weaponId:t.wpId,reason:t.reason,gold:t.chip}};case 3:var n=new ArrayBuffer(32),s=new DataView(n);s.setFloat32(0,t.fPosx,!0),s.setFloat32(4,t.fPosy,!0);var o=new DataView(n),c=o.getFloat32(0,!1),r=o.getFloat32(4,!1);return i={cmd:a.msgs.MSG_FIRE_BROADCAST,result:{bulletId:t.fFlg,x:c,y:r,weaponId:t.wpId,seatId:t.seatId,reason:t.reason,gold:t.chip}};case 5:if(i={cmd:a.msgs.MSG_CATCH_SUCCESS,result:{seatId:t.seatId,bulletId:t.fFlg,fishId:t.fId}},t.gain){for(var h=[],l=0;l<t.gain.length;l++){var d=t.gain[l];h.push({itemId:d.name,itemNum:d.count})}i.result.items=h}return i;case 6:return i={cmd:a.msgs.MSG_CATCH_FAILED,result:{bulletId:t.fFlg,fishId:t.fId,reason:t.reason}}}return i},e.instance=new e,e}();i.tcp=r.getInstance();var h=function(){function e(){}return e.prototype.onSocketOpen=function(e){e.type&&"open"==e.type?(cc.log("socket connected"),i.tcp._netStateOK=!0,i.tcp._netWaitRsp=!1,n.evtCenter.emit(s.xmen.EventType.TCP_OPENED)):(cc.log("socket connect failed: "+i.TCPConfig.tcpServerIp+":"+i.TCPConfig.portNumber),n.evtCenter.emit(s.xmen.EventType.TCP_ERROR))},e.prototype.onMessage=function(e){var t;cc.log("***********onMessage");try{t="0000"===(t=i.tcp.maskMessage(c.decode(e.data)))?null:JSON.parse(t)}catch(e){cc.log(e,t)}t&&(t.cmdId&&(t=i.tcp.translationMsg(t.cmdId,t.result)),cc.log(t),n.evtCenter.emit(o.evts.EVT_NET_RESPONSE,t.cmd,t.result&&t.result.action||""),n.msgCenter.emit(t.cmd,t.result),t.cmd==s.xmen.EventType.MSG_KICKOUT&&s.xmen.EventDispatcher.emit(t.cmd,t.error)),i.tcp._hideTime>0&&i.tcp.setHideTime()},e.prototype.onSocketError=function(e){cc.log("socket error"),n.evtCenter.emit(s.xmen.EventType.TCP_ERROR,e)},e.prototype.onSocketClose=function(){cc.log("socket disconnect"),n.evtCenter.emit(s.xmen.EventType.TCP_CLOSE)},e.prototype.onReconnect=function(){},e}();i.tcpPublisher=h,s.xmen.PublishersManager.addPublisher("fish.tcpPublisher",new h),cc._RF.pop()},{"../../xmen_interface":"xmen_interface","../define/fish_event_types":"fish_event_types","../define/fish_msg_types":"fish_msg_types","../scene/fish_scene":"fish_scene","base-64":1}],fish_treasure_task:[function(e,t,i){"use strict";cc._RF.push(t,"47e6d3jOvRMpKiBsxFjUq+c","fish_treasure_task"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../buffer/fish_buffer"),r=e("../../fish"),h=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.rewardTime=null,t._seconds=0,t.treasureFly=null,t.timeImage=null,t.terasureFish1=null,t.terasureFish2=null,t.terasureFish3=null,t.rankSeat1=null,t.rankSeat2=null,t.rankSeat3=null,t.rankSeat4=null,t.rankNumber1=null,t.rankNumber2=null,t.rankNumber3=null,t.rankNumber4=null,t.userName=null,t.seatPos=null,t.rewardKey=null,t.successResult=null,t.progress=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/treasure")),r.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.rewardTime=cc.find("anchorTop/table/rewardTime",this.csbRoot),this.treasureFly=cc.find("anchorCenter/treasureFly",this.csbRoot),this.timeImage=cc.find("anchorTop/table/timeImage",this.csbRoot),this.terasureFish1=cc.find("anchorTop/table/terasureFish1",this.csbRoot),this.terasureFish2=cc.find("anchorTop/table/terasureFish2",this.csbRoot),this.terasureFish3=cc.find("anchorTop/table/terasureFish3",this.csbRoot),this.userName=cc.find("anchorCenter1/successResult/userName",this.csbRoot),this.successResult=cc.find("anchorCenter1/successResult",this.csbRoot),this.rankSeat1=cc.find("rankSeat1",this.csbRoot),this.rankSeat2=cc.find("rankSeat2",this.csbRoot),this.rankSeat3=cc.find("rankSeat3",this.csbRoot),this.rankSeat4=cc.find("rankSeat4",this.csbRoot),this.rankNumber1=cc.find("rankNumber1",this.csbRoot),this.rankNumber2=cc.find("rankNumber2",this.csbRoot),this.rankNumber3=cc.find("rankNumber3",this.csbRoot),this.rankNumber4=cc.find("rankNumber4",this.csbRoot),this.csbRoot.active=!1,s.evtCenter.on(o.evts.EVT_TREASURE,this.onEventTreasure,this),s.evtCenter.on(o.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this),this._show()},t.prototype.onDestroy=function(){s.evtCenter.off(o.evts.EVT_TREASURE,this.onEventTreasure,this),s.evtCenter.off(o.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this)},t.prototype.onEventTreasure=function(e){var t=this.csbRoot.getComponent(cc.Animation);switch(this.csbRoot.active=!0,e.action){case"start":this.csbRoot.stopAllActions(),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.radialProgress(this.timeImage,"fish_xuanshang_2",e.timeLong)}.bind(this),this),t.play("showTable"),this._seconds=e.timeLong,this.rewardTime.getComponent(cc.Label).font=n.AssetsManager.getRes("img/font/fnt14"),this.rewardTime.getComponent(cc.Label).string=this.getFormatTimeFromSeconds(this._seconds,!1),this.schedule(this._countDownMttMatch.bind(this),1),this._showFishTaskInfo(e);break;case"rank":this._treasureRank(e);break;case"finish":this._treasureFlyAction(e)}},t.prototype.onEventPlayerLeave=function(e,t){this._hideRank(t)},t.prototype.radialProgress=function(e,t,i,s){this.progress=e.getChildByName("radialProgress").getComponent(cc.ProgressBar),this.progress.progress=1;var o=n.AssetsManager.getRes("img/atlas/treasure").getSpriteFrame(t);if(this.progress.getComponentInChildren(cc.Sprite).spriteFrame=o,i>0){var c=Date.now();this.progress.schedule(function(){var e=(Date.now()-c)/1e3;e>=i?(this.progress.progress=0,this.progress.unscheduleAllCallbacks()):this.progress.progress=1-e/i}.bind(this),0)}},t.prototype.radialProgressClear=function(e){},t.prototype.getFormatTimeFromSeconds=function(e,t){var i,n,s=parseInt(e%60+""),o=s<10?"0"+s:s,c=parseInt(e/3600+"");return 0==c?(n=t?"00:":"",i=parseInt(e/60+"")):(n=(c<10?"0"+c:c)+":",i=parseInt(e/60%60+"")),n+((i<10?"0"+i:i)+"")+":"+o},t.prototype._show=function(){this.csbRoot.active=!0;var e=this.csbRoot.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/count_down"),!1)}.bind(this),this),e.play("start")},t.prototype._countDownMttMatch=function(){if(this._seconds--,this.rewardTime.getComponent(cc.Label).string=this.getFormatTimeFromSeconds(this._seconds,!1),this._seconds>30)this.rewardTime.getComponent(cc.Label).font=n.AssetsManager.getRes("img/font/fnt14");else if(this._seconds>0){var e=n.AssetsManager.getRes("img/atlas/treasure").getSpriteFrame("fish_xuanshang_6");this.progress.getComponentInChildren(cc.Sprite).spriteFrame=e,this.rewardTime.getComponent(cc.Label).font=n.AssetsManager.getRes("img/font/fnt15"),this.rewardTime.runAction(cc.repeat(cc.sequence(cc.scaleTo(.06,1.1),cc.scaleTo(.06,.9)),1))}else 0==this._seconds&&(this.radialProgressClear(this.timeImage),this.unschedule(this._countDownMttMatch))},t.prototype._treasureFlyAction=function(e){this.rewardKey=e.reward;var t={};if(this.rewardKey){for(var i in this.rewardKey){if("item"==i.substring(0,4))t[i.split("item:1")[1]]=this.rewardKey[i]||"",delete this.rewardKey[i]}this.rewardKey.item=t}var o=this.csbRoot.getComponent(cc.Animation),r=!1;if(this.rewardKey)for(var h in this.rewardKey){r=!0;break}if(r){if(this.rewardKey.hasOwnProperty("dmd")||this.rewardKey.hasOwnProperty("chip")||this.rewardKey.hasOwnProperty("item")){var l=e.ranks[1].uid;this.seatPos=s.utils.getSeatPosition(s.utils.getRelativeSeat(c.model.table.getPlayerInfo(l).seatId)),this.csbRoot.stopAllActions(),this.userName.getComponent(cc.Label).string=c.model.table.getPlayerInfo(l).name;var d=this.userName.getPosition(),_=s.utils.createSprite("fish_treasure_win1","treasure"),f=s.utils.createSprite("fish_treasure_win2","treasure"),p=_.getContentSize(),u=f.getContentSize();if(_.setPosition(cc.v2(-p.width/2-this.userName.getContentSize().width/2,d.y)),f.setPosition(cc.v2(u.width/2+this.userName.getContentSize().width/2,d.y)),this.successResult.addChild(_),this.successResult.addChild(f),l==c.ME.userId)this.rewardKey.hasOwnProperty("chip")&&a.buffer.pushGold(l,this.rewardKey.chip,8),o.play("showTreasure"),this.scheduleOnce(this._showLastResult,7.5),this.scheduleOnce(function(){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/treasure_drop"),!1)}.bind(this),3.1);else{if(this.rewardKey.hasOwnProperty("dmd")&&a.buffer.pushDiamond(l,this.rewardKey.dmd,4),this.rewardKey.hasOwnProperty("chip")&&a.buffer.pushGold(l,this.rewardKey.chip,4),this.rewardKey.hasOwnProperty("item"))for(var i in this.rewardKey.item)s.configTable.item[i].big_icon&&a.buffer.pushItem(l,i,1,4);o.on(cc.Animation.EventType.FINISHED,function(){o.targetOff(this);var e=this.treasureFly.getPosition();s.effect.treasureFly(this.csbRoot.getParent(),e,this.seatPos),this.csbRoot.active=!1,this._hideAllRanks(),this.scheduleOnce(this._removeTreasureAll,5)}.bind(this),this),o.play("showTreasureOther")}}}else this.unschedule(this._countDownMttMatch),this.rewardTime.getComponent(cc.Label).string="00:00",this.csbRoot.stopAllActions(),o.on(cc.Animation.EventType.FINISHED,function(){this.scheduleOnce(this._removeTreasureAll,5)}.bind(this),this),this._hideAllRanks(),o.play("loseResultAm")},t.prototype._showLastResult=function(){var e=cc.v2(cc.winSize.width/2,cc.winSize.height/2);if(this.rewardKey.hasOwnProperty("dmd")&&(s.effect.diamondFly(this.csbRoot,e,this.seatPos,c.ME.userId,this.rewardKey.dmd),a.buffer.pushDiamond(c.ME.userId,this.rewardKey.dmd,4)),this.rewardKey.hasOwnProperty("chip")&&s.effect.goldFly(this.csbRoot,5,160,e,this.seatPos,c.ME.userId,this.rewardKey.chip),this.rewardKey.hasOwnProperty("item"))for(var t in this.rewardKey.item)s.configTable.item[t].big_icon&&(s.effect.treasureDropItem(this.csbRoot,e,this.seatPos,c.ME.userId,1,t),a.buffer.pushItem(c.ME.userId,t,1,4));this._hideAllRanks(),this.scheduleOnce(this._removeTreasureAll,4)},t.prototype._treasureRank=function(e){var t=n.AssetsManager.getRes("img/atlas/treasure"),i=e.taskId,o=s.configTable.treasure_task[i];for(var a in this.number=[o.number1,o.number2,o.number3],this.terasureFish=[this.terasureFish1,this.terasureFish2,this.terasureFish3],this.target=[o.target1,o.target2,o.target3],e.ranks){var r=e.ranks[a],h=r.uid,l=c.model.table.getPlayerInfo(h).seatId;if(this._showRank(l,a),r.uid==c.ME.userId)for(var d in r.catch)for(var _=0;_<this.target.length;_++)if(this.target[_]==d&&r.catch[d]>=this.number[_]){var f=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),f.play("catchFishShow"),this.terasureFish[_].setScale(1),this.terasureFish[_].getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_xuanshang_4")}}},t.prototype._showFishTaskInfo=function(e){var t=n.AssetsManager.getRes("img/atlas/treasure"),i=e.taskId,o=s.configTable.treasure_task[i];this.number=[o.number1,o.number2,o.number3],this.terasureFish=[this.terasureFish1,this.terasureFish2,this.terasureFish3];for(var c=[o.target1,o.target2,o.target3],a=0;a<this.number.length;a++){this.terasureFish[a].getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_xuanshang_fish_"+c[a]);var r=this.terasureFish[a].getContentSize();this.terasureFish[a].setScale(35/r.width),this.terasureFish[a].setScale(35/r.height)}},t.prototype._showRank=function(e,t){var i=n.AssetsManager.getRes("img/atlas/treasure");t=t>=1&&t<=4?t:4;var o=s.utils.getRelativeSeat(e);this["rankSeat"+o].active=!0,this["rankNumber"+o].active=!0,this["rankNumber"+o].getComponent(cc.Sprite).spriteFrame=i.getSpriteFrame("fish_treasure_mingci_"+t)},t.prototype._hideRank=function(e){var t=s.utils.getRelativeSeat(e);this["rankSeat"+t].active=!1,this["rankNumber"+t].active=!1},t.prototype._hideAllRanks=function(){for(var e=1;e<=4;e++)this["rankSeat"+e].active=!1,this["rankNumber"+e].active=!1},t.prototype._removeTreasureAll=function(){this.csbRoot.active=!1,this.node.removeFromParent(!0),this.destroy()},t}(cc.Component);i.TreasureTask=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_update_circle:[function(e,t,i){"use strict";cc._RF.push(t,"1964busi5VFkbhl2UUkOeJP","fish_update_circle"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.assetsManagers={clown:null,fruit:null,h3card:null,shz:null}}return e.prototype.alloc=function(e,t,i){},e.prototype.free=function(e){},e}();i._assetsManagerAllocator=n;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t,i,n,s,o){this.gameName=e,this.manifest=t,this.writablePath=i,this.circleBg=n,this.target=s,this.callback=o,this.failedCount=0,this.retryCount=3,this.visibleFlag=!0,this.assetsManager=null},t.prototype.onLoad=function(){},t.prototype.onDestroy=function(){},t.prototype.checkCDN=function(e){},t.prototype.onUpdateEvent=function(e){},t.prototype.updateError=function(){},t.prototype.udpateFailed=function(){i.assetsManagerAllocator.free(this.gameName),this.target&&this.callback&&this.callback.call(this.target,!1)},t.prototype.updateSuccess=function(){i.assetsManagerAllocator.free(this.gameName),this.target&&this.callback&&this.callback.call(this.target,!0)},t.prototype.loadGame=function(){i.assetsManagerAllocator.free(this.gameName),this.target&&this.callback&&this.callback.call(this.target,!0)},t}(cc.Component);i.UpdateCircle=s,i.assetsManagerAllocator=new n,cc._RF.pop()},{}],fish_user_info_chat:[function(e,t,i){"use strict";cc._RF.push(t,"0b8577INW9NNo0S4ygO/ZNV","fish_user_info_chat"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../model/fish_model"),c=e("../../../assets_manager"),a=e("../../logic/fish_tcp"),r=e("../../scene/fish_scene_login"),h=e("../../define/fish_msg_types"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e,t){this.player_info=null,this.userName=null,this.userLevel=null,this.userGunLevel=null,this.userCharm=null,this.userSex=null,this.userIdValue=null,this.bombText=null,this.eggText=null,this.ringText=null,this.roseText=null,this.seatId=t,this._self=e,this.btnUserInfoHide=null,this.headImage=null,this.vipFnt=null,this.button_friends=null,this.sp_btn_friends=null,this.friends_state=0},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(c.AssetsManager.getRes("prefabs/game_personal_info")),this.node.addChild(this.csbRoot),this.btnUserInfoHide=cc.find("btnUserInfoHide",this.csbRoot),this.userName=cc.find("userName",this.csbRoot),this.userLevel=cc.find("userLevelValue",this.csbRoot),this.userGunLevel=cc.find("userGunLevel",this.csbRoot),this.userCharm=cc.find("userCharm",this.csbRoot),this.userSex=cc.find("userSex",this.csbRoot),this.userIdValue=cc.find("userIdValue",this.csbRoot),this.headImage=cc.find("headImage",this.csbRoot),this.vipFnt=cc.find("vipFnt",this.csbRoot),this.button_friends=cc.find("button_friends",this.csbRoot),this.sp_btn_friends=cc.find("button_friends/sp_btn_friends",this.csbRoot),this.bombText=cc.find("bombText",this.csbRoot),this.eggText=cc.find("eggText",this.csbRoot),this.ringText=cc.find("ringText",this.csbRoot),this.roseText=cc.find("roseText",this.csbRoot),this.setSource(),this.btnUserInfoHide.active=!0,this.button_friends.active=!1,this.btnUserInfoHide.on(cc.Node.EventType.TOUCH_END,this.onBtnUserInfoHide,this),this.button_friends.on("click",this.onBtnFriends,this),cc.find("Button_1",this.csbRoot).on("click",this.onBtnBomb,this),cc.find("Button_1_0",this.csbRoot).on("click",this.onBtnEgg,this),cc.find("Button_1_1",this.csbRoot).on("click",this.onBtnRing,this),cc.find("Button_1_2",this.csbRoot).on("click",this.onBtnRose,this),n.evtCenter.on(s.evts.EVT_INFO_CHANGE,this.setSource,this),n.evtCenter.on(s.evts.EVT_FRIENDS_RELATION,this.onReadFriendsRelation,this),n.evtCenter.on(s.evts.EVT_APPLY_FRIENDS,this.onEvtApplyFriend,this)},t.prototype.onDestroy=function(){n.evtCenter.off(s.evts.EVT_FRIENDS_RELATION,this.onReadFriendsRelation,this),n.evtCenter.off(s.evts.EVT_APPLY_FRIENDS,this.onEvtApplyFriend,this)},t.prototype.onReadFriendsRelation=function(e,t){cc.log("user_info_chat.onReceiveFriends"),this.player_info&&this.player_info.userId===e&&this.setFriendsState(t)},t.prototype.onReceiveApplicants=function(e){if(0==e.code&&this.player_info.userId==e.userId){var t=e.applicants.new;if(t)for(var i=0;i<t.length;++i)if(o.ME.userId===t[i].userId)return void this.setFriendsState(2);var n=e.applicants.old;if(n)for(i=0;i<n.length;++i)if(o.ME.userId===n[i].userId)return void this.setFriendsState(2);this.setFriendsState(1)}},t.prototype.setFriendsState=function(e){var t=c.AssetsManager.getRes("img/atlas/friends");switch(this.friends_state=e,e){case 0:this.button_friends.active=!0,this.sp_btn_friends.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_jiahaoyou");break;case 2:this.button_friends.active=!0,this.button_friends.getComponent(cc.Button).interactable=!1,this.sp_btn_friends.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_shenqingzhong");break;default:this.button_friends.active=!1}},t.prototype.setSource=function(){var e=c.AssetsManager.getRes("img/atlas/chat"),t=o.model.table.getPlayerInfo(this.seatId);this.player_info=t,o.model.friends.readRelation(this.player_info.userId),this.userName.getComponent(cc.Label).string=t.name,this.userLevel.getComponent(cc.Label).string=t.level,this.userIdValue.getComponent(cc.Label).string=t.userId;var i=n.configTable.languageKey[n.configTable.weapon[t.maxWeapon.weaponId].weapon_name].string_zhcn;this.userGunLevel.getComponent(cc.Label).string=i,this.userCharm.getComponent(cc.Label).string=t.charm,this.vipFnt.getComponent(cc.Label).string=t.vipLv,0==t.sex?this.userSex.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_liaotian_sex_1"):this.userSex.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_liaotian_sex_0"),t.purl&&null!=t.purl&&n.avatarDownLoader.showHeadImage(t.purl,this.headImage),this.bombText.getComponent(cc.Label).string=n.configTable.experssion[11304].expression_cost,this.eggText.getComponent(cc.Label).string=n.configTable.experssion[11302].expression_cost,this.ringText.getComponent(cc.Label).string=n.configTable.experssion[11303].expression_cost,this.roseText.getComponent(cc.Label).string=n.configTable.experssion[11301].expression_cost},t.prototype.removeMySelf=function(){this.node.removeFromParent(!0)},t.prototype.onBtnBomb=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.sendExpression(11304,this.seatId)},t.prototype.onBtnEgg=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.sendExpression(11302,this.seatId)},t.prototype.onBtnRing=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.sendExpression(11303,this.seatId)},t.prototype.onBtnRose=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.sendExpression(11301,this.seatId)},t.prototype.onBtnUserInfoHide=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this._self.userInfoCsb&&(this._self.userInfoCsb.removeMySelf(),this._self.userInfoCsb=null),this.btnUserInfoHide.active=!1},t.prototype.sendExpression=function(e,t){var i={cmd:h.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:o.ME.userId,clientId:r.AccountInfo.clientId,action:"smile",roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId,toSeatId:t,smileId:e}};a.tcp.send(i)},t.prototype.onBtnFriends=function(e){switch(cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.friends_state){case 0:o.model.friends.applyFriend(this.player_info.userId);break;case 2:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u597d\u53cb\u7533\u8bf7\u4e2d")}},t.prototype.onEvtApplyFriend=function(e){switch(n.evtCenter.emit(s.evts.EVT_NET_HIDE_WAITING),e){case 0:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u7533\u8bf7\u5df2\u53d1\u9001\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u5bf9\u65b9\u540c\u610f",2),this.setFriendsState(2);break;case 1:n.evtCenter.emit(s.evts.EVT_MSG_BOX,"\u60a8\u7684\u597d\u53cb\u5df2\u8fbe\u5230\u4e0a\u9650\uff0c\u63d0\u5347VIP\u7b49\u7ea7\u53ef\u589e\u52a0\u597d\u53cb\u4e0a\u9650",2,this.__openVipUI,this);break;case 2:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u62b1\u6b49\uff0c\u5bf9\u65b9\u597d\u53cb\u5df2\u8fbe\u5230\u4e0a\u9650",2);break;case 3:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u60a8\u4eec\u521a\u89e3\u9664\u597d\u53cb\u5173\u7cfb\uff0c\u8bf7\u5728\u5220\u966424\u5c0f\u65f6\u540e\u518d\u6b21\u5c1d\u8bd5",2);break;case 4:break;case 5:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u8bf7\u8f93\u5165\u6b63\u786e\u6e38\u620fid",2);break;case 6:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u4eca\u65e5\u7533\u8bf7\u597d\u53cb\u6b21\u6570\u5df2\u8fbe\u5230\u4e0a\u9650\uff0c\u8bf7\u60a8\u660e\u65e5\u518d\u6765",2);break;case 7:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u5bf9\u65b9\u5df2\u7ecf\u662f\u60a8\u7684\u597d\u53cb",2);break;case 8:n.evtCenter.emit(s.evts.EVT_MSG_TIPS,"\u60a8\u5df2\u63d0\u4ea4\u8fc7\u597d\u53cb\u7533\u8bf7",2)}},t.prototype.__openVipUI=function(){n.evtCenter.emit(s.evts.EVT_POPUP_VIP_WINDOW,"")},t}(cc.Component);i.TableChatUserInfo=l,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_utils:[function(e,t,i){"use strict";cc._RF.push(t,"50ff3H+ItBLrbVLfH4WIE04","fish_utils"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../model/fish_model"),s=e("../define/fish_consts"),o=e("../scene/fish_scene"),c=e("../../assets_manager"),a=function(){function e(){this._winWidth=cc.winSize.width,this._winHeight=cc.winSize.height,this._seatPos=[cc.v2(3*this._winWidth/10,0),cc.v2(7*this._winWidth/10,0),cc.v2(7*this._winWidth/10,this._winHeight),cc.v2(3*this._winWidth/10,this._winHeight)],this._batteryPos=[cc.v2(3*this._winWidth/10,26),cc.v2(7*this._winWidth/10,26),cc.v2(7*this._winWidth/10,this._winHeight-26),cc.v2(3*this._winWidth/10,this._winHeight-26)],this._firePos=[cc.v2(3*this._winWidth/10,40),cc.v2(7*this._winWidth/10,40),cc.v2(7*this._winWidth/10,this._winHeight-40),cc.v2(3*this._winWidth/10,this._winHeight-40)],this._swingPos=[cc.v2(3*this._winWidth/10,200),cc.v2(7*this._winWidth/10,200),cc.v2(7*this._winWidth/10,this._winHeight-200),cc.v2(3*this._winWidth/10,this._winHeight-200)]}return e.prototype.getRelativeSeat=function(e){return n.model.table.seatId<=2?e:2==e?4:(e+2)%4},e.prototype.getSeatPosition=function(e){return this._seatPos[e-1]},e.prototype.getBatteryPosition=function(e){return this._batteryPos[e-1]},e.prototype.getFirePosition=function(e){return this._firePos[e-1]},e.prototype.getSwingPosition=function(e){return this._swingPos[e-1]},e.prototype.randPt=function(e,t,i){e.x+=2*(Math.random()-.5)*t,e.y+=2*(Math.random()-.5)*i},e.prototype.str2Vec2=function(e){var t=e.split(",");return{x:parseFloat(t[0])||0,y:parseFloat(t[1])||0}},e.prototype.str2Vec4=function(e){var t=e.split(",");return{x:parseFloat(t[0])||0,y:parseFloat(t[1])||0,z:parseFloat(t[2])||0,w:parseFloat(t[3])||0}},e.prototype.str2Rect=function(e){var t=e.split(",");return{x:parseFloat(t[0])||0,y:parseFloat(t[1])||0,width:parseFloat(t[2])||0,height:parseFloat(t[3])||0}},e.prototype.str2Vec2Array=function(e){for(var t=[],i=e.split(";"),n=0,s=i.length;n<s;n++)t.push(this.str2Vec2(i[n]));return t},e.prototype.str2Vec4Array=function(e){for(var t=[],i=e.split(";"),n=0,s=i.length;n<s;n++)t.push(this.str2Vec4(i[n]));return t},e.prototype.str2FloatArray=function(e){for(var t=[],i=e.split(";"),n=0,s=i.length;n<s;n++)t.push(parseFloat(i[n])||0);return t},e.prototype.v2px=function(e){return s.DESIGN_WIDTH*e/this._winWidth},e.prototype.v2py=function(e){return s.DESIGN_HEIGHT*e/this._winHeight},e.prototype.p2vx=function(e){return e*this._winWidth/s.DESIGN_WIDTH},e.prototype.p2vy=function(e){return e*this._winHeight/s.DESIGN_HEIGHT},e.prototype.v2p=function(e){return cc.v2(s.DESIGN_WIDTH*e.x/this._winWidth,s.DESIGN_HEIGHT*e.y/this._winHeight)},e.prototype.p2v=function(e){return cc.v2(e.x*this._winWidth/s.DESIGN_WIDTH,e.y*this._winHeight/s.DESIGN_HEIGHT)},e.prototype.convertX=function(e){return n.model.table.seatId<=2?e:this._winWidth-e},e.prototype.convertY=function(e){return n.model.table.seatId<=2?e:this._winHeight-e},e.prototype.convertPt=function(e){if(n.model.table.seatId<=2)return e;var t=this._winWidth-e.x,i=this._winHeight-e.y;return cc.v2(t,i)},e.prototype.formatNumber=function(e){return e<0&&(e=0),e<1e7?""+e:(e=Math.floor(e/1e4))+"\u4e07"},e.prototype.splitNumber=function(e,t){for(var i=[],n=Math.floor(e/t),s=0;s<t-1;s++)i.push(n);return i.push(e-n*(t-1)),i},e.prototype.createSprite=function(e,t,i){var n=(new cc.Node).addComponent(cc.Sprite),s=-1!=e.indexOf("fish_1305");if(n.trim=!s,t)if(i){var o=c.AssetsManager.getRes(t);n.spriteFrame=o.getSpriteFrame(e)}else{o=c.AssetsManager.getRes("img/atlas/"+t);n.spriteFrame=o.getSpriteFrame(e)}else{var a=c.AssetsManager.getRes(e);n.spriteFrame=a}return n.node},e.prototype.genAnimate=function(e,t,i,n){for(var s=c.AssetsManager.getRes("img/atlas/"+e),o=[],a=1;;a++){var r=s.getSpriteFrame(i+(a<10?"0"+a:a));if(!r)break;o.push(r)}var h=cc.AnimationClip.createWithSpriteFrames(o,10);return h.name=t,h},e.prototype.genAnimateByFrames=function(e,t,i,n,s){for(var o=c.AssetsManager.getRes(e),a=[],r=0,h=n.length;r<h;r++){var l=n[r],d=o.getSpriteFrame(i+"_"+(l<10?"0"+l:l));if(!d)break;a.push(d)}var _=cc.AnimationClip.createWithSpriteFrames(a,s);return _.name=t,_},e.prototype.getFishNormalAnimation=function(e){var t=o.configTable.fish_frame[e],i="img/fish/fish_"+e,n="fish_"+e+"_anim",s="fish_"+e;return o.utils.genAnimateByFrames(i,n,s,t.normal_frames,10)},e.prototype.getFishFastAnimation=function(e){var t=o.configTable.fish_frame[e],i="img/fish/fish_"+e,n="fish_"+e+"_anim_fast",s="fish_"+e;return o.utils.genAnimateByFrames(i,n,s,t.normal_frames,20)},e.prototype.getFishCatchAnimation=function(e){var t=o.configTable.fish_frame[e],i="img/fish/fish_"+e,n="fish_"+e+"_anim",s="fish_"+e+"_catch";return o.utils.genAnimateByFrames(i,n,s,t.catch_frames,10)},e.prototype.getChatNormalAnimation=function(e){var t=o.configTable.chat_frame[e].normal_frames.split(","),i="fish_"+e+"_anim",n="fish_emo_"+e;return o.utils.genAnimateByFrames("img/atlas/chat",i,n,t,10)},e.prototype.getHeadImageByUrl=function(e){if(null!=e&&""!=e)return e.split("/avatar/")[1]},e}();i.Utils=a;var r=function(){function e(){this.downQueue={}}return e.prototype.release=function(){this.downQueu=0},e.prototype.showHeadImage=function(e,t,i){if(cc.log("********************************************** AvatarDownloader.showHeadImage"),e&&t){void 0===i&&(i=!1);var n=e.lastIndexOf("/")+1,o=e.substr(n,e.length-n);s.headItem[o]&&(t.getComponent(cc.Sprite).spriteFrame=c.AssetsManager.getRes("img/atlas/head").getSpriteFrame(o.split(".")[0]))}},e.prototype.onFinishDownload=function(e,t){},e}();i.AvatarDownloader=r,cc._RF.pop()},{"../../assets_manager":"assets_manager","../define/fish_consts":"fish_consts","../model/fish_model":"fish_model","../scene/fish_scene":"fish_scene"}],fish_view_act_get_torpedo:[function(e,t,i){"use strict";cc._RF.push(t,"0a5ebrFqGJNEY+0Zf6d2qTA","fish_view_act_get_torpedo"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_act_get_torpedo"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.emit(o.evts.EVT_POP_ACT_TORPEDO,t.onEventPopupActivity,t),t}return __extends(t,e),t.prototype.onEventPopupActivity=function(){this.addChild((new cc.Node).addComponent(c.AtvGetTorpedo).node)},t}(n.View);n.view.ActGetTorpedo=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_act_get_torpedo":"fish_act_get_torpedo"}],fish_view_activity:[function(e,t,i){"use strict";cc._RF.push(t,"40dc08zzyhDsIKlaDuUeP/e","fish_view_activity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_activity"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POP_ACTIVITY,t.onEventPopupActivity,t),t}return __extends(t,e),t.prototype.onEventPopupActivity=function(e){var t;(t=(new cc.Node).addComponent(c.Activity)).ctor(e),this.addChild(t.node)},t}(n.View);n.view.MainActivity=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_activity":"fish_activity"}],fish_view_auto_update:[function(e,t,i){"use strict";cc._RF.push(t,"8e1a3toJJtI04B2L/w2c6Gz","fish_view_auto_update"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=function(e){function t(){var t=e.call(this)||this;return t.interval=60,t.localVersion="",t.remoteVersionUrl="",t}return __extends(t,e),t.prototype.getManifestInfo=function(){},t.prototype.onTimerCheckUpdate=function(){},t.prototype.onCDNStatus=function(e){},t.prototype.onGetVersion=function(e,t){},t.prototype.onGotoUpdate=function(){},t.prototype.closeSocket=function(){},t.prototype.popUpdate=function(){s.evtCenter.emit(o.evts.EVT_MSG_BOX,"\u70b9\u51fb\u524d\u5f80\u66f4\u65b0",this.gotoUpdate,this)},t.prototype.gotoUpdate=function(){cc.director.loadScene("update")},t}(n.View);n.view.AutoUpdate=n.view.createNode.bind(null,c),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_view_back_key:[function(e,t,i){"use strict";cc._RF.push(t,"90b60Kj+YFNyJJEZuNaSLs/","fish_view_back_key"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=function(e){function t(){var t=e.call(this)||this;return t.callbacks=[],s.evtCenter.on(o.evts.EVT_PUSH_BACK_KEY,t.onEventPushBackKey,t),s.evtCenter.on(o.evts.EVT_POP_BACK_KEY,t.onEvetPopBackKey,t),t}return __extends(t,e),t.prototype.onEventPushBackKey=function(e,t){},t.prototype.onEvetPopBackKey=function(e,t){},t.prototype.onKeyReleased=function(e,t){},t}(n.View);n.view.BackKey=n.view.createNode.bind(null,c),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_view_bankrupt_package_node:[function(e,t,i){"use strict";cc._RF.push(t,"5bf69qtFSxCr4w9FTuAjKe6","fish_view_bankrupt_package_node"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../../assets_manager"),r=function(e){function t(t){var i=e.call(this)||this;return i.bInLobby=t,i.packageBtn=null,i.btn_node_1=null,i.btn_node_2=null,i.loadCsb(),i}return __extends(t,e),t.prototype.onEnter=function(){s.evtCenter.on(o.evts.EVT_SHOW_BANKRUPT_PACKAGE,this.onEventShowBankruptPackage,this),s.evtCenter.on(o.evts.EVT_SHOW_BANKRUPT_PACKAGE_BTN,this.onEventShowBankruptPackageBtn,this),s.evtCenter.on(o.evts.EVT_REMOVE_BANKRUPT_PACKAGE_BTN,this.onEventRemoveBankruptPackageBtn,this),c.model.bankrupt_package.current_package&&this.onEventShowBankruptPackageBtn(!0)},t.prototype.onExit=function(){s.evtCenter.off(o.evts.EVT_SHOW_BANKRUPT_PACKAGE,this.onEventShowBankruptPackage,this)},t.prototype.loadCsb=function(){this.csbNode=cc.instantiate(a.AssetsManager.getRes("prefabs/bankrupt_package_root")),this.addChild(this.csbNode)},t.prototype.onEventShowBankruptPackage=function(e){},t.prototype.onEventShowBankruptPackageBtn=function(e){this.packageBtn||this.bInLobby,this.bInLobby},t.prototype.onEventRemoveBankruptPackageBtn=function(){this.packageBtn&&(this.packageBtn=null)},t}(n.View);n.view.BrptPackageNode=n.view.createNode.bind(null,r),cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_view_bankrupt_package:[function(e,t,i){"use strict";cc._RF.push(t,"bcc97oTmFxPoa6ZTwsRivVv","fish_view_bankrupt_package"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../../assets_manager"),r=e("./bankrupt_package_counting_down"),h=function(e){function t(t,i){var n=e.call(this)||this;return n.bInLobby=t,n.packageData=s.model.bankrupt_package.current_package,n.bmpfnt_countingdown=null,n.panel_present_0=null,n.panel_number_0=null,n.bmpfnt_number_0=null,n.panel_present_1=null,n.bmpfnt_number_1=null,n.panel_present_2=null,n.bmpfnt_number_2=null,n.bmpfnt_price_new=null,n.txt_price_old=null,n.countdownControl=null,n.openTimeLine=t||i?"open_1":"open_2",n.loadCsb(),n.initUI(),n}return __extends(t,e),t.prototype.onEnter=function(){o.evtCenter.emit(c.evts.EVT_SHOW_BANKRUPT_PACKAGE_BTN);var e=this.csbNode.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("idle").wrapMode=cc.WrapMode.Loop}.bind(this),this),e.play(this.openTimeLine),o.evtCenter.on(c.evts.EVT_PURCHASE_BANKRUPT_PACKAGE_SUCCESS,this.onEventPurchasePackageSuccess,this),this.startCountingDown()},t.prototype.onExit=function(){o.evtCenter.off(c.evts.EVT_PURCHASE_BANKRUPT_PACKAGE_SUCCESS,this.onEventPurchasePackageSuccess,this),this.countdownControl&&(this.countdownControl.release(),this.countdownControl=null),s.model.bankrupt_package.current_package?o.evtCenter.emit(c.evts.EVT_SHOW_BANKRUPT_PACKAGE_BTN,!0):o.evtCenter.emit(c.evts.EVT_REMOVE_BANKRUPT_PACKAGE_BTN)},t.prototype.loadCsb=function(){this.csbNode=cc.instantiate(a.AssetsManager.getRes("prefabs/bankrupt_package")),this.addChild(this.csbNode),this.bmpfnt_countingdown=cc.find("bmpfnt_countingdown",this.csbNode),this.panel_present_0=cc.find("anchor/item_0/panel_present_0",this.csbNode),this.panel_number_0=cc.find("anchor/item_0/sp_number_bg/panel_number_0",this.csbNode),this.bmpfnt_number_0=cc.find("anchor/item_0/sp_number_bg/",this.csbNode),this.panel_present_1=cc.find("anchor/item_1/panel_present_1",this.csbNode),this.bmpfnt_number_1=cc.find("anchor/item_1/sp_frame_1/bmpfnt_number_1",this.csbNode),this.panel_present_2=cc.find("anchor/item_2/panel_present_2",this.csbNode),this.bmpfnt_number_2=cc.find("anchor/item_2/sp_frame_2/bmpfnt_number_2",this.csbNode),this.bmpfnt_price_new=cc.find("anchor/bmpfnt_price_new",this.csbNode),this.txt_price_old=cc.find("anchor/txt_price_old",this.csbNode)},t.prototype.runCsbAction=function(e,t){if(this.csbNode){var i=this.csbNode.getComponent(cc.Animation);i.on(cc.Animation.EventType.FINISHED,t,this),i.play(e)}},t.prototype.initUI=function(){var e=this.packageData.items;if(e.length>=3){this.__initRewardItems(e[0],this.panel_present_0,this.bmpfnt_number_0),this.__initRewardItems(e[1],this.panel_present_1,this.bmpfnt_number_1),this.__initRewardItems(e[2],this.panel_present_2,this.bmpfnt_number_2);var t=this.panel_number_0.getContentSize().width/this.bmpfnt_number_0.getContentSize().width;t<1&&this.bmpfnt_number_0.setScale(t)}this.__initPriceInfo()},t.prototype.onEventPurchasePackageSuccess=function(){this.countdownControl&&this.countdownControl.stopUpdateCountDownTime()},t.prototype.startCountingDown=function(){var e=this.packageData.endtime-Date.now()/1e3;this.setCountdownLabel(e),this.countdownControl=new r.CountDownTimeControl(1,Math.max(1,e),this.setCountdownLabel.bind(this),this.endCountingDown.bind(this)),this.countdownControl.startCountDownTime()},t.prototype.setCountdownLabel=function(e){var t=Math.max(e,0),i=t%60,n=i<10?"0"+i:i,s=t/60,o=s<10?"0"+s:s;this.bmpfnt_countingdown.getComponent(cc.Label).string=o+":"+n},t.prototype.endCountingDown=function(){},t.prototype.__getPrice=function(e){switch(e){case 1:return this.packageData.priceInfo.prize;case 2:return this.packageData.priceInfo.before_prize}return""},t.prototype.__initPriceInfo=function(){this.txt_price_old.getComponent(cc.Label).string=this.__getPrice(2),this.bmpfnt_price_new.getComponent(cc.Label).string=this.__getPrice(1)},t.prototype.__initRewardItems=function(e,t,i){if(cc.log("__initRewardItems"),e){var n=o.utils.createSprite(e.giftIcon.split(".")[0]),s=t.getContentSize(),c=n.getContentSize();n.setPosition(cc.v2(.5*s.width,.5*s.height)),n.setScale(Math.min(s.width/c.width,s.height/c.height)),t.addChild(n),i&&(i.getComponent(cc.Label).string=e.giftNum)}},t.prototype.playButtonEffect=function(){cc.audioEngine.playEffect(a.AssetsManager.getRes("sound/button"),!1)},t.prototype.onBtnClose=function(){this.bClosed||(this.playButtonEffect(),Date.now()/1e3+5>=s.model.bankrupt_package.getPackageEndTime()?o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u9650\u65f6\u793c\u5305\u5373\u5c06\u6d88\u5931\u54e6\uff01\u60a8\u786e\u5b9a\u8981\u5173\u95ed\u5417\uff1f",2,this.__close,this):this.__close())},t.prototype.__close=function(){this.bClosed=!0,this.csbNode.stopAllActions(),this.runCsbAction(this.bInLobby?"close_1":"close_2",this.__closeBankruptPackageUI.bind(this))},t.prototype.__closeBankruptPackageUI=function(){this.removeFromParent(!0)},t.prototype.onBtnPurchase=function(){this.playButtonEffect(),s.model.bankrupt_package.purchasePackage()},t}(n.View);i.BankruptPackageUI=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./bankrupt_package_counting_down":"bankrupt_package_counting_down"}],fish_view_bankrupt_tip:[function(e,t,i){"use strict";cc._RF.push(t,"98082s0NaxNfJzeDSXfVlMr","fish_view_bankrupt_tip"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.seatId=e,this.logo=[],this.winSize=cc.winSize,this.initUI(),s.evtCenter.on(o.evts.EVT_PLAYER_ENTER,this.onEventPlayerEnter,this),s.evtCenter.on(o.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this),s.evtCenter.on(o.evts.EVT_BANKRUPT,this.onEventBankrupt,this),s.evtCenter.on(o.evts.EVT_GOLD_INFO_CHG,this.onEventPlayerInfoChange,this)},t.prototype.onEventPlayerEnter=function(e){e.gold<=0&&this._addBankruptLogo(e.seatId)},t.prototype.onEventPlayerLeave=function(e,t){var i=s.utils.getRelativeSeat(t);this.logo[i-1].active&&(this.logo[i-1].active=!1)},t.prototype.onEventBankrupt=function(e,t,i){this._addBankruptLogo(e)},t.prototype.onEventPlayerInfoChange=function(e,t){var i=c.model.table.getPlayerInfo(e);if(i){var n=s.utils.getRelativeSeat(i.seatId);t>0&&this.logo[n-1].active&&(this.logo[n-1].active=!1)}},t.prototype.initUI=function(){var e=new cc.Node;e.setContentSize(this.winSize),this.addChild(e);for(var t=0;t<4;t++){var i=s.utils.createSprite("fish_pochan","game_common");this.logo.push(i),i.active=!1,e.addChild(i)}this.logo[0].setPosition(cc.v2(.3*this.winSize.width,40)),this.logo[1].setPosition(cc.v2(.7*this.winSize.width,40)),this.logo[2].setPosition(cc.v2(.7*this.winSize.width,this.winSize.height-40)),this.logo[3].setPosition(cc.v2(.3*this.winSize.width,this.winSize.height-40))},t.prototype._addBankruptLogo=function(e){var t=s.utils.getRelativeSeat(e);this.logo[t-1].active=!0,this.logo[t-1].setScale(3),this.logo[t-1].stopAllActions(),this.logo[t-1].runAction(cc.sequence(cc.scaleTo(10/30,1).easing(cc.easeIn(3)),cc.scaleTo(2/30,1.2),cc.scaleTo(2/30,1),cc.scaleTo(2/30,1.1),cc.scaleTo(4/30,1)))},t}(n.View);n.view.Bankrupt=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_view_battery:[function(e,t,i){"use strict";cc._RF.push(t,"7dc92svJ69Df56231CdJtJU","fish_view_battery"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_battery"),a=function(e){function t(t){var i=e.call(this)||this;return i.seatId=t,i.battery=null,s.evtCenter.on(o.evts.EVT_PLAYER_ENTER,i.onEventPlayerEnter,i),s.evtCenter.on(o.evts.EVT_PLAYER_LEAVE,i.onEventPlayerLeave,i),s.evtCenter.on(o.evts.EVT_NEWBIE_SHOW_BATTERY,i.showBattery,i),s.evtCenter.on(o.evts.EVT_NEWBIE_HIDE_BATTERY,i.hideBattery,i),i}return __extends(t,e),t.prototype.onEventPlayerEnter=function(e){e.seatId==this.seatId&&(this.battery=new cc.Node,this.battery.addComponent(c.Battery).ctor(e),this.addChild(this.battery))},t.prototype.onEventPlayerLeave=function(e,t){t==this.seatId&&this.battery&&(this.removeChild(this.battery),this.battery=null)},t.prototype.showBattery=function(e){this.seatId==e&&(this.battery.active=!0)},t.prototype.hideBattery=function(e){this.seatId==e&&(this.battery.active=!1)},t}(n.View);n.view.Battery=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_battery":"fish_battery"}],fish_view_beat_shark_tip:[function(e,t,i){"use strict";cc._RF.push(t,"a40e7C9dqRHJ4jTRWVu1cdc","fish_view_beat_shark_tip"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_activity_beat_shark_tip"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=function(e){function t(){var t=e.call(this)||this;return o.evtCenter.on(c.evts.EVT_MSG_BEAT_BEAST_TIP,t.onEventBeatBeastTip,t),t}return __extends(t,e),t.prototype.onEventBeatBeastTip=function(e,t,i,n,o){this.removeAllChildren(!0);var c=(new cc.Node).addComponent(s.BeatSharkTip);c.ctor(e,t,i,n,o),this.addChild(c.node)},t}(n.View);n.view.BeatSharkTip=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_activity_beat_shark_tip":"fish_activity_beat_shark_tip"}],fish_view_change_multiple:[function(e,t,i){"use strict";cc._RF.push(t,"c64f1K8CepGDJMnYxmWLcAp","fish_view_change_multiple"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_change_multiple"),o=function(e){function t(){var t=e.call(this)||this,i=(new cc.Node).addComponent(s.ChangeMultiple);return t.addChild(i.node),t}return __extends(t,e),t}(n.View);n.view.ChangeMultiple=n.view.createNode.bind(null,o),cc._RF.pop()},{"../fish_view":"fish_view","./fish_change_multiple":"fish_change_multiple"}],fish_view_chat:[function(e,t,i){"use strict";cc._RF.push(t,"400bfFjf9pNR62d1L3soQUo","fish_view_chat"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_chat"),o=function(e){function t(){var t=e.call(this)||this;return t.addChild((new cc.Node).addComponent(s.Chat).node),t}return __extends(t,e),t}(n.View);n.view.Chat=n.view.createNode.bind(null,o),cc._RF.pop()},{"../fish_view":"fish_view","./fish_chat":"fish_chat"}],fish_view_chest_game:[function(e,t,i){"use strict";cc._RF.push(t,"fa1a7pHWlRM8JMY9RWMPEmc","fish_view_chest_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_chest_game"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POPUP_CHEST_FORCE,t.onEventPopupChestGame,t),t}return __extends(t,e),t.prototype.onEventPopupChestGame=function(e,t,i,n){var s;(s=(new cc.Node).addComponent(c.ChestGame)).ctor(e,t,i,n),this.addChild(s.node)},t}(n.View);n.view.ChestGame=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_chest_game":"fish_chest_game"}],fish_view_daily_sign:[function(e,t,i){"use strict";cc._RF.push(t,"c88aaa+wutCdrL4KOQeWdSm","fish_view_daily_sign"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_sign_view"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POPUP_DAILY_SIGN,t.onEventPopupDailySign,t),t}return __extends(t,e),t.prototype.onEventPopupDailySign=function(){this.addChild((new cc.Node).addComponent(c.DailySign).node)},t.prototype.onEventCloseDailySign=function(){this.taskSign&&(this.taskSign.removeFromParent(),this.taskSign=null)},t}(n.View);n.view.DailySign=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_sign_view":"fish_sign_view"}],fish_view_fire_view:[function(e,t,i){"use strict";cc._RF.push(t,"9922d02HiVCQJzmR4HivlgZ","fish_view_fire_view"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_fire_view_self"),a=e("./fish_fire_view_other"),r=e("../../model/fish_model"),h=function(e){function t(t){var i=e.call(this)||this;return i.seatId=t,i.fireView=null,s.evtCenter.on(o.evts.EVT_PLAYER_ENTER,i.onEventPlayerEnter,i),s.evtCenter.on(o.evts.EVT_PLAYER_LEAVE,i.onEventPlayerLeave,i),i}return __extends(t,e),t.prototype.onEventPlayerEnter=function(e){e.seatId==this.seatId&&(e.userId==r.ME.userId?(this.fireView=(new cc.Node).addComponent(c.FireViewSelf),this.fireView.ctor(e),this.addChild(this.fireView.node)):(this.fireView=(new cc.Node).addComponent(a.FireViewOther),this.fireView.ctor(e),this.addChild(this.fireView.node)))},t.prototype.onEventPlayerLeave=function(e,t){t==this.seatId&&this.fireView&&(this.removeChild(this.fireView.node),this.fireView=null)},t}(n.View);n.view.FireView=n.view.createNode.bind(null,h),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_fire_view_other":"fish_fire_view_other","./fish_fire_view_self":"fish_fire_view_self"}],fish_view_first_charge:[function(e,t,i){"use strict";cc._RF.push(t,"44ebdEQEWNBXYv4Xm3Lx5dE","fish_view_first_charge"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_first_charge"),a=function(e){function t(){var t=e.call(this)||this;return t.activity=null,s.evtCenter.on(o.evts.EVT_POP_FIRST_CHARGE,t.onEventPopFirstCharge,t),t}return __extends(t,e),t.prototype.onEventPopFirstCharge=function(e){this.activity=(new cc.Node).addComponent(c.FirstCharge),this.activity.ctor(e),this.addChild(this.activity.node)},t}(n.View);i._FirstCharge=a,n.view.FirstCharge=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_first_charge":"fish_first_charge"}],fish_view_fish_book_window:[function(e,t,i){"use strict";cc._RF.push(t,"5d50ePZIYpDJqUjxbSma7Kh","fish_view_fish_book_window"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_book"),o=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEventPopupPokedexWindow=function(){this.addChild((new cc.Node).addComponent(s.FishBook).node)},t}(n.View);n.view.FishBookWindow=n.view.createNode.bind(null,o),cc._RF.pop()},{"../fish_view":"fish_view","./fish_book":"fish_book"}],fish_view_game_effect:[function(e,t,i){"use strict";cc._RF.push(t,"84117cmQBBH5YsEjIzBTaJe","fish_view_game_effect"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_game_effect_fish"),o=e("./fish_game_effect_game"),c=function(e){function t(){var t=e.call(this)||this;return t.addComponent(s.GameEffectFish),t.addComponent(o.GameEffectGame),t}return __extends(t,e),t}(n.View);n.view.GameEffect=n.view.createNode.bind(null,c),cc._RF.pop()},{"../fish_view":"fish_view","./fish_game_effect_fish":"fish_game_effect_fish","./fish_game_effect_game":"fish_game_effect_game"}],fish_view_game_first_charge:[function(e,t,i){"use strict";cc._RF.push(t,"7a1e2VIb3ZG67nvMoNvOMGz","fish_view_game_first_charge"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_first_charge"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POP_FIRST_CHARGE,t.onEventPopupFirstCharge,t),t}return __extends(t,e),t.prototype.onEventPopupFirstCharge=function(e){var t=(new cc.Node).addComponent(c.FirstCharge);t.ctor(e),this.addChild(t.node)},t}(n.View);n.view.GameFirstCharge=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_first_charge":"fish_first_charge"}],fish_view_game_quit:[function(e,t,i){"use strict";cc._RF.push(t,"e2a483QXwxDooUjuc95RnJf","fish_view_game_quit"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../define/fish_msg_types"),o=e("../../model/fish_model"),c=e("../../scene/fish_scene_login"),a=e("../../logic/fish_tcp"),r=e("../../scene/fish_scene"),h=e("../../fish"),l=function(e){function t(){var t=e.call(this)||this;return t.listener=null,t._seconds=300,t.tipsFnt=null,t.leaveNode=null,t.scheduler=cc.director.getScheduler(),t}return __extends(t,e),t.prototype.onLoad=function(){this.leaveTips(),this.scheduler.unschedule(this._onTimerLeave,this),this.scheduler.schedule(this._onTimerLeave,this,2)},t.prototype.onTouchBegan=function(){return this._LeaveGameTips(9999),this._seconds=300,this.scheduler.unschedule(this._onTimerLeave,this),this.scheduler.schedule(this._onTimerLeave,this,1),!1},t.prototype._onTimerLeave=function(){this._seconds--,this._seconds<=10&&this._LeaveGameTips(this._seconds)},t.prototype._LeaveGameTips=function(e){9999==e?this.leaveNode.active=!1:o.model.table.isAuto?this.scheduler.unschedule(this._onTimerLeave,this):e<=0?(this.leaveNode.active=!1,this.sendLeaveMsg()):(this.leaveNode.active=!0,this.tipsFnt.getComponent(cc.Label).string=e+"")},t.prototype.sendLeaveMsg=function(){var e={cmd:s.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:o.ME.userId,clientId:c.AccountInfo.clientId,action:"leave",roomId:o.model.table.roomId,tableId:o.model.table.tableId,seatId:o.model.table.seatId}};a.tcp.send(e)},t.prototype.leaveTips=function(){this.leaveNode=new cc.Node,this.leaveNode.setPosition(cc.v2(.5*cc.winSize.width,.5*cc.winSize.height));var e=r.utils.createSprite("fish_text18","lottery");this.leaveNode.addChild(e),this.tipsFnt=h.fish.createWithBMFont("fnt04","10"),this.tipsFnt.setScale(1.3),this.tipsFnt.setPosition(cc.v2(e.getContentSize().width/2+20,this.tipsFnt.getPosition().y+2)),this.leaveNode.addChild(this.tipsFnt),this.leaveNode.active=!1,this.addChild(this.leaveNode)},t}(n.View);n.view.GameAutoQuit=n.view.createNode.bind(null,l),cc._RF.pop()},{"../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","../fish_view":"fish_view"}],fish_view_game_ui:[function(e,t,i){"use strict";cc._RF.push(t,"ffed0g+SCFPpLx4binnl0KV","fish_view_game_ui"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../../assets_manager"),o=e("./fish_game_ui"),c=e("../../fish"),a=function(e){function t(){var t=e.call(this)||this;return t.child=cc.instantiate(s.AssetsManager.getRes("prefabs/game_ui")),c.fish.adapterScreen(t.child),t.child.addComponent(o.GameUI),t.addChild(t.child),t}return __extends(t,e),t}(n.View);n.view.GameUI=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../fish":"fish","../fish_view":"fish_view","./fish_game_ui":"fish_game_ui"}],fish_view_game_view:[function(e,t,i){"use strict";cc._RF.push(t,"ff88biWpwFAOaThf3dPNIdl","fish_view_game_view"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../../assets_manager"),o=e("../../fish"),c=e("./fish_game_view"),a=e("../../model/fish_model"),r=function(e){function t(){var t=e.call(this)||this;return t.controller=c.GameView,t.child=cc.instantiate(s.AssetsManager.getRes("prefabs/game_wave")),o.fish.adapterScreen(t.child),o.fish.gameView=t.child.addComponent(c.GameView),t.addChild(t.child),o.fish.gameView.setServerTime(a.model.common.getServerNowTime(),a.model.common.getTableStartTime()),o.fish.gameView.setMySeat(a.model.table.seatId),t}return __extends(t,e),t}(n.View);n.view.GameView=n.view.createNode.bind(null,r),cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../fish":"fish","../../model/fish_model":"fish_model","../fish_view":"fish_view","./fish_game_view":"fish_game_view"}],fish_view_laser_view:[function(e,t,i){"use strict";cc._RF.push(t,"7ffccY4rO5Lh4eaud1pxmK5","fish_view_laser_view"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("./fish_laser_view"),r=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_LASER_BEGIN,t.onEventLaserBegin,t),t}return __extends(t,e),t.prototype.onEventLaserBegin=function(e,t){if(e==c.model.table.seatId){var i=(new cc.Node).addComponent(a.LaserView);i.ctor(e),this.addChild(i.node)}},t}(n.View);n.view.LaserView=n.view.createNode.bind(null,r),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_laser_view":"fish_laser_view"}],fish_view_led_bubble:[function(e,t,i){"use strict";cc._RF.push(t,"4ca2bBsfJ1N/b1ff4oY74dL","fish_view_led_bubble"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../fish"),a=function(e){function t(){var t=e.call(this)||this,i=cc.visibleRect;return t.setContentSize(i.width,i.height),t.setPosition(-.5*i.width,-.5*i.height),t.setAnchorPoint(0,0),t.msgs=[],s.evtCenter.on(o.evts.EVT_RED_ENVELOPE_OTHER,t.onEventRedEnvelopeOther,t),t}return __extends(t,e),t.prototype.onEventRedEnvelopeOther=function(e){cc.log("**************************************************** LedBubble.onEventRedEnvelopeOther",e);var t=new cc.Node,i=c.fish.createScale9Sprite("img/atlas/scale9_8888","fish_prompt_frame1",cc.rect(50,10,2,2));i.setContentSize(400,30),t.addChild(i);var n=(new cc.Node).addComponent(cc.Label);n.fontSize=22,n.string=e,n.verticalAlign=cc.Label.VerticalAlign.CENTER,n.horizontalAlign=cc.Label.HorizontalAlign.CENTER,n.node.color=cc.color(255,255,255),i.addChild(n.node);var s=cc.visibleRect;t.x=s.width/2,this.addChild(t),this.msgs.push(t);for(var o=0,a=this.msgs.length;o<a;o++)this.msgs[a-o-1].y=450+35*o;t.runAction(cc.sequence(cc.delayTime(2.5),cc.fadeOut(1.5),cc.delayTime(2),cc.callFunc(this.onFadeOut,this),cc.removeSelf()))},t.prototype.onFadeOut=function(e){this.msgs.shift()},t}(n.View);n.view.LedBubble=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_view_led:[function(e,t,i){"use strict";cc._RF.push(t,"433f4wpNFpLeqYLuWbxPWiG","fish_view_led"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../../assets_manager"),a=e("../../fish"),r=function(e){function t(){var t=e.call(this)||this;return t.isScrolling=!1,t.msgs=[],t.text=null,t.csbRoot=null,s.evtCenter.on(o.evts.EVT_LED,t.onEventLed,t),t}return __extends(t,e),t.prototype.onEventLed=function(e){this.csbRoot||(this.csbRoot=cc.instantiate(c.AssetsManager.getRes("prefabs/led")),a.fish.adapterScreen(this.csbRoot),this.text=cc.find("clip/text",this.csbRoot).getComponent(cc.Label),this.csbRoot.active=!1,this.addChild(this.csbRoot),this.csbRoot.setPosition(-.5*cc.winSize.width,-.5*cc.winSize.height)),this.msgs.push(e),this.isScrolling||this.checkScroll()},t.prototype.checkScroll=function(){if(0==this.msgs.length)this.isScrolling=!1,this.csbRoot.active=!1;else{var e=this.msgs.pop();this.isScrolling=!0,this.csbRoot.active=!0,this.text.node.x=500,this.text.string=e;var t=this.text.node.getContentSize();this.text.node.runAction(cc.sequence(cc.moveTo(20,cc.v2(-t.width,0)),cc.callFunc(this.checkScroll,this)))}},t}(n.View);n.view.Led=n.view.createNode.bind(null,r),cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_view_level_up:[function(e,t,i){"use strict";cc._RF.push(t,"c42ddtV+sZLiLpXzG7MHqkN","fish_view_level_up"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_level_up"),a=function(e){function t(){var t=e.call(this)||this;return t.array=[],s.evtCenter.on(o.evts.EVT_LEVEL_UPGRADE,t.onEventLevelUp,t),s.evtCenter.on(o.evts.EVT_HIDE_LEVEL_UP,t.onEventHideLevelUp,t),t}return __extends(t,e),t.prototype.onEventLevelUp=function(e,t,i,n,s){if(this.array.push({level:e,gold:t,diamond:i,items1:n,items2:s}),1==this.array.length){var o=(new cc.Node).addComponent(c.LevelUp);o.ctor(e,t,i,n,s),this.addChild(o.node)}},t.prototype.onEventHideLevelUp=function(){if(this.array.shift(),this.array.length>0){var e=this.array[0],t=(new cc.Node).addComponent(c.LevelUp);t.ctor(e.level,e.gold,e.diamond,e.items1,e.items2),this.addChild(t.node)}},t}(n.View);n.view.LevelUp=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_level_up":"fish_level_up"}],fish_view_loading:[function(e,t,i){"use strict";cc._RF.push(t,"5b699zty9RBtJqoLQqYMEZ3","fish_view_loading"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../scene/loading/fish_scene_loading_login_to_lobby"),a=e("../../scene/loading/fish_scene_loading_lobby_to_game"),r=e("../../scene/loading/fish_scene_loading_game_to_lobby"),h=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POPUP_LOADING,t.onEventPopupLoading,t),t}return __extends(t,e),t.prototype.onEventPopupLoading=function(e){var t=new cc.Node;e==c.SceneLoginToLobby?t.addComponent(c.SceneLoginToLobby):e==a.SceneLobbyToGame?t.addComponent(a.SceneLobbyToGame):e==r.SceneGameToLobby&&t.addComponent(r.SceneGameToLobby),this.addChild(t)},t}(n.View);n.view.Loading=n.view.createNode.bind(null,h),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../../scene/loading/fish_scene_loading_game_to_lobby":"fish_scene_loading_game_to_lobby","../../scene/loading/fish_scene_loading_lobby_to_game":"fish_scene_loading_lobby_to_game","../../scene/loading/fish_scene_loading_login_to_lobby":"fish_scene_loading_login_to_lobby","../fish_view":"fish_view"}],fish_view_lottery_panel:[function(e,t,i){"use strict";cc._RF.push(t,"3f03aSos+pJxaKu//v6H7Pl","fish_view_lottery_panel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_lottery_panel"),o=function(e){function t(){var t=e.call(this)||this;return t.addChild((new cc.Node).addComponent(s.LotteryPanel).node),t}return __extends(t,e),t}(n.View);n.view.LotterPannel=n.view.createNode.bind(null,o),cc._RF.pop()},{"../fish_view":"fish_view","./fish_lottery_panel":"fish_lottery_panel"}],fish_view_lottery_window:[function(e,t,i){"use strict";cc._RF.push(t,"6ecfeUIZKFP5omnWKVQNO3T","fish_view_lottery_window"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_lottery_window"),a=function(e){function t(){var t=e.call(this)||this;return t.lottery=null,s.evtCenter.on(o.evts.EVT_POPUP_LOTTERY,t.onEventPopupLotteryWindow,t),s.evtCenter.on(o.evts.EVT_REMOVE_LOTTERY,t.onEventCloseLotteryWindow,t),t}return __extends(t,e),t.prototype.onEventPopupLotteryWindow=function(){this.lottery||(this.lottery=(new cc.Node).addComponent(c.LotteryWindow),this.addChild(this.lottery.node))},t.prototype.onEventCloseLotteryWindow=function(){this.lottery&&(this.lottery.node.removeFromParent(!0),this.lottery.destroy(),this.lottery=null)},t}(n.View);n.view.LotteryWindow=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_lottery_window":"fish_lottery_window"}],fish_view_match_property:[function(e,t,i){"use strict";cc._RF.push(t,"e0253vSpodN66uN1Q77+1SG","fish_view_match_property"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.seatId=e,this.property=null,s.evtCenter.on(o.evts.EVT_PLAYER_ENTER,this.onEventPlayerEnter,this),s.evtCenter.on(o.evts.EVT_PLAYER_LEAVE,this.onEventPlayerLeave,this)},t.prototype.onEventPlayerEnter=function(e){if(e.seatId==this.seatId){var t=s.utils.getRelativeSeat(e.seatId),i=null,n=cc.visibleRect;switch(t){case 1:i=cc.v2(91,45);break;case 2:i=cc.v2(n.width-91,45);break;case 3:i=cc.v2(n.width-91,n.height-45);break;case 4:i=cc.v2(91,n.height-45)}e.seatId,c.model.table.seatId,this.property.setPosition(i),this.addChild(this.property)}},t.prototype.onEventPlayerLeave=function(e,t){t==this.seatId&&this.property&&(this.removeChild(this.property),this.property=null)},t}(n.View);i._MatchProperty=a,cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_view_match_settlement:[function(e,t,i){"use strict";cc._RF.push(t,"78cd3CNqdNE9Jp7eqgcblS0","fish_view_match_settlement"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_match_settlement"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POP_ARENA_SETTLEMENT,t.onEventMatchSettlement,t),t}return __extends(t,e),t.prototype.onEventMatchSettlement=function(e,t,i,n,s,o){var a=(new cc.Node).addComponent(c.MatchSettlement);a.ctor(e,t,i,n,s,o),this.addChild(a.node)},t}(n.View);n.view.MatchSettleMent=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_match_settlement":"fish_match_settlement"}],fish_view_match_task:[function(e,t,i){"use strict";cc._RF.push(t,"f9c4f8QafJLHYd+msxu0ZzT","fish_view_match_task"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_match_task"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POP_ARENA_TASK,t.onEventPopupMatchTask,t),t}return __extends(t,e),t.prototype.onEventPopupMatchTask=function(e){var t=(new cc.Node).addComponent(c.MatchTask);t.ctor(e),this.addChild(t.node)},t}(n.View);n.view.MatchTask=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_match_task":"fish_match_task"}],fish_view_match_ui:[function(e,t,i){"use strict";cc._RF.push(t,"893ebnr7d9NEKMHgY1enZ2t","fish_view_match_ui"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_match_ui"),o=function(e){function t(){var t=e.call(this)||this;return t.addChild((new cc.Node).addComponent(s.MatchUI).node),t}return __extends(t,e),t}(n.View);n.view.MatchUI=n.view.createNode.bind(null,o),cc._RF.pop()},{"../fish_view":"fish_view","./fish_match_ui":"fish_match_ui"}],fish_view_mermaid_game:[function(e,t,i){"use strict";cc._RF.push(t,"069deAElMZEZoGEX1UpfZ2l","fish_view_mermaid_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_mermaid_game"),o=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEventPopupMermaidGame=function(e,t,i){var n;(n=(new cc.Node).addComponent(s.MermaidGame)).ctor(e,t,i),this.addChild(n.node)},t}(n.View);n.view.MermaidGame=n.view.createNode.bind(null,o),cc._RF.pop()},{"../fish_view":"fish_view","./fish_mermaid_game":"fish_mermaid_game"}],fish_view_message_box:[function(e,t,i){"use strict";cc._RF.push(t,"baa6b6jLzxFiZVpIrxIbMwu","fish_view_message_box"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../../assets_manager"),a=e("./fish_message_box"),r=e("./fish_message_box2"),h=function(e){function t(){var t=e.call(this)||this;t.messageBox=null,t.messageBox2=null,s.evtCenter.on(o.evts.EVT_MSG_BOX,t.onEventMsgBox,t),s.evtCenter.on(o.evts.EVT_MSG_BOX2,t.onEventMsgBox2,t);var i=cc.visibleRect;return t.setPosition(-.5*i.width,-.5*i.height),t}return __extends(t,e),t.prototype.onEventMsgBox=function(e,t,i,n,s,o){this.messageBox||(this.messageBox=new a.MessageBox,this.addChild(this.messageBox)),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/popup"),!1),this.messageBox.show(e,t,i,n,s,o)},t.prototype.onEventMsgBox2=function(e,t,i,n){cc.log(e,t,i,n),this.messageBox2||(this.messageBox2=new r.MessageBox2,this.addChild(this.messageBox2)),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/popup"),!1),this.messageBox2.show(e,t,i,n)},t}(n.View);n.view.MessageBox=n.view.createNode.bind(null,h),cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_message_box":"fish_message_box","./fish_message_box2":"fish_message_box2"}],fish_view_message_item_buy:[function(e,t,i){"use strict";cc._RF.push(t,"90f91fJyJZCkpKXB7zOKWpY","fish_view_message_item_buy"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_message_item_buy"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_MSG_BUY_ITEM,t.onEventMsgItemBuy,t),t}return __extends(t,e),t.prototype.onEventMsgItemBuy=function(e){cc.log("********************************************** onEventMsgItemBuy",e),this.removeAllChildren(!0);var t=(new cc.Node).addComponent(c.MessageItemBuy);t.ctor(e.itemNum,e.btn,e.callback,e.target,e.position,e.fishKingFlag),this.addChild(t.node)},t}(n.View);n.view.MessageItemBuy=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_message_item_buy":"fish_message_item_buy"}],fish_view_message_label:[function(e,t,i){"use strict";cc._RF.push(t,"67bc35UcH1Nrazs93NiNg92","fish_view_message_label"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_message_label"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_MSG_LABEL,t.onEventMsgLabel,t),t}return __extends(t,e),t.prototype.onEventMsgLabel=function(e,t){this.removeAllChildren(!0);var i=(new cc.Node).addComponent(c.MessageTipLabel);i.ctor(e,t),this.addChild(i.node)},t}(n.View);n.view.MessageLabel=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_message_label":"fish_message_label"}],fish_view_message_tips:[function(e,t,i){"use strict";cc._RF.push(t,"12e48U6tnFCFrKzBEGzyg00","fish_view_message_tips"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_message_tips"),a=function(e){function t(){var t=e.call(this)||this;return t.messageTips=null,s.evtCenter.on(o.evts.EVT_MSG_TIPS,t.onEventMsgTips,t),t}return __extends(t,e),t.prototype.onEventMsgTips=function(e,t){if(!this.messageTips){this.messageTips=(new cc.Node).addComponent(c.MessageTips);var i=cc.winSize;this.messageTips.node.setPosition(-.5*i.width,-.5*i.height),this.addChild(this.messageTips.node)}this.messageTips.show(e,t)},t}(n.View);n.view.MessageTips=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_message_tips":"fish_message_tips"}],fish_view_mini_card:[function(e,t,i){"use strict";cc._RF.push(t,"afed1f9BaBKYY9On3/ekC65","fish_view_mini_card"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../scene/fish_scene_login"),r=e("../../logic/fish_tcp"),h=e("./fish_mini_card"),l=e("../../define/fish_msg_types"),d=function(e){function t(){var t,i=e.call(this)||this;(void 0!=s.model.mini.miniGameData.miniGame&&void 0!=s.model.mini.miniGameData.miniGame.current&&i.requestMiniGame(),s.model.mini.miniGameNum>0)&&((t=(new cc.Node).addComponent(h.MiniCard)).ctor(!1,cc.v2(0,0)),i.addChild(t.node));return o.evtCenter.on(c.evts.EVT_SHOW_MG_CARD,i.onEventShowMiniGameCard,i),i}return __extends(t,e),t.prototype.onEventShowMiniGameCard=function(e,t){var i;(i=(new cc.Node).addComponent(h.MiniCard)).ctor(e,t),this.addChild(i.node)},t.prototype.requestMiniGame=function(){var e={cmd:l.msgs.CMD_TABLE_CALL,params:{gameId:28,userId:s.ME.userId,action:"miniGame",subAction:"continue",roomId:s.model.table.roomId,tableId:s.model.table.tableId,seatId:s.model.table.seatId,clientId:a.AccountInfo.clientId}};r.tcp.send(e)},t}(n.View);n.view.MiniCard=n.view.createNode.bind(null,d),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","../fish_view":"fish_view","./fish_mini_card":"fish_mini_card"}],fish_view_mini_playing:[function(e,t,i){"use strict";cc._RF.push(t,"fd16cp/JbVOBZGcYU14Cydt","fish_view_mini_playing"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../buffer/fish_buffer"),r=function(e){function t(){var t=e.call(this)||this;return t.playing=[],t.winSize=cc.winSize,t.initUI(),s.evtCenter.on(o.evts.EVT_MINI_GAME_PLAYING,t.onEventStartMiniGame,t),s.evtCenter.on(o.evts.EVT_MINI_GAME_END,t.onEventMiniGameEnd,t),s.evtCenter.on(o.evts.EVT_PLAYER_LEAVE,t.onEventPlayerLeave,t),t}return __extends(t,e),t.prototype.onEventStartMiniGame=function(e){if(e!=c.model.table.seatId){cc.log("onEventStartMiniGame");var t=s.utils.getRelativeSeat(e);this.playing[t-1].active||(this.playing[t-1].active=!0)}},t.prototype.onEventMiniGameEnd=function(e,t,i){if(t!=c.model.table.seatId){var n=s.utils.getRelativeSeat(t);if(this.playing[n-1].active){var o=c.model.table.getPlayerInfo(t),r=this.playing[n-1].getPosition(),h=s.utils.getSeatPosition(n);a.buffer.pushGold(o.userId,e,i),this.playing[n-1].runAction(cc.sequence(cc.delayTime(i),cc.callFunc(function(e,t){t.playing[n-1].active=!1},null,this),cc.callFunc(function(t,i){s.effect.goldEruption(i,r,h,o.userId,e)},null,this)))}}},t.prototype.onEventPlayerLeave=function(e,t){var i=s.utils.getRelativeSeat(t);this.playing[i-1].active&&(this.playing[i-1].active=!1)},t.prototype.initUI=function(){var e=new cc.Node;e.setContentSize(this.winSize),this.addChild(e);for(var t=0;t<4;t++){var i=s.utils.createSprite("fish_kapaijiexiao","mini_game");this.playing.push(i),i.active=!1,e.addChild(i)}this.playing[0].setPosition(cc.v2(.3*this.winSize.width,140)),this.playing[1].setPosition(cc.v2(.7*this.winSize.width,140)),this.playing[2].setPosition(cc.v2(.7*this.winSize.width,this.winSize.height-140)),this.playing[3].setPosition(cc.v2(.3*this.winSize.width,this.winSize.height-140)),this.showOtherPlayStatus()},t.prototype.showOtherPlayStatus=function(){var e=c.model.mini.allMiniGameSids.length;if(e>0)for(var t=0;t<e;t++){var i=c.model.mini.allMiniGameSids[t],n=s.utils.getRelativeSeat(i);i!=c.model.table.seatId&&(this.playing[n-1].active||(this.playing[n-1].active=!0))}},t}(n.View);n.view.MiniPlaying=n.view.createNode.bind(null,r),cc._RF.pop()},{"../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_view_mini_tip:[function(e,t,i){"use strict";cc._RF.push(t,"d84211siSxGH7F+nyMBDg/3","fish_view_mini_tip"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../define/fish_consts"),a=e("../../fish"),r=e("../../../assets_manager"),h=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_MG_OPEN_TIP,t.onEventMGOpenTip,t),t}return __extends(t,e),t.prototype.onEventMGOpenTip=function(e,t){this.removeAllChildren();var i=new cc.Node;i.setPosition(cc.v2(c.DESIGN_WIDTH/2,c.DESIGN_HEIGHT/2)),this.addChild(i,n.View.TIPS);var o=r.AssetsManager.getRes("img/atlas/game_common"),h=a.fish.createScale9Sprite("img/atlas/scale9_8888","fish_prompt_frame1",cc.rect(50,10,2,2));i.addChild(h);var l=s.utils.createSprite("fish_chiyoujinbi","game_common");i.addChild(l);var d=a.fish.createWithBMFont("fnt04","0");switch(i.addChild(d),e){case"level":l.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame("fish_chiyoujinbi"),d.getComponent(cc.Label).string=t,d.x=-cc.winSize.width/2+70;break;case"gun":l.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame("fish_jiesuobeilv");var _=l.getContentSize();h.setContentSize(cc.size(_.width+40,36)),d.getComponent(cc.Label).string=t,d.x=-124;break;case"gold":l.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame("fish_chiyoujinbi");_=l.getContentSize();h.setContentSize(cc.size(_.width+40,36)),d.getComponent(cc.Label).string=t,d.x=-102}i.runAction(cc.sequence(cc.delayTime(3),cc.fadeOut(1.5),cc.removeSelf()))},t}(n.View);n.view.MiniTip=n.view.createNode.bind(null,h),cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_view_my_position:[function(e,t,i){"use strict";cc._RF.push(t,"78534wz1KxIQLrZtR5f8iCL","fish_view_my_position"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_my_position"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_SHOW_MY_POSITION,t.showMyPosition,t),t}return __extends(t,e),t.prototype.showMyPosition=function(){var e=(new cc.Node).addComponent(c.MyPosition);this.addChild(e.node)},t}(n.View);n.view.MyPosition=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_my_position":"fish_my_position"}],fish_view_nbomb_view:[function(e,t,i){"use strict";cc._RF.push(t,"19cd3cCiCpP7Zd7J2BdJ9A6","fish_view_nbomb_view"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("./fish_nbomb_view"),r=function(e){function t(){var t=e.call(this)||this;return o.evtCenter.on(c.evts.EVT_NBOMB_USE,t.onEventNbombUse,t),t}return __extends(t,e),t.prototype.onEventNbombUse=function(e){var t;s.ME.playerInfo.seatId==e&&((t=(new cc.Node).addComponent(a.NbombView)).ctor(e),this.addChild(t.node))},t}(n.View);n.view.NbombView=n.view.createNode.bind(null,r),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_nbomb_view":"fish_nbomb_view"}],fish_view_net:[function(e,t,i){"use strict";cc._RF.push(t,"b407cdJef5CxbEDB6/ifiRM","fish_view_net"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_net_connection"),o=e("./fish_net_request_queue"),c=e("./fish_net_state"),a=e("./fish_net_ui"),r=e("./fish_net_heart_beat"),h=function(e){function t(){var t=e.call(this)||this;return t.addComponent(s.NetConnection),t.addComponent(r.NetHeartBeat),t.addComponent(c.NetState),t.addComponent(o.NetRequestQueue),t.addComponent(a.NetUI),t}return __extends(t,e),t.prototype.release=function(){this.removeAllChildren()},t}(n.View);n.view.Net=n.view.createNode.bind(null,h),cc._RF.pop()},{"../fish_view":"fish_view","./fish_net_connection":"fish_net_connection","./fish_net_heart_beat":"fish_net_heart_beat","./fish_net_request_queue":"fish_net_request_queue","./fish_net_state":"fish_net_state","./fish_net_ui":"fish_net_ui"}],fish_view_newbie_guide_game:[function(e,t,i){"use strict";cc._RF.push(t,"47f909X0v1Iv4gYH6g0/I78","fish_view_newbie_guide_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_newbie_guide_game"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POPUP_NEWBIE_GUIDE,t.onEventPopupNewbieGuide,t),t}return __extends(t,e),t.prototype.onEventPopupNewbieGuide=function(){this.addChild((new cc.Node).addComponent(c.NewbieGuideGame).node)},t}(n.View);n.view.NewbieGuideGame=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_newbie_guide_game":"fish_newbie_guide_game"}],fish_view_newbie_task_game:[function(e,t,i){"use strict";cc._RF.push(t,"aa435nfJYtNHqT4d0u98ZBu","fish_view_newbie_task_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("./fish_newbie_task_game"),r=function(e){function t(){var t=e.call(this)||this;return t.task=null,s.evtCenter.on(o.evts.EVT_POPUP_NEWBIE_TASK,t.onEventPopupNewBieTask,t),c.model.guide.isNewbieTaskFinish||t.onEventPopupNewBieTask(),t}return __extends(t,e),t.prototype.onEventPopupNewBieTask=function(){null==this.task?(this.task=(new cc.Node).addComponent(a.NewbieTaskGame),this.addChild(this.task.node)):this.task.delayInitTaskPanel(!0)},t}(n.View);n.view.NewbieTaskGame=n.view.createNode.bind(null,r),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_newbie_task_game":"fish_newbie_task_game"}],fish_view_noble_gift_everyday:[function(e,t,i){"use strict";cc._RF.push(t,"8a5bdwumZBCMY5A05mb4u0H","fish_view_noble_gift_everyday"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_noble_gift_everyday"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POPUP_NOBLE_GIFT_EVERYDAY,t.onEventPopupNobleWindow,t),t}return __extends(t,e),t.prototype.onEventPopupNobleWindow=function(){this.addChild((new cc.Node).addComponent(c.NobleRewardEveryDay).node)},t}(n.View);n.view.NobleRewardEveryDay=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_noble_gift_everyday":"fish_noble_gift_everyday"}],fish_view_noble_gift:[function(e,t,i){"use strict";cc._RF.push(t,"37b90MiPkNDY6EbFnXWo1te","fish_view_noble_gift"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_noble_gift"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POPUP_NOBLE_GIFT,t.onEventPopupNobleWindow,t),t}return __extends(t,e),t.prototype.onEventPopupNobleWindow=function(){this.addChild((new cc.Node).addComponent(c.NobleGift).node)},t}(n.View);n.view.NobleGift=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_noble_gift":"fish_noble_gift"}],fish_view_player_property:[function(e,t,i){"use strict";cc._RF.push(t,"0c6ddddJK1Ifq87SQcbl7HE","fish_view_player_property"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_player_property"),a=function(e){function t(t){var i=e.call(this)||this;return i.seatId=t,i.property=null,s.evtCenter.on(o.evts.EVT_PLAYER_ENTER,i.onEventPlayerEnter,i),s.evtCenter.on(o.evts.EVT_PLAYER_LEAVE,i.onEventPlayerLeave,i),i}return __extends(t,e),t.prototype.onEventPlayerEnter=function(e){if(e.seatId==this.seatId){var t=s.utils.getRelativeSeat(e.seatId),i=null,n=cc.visibleRect;switch(t){case 1:i=cc.v2(91,45);break;case 2:i=cc.v2(n.width-91,45);break;case 3:i=cc.v2(n.width-91,n.height-45);break;case 4:i=cc.v2(91,n.height-45)}this.property=new cc.Node,this.property.addComponent(c.PlayerProperty).ctor(e),this.property.setPosition(i),this.addChild(this.property)}},t.prototype.onEventPlayerLeave=function(e,t){t==this.seatId&&this.property&&(this.removeChild(this.property),this.property=null)},t}(n.View);n.view.PlayerProperty=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_player_property":"fish_player_property"}],fish_view_red_envelope:[function(e,t,i){"use strict";cc._RF.push(t,"cdfe9P+3UpO+rFup5sO87Ve","fish_view_red_envelope"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../../assets_manager"),a=e("./fish_red_envelope"),r=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_RED_ENVELOPE_SHOW,t.onEventRedEnvelops,t),t}return __extends(t,e),t.prototype.onEventRedEnvelops=function(e,t,i,n){var s;cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/red_envelope_show"),!1),(s=(new cc.Node).addComponent(a.RedEnvelope)).ctor(e,t,i,n),s.node.setPosition(cc.v2(.5*-cc.winSize.width,.5*-cc.winSize.height)),this.addChild(s.node)},t}(n.View);i._RedEnvelope=r,n.view.RedEnvelope=n.view.createNode.bind(null,r),cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_red_envelope":"fish_red_envelope"}],fish_view_reward:[function(e,t,i){"use strict";cc._RF.push(t,"61b400wPeJK/7u189iNL5Pu","fish_view_reward"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_game_reward_panel"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POP_REWARD_PANEL,t.onEventShowReward,t),t}return __extends(t,e),t.prototype.onEventShowReward=function(e){var t=(new cc.Node).addComponent(c.RewardGame);t.ctor(e),this.addChild(t.node)},t}(n.View);n.view.RewardPanel=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_game_reward_panel":"fish_game_reward_panel"}],fish_view_roommatch_banner:[function(e,t,i){"use strict";cc._RF.push(t,"cde0ai7VYBF25fRCsBqcCYE","fish_view_roommatch_banner"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_roommatch_banner"),o=function(e){function t(){var t=e.call(this)||this;return t.addChildNode(),t}return __extends(t,e),t.prototype.addChildNode=function(){this.addChild((new cc.Node).addComponent(s.RmatchBanner).node)},t}(n.View);n.view.RmatchBanner=n.view.createNode.bind(null,o),cc._RF.pop()},{"../fish_view":"fish_view","./fish_roommatch_banner":"fish_roommatch_banner"}],fish_view_roommatch_end:[function(e,t,i){"use strict";cc._RF.push(t,"2fce2tBTQNMSZXhju7y1RXr","fish_view_roommatch_end"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_roommatch_end"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_RMATCH_END,t.addChildNode,t),t}return __extends(t,e),t.prototype.addChildNode=function(e,t,i,n){var s=(new cc.Node).addComponent(c.RmatchEnd);s.ctor(e,t,i,n),this.addChild(s.node)},t}(n.View);n.view.RmatchEnd=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_roommatch_end":"fish_roommatch_end"}],fish_view_roommatch_guide:[function(e,t,i){"use strict";cc._RF.push(t,"2a4dfil+8VIlr5Egjg99+4d","fish_view_roommatch_guide"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../model/fish_model"),o=e("./fish_roommatch_guide"),c=function(e){function t(){var t=e.call(this)||this;return-1!=s.model.room_match.rmatchState&&0!=s.model.room_match.rmatchState||t.addChildNode(0,s.model.room_match.rmatchTimeLeft),1==s.model.room_match.rmatchState&&t.addChildNode(1,0),t}return __extends(t,e),t.prototype.addChildNode=function(e,t){var i=(new cc.Node).addComponent(o.RmatchGuide);i.ctor(e,t),this.addChild(i.node)},t}(n.View);n.view.RmatchGuide=n.view.createNode.bind(null,c),cc._RF.pop()},{"../../model/fish_model":"fish_model","../fish_view":"fish_view","./fish_roommatch_guide":"fish_roommatch_guide"}],fish_view_roommatch_panel:[function(e,t,i){"use strict";cc._RF.push(t,"d9721nc5QdJNbqnyMY6f8H2","fish_view_roommatch_panel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("./fish_roommatch_panel"),r=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_RMATCH_START_VIEW,t.addChildNode,t),1==c.model.room_match.rmatchState&&t.addChildNode(1,c.model.room_match.rmatchTimeLeft),t}return __extends(t,e),t.prototype.addChildNode=function(e,t){s.evtCenter.emit(o.evts.EVT_RMATCH_START,this);var i=(new cc.Node).addComponent(a.RmatchPanel);i.ctor(e,t),this.addChild(i.node)},t}(n.View);n.view.RmatchPanel=n.view.createNode.bind(null,r),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_roommatch_panel":"fish_roommatch_panel"}],fish_view_roommatch_ready:[function(e,t,i){"use strict";cc._RF.push(t,"3c3e4Hc4K1JBZmXw10T36jk","fish_view_roommatch_ready"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("./fish_roommatch_ready"),r=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_RMATCH_READY,t.addChildNode,t),0==c.model.room_match.rmatchState&&t.addChildNode(c.model.room_match.rmatchTimeLeft),t}return __extends(t,e),t.prototype.addChildNode=function(e){s.evtCenter.emit(o.evts.EVT_RMATCH_NEXT,this);var t=(new cc.Node).addComponent(a.RmatchReady);t.ctor(e),this.addChild(t.node)},t}(n.View);n.view.RmatchReady=n.view.createNode.bind(null,r),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_roommatch_ready":"fish_roommatch_ready"}],fish_view_scene:[function(e,t,i){"use strict";cc._RF.push(t,"5e584n0gPtMRJCp6aYrij1u","fish_view_scene"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../scene/fish_scene_login"),a=e("../../../assets_manager"),r=e("../../scene/fish_scene_lobby"),h=e("../../scene/fish_scene_game"),l=e("../../fish"),d=function(e){function t(){var t=e.call(this)||this;return t.name="Scene",t.controller=c.SceneLogin,t.child=cc.instantiate(a.AssetsManager.getRes("prefabs/login")),t.child.addComponent(c.SceneLogin),l.fish.adapterScreen(t.child),t.addChild(t.child),s.evtCenter.on(o.evts.EVT_SWITCH_SCENE,t.onEventSwitchScene,t),t}return __extends(t,e),t.prototype.onEventSwitchScene=function(e){if(this.controller!=e){this.removeChild(this.child),this.child.destroy(),this.controller=e,e==r.SceneLobby?this.child=cc.instantiate(a.AssetsManager.getRes("prefabs/lobby_rooms")):e==h.SceneGame&&(this.child=cc.instantiate(a.AssetsManager.getRes("prefabs/scene_bg"))),l.fish.adapterScreen(this.child);var t=this.child.getContentSize();this.child.setPosition(-.5*t.width,-.5*t.height),this.child.addComponent(e),this.addChild(this.child)}},t}(n.View);n.view.Scene=n.view.createNode.bind(null,d),cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_game":"fish_scene_game","../../scene/fish_scene_lobby":"fish_scene_lobby","../../scene/fish_scene_login":"fish_scene_login","../fish_view":"fish_view"}],fish_view_setting:[function(e,t,i){"use strict";cc._RF.push(t,"20f4anjHfNOM7OkxIhkuUsX","fish_view_setting"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEventPopupSetting=function(){},t}(n.View);n.view.Setting=n.view.createNode.bind(null,s),cc._RF.pop()},{"../fish_view":"fish_view"}],fish_view_shark_drop:[function(e,t,i){"use strict";cc._RF.push(t,"3fd28G54mtHaZFGLPVuKegI","fish_view_shark_drop"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_activity_shark_drop"),a=function(e){function t(){var t=e.call(this)||this;return t.scheduler=cc.director.getScheduler(),t.dropBox=null,s.evtCenter.on(o.evts.EVT_NEW_YEAR_DROP_FIRE,t.onEventDropFireworks,t),t}return __extends(t,e),t.prototype.onEventDropFireworks=function(e){this.dropBox?(this.scheduler.unschedule(this.removeDropBox,this),this.scheduler.schedule(this.removeDropBox,this,1,1,3)):(cc.log("onEventDropFireworks"),this.dropBox=new c.ActSharkDrop(this,e),this.addChild(this.dropBox),this.scheduler.schedule(this.removeDropBox,this,1,1,10))},t.prototype.removeDropBox=function(){this.scheduler.unschedule(this.removeDropBox,this),this.dropBox.removeFromParent(),this.dropBox.destroy(),this.dropBox=null},t}(n.View);n.view.DropSharkTorpedo=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_activity_shark_drop":"fish_activity_shark_drop"}],fish_view_shop:[function(e,t,i){"use strict";cc._RF.push(t,"ea619qWqddK8ZdsU5L0EBqe","fish_view_shop"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_shop_view"),a=e("../../../assets_manager"),r=e("../../fish"),h=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POPUP_SHOP_WINDOW,t.onEventPopupShowWindow,t),t}return __extends(t,e),t.prototype.onEventPopupShowWindow=function(e){var t=cc.instantiate(a.AssetsManager.getRes("prefabs/shop"));r.fish.adapterScreen(t),t.addComponent(c.ShopView).ctor(e),this.addChild(t)},t}(n.View);n.view.ShopWindow=n.view.createNode.bind(null,h),cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_shop_view":"fish_shop_view"}],fish_view_special_fish_coming:[function(e,t,i){"use strict";cc._RF.push(t,"5001ep6KH9Lopba03xq61TC","fish_view_special_fish_coming"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../../assets_manager"),a=e("../../define/fish_event_types"),r=e("../../fish"),h=function(e){function t(){var t=e.call(this)||this;return t.coming=null,o.evtCenter.on(a.evts.EVT_SPECIAL_FISH_COMING,t.onEventSpecialFishComing,t),t}return __extends(t,e),t.prototype.onEventSpecialFishComing=function(e){if(!this.getChildByName("100")){var t=c.AssetsManager.getRes("img/atlas/boss_coming");if("huafei"==e){var i=cc.instantiate(c.AssetsManager.getRes("prefabs/card_coming"));r.fish.adapterScreen(i);var n=i.getComponent(cc.Animation);n.play("start"),n.on(cc.Animation.EventType.FINISHED,function(){n.targetOff(this),i.removeFromParent(!0)}.bind(this),this),this.addChild(i,0,"100")}else i=cc.instantiate(c.AssetsManager.getRes("prefabs/boss_coming")),r.fish.adapterScreen(i),i.getComponent(cc.Animation).play("animation"),this.addChild(i,0,"100"),this.coming=cc.find("group/coming",i),"dragon"==e&&(this.coming.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("fish_boss_dragon_coming")),cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/boss_coming"),!1),cc.director.getScheduler().schedule(this.setBossComingMusic,this,3)}},t.prototype.setBossComingMusic=function(){cc.director.getScheduler().unschedule(this.setBossComingMusic,this),s.model.room_match.isJoinedRmatch||o.audio.playBg("sound/boss_coming_bg")},t}(n.View);n.view.SpecialFishComing=n.view.createNode.bind(null,h),cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_view_subsidy_game:[function(e,t,i){"use strict";cc._RF.push(t,"aa6f3YlHlBE5LvsyWob0RNg","fish_view_subsidy_game"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("./fish_subsidy_game"),r=function(e){function t(){var t=e.call(this)||this;return t.subsidyGame=null,s.evtCenter.on(o.evts.EVT_SHOW_SUBSIDY,t.onEventShowSubsidy,t),s.evtCenter.on(o.evts.EVT_GOLD_INFO_CHG,t.onEventInfoChange,t),t}return __extends(t,e),t.prototype.onEventShowSubsidy=function(){this.subsidyGame||c.model.subsidy.isBankrupt&&(this.subsidyGame=new a.SubsidyGame,this.subsidyGame.onEnter(),this.addChild(this.subsidyGame,n.View.LOGIC))},t.prototype.onEventInfoChange=function(e,t){e==c.ME.userId&&t>0&&(c.model.subsidy.isBankrupt=!1,this.subsidyGame&&(this.subsidyGame.removeFromParent(),this.subsidyGame=null))},t}(n.View);n.view.SubsidyGame=n.view.createNode.bind(null,r),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_subsidy_game":"fish_subsidy_game"}],fish_view_subsidy_lobby:[function(e,t,i){"use strict";cc._RF.push(t,"b7b29+7GllKRYmrdDTA38aT","fish_view_subsidy_lobby"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../model/fish_model"),c=e("../fish_view"),a=e("../../../assets_manager"),r=e("./fish_subsidy_lobby"),h=function(e){function t(){var t=e.call(this)||this;return t.subsidyLobby=null,n.evtCenter.on(s.evts.EVT_SHOW_SUBSIDY,t.onEventShowSubsidy,t),t}return __extends(t,e),t.prototype.onEventShowSubsidy=function(){o.model.subsidy.isBankrupt&&o.model.subsidy.brptState!=o.model.subsidy.RUPT_USEUP&&(this.subsidyLobby||(this.subsidyLobby=cc.instantiate(a.AssetsManager.getRes("prefabs/subsidy_lobby")),this.subsidyLobby.addComponent(r.SubsidyLobby),this.node.addChild(this.subsidyLobby,c.View.VIEW)))},t.prototype.onDestroy=function(){n.evtCenter.off(s.evts.EVT_SHOW_SUBSIDY,this.onEventShowSubsidy,this)},t}(cc.Component);i.almsLobby=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_subsidy_lobby":"fish_subsidy_lobby"}],fish_view_super_weapon:[function(e,t,i){"use strict";cc._RF.push(t,"0060c/8Dy1AeYRbGB3+39h5","fish_view_super_weapon"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_super_weapon"),o=function(e){function t(){var t=e.call(this)||this;return t.addChild((new cc.Node).addComponent(s.SuperWeapon).node),t}return __extends(t,e),t}(n.View);n.view.SuperWeapon=n.view.createNode.bind(null,o),cc._RF.pop()},{"../fish_view":"fish_view","./fish_super_weapon":"fish_super_weapon"}],fish_view_switch_account:[function(e,t,i){"use strict";cc._RF.push(t,"1d2e0cxDzBDeJq/awFDQ534","fish_view_switch_account"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../define/fish_msg_types"),o=e("../../model/fish_model"),c=e("../../scene/fish_scene_login"),a=e("../../logic/fish_tcp"),r=e("../../scene/fish_scene"),h=e("../../define/fish_event_types"),l=e("../../../xmen_interface"),d=function(e){function t(){var t=e.call(this)||this;return r.evtCenter.on(h.evts.EVT_RECV_USER_INFO,t.onEventRecvUserInfo,t),t}return __extends(t,e),t.prototype.release=function(){r.evtCenter.off(h.evts.EVT_RECV_USER_INFO,this.onEventRecvUserInfo,this),l.xmen.EventDispatcher.off(l.xmen.EventType.MSG_UPGRADE_ACCOUNT_SUCCESS,this.onEventAccountSuccess,this),l.xmen.EventDispatcher.off(l.xmen.EventType.MSG_UPGRADE_ACCOUNT_FAILED,this.onEventAccountFailed,this),l.xmen.EventDispatcher.off(l.xmen.EventType.MSG_LOGIN_SUCCESS,this.onEventAccountSuccess,this),l.xmen.EventDispatcher.off(l.xmen.EventType.MSG_LOGIN_FAILED,this.onEventLoginAnthorFailed,this),l.xmen.EventDispatcher.off(l.xmen.EventType.MSG_LIGHT_LOGIN,this.onSDKLightCallBack,this)},t.prototype.onEventRecvUserInfo=function(){l.xmen.EventDispatcher.on(l.xmen.EventType.MSG_UPGRADE_ACCOUNT_SUCCESS,this.onEventAccountSuccess,this),l.xmen.EventDispatcher.on(l.xmen.EventType.MSG_UPGRADE_ACCOUNT_FAILED,this.onEventAccountFailed,this),l.xmen.EventDispatcher.on(l.xmen.EventType.MSG_LOGIN_SUCCESS,this.onEventAccountSuccess,this),l.xmen.EventDispatcher.on(l.xmen.EventType.MSG_LOGIN_FAILED,this.onEventLoginAnthorFailed,this),l.xmen.EventDispatcher.on(l.xmen.EventType.MSG_LIGHT_LOGIN,this.onSDKLightCallBack,this)},t.prototype.onEventSocketError=function(){l.xmen.EventDispatcher.off(l.xmen.EventType.MSG_UPGRADE_ACCOUNT_SUCCESS,this.onEventAccountSuccess,this),l.xmen.EventDispatcher.off(l.xmen.EventType.MSG_UPGRADE_ACCOUNT_FAILED,this.onEventAccountFailed,this),l.xmen.EventDispatcher.off(l.xmen.EventType.MSG_LOGIN_SUCCESS,this.onEventAccountSuccess,this),l.xmen.EventDispatcher.off(l.xmen.EventType.MSG_LOGIN_FAILED,this.onEventLoginAnthorFailed,this),l.xmen.EventDispatcher.off(l.xmen.EventType.MSG_LIGHT_LOGIN,this.onSDKLightCallBack,this)},t.prototype.onEventAccountSuccess=function(e){cc.audioEngine.stopMusic(),cc.audioEngine.stopAllEffects(),this._gameLeave(),cc.sys.localStorage.setItem("sdk_login_response",JSON.stringify(e)),cc.director.loadScene("update")},t.prototype.onEventAccountFailed=function(){r.evtCenter.emit(h.evts.EVT_MSG_TIPS,"\u8d26\u53f7\u7ed1\u5b9a\u5931\u8d25",2)},t.prototype.onEventLoginAnthorFailed=function(e){},t.prototype.onSDKLightCallBack=function(e){cc.audioEngine.stopMusic(),cc.audioEngine.stopAllEffects(),this._gameLeave(),cc.sys.localStorage.setItem("show_sdk_login","true"),cc.director.loadScene("update")},t.prototype._gameLeave=function(){var e={cmd:s.msgs.CMD_GAME,params:{action:"leave",gameId:28,userId:o.ME.userId,clientId:c.AccountInfo.clientId}};a.tcp.send(e)},t}(n.View);i._SwitchAccount=d,n.view.SwitchAccount=n.view.createNode.bind(null,d),cc._RF.pop()},{"../../../xmen_interface":"xmen_interface","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login","../fish_view":"fish_view"}],fish_view_treasure_task:[function(e,t,i){"use strict";cc._RF.push(t,"7cc55G4FNdNfIPdrw13mljc","fish_view_treasure_task"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_treasure_task"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POPUP_TREASURE,t.onEventPopupTreasure,t),t}return __extends(t,e),t.prototype.onEventPopupTreasure=function(){this.addChild((new cc.Node).addComponent(c.TreasureTask).node)},t}(n.View);n.view.TreasureTask=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_treasure_task":"fish_treasure_task"}],fish_view_vip_window:[function(e,t,i){"use strict";cc._RF.push(t,"4a4b5U5Iy5MhJbJzlTKpHmz","fish_view_vip_window"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_vip_window"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POPUP_VIP_WINDOW,t.onEventPopupVipWindow,t),t}return __extends(t,e),t.prototype.onEventPopupVipWindow=function(e){var t=(new cc.Node).addComponent(c.VipWindow);t.ctor(e),this.addChild(t.node)},t}(n.View);n.view.VipWindow=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_vip_window":"fish_vip_window"}],fish_view_weapon_forge:[function(e,t,i){"use strict";cc._RF.push(t,"7d6490RvURPzrcWoW1M9NyH","fish_view_weapon_forge"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../../assets_manager"),a=e("./fish_weapon_forge_window"),r=e("../../model/fish_model"),h=e("../../fish"),l=function(e){function t(){var t=e.call(this)||this;return t.firstTips=!1,t.btnForge=null,t.tipsForge=null,s.evtCenter.on(o.evts.EVT_PERSONAL_RELOAD,t.onEventRefresh,t),s.evtCenter.on(o.evts.EVT_SHOW_SUBSIDY,t.onEventShowSubsidy,t),r.ME.weaponId>=2136&&r.ME.weaponId<=2148&&(t.csbNode=cc.instantiate(c.AssetsManager.getRes("prefabs/weapon_forge_panel")),h.fish.adapterScreen(t.csbNode),t.addChild(t.csbNode),t.btnForge=cc.find("anchor/btnForge",t.csbNode),t.btnForge.on(cc.Node.EventType.TOUCH_END,t.onBtnForge,t),t.tipsForge=cc.find("anchor/btnForge/tipsForge",t.csbNode)),t}return __extends(t,e),t.prototype.onBtnForge=function(e){cc.audioEngine.playEffect(c.AssetsManager.getRes("sound/button"),!1),this.tipsForge.active=!1;var t=(new cc.Node).addComponent(a.WeaponForgeWindow);this.getParent().addChild(t.node,n.View.POPUP)},t.prototype.onEventRefresh=function(){this.csbNode?2149==r.ME.weaponId&&(this.csbNode.removeFromParent(),this.csbNode=null):r.ME.weaponId>=2136&&r.ME.weaponId<=2148&&(this.csbNode=cc.instantiate(c.AssetsManager.getRes("prefabs/weapon_forge_panel")),h.fish.adapterScreen(this.csbNode),this.addChild(this.csbNode),this.btnForge=cc.find("anchor/btnForge",this.csbNode),this.btnForge.on(cc.Node.EventType.TOUCH_END,this.onBtnForge,this),this.tipsForge=cc.find("anchor/btnForge/tipsForge",this.csbNode)),t.prototype.firstTips||2136==r.ME.weaponId&&(t.prototype.firstTips=!0,this.tipsForge.active=!0)},t.prototype.onEventShowSubsidy=function(){this.csbNode&&this.btnForge&&(this.btnForge.active=!1)},t}(n.View);n.view.WeaponForge=n.view.createNode.bind(null,l),cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_weapon_forge_window":"fish_weapon_forge_window"}],fish_view_weapon_panel:[function(e,t,i){"use strict";cc._RF.push(t,"b1390IPdixBEY1e33GOgvWu","fish_view_weapon_panel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("./fish_weapon_panel"),o=function(e){function t(){var t=e.call(this)||this;return t.addChild((new cc.Node).addComponent(s.WeaponPanel).node),t}return __extends(t,e),t}(n.View);n.view.WeaponPanel=n.view.createNode.bind(null,o),cc._RF.pop()},{"../fish_view":"fish_view","./fish_weapon_panel":"fish_weapon_panel"}],fish_view_weapon_window:[function(e,t,i){"use strict";cc._RF.push(t,"07de7tppRBOxL5bjlrhPODV","fish_view_weapon_window"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("./fish_weapon_window"),a=function(e){function t(){var t=e.call(this)||this;return s.evtCenter.on(o.evts.EVT_POPUP_CHG_WP,t.onEventPopupWeaponWindow,t),t}return __extends(t,e),t.prototype.onEventPopupWeaponWindow=function(){this.addChild((new cc.Node).addComponent(c.WeaponWindow).node)},t}(n.View);n.view.WeaponWindow=n.view.createNode.bind(null,a),cc._RF.pop()},{"../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view","./fish_weapon_window":"fish_weapon_window"}],fish_view:[function(e,t,i){"use strict";cc._RF.push(t,"7ad5ccSXitMLp/Me2uGkoPN","fish_view"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.createNode=function(e){for(var t=[],i=[],n=1;n<arguments.length;n++){var o=arguments[n];s.prototype.isPrototypeOf(o)?i.push(o):t.push(o)}var c=Object.create(e.prototype);for(e.apply(c,t),n=0;n<i.length;n++)c.addChild(i[n]);return c},e}();i.view=n;var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controller=null,t.child=null,t}return __extends(t,e),t.DEFAULT=0,t.BG=10,t.LOGIC=20,t.VIEW=30,t.VIEW_EFF=40,t.UI=50,t.UI_EFF=60,t.POPUP=70,t.TIPS=80,t.MSG_BOX=90,t}(cc.Node);i.View=s,cc._RF.pop()},{}],fish_vip_window:[function(e,t,i){"use strict";cc._RF.push(t,"08006IFO35Mq5VhiDP75syX","fish_vip_window"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../model/fish_model"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../fish"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ctor=function(e){this.listener=null,this.csbRoot=null,this.vipScrollView=null,this.vipBf=null,this.vipEnd=null,this.loadingSIzeFnt=null,this.vipInfoNode1=null,this.vipInfoNode=null,this.loadingBar=null,this.vipTipFnt=null,this.vipTipSp=null,this.viplock1=null,this.viplock2=null,this.viplock3=null,this.viplock4=null,this.viplock5=null,this.viplock6=null,this.viplock7=null,this.viplock8=null,this.viplock9=null,this.AM=e,this.vip_cell_1=null,this.vip_cell_2=null,this.vip_cell_3=null,this.vip_cell_4=null,this.vip_cell_5=null,this.vip_cell_6=null,this.vip_cell_7=null,this.vip_cell_8=null,this.vip_cell_9=null,this.vipReCharge7=null,this.vipReCharge8=null,this.vipReCharge9=null,this.vipReChargeQ7=null,this.vipReChargeQ8=null,this.vipReChargeQ9=null,this.dikuang=null},t.prototype.onLoad=function(){this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/vip")),a.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.dikuang=cc.find("archor/dikuang",this.csbRoot),this.vipInfoNode=cc.find("archor/vipInfoNode",this.csbRoot),this.vipInfoNode1=cc.find("archor/vipInfoNode1",this.csbRoot),this.vipScrollView=cc.find("archor/vipScrollView",this.csbRoot),this.vipBf=cc.find("archor/vipInfoNode/vipBf",this.csbRoot),this.vipEnd=cc.find("archor/vipInfoNode/vipEnd",this.csbRoot),this.loadingBar=cc.find("archor/vipInfoNode/loadingBar",this.csbRoot),this.loadingSIzeFnt=cc.find("archor/vipInfoNode/loadingSIzeFnt",this.csbRoot),this.vipTipFnt=cc.find("archor/vipInfoNode/vipTipFnt",this.csbRoot),this.vipTipSp=cc.find("archor/vipInfoNode/vipTipSp",this.csbRoot),cc.find("archor/ButtonCloseVip",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnCloseVip,this),cc.find("archor/vipInfoNode/Button_pay",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnRecharge,this);var e=this.vipScrollView.getComponent(cc.ScrollView).content;this.vip_cell_1=cc.find("vip_cell_1",e),this.viplock1=cc.find("vip_cell_1/viplock1",e),this.vip_cell_2=cc.find("vip_cell_2",e),this.viplock2=cc.find("vip_cell_2/viplock2",e),this.vip_cell_3=cc.find("vip_cell_3",e),this.viplock3=cc.find("vip_cell_3/viplock3",e),this.vip_cell_4=cc.find("vip_cell_4",e),this.viplock4=cc.find("vip_cell_4/viplock4",e),this.vip_cell_5=cc.find("vip_cell_5",e),this.viplock5=cc.find("vip_cell_5/viplock5",e),this.vip_cell_6=cc.find("vip_cell_6",e),this.viplock6=cc.find("vip_cell_6/viplock6",e),this.vip_cell_7=cc.find("vip_cell_7",e),this.viplock7=cc.find("vip_cell_7/viplock7",e),this.vip_cell_8=cc.find("vip_cell_8",e),this.viplock8=cc.find("vip_cell_8/viplock8",e),this.vip_cell_9=cc.find("vip_cell_9",e),this.viplock9=cc.find("vip_cell_9/viplock9",e);var t=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),t.play("show"),this._onUserPowerInfo(),this.vipScrollView.getComponent(cc.ScrollView).inertia=!0,s.ME.vipLevel>6?this.vipScrollView.getComponent(cc.ScrollView).setContentPosition(cc.v2(-1171.75)):s.ME.vipLevel>1&&this.vipScrollView.getComponent(cc.ScrollView).setContentPosition(cc.v2(215*-s.ME.vipLevel+215)),this.setVipReChargeNumShow(),o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnCloseVip(null)},t.prototype.onDestroy=function(){o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBtnRecharge=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),o.evtCenter.emit(c.evts.EVT_POPUP_SHOP_WINDOW,s.model.shop.SHOP_GOLD);var t=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),t.play("hide"),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(!0)}.bind(this),this)},t.prototype.onBtnCloseVip=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1);var t=this.csbRoot.getComponent(cc.Animation);this.csbRoot.stopAllActions(),t.play("hide"),t.on(cc.Animation.EventType.FINISHED,function(){t.targetOff(this),this.node.removeFromParent(!0),this.destroy()}.bind(this),this)},t.prototype._onUserPowerInfo=function(){var e=s.ME.vipLevel+1;if(9==s.ME.vipLevel)this.vipInfoNode.active=!1,this.vipInfoNode1.active=!0;else{this.vipBf.getComponent(cc.Label).string=s.ME.vipLevel.toString(),this.vipEnd.getComponent(cc.Label).string=e.toString(),this.loadingSIzeFnt.getComponent(cc.Label).string=s.ME.vipExp/10+"/"+s.ME.vipExpNext/10,this.loadingBar.getComponent(cc.ProgressBar).progress=s.ME.vipExp/s.ME.vipExpNext;var t=(s.ME.vipExpNext-s.ME.vipExp)/10;this.vipTipFnt.getComponent(cc.Label).string=(s.ME.vipExpNext-s.ME.vipExp)/10+"",t<1e3?this.vipTipFnt.setScale(1):t<1e4?this.vipTipFnt.setScale(.8):this.vipTipFnt.setScale(.6),this.vipTipSp.getComponent(cc.Label).string=e.toString()}var i=[this.viplock1,this.viplock2,this.viplock3,this.viplock4,this.viplock5,this.viplock6,this.viplock7,this.viplock8,this.viplock9];if(this.AM)for(n=0;n<s.ME.vipLevel-1;n++)i[n].active=!1;else for(var n=0;n<s.ME.vipLevel;n++)i[n].active=!1},t.prototype.setVipReChargeNumShow=function(){var e=s.ME.vipLevel;6==e?(this.vipReCharge7.active=!0,this.vipReChargeQ7.active=!1):7==e?(this.vipReCharge7.active=!0,this.vipReChargeQ7.active=!1,this.vipReCharge8.active=!0,this.vipReChargeQ8.active=!1):8!=e&&9!=e||(this.vipReCharge7.active=!0,this.vipReChargeQ7.active=!1,this.vipReCharge8.active=!0,this.vipReChargeQ8.active=!1,this.vipReCharge9.active=!0,this.vipReChargeQ9.active=!1)},t}(cc.Component);i.VipWindow=r,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish_warning_message:[function(e,t,i){"use strict";cc._RF.push(t,"52833CiIBtAZblxSWaqDK+o","fish_warning_message"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../fish_view"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=function(e){function t(){var t=e.call(this)||this;return t.csbNode=null,t.groupOK=null,t.callback=null,t.target=null,t.txt=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(s.AssetsManager.getRes("prefabs/warning_message")),this.node.addChild(this.csbNode),this.groupOK=cc.find("anchor/groupOK",this.csbNode),this.txt=cc.find("anchor/txt",this.csbNode),this.txt.getComponent(cc.Label).string="\u6625\u8282\u957f\u5047\u63d0\u9192: 2017\u5e741\u670823\u65e5-2017\u5e742\u670812\u65e5 \n\n\u73b0\u91d1\u5956\u52b1\u9700\u8981\u4eba\u5de5\u5ba1\u6838\u53d1\u653e,\u6625\u8282\u957f\u5047\u671f\u95f45000\u5143\n\u5956\u52b1\u65e0\u6cd5\u53ca\u65f6\u53d1\u653e,\u6211\u4eec\u5c06\u4e8e\u957f\u5047\u540e\u4e3b\u52a8\u8054\u7cfb\u60a8\n\u53d1\u653e\u5956\u52b1.\n\n\u975e\u5e38\u62b1\u6b49\u7ed9\u4f60\u5e26\u6765\u7684\u4e0d\u4fbf,\u8bf7\u8010\u5fc3\u7b49\u5f85.",o.evtCenter.emit(c.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){o.evtCenter.emit(c.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){},t.prototype.onBtnOK=function(){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this._callback(),i.warningMessageBox=null,this.node.removeFromParent(!0)},t.prototype._show=function(e,t,i){void 0!==e&&"function"==typeof e&&(i=t,t=e,e=1),this.callback=t||null,this.target=i||null},t.prototype._callback=function(){this.callback&&this.target&&(this.callback.call(this.target),this.callback=null,this.target=null)},t.show=function(e,s,o){i.warningMessageBox||(i.warningMessageBox=(new cc.Node).addComponent(t),cc.director.getScene().addChild(i.warningMessageBox.node,n.View.MSG_BOX)),i.warningMessageBox._show(e,s,o)},t}(cc.Component);i.WarningMessageBox=a,i.warningMessageBox=null,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../scene/fish_scene":"fish_scene","../fish_view":"fish_view"}],fish_weapon_forge_window:[function(e,t,i){"use strict";cc._RF.push(t,"48303JvtBFBg4Ou8V7JQ15/","fish_weapon_forge_window"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../scene/fish_scene"),s=e("../../define/fish_event_types"),o=e("../../../assets_manager"),c=e("../../define/fish_msg_types"),a=e("../../model/fish_model"),r=e("../../scene/fish_scene_login"),h=e("../../logic/fish_tcp"),l=e("../../define/fish_consts"),d=e("../../fish"),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.fntTargetMultiple=null,this.txtCrystalPurpleCost=null,this.txtCrystalPurpleTotal=null,this.txtCrystalBlueCost=null,this.txtCrystalBlueTotal=null,this.txtCrystalYellowCost=null,this.txtCrystalYellowTotal=null,this.txtCrystalRedCost=null,this.txtCrystalRedTotal=null,this.iconWeapon=null,this.fntCurrentMultiple=null,this.txtTargetScoreMultiple=null,this.txtCurrScoreMultiple=null,this.txtRawCrystalCost=null,this.txtRawCrystalTotal=null,this.checkRawCrystal=null,this.fntCostDiamond=null,this.btnForge=null,this.isMaterialSufficient=!1,this.isRawCrystalSufficient=!1,this.isRawCrystalSufficientEx=!1,this.isDiamondSufficient=!1,this.csbNode=cc.instantiate(o.AssetsManager.getRes("prefabs/weapon_forge_window")),d.fish.adapterScreen(this.csbNode),this.btnForge=cc.find("archor/btnForge",this.csbNode),this.fntTargetMultiple=cc.find("archor/frame/fntTargetMultiple",this.csbNode),this.txtCrystalPurpleCost=cc.find("archor/frame/txtCrystalPurpleCost",this.csbNode),this.txtCrystalPurpleTotal=cc.find("archor/frame/txtCrystalPurpleTotal",this.csbNode),this.txtCrystalBlueCost=cc.find("archor/frame/txtCrystalBlueCost",this.csbNode),this.txtCrystalBlueTotal=cc.find("archor/frame/txtCrystalBlueTotal",this.csbNode),this.txtCrystalYellowCost=cc.find("archor/frame/txtCrystalYellowCost",this.csbNode),this.txtCrystalYellowTotal=cc.find("archor/frame/txtCrystalYellowTotal",this.csbNode),this.txtCrystalRedCost=cc.find("archor/frame/txtCrystalRedCost",this.csbNode),this.txtCrystalRedTotal=cc.find("archor/frame/txtCrystalRedTotal",this.csbNode),this.iconWeapon=cc.find("archor/weapon/iconWeapon",this.csbNode),this.fntCurrentMultiple=cc.find("archor/weapon/fntCurrentMultiple",this.csbNode),this.txtTargetScoreMultiple=cc.find("archor/frame/txtTargetScoreMultiple",this.csbNode),this.txtCurrScoreMultiple=cc.find("archor/frame/txtCurrScoreMultiple",this.csbNode),this.txtRawCrystalCost=cc.find("archor/frame/txtRawCrystalCost",this.csbNode),this.txtRawCrystalTotal=cc.find("archor/frame/txtRawCrystalTotal",this.csbNode),this.checkRawCrystal=cc.find("archor/frame/checkRawCrystal",this.csbNode),this.fntCostDiamond=cc.find("archor/frame/fntCostDiamond",this.csbNode),this.btnForge.on("click",this.onBtnForge,this),cc.find("archor/frame/btnClose",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this),cc.find("archor/frame/btnUseRawCrystal",this.csbNode).on(cc.Node.EventType.TOUCH_END,this.onBtnUseRawCrystal,this);var e=this.csbNode.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){e.targetOff(this),e.play("loop").wrapMode=cc.WrapMode.Loop}.bind(this),this),e.play("show"),this.node.addChild(this.csbNode),this._refresh(),n.evtCenter.on(s.evts.EVT_WEAPON_FORGE_RESULT,this.onEventRefresh,this),n.evtCenter.emit(s.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){n.evtCenter.emit(s.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnClose(null)},t.prototype.onBtnClose=function(e){var t=this.csbNode.getComponent(cc.Animation);t.play("hide"),t.on(cc.Animation.EventType.FINISHED,function(){this.node.removeFromParent(),this.node.destroy()}.bind(this),this)},t.prototype.onBtnUseRawCrystal=function(e){this._refresh(),this.isRawCrystalSufficientEx||n.evtCenter.emit(s.evts.EVT_MSG_BOX,"\u539f\u6676\u77f3\u53ef\u901a\u8fc7\u5206\u89e3\u6c34\u6676\u548c\u6d3b\u52a8\u83b7\u5f97\uff01")},t.prototype.onBtnForge=function(e){if(this.isMaterialSufficient)if(this.isRawCrystalSufficient)if(this.isDiamondSufficient){var t={cmd:c.msgs.CMD_GAME,params:{gameId:28,userId:a.ME.userId,clientId:r.AccountInfo.clientId,action:"wpForge",spar:this.checkRawCrystal.active?1:0}};h.tcp.send(t),this.btnForge.getComponent(cc.Button).enabled=!1}else n.evtCenter.emit(s.evts.EVT_MSG_BOX,"\u94bb\u77f3\u4e0d\u8db3\uff01");else n.evtCenter.emit(s.evts.EVT_MSG_BOX,"\u539f\u6676\u77f3\u4e0d\u8db3\uff01/n\u539f\u6676\u77f3\u53ef\u901a\u8fc7\u5206\u89e3\u6c34\u6676\u548c\u6d3b\u52a8\u83b7\u5f97\uff01");else n.evtCenter.emit(s.evts.EVT_MSG_BOX,"\u6c34\u6676\u4e0d\u8db3\uff01\n\u4f7f\u75281000\u4ee5\u4e0a\u70ae\u500d\u51fb\u6740boss\u548c\u9ec4\u91d1\u9c7c\u53ef\u83b7\u5f97\u6c34\u6676\u54e6\uff01")},t.prototype.onEventRefresh=function(e,t){this.scheduleOnce(this._refresh,1);var i=this.csbNode.getComponent(cc.Animation);0==e?(this.csbNode.stopAllActions(),i.on(cc.Animation.EventType.FINISHED,function(){"forge"==i.currentClip.name?i.play("success"):"success"==i.currentClip.name&&(i.targetOff(this),i.play("loop").wrapMode=cc.WrapMode.Loop)}.bind(this),this),i.play("forge"),this.node.runAction(cc.sequence(cc.delayTime(25/30),cc.callFunc(function(e){cc.audioEngine.playEffect(o.AssetsManager.getRes("sound/forge_success"),!1)}.bind(this))))):1==e&&(this.csbNode.stopAllActions(),i.on(cc.Animation.EventType.FINISHED,function(){i.targetOff(this),i.play("loop").wrapMode=cc.WrapMode.Loop}.bind(this),this),i.play("forge"),this.spar=t,this.node.runAction(cc.sequence(cc.delayTime(25/30),cc.callFunc(function(e){n.evtCenter.emit(s.evts.EVT_MSG_BOX,"\u953b\u9020\u5931\u8d25\uff0c\u83b7\u5f97\u539f\u6676\u77f3\uff1a"+this.spar+"\u4e2a")}.bind(this)))))},t.prototype._refresh=function(){var e=o.AssetsManager.getRes("img/atlas/vip"),t=n.configTable.weapon_forge[a.ME.weaponId],i=n.configTable.weapon_forge[a.ME.weaponId+1];if(t||i){var s=t?t.multiple:1e3,c=t?t.score_multiple:"0";i?this.btnForge.getComponent(cc.Button).enabled=!0:(i=t,this.btnForge.getComponent(cc.Button).enabled=!1);var r=a.ME.baggage.getItem(l.Item.CRYSTAL_PURPLE),h=a.ME.baggage.getItem(l.Item.CRYSTAL_BLUE),d=a.ME.baggage.getItem(l.Item.CRYSTAL_YELLOW),_=a.ME.baggage.getItem(l.Item.CRYSTAL_RED),f=a.ME.baggage.getItem(l.Item.CRYSTAL_RAW),p=r?r.count:0,u=h?h.count:0,m=d?d.count:0,g=_?_.count:0,v=f?f.count:0;this.fntTargetMultiple.getComponent(cc.Label).string=i.multiple,this.txtCrystalPurpleCost.getComponent(cc.Label).string=i.purple,this.txtCrystalPurpleTotal.getComponent(cc.Label).string=p,this.txtCrystalBlueCost.getComponent(cc.Label).string=i.blue,this.txtCrystalBlueTotal.getComponent(cc.Label).string=u,this.txtCrystalYellowCost.getComponent(cc.Label).string=i.yellow,this.txtCrystalYellowTotal.getComponent(cc.Label).string=m,this.txtCrystalRedCost.getComponent(cc.Label).string=i.red,this.txtCrystalRedTotal.getComponent(cc.Label).string=g,this.iconWeapon.getComponent(cc.Sprite).spriteFrame=a.ME.vipLevel>0?e.getSpriteFrame("fish_vip_weapon_"+a.ME.vipLevel):e.getSpriteFrame("fish_weapon_2"),this.fntCurrentMultiple.getComponent(cc.Label).string=s,this.txtTargetScoreMultiple.getComponent(cc.Label).string=i.score_multiple,this.txtCurrScoreMultiple.getComponent(cc.Label).string=c,this.txtRawCrystalCost.getComponent(cc.Label).string=i.raw,this.txtRawCrystalTotal.getComponent(cc.Label).string=v,this.fntCostDiamond.getComponent(cc.Label).string=i.diamond,this.txtCrystalPurpleCost.color=i.purple>p?cc.color(255,255,255):cc.color(0,255,0),this.txtCrystalPurpleTotal.color=i.purple>p?cc.color(255,255,255):cc.color(0,255,0),this.txtCrystalBlueCost.color=i.blue>u?cc.color(255,255,255):cc.color(0,255,0),this.txtCrystalBlueTotal.color=i.blue>u?cc.color(255,255,255):cc.color(0,255,0),this.txtCrystalYellowCost.color=i.yellow>m?cc.color(255,255,255):cc.color(0,255,0),this.txtCrystalYellowTotal.color=i.yellow>m?cc.color(255,255,255):cc.color(0,255,0),this.txtCrystalRedCost.color=i.red>g?cc.color(255,255,255):cc.color(0,255,0),this.txtCrystalRedTotal.color=i.red>g?cc.color(255,255,255):cc.color(0,255,0),this.txtRawCrystalCost.color=i.raw>v?cc.color(255,255,255):cc.color(0,255,0),this.txtRawCrystalTotal.color=i.raw>v?cc.color(255,255,255):cc.color(0,255,0),this.fntCostDiamond.color=i.diamond>a.ME.diamond?cc.color(255,255,255):cc.color(0,255,0),this.isMaterialSufficient=p>=i.purple&&u>=i.blue&&m>=i.yellow&&g>=i.red,this.isRawCrystalSufficient=!this.checkRawCrystal.active||v>=i.raw,this.isRawCrystalSufficientEx=v>=i.raw,this.isRawCrystalSufficientEx&&(this.checkRawCrystal.active=!0),this.isDiamondSufficient=a.ME.diamond>=i.diamond}},t}(cc.Component);i.WeaponForgeWindow=_,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_consts":"fish_consts","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_weapon_info:[function(e,t,i){"use strict";cc._RF.push(t,"156a0bU2vJFM4tVfZm85Yiw","fish_weapon_info"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../scene/fish_scene"),s=function(){function e(e){this.maxWeaponId=2149,this.weaponId=2101,this.multiple=1,this.costGold=1,this.interval=.25,this.unlock_weaponId=2102,this.unlock_multiple=2,this.unlock_spendDmd=2,this.unlock_recvGold=100,this.change(e)}return e.prototype.change=function(e){var t=n.configTable.weapon[e];if(t){this.weaponId=parseInt(t.weapon_id),this.multiple=parseInt(t.multiple),this.costGold=parseInt(t.weapon_cost),this.interval=parseFloat(t.cooldown);var i=n.configTable.weapon_unlock[this.weaponId];if(i){this.unlock_weaponId=i.unlock_weaponId,this.unlock_spendDmd=i.unlock_cost,this.unlock_recvGold=i.unlock_award;var s=n.configTable.weapon[i.weapon_unlock];s&&(this.unlock_multiple=parseInt(s.multiple))}else this.unlock_weaponId=0,this.unlock_multiple=0,this.unlock_spendDmd=0,this.unlock_recvGold=0}},e}();i.WeaponInfo=s,cc._RF.pop()},{"../scene/fish_scene":"fish_scene"}],fish_weapon_panel:[function(e,t,i){"use strict";cc._RF.push(t,"609b1j9GXZPEpr7Hf9QEyIX","fish_weapon_panel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/fish_model"),s=e("../../../assets_manager"),o=e("../../scene/fish_scene"),c=e("../../define/fish_event_types"),a=e("../../buffer/fish_buffer"),r=e("../../define/fish_msg_types"),h=e("../../scene/fish_scene_login"),l=e("../../logic/fish_tcp"),d=e("../../fish"),_=function(e){function t(){var t=e.call(this)||this;return t.FNT_SIGLE_W=18,t.oldDiamond=n.ME.diamond,t.csbNode=null,t.anchor=null,t.panelUpgrade=null,t.groupInProgress=null,t.groupCompleted=null,t.loadingBar=null,t.fntProgress=null,t.fntGold=null,t.gold_icon=null,t.zeng_icon=null,t.fntMultiple=null,t.btnUpgrade=null,t.btnUpgradeIcon=null,t.isVisible=!1,t.firstTips=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.csbNode=cc.instantiate(s.AssetsManager.getRes("prefabs/weapon_panel")),d.fish.adapterScreen(this.csbNode),this.node.addChild(this.csbNode),this.anchor=cc.find("anchor",this.csbNode),this.panelUpgrade=cc.find("anchor/panelUpgrade",this.csbNode),this.groupInProgress=cc.find("anchor/panelUpgrade/group/groupInProgress",this.csbNode),this.groupCompleted=cc.find("anchor/panelUpgrade/group/groupCompleted",this.csbNode),this.loadingBar=cc.find("anchor/panelUpgrade/group/groupInProgress/loadingBar",this.csbNode),this.fntProgress=cc.find("anchor/panelUpgrade/group/groupInProgress/fntProgress",this.csbNode),this.fntGold=cc.find("anchor/panelUpgrade/group/groupCompleted/fntGold",this.csbNode),this.gold_icon=cc.find("anchor/panelUpgrade/group/groupCompleted/gold_icon",this.csbNode),this.zeng_icon=cc.find("anchor/panelUpgrade/group/groupCompleted/zeng_icon",this.csbNode),this.fntMultiple=cc.find("anchor/panelUpgrade/group/fntMultiple",this.csbNode),this.btnUpgrade=cc.find("anchor/panelUpgrade/btnUpgrade",this.csbNode),this.btnUpgradeIcon=cc.find("anchor/btnUpgradeIcon",this.csbNode),this.btnUpgrade.on(cc.Node.EventType.TOUCH_END,this.onBtnUpgrade,this),this.btnUpgradeIcon.on(cc.Node.EventType.TOUCH_END,this.onBtnUpgradeIcon,this),o.evtCenter.on(c.evts.EVT_DIAMOND_INFO_CHG,this.onEventDiamondInfoChange,this),o.evtCenter.on(c.evts.EVT_WEAPON_UPGRADE,this.onEventWeaponUpgrade,this),o.evtCenter.on(c.evts.EVT_RMATCH_SHOW_RANK,this.onEventHideWeapon,this),o.evtCenter.on(c.evts.EVT_RMATCH_HIDE_RANK,this.onEventShowWeapon,this),this.btnUpgrade.opacity=0,this._tipGetCrystal()},t.prototype.onDestroy=function(){o.evtCenter.off(c.evts.EVT_DIAMOND_INFO_CHG,this.onEventDiamondInfoChange,this),o.evtCenter.off(c.evts.EVT_WEAPON_UPGRADE,this.onEventWeaponUpgrade,this),o.evtCenter.off(c.evts.EVT_RMATCH_SHOW_RANK,this.onEventHideWeapon,this),o.evtCenter.off(c.evts.EVT_RMATCH_HIDE_RANK,this.onEventShowWeapon,this)},t.prototype.onEventHideWeapon=function(){this.anchor&&(this.anchor.active=!1)},t.prototype.onEventShowWeapon=function(){this.anchor&&(this.anchor.active||(this.anchor.active=!0))},t.prototype.onEventDiamondInfoChange=function(e){e==n.ME.userId&&this._checkUpgradeCondition()},t.prototype.onEventWeaponUpgrade=function(e,t){n.ME.userId==e&&(this._hide(),this.oldDiamond=a.buffer.gameDiamond.diamond,this._checkUpgradeCondition(),2136==n.ME.playerInfo.maxWeapon.weaponId&&n.model.table.roomId>=28003e4&&o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u60a8\u5df2\u5f00\u542f\u6b66\u5668\u953b\u9020\u529f\u80fd\uff0c\u8bf7\u8fd4\u8fd8\u5927\u5385\u67e5\u770b",this._tipGetCrystal,this))},t.prototype.onBtnUpgrade=function(){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1);var e=n.ME.playerInfo.curWeapon;if(a.buffer.gameDiamond.diamond<e.unlock_spendDmd)o.evtCenter.emit(c.evts.EVT_POPUP_SHOP_WINDOW,n.model.shop.SHOP_DIAMOND);else{var t={cmd:r.msgs.CMD_TABLE_CALL,params:{action:"gup",userId:n.ME.userId,clientId:h.AccountInfo.clientId,gameId:28,roomId:n.model.table.roomId,tableId:n.model.table.tableId,seatId:n.model.table.seatId}};l.tcp.send(t)}},t.prototype.onBtnUpgradeIcon=function(){cc.audioEngine.playEffect(s.AssetsManager.getRes("sound/button"),!1),this.isVisible?this._hide():this._show()},t.prototype._checkUpgradeCondition=function(){var e=a.buffer.gameDiamond.diamond,t=n.ME.playerInfo.maxWeapon,i=""+t.unlock_recvGold;this.fntGold.getComponent(cc.Label).string=i,this.fntMultiple.getComponent(cc.Label).string=""+t.unlock_multiple;var s=this.zeng_icon.x,c=this.fntGold.getContentSize().width;c=(c=c>i.length*this.FNT_SIGLE_W?c:i.length*this.FNT_SIGLE_W)>100?100:c,this.fntGold.x=c+s+5;var r=this.fntGold.x;return this.gold_icon.x=r+5,t.weaponId>=2136||0==t.unlock_weaponId?(this.btnUpgradeIcon.getComponent(cc.Button).enabled=!1,this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.removeSelf())),!1):e>=t.unlock_spendDmd?(this.node.stopAllActions(),this.groupInProgress.active=!1,this.groupCompleted.active=!0,this.btnUpgradeIcon.getComponent(cc.Button).enabled=!1,this.isVisible||this._show(),this._twinkle(),o.effect.showWpupParticle(this.panelUpgrade),this.btnUpgrade.opacity=255,!0):(this.node.stopAllActions(),this.groupInProgress.active=!0,this.groupCompleted.active=!1,this.btnUpgradeIcon.getComponent(cc.Button).enabled=!0,this.isVisible||this._show(),this.groupCompleted.active=!1,this.groupInProgress.active=!0,this.btnUpgradeIcon.getComponent(cc.Button).enabled=!0,this.loadingBar.getComponent(cc.ProgressBar).progress=100*e/t.unlock_spendDmd/100,this.fntProgress.getComponent(cc.Label).string=e+"/"+t.unlock_spendDmd,o.effect.hideWpupParticle(this.panelUpgrade),e>this.oldDiamond&&(this.oldDiamond=e,this._show()),!1)},t.prototype._show=function(){var e=a.buffer.gameDiamond.diamond;this.csbNode.stopAllActions(),this.csbNode.getComponent(cc.Animation).play("show"),this.isVisible=!0,e<n.ME.playerInfo.maxWeapon.unlock_spendDmd&&(this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(this._hide,this))))},t.prototype._hide=function(){this.node.stopAllActions(),this.csbNode.stopAllActions(),this.csbNode.getComponent(cc.Animation).play("hide"),this.isVisible=!1},t.prototype._twinkle=function(){this.btnUpgrade.stopAllActions(),this.btnUpgrade.active=!0,this.btnUpgrade.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.7),cc.fadeIn(.7))))},t.prototype._tipGetCrystal=function(){t.prototype.firstTips||2136==n.ME.playerInfo.maxWeapon.weaponId&&n.model.table.roomId>=28003e4&&(t.prototype.firstTips=!0,o.evtCenter.emit(c.evts.EVT_MSG_BOX,'\u5728"\u51b0\u5bd2\u7981\u57df"\uff0c\u4f7f\u75281000\u500d\u53ca\u4ee5\u4e0a\u7684\u6b66\u5668\u6355\u83b7\u9ec4\u91d1\u9c7c\uff0c\u53ef\u83b7\u5f97\u6c34\u6676\u54e6'))},t}(cc.Component);i.WeaponPanel=_,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../buffer/fish_buffer":"fish_buffer","../../define/fish_event_types":"fish_event_types","../../define/fish_msg_types":"fish_msg_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene","../../scene/fish_scene_login":"fish_scene_login"}],fish_weapon_window:[function(e,t,i){"use strict";cc._RF.push(t,"02b770KOIFOoJh9hbfEFgx4","fish_weapon_window"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../assets_manager"),s=e("../../scene/fish_scene"),o=e("../../define/fish_event_types"),c=e("../../model/fish_model"),a=e("../../logic/fish_tcp"),r=e("../../fish"),h=function(e){function t(){var t=e.call(this)||this;return t.csbRoot=null,t.btn1=null,t.btn2=null,t.btn3=null,t.btn4=null,t.btn5=null,t.btn6=null,t.btn7=null,t.btn8=null,t.btn9=null,t.btnName1=null,t.btnName2=null,t.btnName3=null,t.btnName4=null,t.btnName5=null,t.btnName6=null,t.btnName7=null,t.btnName8=null,t.btnName9=null,t.unlock1=null,t.unlock2=null,t.unlock3=null,t.unlock4=null,t.unlock5=null,t.unlock6=null,t.unlock7=null,t.unlock8=null,t.unlock9=null,t.changGunSrollView=null,t.listener=null,t.touchX=null,t.touchFlag=!0,t}return __extends(t,e),t.prototype.onLoad=function(){if(this.csbRoot=cc.instantiate(n.AssetsManager.getRes("prefabs/change_gun")),r.fish.adapterScreen(this.csbRoot),this.node.addChild(this.csbRoot),this.changGunSrollView=cc.find("anthor/changGunSrollView",this.csbRoot).getComponent(cc.ScrollView),this.btn1=cc.find("cell1/btn1",this.changGunSrollView.content),this.btn2=cc.find("cell2/btn2",this.changGunSrollView.content),this.btn3=cc.find("cell3/btn3",this.changGunSrollView.content),this.btn4=cc.find("cell4/btn4",this.changGunSrollView.content),this.btn5=cc.find("cell5/btn5",this.changGunSrollView.content),this.btn6=cc.find("cell6/btn6",this.changGunSrollView.content),this.btn7=cc.find("cell7/btn7",this.changGunSrollView.content),this.btn8=cc.find("cell8/btn8",this.changGunSrollView.content),this.btn9=cc.find("cell9/btn9",this.changGunSrollView.content),this.btnName1=cc.find("cell1/btnName1",this.changGunSrollView.content),this.btnName2=cc.find("cell2/btnName2",this.changGunSrollView.content),this.btnName3=cc.find("cell3/btnName3",this.changGunSrollView.content),this.btnName4=cc.find("cell4/btnName4",this.changGunSrollView.content),this.btnName5=cc.find("cell5/btnName5",this.changGunSrollView.content),this.btnName6=cc.find("cell6/btnName6",this.changGunSrollView.content),this.btnName7=cc.find("cell7/btnName7",this.changGunSrollView.content),this.btnName8=cc.find("cell8/btnName8",this.changGunSrollView.content),this.btnName9=cc.find("cell9/btnName9",this.changGunSrollView.content),this.unlock1=cc.find("cell1/unlock1",this.changGunSrollView.content),this.unlock2=cc.find("cell2/unlock2",this.changGunSrollView.content),this.unlock3=cc.find("cell3/unlock3",this.changGunSrollView.content),this.unlock4=cc.find("cell4/unlock4",this.changGunSrollView.content),this.unlock5=cc.find("cell5/unlock5",this.changGunSrollView.content),this.unlock6=cc.find("cell6/unlock6",this.changGunSrollView.content),this.unlock7=cc.find("cell7/unlock7",this.changGunSrollView.content),this.unlock8=cc.find("cell8/unlock8",this.changGunSrollView.content),this.unlock9=cc.find("cell9/unlock9",this.changGunSrollView.content),this.btn1.on(cc.Node.EventType.TOUCH_END,this.onChangGun1,this),this.btn2.on(cc.Node.EventType.TOUCH_END,this.onChangGun2,this),this.btn3.on(cc.Node.EventType.TOUCH_END,this.onChangGun3,this),this.btn4.on(cc.Node.EventType.TOUCH_END,this.onChangGun4,this),this.btn5.on(cc.Node.EventType.TOUCH_END,this.onChangGun5,this),this.btn6.on(cc.Node.EventType.TOUCH_END,this.onChangGun6,this),this.btn7.on(cc.Node.EventType.TOUCH_END,this.onChangGun7,this),this.btn8.on(cc.Node.EventType.TOUCH_END,this.onChangGun8,this),this.btn9.on(cc.Node.EventType.TOUCH_END,this.onChangGun9,this),cc.find("anthor/closeButton",this.csbRoot).on(cc.Node.EventType.TOUCH_END,this.onBtnClose,this),s.evtCenter.on(o.evts.EVT_WEAPON_CHANGED,this.onEvtWeaponChanged,this),this.onShowBtn(),this.setBtnSwallowTouches(),c.ME.vipLevel>0){var e=c.ME.playerInfo.cannonId-11;c.ME.playerInfo.cannonId>15?this.changGunSrollView.getComponent(cc.ScrollView).setContentPosition(cc.v2(-900)):e>0&&this.changGunSrollView.getComponent(cc.ScrollView).setContentPosition(cc.v2(180*-e-6*e))}s.evtCenter.emit(o.evts.EVT_PUSH_BACK_KEY,this.onBackKey,this)},t.prototype.onDestroy=function(){s.evtCenter.off(o.evts.EVT_WEAPON_CHANGED,this.onEvtWeaponChanged,this),s.evtCenter.emit(o.evts.EVT_POP_BACK_KEY,this.onBackKey,this)},t.prototype.onBackKey=function(){this.onBtnClose(null)},t.prototype.setBtnSwallowTouches=function(){for(var e=[this.btn1,this.btn2,this.btn3,this.btn4,this.btn5,this.btn6,this.btn7,this.btn8,this.btn9],t=0;t<e.length;t++);},t.prototype.onBtnClose=function(e){cc.audioEngine.playEffect(n.AssetsManager.getRes("sound/button"),!1),s.evtCenter.off(o.evts.EVT_WEAPON_CHANGED,this.onEvtWeaponChanged,this),this.node.removeFromParent(),this.destroy()},t.prototype.onShowBtn=function(){for(var e=n.AssetsManager.getRes("img/atlas/vip_weapon"),t=[this.btn1,this.btn2,this.btn3,this.btn4,this.btn5,this.btn6,this.btn7,this.btn8,this.btn9],i=[this.btnName1,this.btnName2,this.btnName3,this.btnName4,this.btnName5,this.btnName6,this.btnName7,this.btnName8,this.btnName9],s=[this.unlock1,this.unlock2,this.unlock3,this.unlock4,this.unlock5,this.unlock6,this.unlock7,this.unlock8,this.unlock9],o=c.ME.playerInfo.cannonId,a=0;a<c.ME.vipLevel;a++)s[a].active=!1,o<=10||(a==o-11?(i[a].getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_huanpo_4"),this.showWpupParticle(t[a])):i[a].getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("fish_huanpo_3"))},t.prototype.showWpupParticle=function(e){if(!e.wpupParticle){var t=new cc.Node;e.addChild(t),e.wpupParticle=t;var i=cc.instantiate(n.AssetsManager.getRes("particle/wpup_star")).getComponent(cc.ParticleSystem);i.node.setPosition(0,240),i.positionType=cc.ParticleSystem.PositionType.FREE,t.addChild(i.node),i.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.4,cc.v2(168,240)),cc.moveTo(.9,cc.v2(168,5)),cc.moveTo(.4,cc.v2(3,5)),cc.moveTo(.9,cc.v2(3,240)))));var s=cc.instantiate(n.AssetsManager.getRes("particle/wpup_star")).getComponent(cc.ParticleSystem);s.node.setPosition(168.5),s.positionType=cc.ParticleSystem.PositionType.FREE,t.addChild(s.node),s.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.4,cc.v2(3,5)),cc.moveTo(.9,cc.v2(3,240)),cc.moveTo(.4,cc.v2(168,240)),cc.moveTo(.9,cc.v2(168,5)))))}},t.prototype.onChangGun1=function(e){if(this.touchFlag){var t=c.ME.playerInfo.cannonId;c.ME.vipLevel>0&&11!=t?this.onMsgChangeGun(11):c.ME.vipLevel>0&&11==t||s.evtCenter.emit(o.evts.EVT_POPUP_VIP_WINDOW,"")}},t.prototype.onChangGun2=function(e){if(this.touchFlag){var t=c.ME.playerInfo.cannonId;c.ME.vipLevel>0&&12!=t?this.onMsgChangeGun(12):c.ME.vipLevel>0&&12==t||s.evtCenter.emit(o.evts.EVT_POPUP_VIP_WINDOW,"")}},t.prototype.onChangGun3=function(e){if(this.touchFlag){var t=c.ME.playerInfo.cannonId;c.ME.vipLevel>0&&13!=t?this.onMsgChangeGun(13):c.ME.vipLevel>0&&13==t||s.evtCenter.emit(o.evts.EVT_POPUP_VIP_WINDOW,"")}},t.prototype.onChangGun4=function(e){if(this.touchFlag){var t=c.ME.playerInfo.cannonId;c.ME.vipLevel>0&&14!=t?this.onMsgChangeGun(14):c.ME.vipLevel>0&&14==t||s.evtCenter.emit(o.evts.EVT_POPUP_VIP_WINDOW,"")}},t.prototype.onChangGun5=function(e){if(this.touchFlag){var t=c.ME.playerInfo.cannonId;c.ME.vipLevel>0&&15!=t?this.onMsgChangeGun(15):c.ME.vipLevel>0&&15==t||s.evtCenter.emit(o.evts.EVT_POPUP_VIP_WINDOW,"")}},t.prototype.onChangGun6=function(e){if(this.touchFlag){var t=c.ME.playerInfo.cannonId;c.ME.vipLevel>0&&16!=t?this.onMsgChangeGun(16):c.ME.vipLevel>0&&16==t||s.evtCenter.emit(o.evts.EVT_POPUP_VIP_WINDOW,"")}},t.prototype.onChangGun7=function(e){if(this.touchFlag){var t=c.ME.playerInfo.cannonId;c.ME.vipLevel>0&&17!=t?this.onMsgChangeGun(17):c.ME.vipLevel>0&&17==t||s.evtCenter.emit(o.evts.EVT_POPUP_VIP_WINDOW,"")}},t.prototype.onChangGun8=function(e){if(this.touchFlag){var t=c.ME.playerInfo.cannonId;c.ME.vipLevel>0&&18!=t?this.onMsgChangeGun(18):c.ME.vipLevel>0&&18==t||s.evtCenter.emit(o.evts.EVT_POPUP_VIP_WINDOW,"")}},t.prototype.onChangGun9=function(e){if(this.touchFlag){var t=c.ME.playerInfo.cannonId;c.ME.vipLevel>0&&19!=t?this.onMsgChangeGun(19):c.ME.vipLevel>0&&19==t||s.evtCenter.emit(o.evts.EVT_POPUP_VIP_WINDOW,"")}},t.prototype.onMsgChangeGun=function(e){var t={cmd:"table_call",params:{gameId:28,userId:c.ME.userId,action:"chgGunCrg",crgId:e,roomId:c.model.table.roomId,tableId:c.model.table.tableId,seatId:c.model.table.seatId}};a.tcp.send(t),this.node.removeFromParent(!0)},t.prototype.onEvtWeaponChanged=function(e,t){this.onShowBtn()},t.prototype.onSrollViewMoved=function(){},t}(cc.Component);i.WeaponWindow=h,cc._RF.pop()},{"../../../assets_manager":"assets_manager","../../define/fish_event_types":"fish_event_types","../../fish":"fish","../../logic/fish_tcp":"fish_tcp","../../model/fish_model":"fish_model","../../scene/fish_scene":"fish_scene"}],fish:[function(e,t,i){"use strict";cc._RF.push(t,"6e77c63G3tOm5exspCk2/2G","fish"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../assets_manager");(function(e){e.gameView=null,e.effectPool=null,e.effectUtil=null,e.fruit_module_loaded=!1,e.clown_module_loaded=!1,e.h3card_module_loaded=!1,e.shz_module_loaded=!1,e.pDistance=function(e,t){var i=e.sub(t);return Math.sqrt(i.x*i.x+i.y*i.y)},e.distanceSquared=function(e,t){var i=e.sub(t);return i.x*i.x+i.y*i.y},e.createWithBMFont=function(e,t){var i=(new cc.Node).addComponent(cc.Label),s=n.AssetsManager.getRes("img/font/"+e);return i.font=s,i.lineHeight=s.fontSize,i.fontSize=s.fontSize,i.string=t,i.node},e.createScale9Sprite=function(e,t,i){var s=n.AssetsManager.getRes(e),o=(new cc.Node).addComponent(cc.Sprite);return o.type=cc.Sprite.Type.SLICED,o.spriteFrame=s.getSpriteFrame(t),o.spriteFrame.insetLeft=i.x,o.spriteFrame.insetRight=i.y,o.spriteFrame.insetTop=i.width,o.spriteFrame.insetBottom=i.height,o.node},e.getSpriteFrames=function(e,t){return n.AssetsManager.getRes(e).getSpriteFrame(t)},e.getAnchorPointInPoints=function(e){var t=e.getAnchorPoint(),i=e.getContentSize();return cc.v2(i.width*t.x,i.height*t.y)},e.getAnchorPointInCenter=function(e){var t=e.getAnchorPoint(),i=cc.v2(.5,.5),n=e.getContentSize(),s=cc.v2(n.width*t.x,n.height*t.y),o=cc.v2(n.width*i.x,n.height*i.y);return s.sub(o)},e.random0To1=function(){return Math.random()},e.randomMinus1To1=function(){return 2*(Math.random()-.5)},e.adapterScreen=function(e){var t=cc.visibleRect;e.setContentSize(t.width,t.height)}})(i.fish||(i.fish={})),cc._RF.pop()},{"../assets_manager":"assets_manager"}],load_prefabs:[function(e,t,i){"use strict";cc._RF.push(t,"ebc22KS+69C9JOhKecVnNoq","load_prefabs"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,o=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabs=[],t.sounds=[],t.jsons=[],t}return __extends(t,e),__decorate([o(cc.Prefab)],t.prototype,"prefabs",void 0),__decorate([o({type:cc.AudioClip})],t.prototype,"sounds",void 0),__decorate([o({type:cc.JsonAsset})],t.prototype,"jsons",void 0),t=__decorate([s],t)}(cc.Component);i.default=c,cc._RF.pop()},{}],update:[function(e,t,i){"use strict";cc._RF.push(t,"a5010vka0tPT5gE0+YFMFt+","update"),Object.defineProperty(i,"__esModule",{value:!0});var n,s=e("../config_json"),o=e("../assets_manager"),c=e("../xmen_interface");(function(e){var t=cc._decorator,i=t.ccclass;t.property;e.default_cdn="/cdn37/buyu/1.0",e.checkCDNStatus=function(e){if(void 0===e&&(e=null),s.config.server_json.cdn_url){var t=s.config.project_manifest.packageUrl.replace("res/","")+"cdnStatus.json",i=cc.loader.getXMLHttpRequest();i.timeout=2e3,i.onerror=function(){e(!0)},i.ontimeout=function(){e(!0)},i.onreadystatechange=function(){if(4==i.readyState){if(i.status>=200&&i.status<=207){var t=JSON.parse(i.responseText);if(t)if(t.isBusy)e(t.isBusy);else{var n=t[c.xmen.SystemInfo.getConfig().clientFixed],s=t[c.xmen.SystemInfo.getConfig().clientId];null!=n&&void 0!=n||null!=s&&void 0!=s?(null!=s&&void 0!=s||(s=!0),e(!(n&&s))):e(t.isBusy)}else e(!0)}else e(!0);cc.sys.garbageCollect()}},i.open("GET",t,!0),i.send()}else e(!0)},e.replaceCDNUrl=function(e,t){t=t||s.config.server_json.cdn_url};var n=function(e){function t(t,i){var n=e.call(this)||this;n.loadingBar=null,n.fntProgress=null,n.tips=null,n.text=null,n.msgTips=null,n.msgTipsTxt=null,n.msgBox=null,n.msgBoxTxt=null,n.particle=null,n.loadingBarWidth=0,n.loadingBarLeft=0,n.oldPercent=0,n.newPercent=0;var s=t.node,o=cc.visibleRect;return cc.debug.setDisplayStats(!1),n.loadingBar=s.getChildByName("loadingBar").getComponent(cc.ProgressBar),n.loadingBar.progress=0,n.loadingBarWidth=n.loadingBar.node.getContentSize().width,n.loadingBarLeft=(o.width-n.loadingBarWidth)/2,n.fntProgress=s.getChildByName("fntProgress").getComponent(cc.Label),n.tipsArray=["\u4f7f\u7528\u9501\u5b9a\u6280\u80fd\u53ef\u4ee5\u66f4\u5bb9\u6613\u62a2\u5230\u5927\u9c7c\u54e6~","BOSS\u8981\u8dd1\uff1f\u522b\u614c\uff0c\u5feb\u4f7f\u7528\u51b0\u51bb\u6280\u80fd\u5427\uff01","\u636e\u8bf4\u4f53\u79ef\u8d8a\u5927\u7684\u9c7c\u5206\u503c\u8d8a\u9ad8\u54e6\uff01"],n.tips=s.getChildByName("tips").getComponent(cc.Label),n.tips.string=n.tipsArray[Math.floor(Math.random()*n.tipsArray.length)],n.text=s.getChildByName("text").getComponent(cc.Label),n.text.string="\u6b63\u5728\u68c0\u67e5\u66f4\u65b0\u3002\u3002\u3002",n.msgTips=s.getChildByName("msgTips"),n.msgTipsTxt=n.msgTips.getChildByName("msgTipsTxt").getComponent(cc.Label),n.msgBox=s.getChildByName("msgBox"),n.msgBoxTxt=n.msgBox.getChildByName("msgBoxTxt").getComponent(cc.Label),n.msgBoxTxt.node.color=cc.Color.WHITE,n.msgBox.getChildByName("btnOK").on(cc.Node.EventType.TOUCH_END,i),n.particle=s.getChildByName("loading_update").getComponent(cc.ParticleSystem),n.particle.node.setPosition(n.loadingBarLeft,n.loadingBar.node.getPosition().y),n.oldPercent=0,n.newPercent=0,n.showLoadingBar(),cc.director.getScheduler().scheduleUpdate(n,0,!1),cc.director.getScheduler().schedule(n.switchTips,n,5),n}return __extends(t,e),t.prototype.onExit=function(){cc.director.getScheduler().unscheduleAllForTarget(this)},t.prototype.setPercent=function(e){this.newPercent=e},t.prototype.update=function(e){if(this.newPercent!=this.oldPercent){cc.log("\u66f4\u65b0UI: update1");var t=.1;t=this.newPercent>=100?Math.max(.1,.1*(this.newPercent-this.oldPercent)):Math.max(.1,.03*(this.newPercent-this.oldPercent)),this.oldPercent=Math.min(this.oldPercent+t,this.newPercent),this.loadingBar.progress=this.oldPercent,this.fntProgress.string=Math.floor(this.oldPercent)+"/100",this.particle.node.x=this.loadingBarLeft+this.loadingBarWidth*this.oldPercent/100}},t.prototype.switchTips=function(){this.tips.string=this.tipsArray[Math.floor(Math.random()*this.tipsArray.length)]},t.prototype.showLoadingBar=function(e){void 0===e&&(e=!1),this.loadingBar.node.active=e,this.fntProgress.node.active=e,this.particle.node.active=e},t.prototype.showLoading=function(){this.setPercent(100),this.oldPercent=this.newPercent=100,this.showLoadingBar(!1),this.tips.node.active=!1,this.text.string="\u52a0\u8f7d\u4e2d, \u8bf7\u7a0d\u5019"},t.prototype.setText=function(e){this.text.string=e},t.prototype.showMessageTips=function(e){this.msgTipsTxt.getComponent(cc.Label).string=e,this.msgTips.stopAllActions(),this.msgTips.runAction(cc.sequence(cc.fadeIn(.2),cc.delayTime(2),cc.fadeOut(.2)))},t.prototype.showMessageBox=function(e){this.msgBox.active=!0,this.msgBoxTxt.string=e},t.prototype.hideMessageBox=function(){this.msgBox.active=!1},t}(cc.Node);e.UpdateUI=n;var a=function(t){function a(){var e=t.call(this)||this;return e.assetsUrls=[{url:"prefabs/loading",type:cc.Prefab},{url:"prefabs/login_protocol",type:cc.Prefab},{url:"prefabs/net_ui",type:cc.Prefab},{url:"prefabs/login",type:cc.Prefab},{url:"prefabs/message_box",type:cc.Prefab},{url:"prefabs/message_tips",type:cc.Prefab},{url:"prefabs/led",type:cc.Prefab},{url:"sound/bg_lobby",type:cc.AudioClip},{url:"sound/button",type:cc.AudioClip},{url:"sound/popup",type:cc.AudioClip},{url:"sound/red_envelope_show",type:cc.AudioClip},{url:"sound/fly_gold",type:cc.AudioClip},{url:"sound/cast_piton",type:cc.AudioClip},{url:"config/ct_bankruptcy_gift",type:cc.TextAsset},{url:"config/ct_chat_frame",type:cc.TextAsset},{url:"config/ct_daily_quest",type:cc.TextAsset},{url:"config/ct_dailyquest_reward",type:cc.TextAsset},{url:"config/ct_drop",type:cc.TextAsset},{url:"config/ct_experssion",type:cc.TextAsset},{url:"config/ct_fish",type:cc.TextAsset},{url:"config/ct_fish_frame",type:cc.TextAsset},{url:"config/ct_gift",type:cc.TextAsset},{url:"config/ct_item",type:cc.TextAsset},{url:"config/ct_language_key",type:cc.TextAsset},{url:"config/ct_lottery",type:cc.TextAsset},{url:"config/ct_match_task",type:cc.TextAsset},{url:"config/ct_mini_game1",type:cc.TextAsset},{url:"config/ct_mini_game2",type:cc.TextAsset},{url:"config/ct_scene",type:cc.TextAsset},{url:"config/ct_shop",type:cc.TextAsset},{url:"config/ct_skill",type:cc.TextAsset},{url:"config/ct_time_line",type:cc.TextAsset},{url:"config/ct_treasure_task",type:cc.TextAsset},{url:"config/ct_user_level",type:cc.TextAsset},{url:"config/ct_weapon",type:cc.TextAsset},{url:"config/ct_weapon_unlock",type:cc.TextAsset},{url:"config/ct_weaponup_reward",type:cc.TextAsset},{url:"config/ct_user_name",type:cc.TextAsset},{url:"config/ct_prize_shop",type:cc.TextAsset},{url:"config/ct_timematch",type:cc.TextAsset},{url:"config/ct_timematch_reward",type:cc.TextAsset},{url:"config/ct_competition_reward",type:cc.TextAsset},{url:"config/ct_competition",type:cc.TextAsset},{url:"config/ct_double_dan",type:cc.TextAsset},{url:"config/ct_weapon_forge",type:cc.TextAsset},{url:"config/ct_bankruptcy_gift",type:cc.TextAsset},{url:"config/ct_newbie_task",type:cc.TextAsset},{url:"config/login",type:cc.JsonAsset},{url:"config/path",type:cc.TextAsset},{url:"config/tracks",type:cc.JsonAsset},{url:"config/colliders",type:cc.TextAsset}],e.downloadFailedAssetsRetry=0,e.downloadFailedAssetsMax=3,e.failedRetry=0,e.maxRetry=2,e.updateUI=null,e}return __extends(a,t),a.prototype.onLoad=function(){c.xmen.SDKInterfaceManager.hideSplashView(),this.removeAllCaches(),this.updateUI=new n(this,this.onBtnRetry),o.AssetsManager.loadRes(this.assetsUrls),e.checkCDNStatus(this.onCDNStatus.bind(this))},a.prototype.onDestroy=function(){this.updateUI.onExit(),delete this.updateUI},a.prototype.removeAllCaches=function(){},a.prototype.onCDNStatus=function(e){e?this.updateSuccess():this.doUpdate()},a.prototype.doUpdate=function(){s.config.project_manifest?c.xmen.SDKInterfaceManager.clickStat("click_cdn_start",""):this.updateUI.showMessageBox("\u8bfb\u53d6\u672c\u5730\u914d\u7f6e\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5")},a.prototype.onBtnRetry=function(){this.failedRetry++<this.maxRetry?(this.updateUI.hideMessageBox(),this.doUpdate()):(this.updateUI.hideMessageBox(),this.updateSuccess())},a.prototype.updateSuccess=function(e){e?cc.game.restart():(c.xmen.SDKInterfaceManager.clickStat("click_cdn_end",""),c.xmen.SystemInfo.loadConfig(),e||this.updateUI.showLoading(),this.schedule(this.updateResCheck,e?1:.04))},a.prototype.updateResCheck=function(){o.AssetsManager.getRes("config/colliders")&&(this.unschedule(this.updateResCheck),this.loadTrackFile())},a.prototype.loadTrackFile=function(){var e=o.AssetsManager.getRes("config/tracks").json,t=[];for(var i in e){var n=e[i];t.push({url:"config/"+n,type:cc.TextAsset})}var s={cb:this.loadGame.bind(this)};o.AssetsManager.loadRes(t,s)},a.prototype.loadGame=function(){o.AssetsManager.clearCallBack(),this.updateUI.showLoading(),cc.director.loadScene("game_fish")},a=__decorate([i],a)}(cc.Component);e.UpdateScene=a})(n||(n={})),cc._RF.pop()},{"../assets_manager":"assets_manager","../config_json":"config_json","../xmen_interface":"xmen_interface"}],webviewPay:[function(e,t,i){"use strict";cc._RF.push(t,"8f48f4wtOtA1I1vCzTxTRsW","webviewPay"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,o=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.web=null,t.url="",t}return __extends(t,e),t.prototype.start=function(){this.web.url=this.url},t.prototype.setOpenURL=function(e){this.url=e},t.prototype.onClickClose=function(){this.node.destroy()},__decorate([o(cc.WebView)],t.prototype,"web",void 0),t=__decorate([s],t)}(cc.Component);i.default=c,cc._RF.pop()},{}],xmen_interface:[function(e,t,i){"use strict";cc._RF.push(t,"e0567Jg/ElOqJY7ixaiiVIX","xmen_interface"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./config_json"),s=e("crypto-js"),o=e("./fish/scene/fish_scene"),c=e("./fish/define/fish_event_types"),a=e("./fish/model/fish_model");(function(e){e.EventType={MSG_GENERNAL_USER:"genernal_user",MSG_AUTHCODE:"request_authcode",MSG_CHANGE_PASSWORD:"change_password",MSG_LOGIN_SUCCESS:"login_success_ret",MSG_LOGIN_FAILED:"login_failed_ret",MSG_LOGIN_CANCEL:"login_cancel_ret",MSG_LOGOUT:"login_out_ret",MSG_LIGHT_LOGIN:"light_login_ret",MSG_KICKOUT:"logout",MSG_PAY_DIAMOND_SUCCESS:"pay_diamond_success_ret",MSG_PAY_DIAMOND_FAILED:"pay_diamond_failed_ret",MSG_PAY_DIAMOND_CANCEL:"pay_diamond_cancel_ret",MSG_BUY_COIN_DIRECT_SUCCESS:"buy_coin_direct_success_ret",MSG_BUY_COIN_DIRECT_FAILED:"buy_coin_direct_failed_ret",MSG_BUY_COIN_DIRECT_CANCEL:"buy_coin_direct_cancel_ret",MSG_WECHAT_SHARE_SUCCESS:"weixin_share_success_ret",MSG_WECHAT_SHARE_FAILED:"weixin_share_failed_ret",MSG_UPGRADE_ACCOUNT_SUCCESS:"upgrade_account_success_ret",MSG_UPGRADE_ACCOUNT_FAILED:"upgrade_account_failed_ret",WILL_ENTER_BACKGROUND:"will_enter_background_event",GET_DATA_FROM_CLIPBOARD:"get_data_from_clipboard",RESPONSE_DATA_FROM_CLIPBOARD:"response_data_from_clipboard",MSG_GET_GAME_LOGIN_TYPE_SUCCESS:"get_game_login_type_success_ret",MSG_GET_GAME_LOGIN_TYPE_FAILED:"get_game_login_type_failed_ret",TCP_ERROR:"tcp_error",TCP_CLOSE:"tcp_close",TCP_OPENED:"tcp_opened",TCP_SHUTDOWN:"tcp_shutdown",WEBSOCKET_ERROR:"websocket_error",WEBSOCKET_CLOSE:"websocket_close",WEBSOCKET_OPENED:"websocket_opened",WEBSOCKET_MESSAGE:"websocket_message",NETWORK_STATE_CHANGE:"network_state_change",MSG_USER_CLICK_EXIT_IN_SDK:"user_click_exit_in_sdk",MSG_SUBMIT_PUSH_TOKEN_SUCCESS:"submit_push_token_succ_ret",MSG_SUBMIT_PUSH_TOKEN_FAIL:"submit_push_token_failed_ret",MSG_CONSUME_USERID_ERROR_RET:"consume_userid_error_ret"};var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return this.instance},t.instance=new t,t}(cc.EventTarget),i=function(){function e(){this._publishers={}}return e.getInstance=function(){return this.instance},e.prototype.addPublisher=function(e,t){t&&void 0===this._publishers[e]&&(this._publishers[e]=t)},e.prototype.addOnePublisher=function(e,t){this.addPublisher(e,t)},e.prototype.getPublisher=function(e){return this._publishers[e]},e.prototype.dumpPublisher=function(e){},e.prototype.dumpPublishers=function(){},e.instance=new e,e}(),r=function(){function t(){this._wsObj=null}return t.prototype.connect=function(t,i){if(!this._wsObj||this._wsObj.readyState!=WebSocket.CONNECTING){this._wsObj=new WebSocket("ws://"+t.tcpServerIp+":"+t.portNumber);var n=e.PublishersManager.getPublisher(i);this._wsObj.onclose=n.onSocketClose.bind(this),this._wsObj.onerror=n.onSocketError.bind(this),this._wsObj.onopen=n.onSocketOpen.bind(this),this._wsObj.onmessage=n.onMessage.bind(this)}},t.prototype.sendMsg=function(e){this._wsObj.readyState==WebSocket.OPEN&&("string"==typeof e?this._wsObj.send(e):this._wsObj.send(JSON.stringify(e)))},t.prototype.close=function(){this._wsObj.close()},t.prototype.setAutoReconnectStatus=function(e){},t.prototype.setConnectTimeoutSeconds=function(e){},t}();e.WebSocketClient=r;var h=function(){function t(){this._gameConfig=null}return t.getInstance=function(){return this.instance},t.prototype.getConfig=function(){return this._gameConfig||this.loadConfig(),this._gameConfig},t.prototype.loadConfig=function(){this._gameConfig=n.config.config_json;var t=n.config.server_json;this._gameConfig.srv_url=t.srv_url,this._gameConfig.cdn_url=t.cdn_url;var i="",s=this._gameConfig.externalVersion;cc.sys.os==cc.sys.OS_IOS?i+="IOS_":i+="Android_",i+=s+"_",i+=this._gameConfig.client_default+".",i+=this._gameConfig.paychannel_default+".",i+=this._gameConfig.special_default+".",i+=this._gameConfig.main_channel_default+".",i+=this._gameConfig.sub_channel_default,this._gameConfig.clientFixed=i,cc.log("clientIdFixed: "+i),i="",cc.sys.os==cc.sys.OS_IOS?i+="IOS_":i+="Android_",i+=this._gameConfig.externalVersion+"_",i+=this._gameConfig.client_default+".",i+=this._gameConfig.paychannel_default+".",i+=this._gameConfig.special_default+".",i+=(e.SDKInterfaceManager.getChannel()||this._gameConfig.main_channel_default)+".",i+=this._gameConfig.sub_channel_default,this._gameConfig.clientId=i,cc.log("clientId: "+i),cc.log(JSON.stringify(this._gameConfig))},t.prototype.getFrameConfig=function(){return{buildMode:0==cc.game.config.debugMode?"release":"debug"}},t.prototype.getServerUrl=function(){return this.getConfig().srv_url},t.instance=new t,t}(),l=function(){function e(){}return e.prototype.downLoadAppByBrower=function(e){},e.isWXAppInstalled=function(){return!0},e.getAppBootParams=function(){return"{}"},e.hash=function(e){var t,i=1315423911;for(t=(e=e.toLowerCase()).length-1;t>=0;t--)i^=(i<<5)+e.charCodeAt(t)+(i>>2);return 2147483647&i},e}();e.Util=l;var d=function(){function e(){}return e.getInstance=function(){return this.instance},e.prototype.signatureStr=function(e,t){if("md5"==t)return s.MD5(e).toString().toUpperCase()},e.instance=new e,e}();e._EncodeDecode=d;var _=function(){function t(){this.loginUrl="",this.payType=1,this.isPlayFree=!1}return t.getInstance=function(){return this.instance},t.prototype.onComplete=function(t){cc.log("msdk onComplete ============"),cc.log(t);var i=JSON.parse(t),n=i.notiType;n==e.EventType.MSG_LOGIN_SUCCESS?e.SDKInterfaceManager.onLogin(!0,parseInt(i.userId),i.sign,"",""):n!=e.EventType.MSG_PAY_DIAMOND_SUCCESS&&n!=e.EventType.MSG_BUY_COIN_DIRECT_SUCCESS||e.SDKInterfaceManager.onPaySuccess()},t.prototype.hideSplashView=function(){},t.prototype.nicaiEncode=function(e){var t=s.enc.Utf8.parse("xmencom"),i="XMEN~";return i+=e,i+="~POKER201803141518",(i=s.DES.encrypt(i,t,{mode:s.mode.ECB,padding:s.pad.Pkcs7})).toString()},t.prototype.initSdk=function(e){this.loginUrl=e},t.prototype.login=function(){var t=cc.sys.localStorage.getItem("userID");t||(t=Math.floor(99999*Math.random()+1e4),cc.sys.localStorage.setItem("userID",t)),e.EventDispatcher.emit(e.EventType.MSG_LOGIN_SUCCESS,{userId:t,authorCode:"0",token:"dfsvsd4df5s4d60"})},t.prototype.loginWithPass=function(t,i){e.EventDispatcher.emit(e.EventType.MSG_LOGIN_SUCCESS,{userId:e.Util.hash(t),authorCode:"0",password:i,token:"dfsvsd4df5s4d60"})},t.prototype.requestAuthCode=function(t){e.EventDispatcher.emit(e.EventType.MSG_AUTHCODE,{userId:e.Util.hash(t),mobile:t,authorCode:"0"})},t.prototype.changePassword=function(t,i){e.EventDispatcher.emit(e.EventType.MSG_CHANGE_PASSWORD,{userId:e.Util.hash(t),password:i})},t.prototype.generUserId=function(t,i){cc.sys.localStorage.setItem("userID",t),e.EventDispatcher.emit(e.EventType.MSG_GENERNAL_USER,{userId:e.Util.hash(t),authorCode:"0",mobile:t,password:i,token:"dfsvsd4df5s4d60"})},t.prototype.onLogin=function(t,i,n,s,o){cc.log("***********token:"+n),t?e.EventDispatcher.emit(e.EventType.MSG_LOGIN_SUCCESS,{userId:i,token:n,authorCode:""}):e.EventDispatcher.emit(e.EventType.MSG_LOGIN_FAILED,{code:s})},t.prototype.logoutAccount=function(e){void 0===e&&(e=null)},t.prototype.loginOutGame=function(){e.EventDispatcher.emit(e.EventType.MSG_LIGHT_LOGIN)},t.prototype.showExitUI=function(){this.showGameExitUI()},t.prototype.showGameExitUI=function(){o.evtCenter.emit(c.evts.EVT_MSG_BOX,"\u60a8\u786e\u5b9a\u8981\u9000\u51fa\u6e38\u620f\u4e48?",2,this.onExitGame,this)},t.prototype.onExitGame=function(){cc.director.end()},t.prototype.getProductList=function(e,t){},t.prototype.buyCoinDirect=function(e,t,i,n,s,o,c,a,r){},t.prototype.payDiamond=function(e,t,i,n,s,o,c,a,r){this.payType=2,this.pay(e,i,t,n,o,r)},t.prototype.payH5=function(e,t,i,n,s){var o="http://017.pub/data/User/fish/home/desktop/H5Pay/AliPay.php?order="+n+"&product="+e+"&user="+a.ME.userId;cc.loader.loadRes("prefabs/PayWebView",cc.Prefab,function(e,t){var i=cc.instantiate(t);i.getComponent("webviewPay").setOpenURL(o),cc.director.getScene().addChild(i)})},t.prototype.pay=function(e,t,i,n,s,o){},t.prototype.OpenUrl=function(e){},t.prototype.payVivo=function(e,t,i,n){},t.prototype.payFree=function(e,t,i,n,s){},t.prototype.onPaySuccess=function(){1==this.payType?e.EventDispatcher.emit(e.EventType.MSG_BUY_COIN_DIRECT_SUCCESS):e.EventDispatcher.emit(e.EventType.MSG_PAY_DIAMOND_SUCCESS)},t.prototype.onPayFail=function(){},t.prototype.onPayCancel=function(){},t.prototype.sdkShare=function(e,t){},t.prototype.onSdkShare=function(e){},t.prototype.clickStat=function(e,t){},t.prototype.upgradeAccount=function(){},t.prototype.getLoginType=function(){},t.prototype.loginByType=function(e){cc.sys.localStorage.setItem("lastLoginType",e),cc.log("loginType: "+e),cc.log("H5 Device."),this.login()},t.prototype.showLocalAccount=function(){},t.prototype.hasLocalAccount=function(){return!1},t.prototype.getLastLoginType=function(){return cc.sys.localStorage.getItem("lastLoginType")},t.prototype.getTypeName=function(e){return""},t.prototype.getGameLoginType=function(){var t={showWeChat:!1,weChatParam:"weixin",showQuickStart:!0,quickStartParam:"tyGuest",showChannel:!1,channelParam:"xmen",showLocalAccount:!1};t?e.EventDispatcher.emit(e.EventType.MSG_GET_GAME_LOGIN_TYPE_SUCCESS,{config:t}):e.EventDispatcher.emit(e.EventType.MSG_GET_GAME_LOGIN_TYPE_FAILED)},t.prototype.getChannel=function(){return null},t.prototype.submitPushToken=function(e){},t.instance=new t,t}();e._SDKInterfaceManager=_;var f=function(){function e(){}return e.getInstance=function(){return this.instance},e.prototype.setup=function(){},e.prototype.login=function(){},e.prototype.onLogin=function(e){},e.prototype.share=function(){},e.instance=new e,e}();e._WeiXin=f,e.EventDispatcher=t.getInstance(),e.PublishersManager=i.getInstance(),e.SystemInfo=h.getInstance(),e.EncodeDecode=d.getInstance(),e.SDKInterfaceManager=_.getInstance(),e.WeiXin=f.getInstance()})(i.xmen||(i.xmen={})),cc._RF.pop()},{"./config_json":"config_json","./fish/define/fish_event_types":"fish_event_types","./fish/model/fish_model":"fish_model","./fish/scene/fish_scene":"fish_scene","crypto-js":10}]},{},["assets_manager","config_json","fish_buffer","fish_game_diamond","fish_game_freeze","fish_game_fury","fish_game_gold","fish_game_laser1","fish_game_laser2","fish_game_laser3","fish_game_laser4","fish_game_lock","fish_game_nbomb","fish_game_summon","fish_lobby_diamond","fish_lobby_gold","fish_other_diamond","fish_other_gold","fish_queue_sync","cpp_fish_game_view","cpp_fish_game_view_bullet","cpp_fish_game_view_config","cpp_fish_game_view_fish","cpp_fish_game_view_laser","cpp_fish_game_view_manager","cpp_fish_game_view_piton","cpp_fish_game_view_utils","fish_consts","fish_event_types","fish_msg_types","fish","fish_baggage","fish_event_center","fish_fire_object","fish_fire_queue","fish_fish_info","fish_lottery_info","fish_message_center","fish_player_info","fish_room_info","fish_tcp","fish_weapon_info","fish_model","fish_model_activity","fish_model_arena","fish_model_bankrupt_package","fish_model_common","fish_model_dailysign","fish_model_dailytask","fish_model_drop","fish_model_friends","fish_model_game_notice","fish_model_guide","fish_model_led","fish_model_lobby","fish_model_lottery","fish_model_me","fish_model_mini","fish_model_red_envelope","fish_model_roommatch","fish_model_shop","fish_model_subsidy","fish_model_table","fish_model_weapon","fish_scene","fish_scene_game","fish_scene_lobby","fish_scene_login","fish_scene_match","fish_scene_loading","fish_scene_loading_base","fish_scene_loading_game_to_lobby","fish_scene_loading_lobby_to_clown","fish_scene_loading_lobby_to_fruit","fish_scene_loading_lobby_to_game","fish_scene_loading_lobby_to_h3card","fish_scene_loading_lobby_to_match","fish_scene_loading_lobby_to_shz","fish_scene_loading_login_to_lobby","fish_audio","fish_config_table","fish_config_track","fish_effect","fish_effect_pool","fish_math","fish_utils","fish_act_get_torpedo","fish_activity","fish_activity_beat_shark_tip","fish_activity_cell","fish_activity_real_name","fish_activity_shark_beat","fish_activity_shark_drop","fish_activity_shark_main","fish_activity_shark_ranking","fish_activity_shark_ranking_cell","fish_artifact_activity","fish_channel_reward_activity","fish_charge_crystal","fish_first_charge_activity","fish_gifts_cell","fish_invite_friends_activity","fish_level_gifts","fish_red_envelope_activity","fish_roommatch_activity","fish_shop_double_activity","fish_view_act_get_torpedo","fish_view_activity","fish_view_beat_shark_tip","fish_view_shark_drop","fish_lobby_arena","fish_lobby_arena_bag_exchage_money","fish_lobby_arena_cell","fish_lobby_arena_manito","fish_lobby_arena_manito_cell","fish_lobby_arena_ranking","fish_lobby_arena_reward","fish_lobby_arena_reward_cell","fish_lobby_arena_rule","fish_lobby_arena_yest","fish_lobby_arena_yest_cell","fish_match_info","fish_match_property","fish_match_settlement","fish_match_task","fish_match_tree","fish_match_ui","fish_my_match_property","fish_view_match_property","fish_view_match_settlement","fish_view_match_task","fish_view_match_ui","fish_view_auto_update","fish_auto_update_store","fish_view_back_key","bankrupt_package_counting_down","fish_btn_bankrupt_package","fish_view_bankrupt_package","fish_view_bankrupt_package_node","fish_battery","fish_view_battery","fish_change_multiple","fish_view_change_multiple","fish_chat","fish_chat_txt_table","fish_chat_txt_table_cell","fish_user_info_chat","fish_view_chat","fish_daily_box","fish_daily_cell","fish_daily_task","fish_sign_box","fish_sign_date","fish_sign_tip","fish_sign_view","fish_view_daily_sign","fish_fire_view_other","fish_fire_view_self","fish_view_fire_view","fish_first_charge","fish_view_first_charge","fish_view_game_first_charge","fish_book","fish_view_fish_book_window","fish_view","fish_adding_friends","fish_friends","fish_friends_cell","fish_view_game_quit","fish_game_effect_fish","fish_game_effect_game","fish_view_game_effect","fish_my_position","fish_view_my_position","fish_game_ui","fish_view_game_ui","fish_bullet","fish_bullet_manager","fish_fish","fish_fish_manager","fish_game_view","fish_laser","fish_laser_manager","fish_piton","fish_piton_manager","fish_view_game_view","fish_invite_friends","fish_invite_friends_diamond_message","fish_invite_friends_reward_button","fish_laser_view","fish_view_laser_view","fish_view_led","fish_view_led_bubble","fish_level_up","fish_view_level_up","fish_view_loading","fish_lobby_bag_item_message","fish_lobby_bonusexchange_message_box","fish_lobby_change_head","fish_lobby_count_down","fish_lobby_exchange_shop","fish_lobby_exchange_shop_cell","fish_lobby_game_cell","fish_lobby_mail_message","fish_lobby_mail_message_cell","fish_lobby_next_level_reward","fish_lobby_personal_bag","fish_lobby_personal_bag_cell","fish_lobby_personal_info","fish_lobby_personal_info_message_box","fish_lobby_quick_game","fish_lobby_quick_start","fish_lobby_ranking","fish_lobby_ranking_cell","fish_lobby_room_cell","fish_lobby_rooms","fish_lobby_sys_notice","fish_lobby_top","fish_lobby_ui","fish_warning_message","fish_lottery_card","fish_lottery_panel","fish_lottery_window","fish_view_lottery_panel","fish_view_lottery_window","fish_message_box","fish_message_box2","fish_message_item_buy","fish_message_label","fish_message_tips","fish_view_message_box","fish_view_message_item_buy","fish_view_message_label","fish_view_message_tips","fish_chest_box","fish_chest_game","fish_mermaid_coin","fish_mermaid_game","fish_mini_card","fish_view_chest_game","fish_view_mermaid_game","fish_view_mini_card","fish_view_mini_playing","fish_view_mini_tip","fish_more_game","fish_update_circle","fish_nbomb_view","fish_view_nbomb_view","fish_net_connection","fish_net_heart_beat","fish_net_request_queue","fish_net_state","fish_net_ui","fish_view_net","fish_new_step_1","fish_newbie_arrow","fish_newbie_battery","fish_newbie_bullet","fish_newbie_guide_game","fish_newbie_step1","fish_newbie_step2","fish_newbie_step3","fish_newbie_step4","fish_newbie_step5","fish_newbie_task_game","fish_view_newbie_guide_game","fish_view_newbie_task_game","fish_noble_gift","fish_noble_gift_everyday","fish_view_noble_gift","fish_view_noble_gift_everyday","fish_player_property","fish_view_player_property","fish_prop_give_cell","fish_prop_give_window","fish_red_envelope","fish_view_red_envelope","fish_game_reward_panel","fish_lobby_reward_panel","fish_view_reward","fish_roommatch_banner","fish_roommatch_cell","fish_roommatch_end","fish_roommatch_guide","fish_roommatch_panel","fish_roommatch_rank","fish_roommatch_ready","fish_view_roommatch_banner","fish_view_roommatch_end","fish_view_roommatch_guide","fish_view_roommatch_panel","fish_view_roommatch_ready","fish_view_scene","fish_setting","fish_view_setting","fish_shop_diamond","fish_shop_gold","fish_shop_view","fish_view_shop","fish_view_special_fish_coming","fish_subsidy_game","fish_subsidy_lobby","fish_view_bankrupt_tip","fish_view_subsidy_game","fish_view_subsidy_lobby","fish_super_weapon","fish_view_super_weapon","fish_view_switch_account","fish_treasure_task","fish_view_treasure_task","fish_view_vip_window","fish_vip_window","fish_view_weapon_panel","fish_view_weapon_window","fish_weapon_panel","fish_weapon_window","fish_view_weapon_forge","fish_weapon_forge_window","load_prefabs","update","webviewPay","xmen_interface"]);